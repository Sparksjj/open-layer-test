var aL=Object.create;var qm=Object.defineProperty,lL=Object.defineProperties,cL=Object.getOwnPropertyDescriptor,uL=Object.getOwnPropertyDescriptors,dL=Object.getOwnPropertyNames,nh=Object.getOwnPropertySymbols,hL=Object.getPrototypeOf,Ym=Object.prototype.hasOwnProperty,pE=Object.prototype.propertyIsEnumerable;var fE=(t,e,n)=>e in t?qm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,N=(t,e)=>{for(var n in e||={})Ym.call(e,n)&&fE(t,n,e[n]);if(nh)for(var n of nh(e))pE.call(e,n)&&fE(t,n,e[n]);return t},ge=(t,e)=>lL(t,uL(e));var gE=(t,e)=>{var n={};for(var i in t)Ym.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&nh)for(var i of nh(t))e.indexOf(i)<0&&pE.call(t,i)&&(n[i]=t[i]);return n};var fL=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var pL=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of dL(e))!Ym.call(t,r)&&r!==n&&qm(t,r,{get:()=>e[r],enumerable:!(i=cL(e,r))||i.enumerable});return t};var mE=(t,e,n)=>(n=t!=null?aL(hL(t)):{},pL(e||!t||!t.__esModule?qm(n,"default",{value:t,enumerable:!0}):n,t));var Cs=(t,e,n)=>new Promise((i,r)=>{var o=l=>{try{a(n.next(l))}catch(c){r(c)}},s=l=>{try{a(n.throw(l))}catch(c){r(c)}},a=l=>l.done?i(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())});var Qb=fL((Zb,Kb)=>{"use strict";(function(t,e){typeof Zb=="object"&&typeof Kb<"u"?Kb.exports=e():typeof define=="function"&&define.amd?define(e):(t=t||self).RBush=e()})(Zb,function(){"use strict";function t(g,y,_,x,b){(function v(C,E,w,D,A){for(;D>w;){if(D-w>600){var M=D-w+1,T=E-w+1,F=Math.log(M),q=.5*Math.exp(2*F/3),O=.5*Math.sqrt(F*q*(M-q)/M)*(T-M/2<0?-1:1),R=Math.max(w,Math.floor(E-T*q/M+O)),k=Math.min(D,Math.floor(E+(M-T)*q/M+O));v(C,E,R,k,A)}var B=C[E],X=w,z=D;for(e(C,w,E),A(C[D],B)>0&&e(C,w,D);X<z;){for(e(C,X,z),X++,z--;A(C[X],B)<0;)X++;for(;A(C[z],B)>0;)z--}A(C[w],B)===0?e(C,w,z):e(C,++z,D),z<=E&&(w=z+1),E<=z&&(D=z-1)}})(g,y,_||0,x||g.length-1,b||n)}function e(g,y,_){var x=g[y];g[y]=g[_],g[_]=x}function n(g,y){return g<y?-1:g>y?1:0}var i=function(g){g===void 0&&(g=9),this._maxEntries=Math.max(4,g),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(g,y,_){if(!_)return y.indexOf(g);for(var x=0;x<y.length;x++)if(_(g,y[x]))return x;return-1}function o(g,y){s(g,0,g.children.length,y,g)}function s(g,y,_,x,b){b||(b=p(null)),b.minX=1/0,b.minY=1/0,b.maxX=-1/0,b.maxY=-1/0;for(var v=y;v<_;v++){var C=g.children[v];a(b,g.leaf?x(C):C)}return b}function a(g,y){return g.minX=Math.min(g.minX,y.minX),g.minY=Math.min(g.minY,y.minY),g.maxX=Math.max(g.maxX,y.maxX),g.maxY=Math.max(g.maxY,y.maxY),g}function l(g,y){return g.minX-y.minX}function c(g,y){return g.minY-y.minY}function u(g){return(g.maxX-g.minX)*(g.maxY-g.minY)}function d(g){return g.maxX-g.minX+(g.maxY-g.minY)}function h(g,y){return g.minX<=y.minX&&g.minY<=y.minY&&y.maxX<=g.maxX&&y.maxY<=g.maxY}function f(g,y){return y.minX<=g.maxX&&y.minY<=g.maxY&&y.maxX>=g.minX&&y.maxY>=g.minY}function p(g){return{children:g,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(g,y,_,x,b){for(var v=[y,_];v.length;)if(!((_=v.pop())-(y=v.pop())<=x)){var C=y+Math.ceil((_-y)/x/2)*x;t(g,C,y,_,b),v.push(y,C,C,_)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(g){var y=this.data,_=[];if(!f(g,y))return _;for(var x=this.toBBox,b=[];y;){for(var v=0;v<y.children.length;v++){var C=y.children[v],E=y.leaf?x(C):C;f(g,E)&&(y.leaf?_.push(C):h(g,E)?this._all(C,_):b.push(C))}y=b.pop()}return _},i.prototype.collides=function(g){var y=this.data;if(!f(g,y))return!1;for(var _=[];y;){for(var x=0;x<y.children.length;x++){var b=y.children[x],v=y.leaf?this.toBBox(b):b;if(f(g,v)){if(y.leaf||h(g,v))return!0;_.push(b)}}y=_.pop()}return!1},i.prototype.load=function(g){if(!g||!g.length)return this;if(g.length<this._minEntries){for(var y=0;y<g.length;y++)this.insert(g[y]);return this}var _=this._build(g.slice(),0,g.length-1,0);if(this.data.children.length)if(this.data.height===_.height)this._splitRoot(this.data,_);else{if(this.data.height<_.height){var x=this.data;this.data=_,_=x}this._insert(_,this.data.height-_.height-1,!0)}else this.data=_;return this},i.prototype.insert=function(g){return g&&this._insert(g,this.data.height-1),this},i.prototype.clear=function(){return this.data=p([]),this},i.prototype.remove=function(g,y){if(!g)return this;for(var _,x,b,v=this.data,C=this.toBBox(g),E=[],w=[];v||E.length;){if(v||(v=E.pop(),x=E[E.length-1],_=w.pop(),b=!0),v.leaf){var D=r(g,v.children,y);if(D!==-1)return v.children.splice(D,1),E.push(v),this._condense(E),this}b||v.leaf||!h(v,C)?x?(_++,v=x.children[_],b=!1):v=null:(E.push(v),w.push(_),_=0,x=v,v=v.children[0])}return this},i.prototype.toBBox=function(g){return g},i.prototype.compareMinX=function(g,y){return g.minX-y.minX},i.prototype.compareMinY=function(g,y){return g.minY-y.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(g){return this.data=g,this},i.prototype._all=function(g,y){for(var _=[];g;)g.leaf?y.push.apply(y,g.children):_.push.apply(_,g.children),g=_.pop();return y},i.prototype._build=function(g,y,_,x){var b,v=_-y+1,C=this._maxEntries;if(v<=C)return o(b=p(g.slice(y,_+1)),this.toBBox),b;x||(x=Math.ceil(Math.log(v)/Math.log(C)),C=Math.ceil(v/Math.pow(C,x-1))),(b=p([])).leaf=!1,b.height=x;var E=Math.ceil(v/C),w=E*Math.ceil(Math.sqrt(C));m(g,y,_,w,this.compareMinX);for(var D=y;D<=_;D+=w){var A=Math.min(D+w-1,_);m(g,D,A,E,this.compareMinY);for(var M=D;M<=A;M+=E){var T=Math.min(M+E-1,A);b.children.push(this._build(g,M,T,x-1))}}return o(b,this.toBBox),b},i.prototype._chooseSubtree=function(g,y,_,x){for(;x.push(y),!y.leaf&&x.length-1!==_;){for(var b=1/0,v=1/0,C=void 0,E=0;E<y.children.length;E++){var w=y.children[E],D=u(w),A=(M=g,T=w,(Math.max(T.maxX,M.maxX)-Math.min(T.minX,M.minX))*(Math.max(T.maxY,M.maxY)-Math.min(T.minY,M.minY))-D);A<v?(v=A,b=D<b?D:b,C=w):A===v&&D<b&&(b=D,C=w)}y=C||y.children[0]}var M,T;return y},i.prototype._insert=function(g,y,_){var x=_?g:this.toBBox(g),b=[],v=this._chooseSubtree(x,this.data,y,b);for(v.children.push(g),a(v,x);y>=0&&b[y].children.length>this._maxEntries;)this._split(b,y),y--;this._adjustParentBBoxes(x,b,y)},i.prototype._split=function(g,y){var _=g[y],x=_.children.length,b=this._minEntries;this._chooseSplitAxis(_,b,x);var v=this._chooseSplitIndex(_,b,x),C=p(_.children.splice(v,_.children.length-v));C.height=_.height,C.leaf=_.leaf,o(_,this.toBBox),o(C,this.toBBox),y?g[y-1].children.push(C):this._splitRoot(_,C)},i.prototype._splitRoot=function(g,y){this.data=p([g,y]),this.data.height=g.height+1,this.data.leaf=!1,o(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(g,y,_){for(var x,b,v,C,E,w,D,A=1/0,M=1/0,T=y;T<=_-y;T++){var F=s(g,0,T,this.toBBox),q=s(g,T,_,this.toBBox),O=(b=F,v=q,C=void 0,E=void 0,w=void 0,D=void 0,C=Math.max(b.minX,v.minX),E=Math.max(b.minY,v.minY),w=Math.min(b.maxX,v.maxX),D=Math.min(b.maxY,v.maxY),Math.max(0,w-C)*Math.max(0,D-E)),R=u(F)+u(q);O<A?(A=O,x=T,M=R<M?R:M):O===A&&R<M&&(M=R,x=T)}return x||_-y},i.prototype._chooseSplitAxis=function(g,y,_){var x=g.leaf?this.compareMinX:l,b=g.leaf?this.compareMinY:c;this._allDistMargin(g,y,_,x)<this._allDistMargin(g,y,_,b)&&g.children.sort(x)},i.prototype._allDistMargin=function(g,y,_,x){g.children.sort(x);for(var b=this.toBBox,v=s(g,0,y,b),C=s(g,_-y,_,b),E=d(v)+d(C),w=y;w<_-y;w++){var D=g.children[w];a(v,g.leaf?b(D):D),E+=d(v)}for(var A=_-y-1;A>=y;A--){var M=g.children[A];a(C,g.leaf?b(M):M),E+=d(C)}return E},i.prototype._adjustParentBBoxes=function(g,y,_){for(var x=_;x>=0;x--)a(y[x],g)},i.prototype._condense=function(g){for(var y=g.length-1,_=void 0;y>=0;y--)g[y].children.length===0?y>0?(_=g[y-1].children).splice(_.indexOf(g[y]),1):this.clear():o(g[y],this.toBBox)},i})});function gL(t,e){return Object.is(t,e)}var mt=null,Mc=!1,ih=1,ao=Symbol("SIGNAL");function ye(t){let e=mt;return mt=t,e}function yE(){return mt}function mL(){return Mc}var Ac={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Zm(t){if(Mc)throw new Error("");if(mt===null)return;mt.consumerOnSignalRead(t);let e=mt.nextProducerIndex++;if(lh(mt),e<mt.producerNode.length&&mt.producerNode[e]!==t&&Tc(mt)){let n=mt.producerNode[e];ah(n,mt.producerIndexOfThis[e])}mt.producerNode[e]!==t&&(mt.producerNode[e]=t,mt.producerIndexOfThis[e]=Tc(mt)?bE(t,mt,e):0),mt.producerLastReadVersion[e]=t.version}function yL(){ih++}function _L(t){if(!(Tc(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ih)){if(!t.producerMustRecompute(t)&&!oh(t)){t.dirty=!1,t.lastCleanEpoch=ih;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ih}}function _E(t){if(t.liveConsumerNode===void 0)return;let e=Mc;Mc=!0;try{for(let n of t.liveConsumerNode)n.dirty||xE(n)}finally{Mc=e}}function vE(){return mt?.consumerAllowSignalWrites!==!1}function xE(t){t.dirty=!0,_E(t),t.consumerMarkedDirty?.(t)}function rh(t){return t&&(t.nextProducerIndex=0),ye(t)}function Km(t,e){if(ye(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(Tc(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)ah(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function oh(t){lh(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],i=t.producerLastReadVersion[e];if(i!==n.version||(_L(n),i!==n.version))return!0}return!1}function sh(t){if(lh(t),Tc(t))for(let e=0;e<t.producerNode.length;e++)ah(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function bE(t,e,n){if(CE(t),t.liveConsumerNode.length===0&&wE(t))for(let i=0;i<t.producerNode.length;i++)t.producerIndexOfThis[i]=bE(t.producerNode[i],t,i);return t.liveConsumerIndexOfThis.push(n),t.liveConsumerNode.push(e)-1}function ah(t,e){if(CE(t),t.liveConsumerNode.length===1&&wE(t))for(let i=0;i<t.producerNode.length;i++)ah(t.producerNode[i],t.producerIndexOfThis[i]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let i=t.liveConsumerIndexOfThis[e],r=t.liveConsumerNode[e];lh(r),r.producerIndexOfThis[i]=e}}function Tc(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function lh(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function CE(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function wE(t){return t.producerNode!==void 0}function vL(){throw new Error}var EE=vL;function DE(){EE()}function IE(t){EE=t}var xL=null;function SE(t){let e=Object.create(Qm);e.value=t;let n=()=>(Zm(e),e.value);return n[ao]=e,n}function ch(t,e){vE()||DE(),t.equal(t.value,e)||(t.value=e,bL(t))}function ME(t,e){vE()||DE(),ch(t,e(t.value))}var Qm=ge(N({},Ac),{equal:gL,value:void 0});function bL(t){t.version++,yL(),_E(t),xL?.()}function TE(t,e,n){let i=Object.create(CL);n&&(i.consumerAllowSignalWrites=!0),i.fn=t,i.schedule=e;let r=l=>{i.cleanupFn=l};function o(l){return l.fn===null&&l.schedule===null}function s(l){o(l)||(sh(l),l.cleanupFn(),l.fn=null,l.schedule=null,l.cleanupFn=Xm)}let a=()=>{if(i.fn===null)return;if(mL())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(i.dirty=!1,i.hasRun&&!oh(i))return;i.hasRun=!0;let l=rh(i);try{i.cleanupFn(),i.cleanupFn=Xm,i.fn(r)}finally{Km(i,l)}};return i.ref={notify:()=>xE(i),run:a,cleanup:()=>i.cleanupFn(),destroy:()=>s(i),[ao]:i},i.ref}var Xm=()=>{},CL=ge(N({},Ac),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:t=>{t.schedule!==null&&t.schedule(t.ref)},hasRun:!1,cleanupFn:Xm});function ne(t){return typeof t=="function"}function Ca(t){let n=t(i=>{Error.call(i),i.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var uh=Ca(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((i,r)=>`${r+1}) ${i.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function ws(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var et=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:i}=this;if(ne(i))try{i()}catch(o){e=o instanceof uh?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{AE(o)}catch(s){e=e??[],s instanceof uh?e=[...e,...s.errors]:e.push(s)}}if(e)throw new uh(e)}}add(e){var n;if(e&&e!==this)if(this.closed)AE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&ws(n,e)}remove(e){let{_finalizers:n}=this;n&&ws(n,e),e instanceof t&&e._removeParent(this)}};et.EMPTY=(()=>{let t=new et;return t.closed=!0,t})();var Jm=et.EMPTY;function dh(t){return t instanceof et||t&&"closed"in t&&ne(t.remove)&&ne(t.add)&&ne(t.unsubscribe)}function AE(t){ne(t)?t():t.unsubscribe()}var Jn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wa={setTimeout(t,e,...n){let{delegate:i}=wa;return i?.setTimeout?i.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=wa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function hh(t){wa.setTimeout(()=>{let{onUnhandledError:e}=Jn;if(e)e(t);else throw t})}function Rc(){}var RE=ey("C",void 0,void 0);function OE(t){return ey("E",void 0,t)}function PE(t){return ey("N",t,void 0)}function ey(t,e,n){return{kind:t,value:e,error:n}}var Es=null;function Ea(t){if(Jn.useDeprecatedSynchronousErrorHandling){let e=!Es;if(e&&(Es={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:i}=Es;if(Es=null,n)throw i}}else t()}function NE(t){Jn.useDeprecatedSynchronousErrorHandling&&Es&&(Es.errorThrown=!0,Es.error=t)}var Ds=class extends et{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,dh(e)&&e.add(this)):this.destination=DL}static create(e,n,i){return new Da(e,n,i)}next(e){this.isStopped?ny(PE(e),this):this._next(e)}error(e){this.isStopped?ny(OE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ny(RE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},wL=Function.prototype.bind;function ty(t,e){return wL.call(t,e)}var iy=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(i){fh(i)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(i){fh(i)}else fh(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){fh(n)}}},Da=class extends Ds{constructor(e,n,i){super();let r;if(ne(e)||!e)r={next:e??void 0,error:n??void 0,complete:i??void 0};else{let o;this&&Jn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&ty(e.next,o),error:e.error&&ty(e.error,o),complete:e.complete&&ty(e.complete,o)}):r=e}this.destination=new iy(r)}};function fh(t){Jn.useDeprecatedSynchronousErrorHandling?NE(t):hh(t)}function EL(t){throw t}function ny(t,e){let{onStoppedNotification:n}=Jn;n&&wa.setTimeout(()=>n(t,e))}var DL={closed:!0,next:Rc,error:EL,complete:Rc};var Ia=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Yt(t){return t}function ry(...t){return oy(t)}function oy(t){return t.length===0?Yt:t.length===1?t[0]:function(n){return t.reduce((i,r)=>r(i),n)}}var ve=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let i=new t;return i.source=this,i.operator=n,i}subscribe(n,i,r){let o=SL(n)?n:new Da(n,i,r);return Ea(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(i){n.error(i)}}forEach(n,i){return i=kE(i),new i((r,o)=>{let s=new Da({next:a=>{try{n(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(n){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(n)}[Ia](){return this}pipe(...n){return oy(n)(this)}toPromise(n){return n=kE(n),new n((i,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>i(o))})}}return t.create=e=>new t(e),t})();function kE(t){var e;return(e=t??Jn.Promise)!==null&&e!==void 0?e:Promise}function IL(t){return t&&ne(t.next)&&ne(t.error)&&ne(t.complete)}function SL(t){return t&&t instanceof Ds||IL(t)&&dh(t)}function sy(t){return ne(t?.lift)}function me(t){return e=>{if(sy(e))return e.lift(function(n){try{return t(n,this)}catch(i){this.error(i)}});throw new TypeError("Unable to lift unknown Observable type")}}function ae(t,e,n,i,r){return new ay(t,e,n,i,r)}var ay=class extends Ds{constructor(e,n,i,r,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(l){e.error(l)}}:super._next,this._error=r?function(a){try{r(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=i?function(){try{i()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Sa(){return me((t,e)=>{let n=null;t._refCount++;let i=ae(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let r=t._connection,o=n;n=null,r&&(!o||r===o)&&r.unsubscribe(),e.unsubscribe()});t.subscribe(i),i.closed||(n=t.connect())})}var Ma=class extends ve{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,sy(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new et;let n=this.getSubject();e.add(this.source.subscribe(ae(n,void 0,()=>{this._teardown(),n.complete()},i=>{this._teardown(),n.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=et.EMPTY)}return e}refCount(){return Sa()(this)}};var FE=Ca(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yt=(()=>{class t extends ve{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let i=new ph(this,this);return i.operator=n,i}_throwIfClosed(){if(this.closed)throw new FE}next(n){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let i of this.currentObservers)i.next(n)}})}error(n){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:i}=this;for(;i.length;)i.shift().error(n)}})}complete(){Ea(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:i,isStopped:r,observers:o}=this;return i||r?Jm:(this.currentObservers=null,o.push(n),new et(()=>{this.currentObservers=null,ws(o,n)}))}_checkFinalizedStatuses(n){let{hasError:i,thrownError:r,isStopped:o}=this;i?n.error(r):o&&n.complete()}asObservable(){let n=new ve;return n.source=this,n}}return t.create=(e,n)=>new ph(e,n),t})(),ph=class extends yt{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)}error(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:Jm}};var _t=class extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:i}=this;if(e)throw n;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}};var ly={now(){return(ly.delegate||Date).now()},delegate:void 0};var gh=class extends et{constructor(e,n){super()}schedule(e,n=0){return this}};var Oc={setInterval(t,e,...n){let{delegate:i}=Oc;return i?.setInterval?i.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Oc;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var mh=class extends gh{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var i;if(this.closed)return this;this.state=e;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,n)),this.pending=!0,this.delay=n,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(o,this.id,n),this}requestAsyncId(e,n,i=0){return Oc.setInterval(e.flush.bind(e,this),i)}recycleAsyncId(e,n,i=0){if(i!=null&&this.delay===i&&this.pending===!1)return n;n!=null&&Oc.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let i=this._execute(e,n);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let i=!1,r;try{this.work(e)}catch(o){i=!0,r=o||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:i}=n;this.work=this.state=this.scheduler=null,this.pending=!1,ws(i,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var Ta=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,i){return new this.schedulerActionCtor(this,e).schedule(i,n)}};Ta.now=ly.now;var yh=class extends Ta{constructor(e,n=Ta.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let i;this._active=!0;do if(i=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,i){for(;e=n.shift();)e.unsubscribe();throw i}}};var cy=new yh(mh),LE=cy;var _n=new ve(t=>t.complete());function _h(t){return t&&ne(t.schedule)}function VE(t){return t[t.length-1]}function vh(t){return ne(VE(t))?t.pop():void 0}function lo(t){return _h(VE(t))?t.pop():void 0}function BE(t,e,n,i){function r(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(i.next(u))}catch(d){s(d)}}function l(u){try{c(i.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):r(u.value).then(a,l)}c((i=i.apply(t,e||[])).next())})}function jE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Is(t){return this instanceof Is?(this.v=t,this):new Is(t)}function UE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,o=[];return r={},a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){i[f]&&(r[f]=function(m){return new Promise(function(g,y){o.push([f,m,g,y])>1||l(f,m)})},p&&(r[f]=p(r[f])))}function l(f,p){try{c(i[f](p))}catch(m){h(o[0][3],m)}}function c(f){f.value instanceof Is?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function zE(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof jE=="function"?jE(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),r(a,l,s.done,s.value)})}}function r(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var xh=t=>t&&typeof t.length=="number"&&typeof t!="function";function bh(t){return ne(t?.then)}function Ch(t){return ne(t[Ia])}function wh(t){return Symbol.asyncIterator&&ne(t?.[Symbol.asyncIterator])}function Eh(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function ML(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Dh=ML();function Ih(t){return ne(t?.[Dh])}function Sh(t){return UE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:i,done:r}=yield Is(n.read());if(r)return yield Is(void 0);yield yield Is(i)}}finally{n.releaseLock()}})}function Mh(t){return ne(t?.getReader)}function tt(t){if(t instanceof ve)return t;if(t!=null){if(Ch(t))return TL(t);if(xh(t))return AL(t);if(bh(t))return RL(t);if(wh(t))return HE(t);if(Ih(t))return OL(t);if(Mh(t))return PL(t)}throw Eh(t)}function TL(t){return new ve(e=>{let n=t[Ia]();if(ne(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function AL(t){return new ve(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function RL(t){return new ve(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,hh)})}function OL(t){return new ve(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function HE(t){return new ve(e=>{NL(t,e).catch(n=>e.error(n))})}function PL(t){return HE(Sh(t))}function NL(t,e){var n,i,r,o;return BE(this,void 0,void 0,function*(){try{for(n=zE(t);i=yield n.next(),!i.done;){let s=i.value;if(e.next(s),e.closed)return}}catch(s){r={error:s}}finally{try{i&&!i.done&&(o=n.return)&&(yield o.call(n))}finally{if(r)throw r.error}}e.complete()})}function Jt(t,e,n,i=0,r=!1){let o=e.schedule(function(){n(),r?t.add(this.schedule(null,i)):this.unsubscribe()},i);if(t.add(o),!r)return o}function Th(t,e=0){return me((n,i)=>{n.subscribe(ae(i,r=>Jt(i,t,()=>i.next(r),e),()=>Jt(i,t,()=>i.complete(),e),r=>Jt(i,t,()=>i.error(r),e)))})}function Ah(t,e=0){return me((n,i)=>{i.add(t.schedule(()=>n.subscribe(i),e))})}function $E(t,e){return tt(t).pipe(Ah(e),Th(e))}function WE(t,e){return tt(t).pipe(Ah(e),Th(e))}function GE(t,e){return new ve(n=>{let i=0;return e.schedule(function(){i===t.length?n.complete():(n.next(t[i++]),n.closed||this.schedule())})})}function qE(t,e){return new ve(n=>{let i;return Jt(n,e,()=>{i=t[Dh](),Jt(n,e,()=>{let r,o;try{({value:r,done:o}=i.next())}catch(s){n.error(s);return}o?n.complete():n.next(r)},0,!0)}),()=>ne(i?.return)&&i.return()})}function Rh(t,e){if(!t)throw new Error("Iterable cannot be null");return new ve(n=>{Jt(n,e,()=>{let i=t[Symbol.asyncIterator]();Jt(n,e,()=>{i.next().then(r=>{r.done?n.complete():n.next(r.value)})},0,!0)})})}function YE(t,e){return Rh(Sh(t),e)}function XE(t,e){if(t!=null){if(Ch(t))return $E(t,e);if(xh(t))return GE(t,e);if(bh(t))return WE(t,e);if(wh(t))return Rh(t,e);if(Ih(t))return qE(t,e);if(Mh(t))return YE(t,e)}throw Eh(t)}function He(t,e){return e?XE(t,e):tt(t)}function Y(...t){let e=lo(t);return He(t,e)}function Aa(t,e){let n=ne(t)?t:()=>t,i=r=>r.error(n());return new ve(e?r=>e.schedule(i,0,r):i)}function uy(t){return!!t&&(t instanceof ve||ne(t.lift)&&ne(t.subscribe))}var sr=Ca(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function ZE(t){return t instanceof Date&&!isNaN(t)}function ee(t,e){return me((n,i)=>{let r=0;n.subscribe(ae(i,o=>{i.next(t.call(e,o,r++))}))})}var{isArray:kL}=Array;function FL(t,e){return kL(e)?t(...e):t(e)}function Oh(t){return ee(e=>FL(t,e))}var{isArray:LL}=Array,{getPrototypeOf:VL,prototype:jL,keys:BL}=Object;function Ph(t){if(t.length===1){let e=t[0];if(LL(e))return{args:e,keys:null};if(UL(e)){let n=BL(e);return{args:n.map(i=>e[i]),keys:n}}}return{args:t,keys:null}}function UL(t){return t&&typeof t=="object"&&VL(t)===jL}function Nh(t,e){return t.reduce((n,i,r)=>(n[i]=e[r],n),{})}function Pc(...t){let e=lo(t),n=vh(t),{args:i,keys:r}=Ph(t);if(i.length===0)return He([],e);let o=new ve(zL(i,e,r?s=>Nh(r,s):Yt));return n?o.pipe(Oh(n)):o}function zL(t,e,n=Yt){return i=>{KE(e,()=>{let{length:r}=t,o=new Array(r),s=r,a=r;for(let l=0;l<r;l++)KE(e,()=>{let c=He(t[l],e),u=!1;c.subscribe(ae(i,d=>{o[l]=d,u||(u=!0,a--),a||i.next(n(o.slice()))},()=>{--s||i.complete()}))},i)},i)}}function KE(t,e,n){t?Jt(n,t,e):e()}function QE(t,e,n,i,r,o,s,a){let l=[],c=0,u=0,d=!1,h=()=>{d&&!l.length&&!c&&e.complete()},f=m=>c<i?p(m):l.push(m),p=m=>{o&&e.next(m),c++;let g=!1;tt(n(m,u++)).subscribe(ae(e,y=>{r?.(y),o?f(y):e.next(y)},()=>{g=!0},void 0,()=>{if(g)try{for(c--;l.length&&c<i;){let y=l.shift();s?Jt(e,s,()=>p(y)):p(y)}h()}catch(y){e.error(y)}}))};return t.subscribe(ae(e,f,()=>{d=!0,h()})),()=>{a?.()}}function ct(t,e,n=1/0){return ne(e)?ct((i,r)=>ee((o,s)=>e(i,o,r,s))(tt(t(i,r))),n):(typeof e=="number"&&(n=e),me((i,r)=>QE(i,r,t,n)))}function Ra(t=1/0){return ct(Yt,t)}function JE(){return Ra(1)}function Oa(...t){return JE()(He(t,lo(t)))}function kh(t){return new ve(e=>{tt(t()).subscribe(e)})}function dy(...t){let e=vh(t),{args:n,keys:i}=Ph(t),r=new ve(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),l=s,c=s;for(let u=0;u<s;u++){let d=!1;tt(n[u]).subscribe(ae(o,h=>{d||(d=!0,c--),a[u]=h},()=>l--,void 0,()=>{(!l||!d)&&(c||o.next(i?Nh(i,a):a),o.complete())}))}});return e?r.pipe(Oh(e)):r}function Nc(t=0,e,n=LE){let i=-1;return e!=null&&(_h(e)?n=e:i=e),new ve(r=>{let o=ZE(t)?+t-n.now():t;o<0&&(o=0);let s=0;return n.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},o)})}function Mt(t,e){return me((n,i)=>{let r=0;n.subscribe(ae(i,o=>t.call(e,o,r++)&&i.next(o)))})}function co(t){return me((e,n)=>{let i=null,r=!1,o;i=e.subscribe(ae(n,void 0,void 0,s=>{o=tt(t(s,co(t)(e))),i?(i.unsubscribe(),i=null,o.subscribe(n)):r=!0})),r&&(i.unsubscribe(),i=null,o.subscribe(n))})}function eD(t,e,n,i,r){return(o,s)=>{let a=n,l=e,c=0;o.subscribe(ae(s,u=>{let d=c++;l=a?t(l,u,d):(a=!0,u),i&&s.next(l)},r&&(()=>{a&&s.next(l),s.complete()})))}}function ar(t,e){return ne(e)?ct(t,e,1):ct(t,1)}function uo(t){return me((e,n)=>{let i=!1;e.subscribe(ae(n,r=>{i=!0,n.next(r)},()=>{i||n.next(t),n.complete()}))})}function lr(t){return t<=0?()=>_n:me((e,n)=>{let i=0;e.subscribe(ae(n,r=>{++i<=t&&(n.next(r),t<=i&&n.complete())}))})}function hy(t){return ee(()=>t)}function Pa(t,e=Yt){return t=t??HL,me((n,i)=>{let r,o=!0;n.subscribe(ae(i,s=>{let a=e(s);(o||!t(r,a))&&(o=!1,r=a,i.next(s))}))})}function HL(t,e){return t===e}function Fh(t=$L){return me((e,n)=>{let i=!1;e.subscribe(ae(n,r=>{i=!0,n.next(r)},()=>i?n.complete():n.error(t())))})}function $L(){return new sr}function Ss(t){return me((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function ei(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Mt((r,o)=>t(r,o,i)):Yt,lr(1),n?uo(e):Fh(()=>new sr))}function Na(t){return t<=0?()=>_n:me((e,n)=>{let i=[];e.subscribe(ae(n,r=>{i.push(r),t<i.length&&i.shift()},()=>{for(let r of i)n.next(r);n.complete()},void 0,()=>{i=null}))})}function fy(t,e){let n=arguments.length>=2;return i=>i.pipe(t?Mt((r,o)=>t(r,o,i)):Yt,Na(1),n?uo(e):Fh(()=>new sr))}function py(t,e){return me(eD(t,e,arguments.length>=2,!0))}function gy(...t){let e=lo(t);return me((n,i)=>{(e?Oa(t,n,e):Oa(t,n)).subscribe(i)})}function Tt(t,e){return me((n,i)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&i.complete();n.subscribe(ae(i,l=>{r?.unsubscribe();let c=0,u=o++;tt(t(l,u)).subscribe(r=ae(i,d=>i.next(e?e(l,d,u,c++):d),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function my(t){return me((e,n)=>{tt(t).subscribe(ae(n,()=>n.complete(),Rc)),!n.closed&&e.subscribe(n)})}function qe(t,e,n){let i=ne(t)||e||n?{next:t,error:e,complete:n}:t;return i?me((r,o)=>{var s;(s=i.subscribe)===null||s===void 0||s.call(i);let a=!0;r.subscribe(ae(o,l=>{var c;(c=i.next)===null||c===void 0||c.call(i,l),o.next(l)},()=>{var l;a=!1,(l=i.complete)===null||l===void 0||l.call(i),o.complete()},l=>{var c;a=!1,(c=i.error)===null||c===void 0||c.call(i,l),o.error(l)},()=>{var l,c;a&&((l=i.unsubscribe)===null||l===void 0||l.call(i)),(c=i.finalize)===null||c===void 0||c.call(i)}))}):Yt}function tD(t,e){return me((n,i)=>{let{leading:r=!0,trailing:o=!1}=e??{},s=!1,a=null,l=null,c=!1,u=()=>{l?.unsubscribe(),l=null,o&&(f(),c&&i.complete())},d=()=>{l=null,c&&i.complete()},h=p=>l=tt(t(p)).subscribe(ae(i,u,d)),f=()=>{if(s){s=!1;let p=a;a=null,i.next(p),!c&&h(p)}};n.subscribe(ae(i,p=>{s=!0,a=p,!(l&&!l.closed)&&(r?f():h(p))},()=>{c=!0,!(o&&s&&l&&!l.closed)&&i.complete()}))})}function yy(t,e=cy,n){let i=Nc(t,e);return tD(()=>i,n)}var WL="https://g.co/ng/security#xss",$=class extends Error{constructor(e,n){super(vf(e,n)),this.code=e}};function vf(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}var zD=Symbol("InputSignalNode#UNSET"),GL=ge(N({},Qm),{transformFn:void 0,applyValueToInputSignal(t,e){ch(t,e)}});function HD(t,e){let n=Object.create(GL);n.value=t,n.transformFn=e?.transform;function i(){if(Zm(n),n.value===zD)throw new $(-950,!1);return n.value}return i[ao]=n,i}function Zc(t){return{toString:t}.toString()}var Lh="__parameters__";function qL(t){return function(...n){if(t){let i=t(...n);for(let r in i)this[r]=i[r]}}}function $D(t,e,n){return Zc(()=>{let i=qL(e);function r(...o){if(this instanceof r)return i.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(l,c,u){let d=l.hasOwnProperty(Lh)?l[Lh]:Object.defineProperty(l,Lh,{value:[]})[Lh];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),l}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}var As=globalThis;function Ne(t){for(let e in t)if(t[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function YL(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function en(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(en).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function nD(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var XL=Ne({__forward_ref__:Ne});function Us(t){return t.__forward_ref__=Us,t.toString=function(){return en(this())},t}function Xt(t){return WD(t)?t():t}function WD(t){return typeof t=="function"&&t.hasOwnProperty(XL)&&t.__forward_ref__===Us}function j(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function fr(t){return{providers:t.providers||[],imports:t.imports||[]}}function xf(t){return iD(t,qD)||iD(t,YD)}function GD(t){return xf(t)!==null}function iD(t,e){return t.hasOwnProperty(e)?t[e]:null}function ZL(t){let e=t&&(t[qD]||t[YD]);return e||null}function rD(t){return t&&(t.hasOwnProperty(oD)||t.hasOwnProperty(KL))?t[oD]:null}var qD=Ne({\u0275prov:Ne}),oD=Ne({\u0275inj:Ne}),YD=Ne({ngInjectableDef:Ne}),KL=Ne({ngInjectorDef:Ne}),L=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=j({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function XD(t){return t&&!!t.\u0275providers}var QL=Ne({\u0275cmp:Ne}),JL=Ne({\u0275dir:Ne}),e2=Ne({\u0275pipe:Ne}),t2=Ne({\u0275mod:Ne}),Xh=Ne({\u0275fac:Ne}),Fc=Ne({__NG_ELEMENT_ID__:Ne}),sD=Ne({__NG_ENV_ID__:Ne});function Lc(t){return typeof t=="string"?t:t==null?"":String(t)}function n2(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():Lc(t)}function i2(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new $(-200,t)}function L_(t,e){throw new $(-201,!1)}var fe=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(fe||{}),ky;function ZD(){return ky}function Fn(t){let e=ky;return ky=t,e}function KD(t,e,n){let i=xf(t);if(i&&i.providedIn=="root")return i.value===void 0?i.value=i.factory():i.value;if(n&fe.Optional)return null;if(e!==void 0)return e;L_(t,"Injector")}var r2={},Vc=r2,Fy="__NG_DI_FLAG__",Zh="ngTempTokenPath",o2="ngTokenPath",s2=/\n/gm,a2="\u0275",aD="__source",Va;function l2(){return Va}function ho(t){let e=Va;return Va=t,e}function c2(t,e=fe.Default){if(Va===void 0)throw new $(-203,!1);return Va===null?KD(t,void 0,e):Va.get(t,e&fe.Optional?null:void 0,e)}function G(t,e=fe.Default){return(ZD()||c2)(Xt(t),e)}function I(t,e=fe.Default){return G(t,bf(e))}function bf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ly(t){let e=[];for(let n=0;n<t.length;n++){let i=Xt(t[n]);if(Array.isArray(i)){if(i.length===0)throw new $(900,!1);let r,o=fe.Default;for(let s=0;s<i.length;s++){let a=i[s],l=u2(a);typeof l=="number"?l===-1?r=a.token:o|=l:r=a}e.push(G(r,o))}else e.push(G(i))}return e}function QD(t,e){return t[Fy]=e,t.prototype[Fy]=e,t}function u2(t){return t[Fy]}function d2(t,e,n,i){let r=t[Zh];throw e[aD]&&r.unshift(e[aD]),t.message=h2(`
`+t.message,r,n,i),t[o2]=r,t[Zh]=null,t}function h2(t,e,n,i=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==a2?t.slice(2):t;let r=en(e);if(Array.isArray(e))r=e.map(en).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):en(a)))}r=`{${o.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(s2,`
  `)}`}var V_=QD($D("Optional"),8);var JD=QD($D("SkipSelf"),4);function Ba(t,e){let n=t.hasOwnProperty(Xh);return n?t[Xh]:null}function f2(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],o=e[i];if(n&&(r=n(r),o=n(o)),o!==r)return!1}return!0}function p2(t){return t.flat(Number.POSITIVE_INFINITY)}function j_(t,e){t.forEach(n=>Array.isArray(n)?j_(n,e):e(n))}function eI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Kh(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function g2(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(r===1)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;){let o=r-2;t[r]=t[o],r--}t[e]=n,t[e+1]=i}}function m2(t,e,n){let i=Kc(t,e);return i>=0?t[i|1]=n:(i=~i,g2(t,i,e,n)),i}function _y(t,e){let n=Kc(t,e);if(n>=0)return t[n|1]}function Kc(t,e){return y2(t,e,1)}function y2(t,e,n){let i=0,r=t.length>>n;for(;r!==i;){let o=i+(r-i>>1),s=t[o<<n];if(e===s)return o<<n;s>e?r=o:i=o+1}return~(r<<n)}var Ua={},vn=[],Os=new L(""),tI=new L("",-1),nI=new L(""),Qh=class{get(e,n=Vc){if(n===Vc){let i=new Error(`NullInjectorError: No provider for ${en(e)}!`);throw i.name="NullInjectorError",i}return n}},iI=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(iI||{}),Ti=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ti||{}),za=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(za||{});function _2(t,e,n){let i=t.length;for(;;){let r=t.indexOf(e,n);if(r===-1)return r;if(r===0||t.charCodeAt(r-1)<=32){let o=e.length;if(r+o===i||t.charCodeAt(r+o)<=32)return r}n=r+1}}function Vy(t,e,n){let i=0;for(;i<n.length;){let r=n[i];if(typeof r=="number"){if(r!==0)break;i++;let o=n[i++],s=n[i++],a=n[i++];t.setAttribute(e,s,a,o)}else{let o=r,s=n[++i];x2(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),i++}}return i}function v2(t){return t===3||t===4||t===6}function x2(t){return t.charCodeAt(0)===64}function jc(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){let r=e[i];typeof r=="number"?n=r:n===0||(n===-1||n===2?lD(t,n,r,null,e[++i]):lD(t,n,r,null,null))}}return t}function lD(t,e,n,i,r){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let a=t[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<t.length;){let a=t[o];if(typeof a=="number")break;if(a===n){if(i===null){r!==null&&(t[o+1]=r);return}else if(i===t[o+1]){t[o+2]=r;return}}o++,i!==null&&o++,r!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i),r!==null&&t.splice(o++,0,r)}var rI="ng-template";function b2(t,e,n,i){let r=0;if(i){for(;r<e.length&&typeof e[r]=="string";r+=2)if(e[r]==="class"&&_2(e[r+1].toLowerCase(),n,0)!==-1)return!0}else if(B_(t))return!1;if(r=e.indexOf(1,r),r>-1){let o;for(;++r<e.length&&typeof(o=e[r])=="string";)if(o.toLowerCase()===n)return!0}return!1}function B_(t){return t.type===4&&t.value!==rI}function C2(t,e,n){let i=t.type===4&&!n?rI:t.value;return e===i}function w2(t,e,n){let i=4,r=t.attrs,o=r!==null?I2(r):0,s=!1;for(let a=0;a<e.length;a++){let l=e[a];if(typeof l=="number"){if(!s&&!ti(i)&&!ti(l))return!1;if(s&&ti(l))continue;s=!1,i=l|i&1;continue}if(!s)if(i&4){if(i=2|i&1,l!==""&&!C2(t,l,n)||l===""&&e.length===1){if(ti(i))return!1;s=!0}}else if(i&8){if(r===null||!b2(t,r,l,n)){if(ti(i))return!1;s=!0}}else{let c=e[++a],u=E2(l,r,B_(t),n);if(u===-1){if(ti(i))return!1;s=!0;continue}if(c!==""){let d;if(u>o?d="":d=r[u+1].toLowerCase(),i&2&&c!==d){if(ti(i))return!1;s=!0}}}}return ti(i)||s}function ti(t){return(t&1)===0}function E2(t,e,n,i){if(e===null)return-1;let r=0;if(i||!n){let o=!1;for(;r<e.length;){let s=e[r];if(s===t)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++r];for(;typeof a=="string";)a=e[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return S2(e,t)}function D2(t,e,n=!1){for(let i=0;i<e.length;i++)if(w2(t,e[i],n))return!0;return!1}function I2(t){for(let e=0;e<t.length;e++){let n=t[e];if(v2(n))return e}return t.length}function S2(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let i=t[n];if(typeof i=="number")return-1;if(i===e)return n;n++}return-1}function cD(t,e){return t?":not("+e.trim()+")":e}function M2(t){let e=t[0],n=1,i=2,r="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(i&2){let a=t[++n];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else i&8?r+="."+s:i&4&&(r+=" "+s);else r!==""&&!ti(s)&&(e+=cD(o,r),r=""),i=s,o=o||!ti(i);n++}return r!==""&&(e+=cD(o,r)),e}function T2(t){return t.map(M2).join(",")}function A2(t){let e=[],n=[],i=1,r=2;for(;i<t.length;){let o=t[i];if(typeof o=="string")r===2?o!==""&&e.push(o,t[++i]):r===8&&n.push(o);else{if(!ti(r))break;r=o}i++}return{attrs:e,classes:n}}function Ai(t){return Zc(()=>{let e=uI(t),n=ge(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===iI.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ti.Emulated,styles:t.styles||vn,_:null,schemas:t.schemas||null,tView:null,id:""});dI(n);let i=t.dependencies;return n.directiveDefs=dD(i,!1),n.pipeDefs=dD(i,!0),n.id=P2(n),n})}function R2(t){return go(t)||sI(t)}function O2(t){return t!==null}function pr(t){return Zc(()=>({type:t.type,bootstrap:t.bootstrap||vn,declarations:t.declarations||vn,imports:t.imports||vn,exports:t.exports||vn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function uD(t,e){if(t==null)return Ua;let n={};for(let i in t)if(t.hasOwnProperty(i)){let r=t[i],o,s,a=za.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),e?(n[o]=a!==za.None?[i,a]:i,e[o]=s):n[o]=i}return n}function Zt(t){return Zc(()=>{let e=uI(t);return dI(e),e})}function oI(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone===!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function go(t){return t[QL]||null}function sI(t){return t[JL]||null}function aI(t){return t[e2]||null}function lI(t){let e=go(t)||sI(t)||aI(t);return e!==null?e.standalone:!1}function cI(t,e){let n=t[t2]||null;if(!n&&e===!0)throw new Error(`Type ${en(t)} does not have '\u0275mod' property.`);return n}function uI(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Ua,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||vn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:uD(t.inputs,e),outputs:uD(t.outputs),debugInfo:null}}function dI(t){t.features?.forEach(e=>e(t))}function dD(t,e){if(!t)return null;let n=e?aI:R2;return()=>(typeof t=="function"?t():t).map(i=>n(i)).filter(O2)}function P2(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let r of n)e=Math.imul(31,e)+r.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function vo(t){return{\u0275providers:t}}function N2(...t){return{\u0275providers:hI(!0,t),\u0275fromNgModule:!0}}function hI(t,...e){let n=[],i=new Set,r,o=s=>{n.push(s)};return j_(e,s=>{let a=s;jy(a,o,[],i)&&(r||=[],r.push(a))}),r!==void 0&&fI(r,o),n}function fI(t,e){for(let n=0;n<t.length;n++){let{ngModule:i,providers:r}=t[n];U_(r,o=>{e(o,i)})}}function jy(t,e,n,i){if(t=Xt(t),!t)return!1;let r=null,o=rD(t),s=!o&&go(t);if(!o&&!s){let l=t.ngModule;if(o=rD(l),o)r=l;else return!1}else{if(s&&!s.standalone)return!1;r=t}let a=i.has(r);if(s){if(a)return!1;if(i.add(r),s.dependencies){let l=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let c of l)jy(c,e,n,i)}}else if(o){if(o.imports!=null&&!a){i.add(r);let c;try{j_(o.imports,u=>{jy(u,e,n,i)&&(c||=[],c.push(u))})}finally{}c!==void 0&&fI(c,e)}if(!a){let c=Ba(r)||(()=>new r);e({provide:r,useFactory:c,deps:vn},r),e({provide:nI,useValue:r,multi:!0},r),e({provide:Os,useValue:()=>G(r),multi:!0},r)}let l=o.providers;if(l!=null&&!a){let c=t;U_(l,u=>{e(u,c)})}}else return!1;return r!==t&&t.providers!==void 0}function U_(t,e){for(let n of t)XD(n)&&(n=n.\u0275providers),Array.isArray(n)?U_(n,e):e(n)}var k2=Ne({provide:String,useValue:Ne});function pI(t){return t!==null&&typeof t=="object"&&k2 in t}function F2(t){return!!(t&&t.useExisting)}function L2(t){return!!(t&&t.useFactory)}function Ha(t){return typeof t=="function"}function V2(t){return!!t.useClass}var Cf=new L(""),zh={},j2={},vy;function z_(){return vy===void 0&&(vy=new Qh),vy}var Ut=class{},Bc=class extends Ut{get destroyed(){return this._destroyed}constructor(e,n,i,r){super(),this.parent=n,this.source=i,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Uy(e,s=>this.processProvider(s)),this.records.set(tI,ka(void 0,this)),r.has("environment")&&this.records.set(Ut,ka(void 0,this));let o=this.records.get(Cf);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(nI,vn,fe.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ye(null);try{for(let i of this._ngOnDestroyHooks)i.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let i of n)i()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ye(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=ho(this),i=Fn(void 0),r;try{return e()}finally{ho(n),Fn(i)}}get(e,n=Vc,i=fe.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(sD))return e[sD](this);i=bf(i);let r,o=ho(this),s=Fn(void 0);try{if(!(i&fe.SkipSelf)){let l=this.records.get(e);if(l===void 0){let c=$2(e)&&xf(e);c&&this.injectableDefInScope(c)?l=ka(By(e),zh):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let a=i&fe.Self?z_():this.parent;return n=i&fe.Optional&&n===Vc?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Zh]=a[Zh]||[]).unshift(en(e)),o)throw a;return d2(a,e,"R3InjectorError",this.source)}else throw a}finally{Fn(s),ho(o)}}resolveInjectorInitializers(){let e=ye(null),n=ho(this),i=Fn(void 0),r;try{let o=this.get(Os,vn,fe.Self);for(let s of o)s()}finally{ho(n),Fn(i),ye(e)}}toString(){let e=[],n=this.records;for(let i of n.keys())e.push(en(i));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new $(205,!1)}processProvider(e){e=Xt(e);let n=Ha(e)?e:Xt(e&&e.provide),i=U2(e);if(!Ha(e)&&e.multi===!0){let r=this.records.get(n);r||(r=ka(void 0,zh,!0),r.factory=()=>Ly(r.multi),this.records.set(n,r)),n=e,r.multi.push(e)}this.records.set(n,i)}hydrate(e,n){let i=ye(null);try{return n.value===zh&&(n.value=j2,n.value=n.factory()),typeof n.value=="object"&&n.value&&H2(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{ye(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Xt(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function By(t){let e=xf(t),n=e!==null?e.factory:Ba(t);if(n!==null)return n;if(t instanceof L)throw new $(204,!1);if(t instanceof Function)return B2(t);throw new $(204,!1)}function B2(t){if(t.length>0)throw new $(204,!1);let n=ZL(t);return n!==null?()=>n.factory(t):()=>new t}function U2(t){if(pI(t))return ka(void 0,t.useValue);{let e=gI(t);return ka(e,zh)}}function gI(t,e,n){let i;if(Ha(t)){let r=Xt(t);return Ba(r)||By(r)}else if(pI(t))i=()=>Xt(t.useValue);else if(L2(t))i=()=>t.useFactory(...Ly(t.deps||[]));else if(F2(t))i=()=>G(Xt(t.useExisting));else{let r=Xt(t&&(t.useClass||t.provide));if(z2(t))i=()=>new r(...Ly(t.deps));else return Ba(r)||By(r)}return i}function ka(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function z2(t){return!!t.deps}function H2(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function $2(t){return typeof t=="function"||typeof t=="object"&&t instanceof L}function Uy(t,e){for(let n of t)Array.isArray(n)?Uy(n,e):n&&XD(n)?Uy(n.\u0275providers,e):e(n)}function wn(t,e){t instanceof Bc&&t.assertNotDestroyed();let n,i=ho(t),r=Fn(void 0);try{return e()}finally{ho(i),Fn(r)}}function mI(){return ZD()!==void 0||l2()!=null}function yI(t){if(!mI())throw new $(-203,!1)}function W2(t){return typeof t=="function"}var xn=0,J=1,K=2,Rt=3,ni=4,oi=5,ii=6,Jh=7,Bt=8,$a=9,cr=10,ot=11,Uc=12,hD=13,Qa=14,bn=15,Ps=16,Fa=17,ur=18,wf=19,_I=20,po=21,Hh=22,Ln=23,Ot=25,vI=1,zc=6,dr=7,ef=8,Wa=9,At=10,tf=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(tf||{});function Mi(t){return Array.isArray(t)&&typeof t[vI]=="object"}function Ri(t){return Array.isArray(t)&&t[vI]===!0}function xI(t){return(t.flags&4)!==0}function Qc(t){return t.componentOffset>-1}function H_(t){return(t.flags&1)===1}function mo(t){return!!t.template}function nf(t){return(t[K]&512)!==0}var zy=class{constructor(e,n,i){this.previousValue=e,this.currentValue=n,this.firstChange=i}isFirstChange(){return this.firstChange}};function bI(t,e,n,i){e!==null?e.applyValueToInputSignal(e,i):t[n]=i}function Oi(){return CI}function CI(t){return t.type.prototype.ngOnChanges&&(t.setInput=q2),G2}Oi.ngInherit=!0;function G2(){let t=EI(this),e=t?.current;if(e){let n=t.previous;if(n===Ua)t.previous=e;else for(let i in e)n[i]=e[i];t.current=null,this.ngOnChanges(e)}}function q2(t,e,n,i,r){let o=this.declaredInputs[i],s=EI(t)||Y2(t,{previous:Ua,current:null}),a=s.current||(s.current={}),l=s.previous,c=l[o];a[o]=new zy(c&&c.currentValue,n,l===Ua),bI(t,e,r,n)}var wI="__ngSimpleChanges__";function EI(t){return t[wI]||null}function Y2(t,e){return t[wI]=e}var fD=null;var Ii=function(t,e,n){fD?.(t,e,n)},X2="svg",Z2="math";function ri(t){for(;Array.isArray(t);)t=t[xn];return t}function DI(t,e){return ri(e[t])}function jn(t,e){return ri(e[t.index])}function $_(t,e){return t.data[e]}function xo(t,e){let n=e[t];return Mi(n)?n:n[xn]}function K2(t){return(t[K]&4)===4}function W_(t){return(t[K]&128)===128}function Q2(t){return Ri(t[Rt])}function Ga(t,e){return e==null?null:t[e]}function II(t){t[Fa]=0}function SI(t){t[K]&1024||(t[K]|=1024,W_(t)&&Ef(t))}function J2(t,e){for(;t>0;)e=e[Qa],t--;return e}function Hc(t){return!!(t[K]&9216||t[Ln]?.dirty)}function Hy(t){t[cr].changeDetectionScheduler?.notify(7),t[K]&64&&(t[K]|=1024),Hc(t)&&Ef(t)}function Ef(t){t[cr].changeDetectionScheduler?.notify(0);let e=Ns(t);for(;e!==null&&!(e[K]&8192||(e[K]|=8192,!W_(e)));)e=Ns(e)}function MI(t,e){if((t[K]&256)===256)throw new $(911,!1);t[po]===null&&(t[po]=[]),t[po].push(e)}function eV(t,e){if(t[po]===null)return;let n=t[po].indexOf(e);n!==-1&&t[po].splice(n,1)}function Ns(t){let e=t[Rt];return Ri(e)?e[Rt]:e}var pe={lFrame:BI(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var TI=!1;function tV(){return pe.lFrame.elementDepthCount}function nV(){pe.lFrame.elementDepthCount++}function iV(){pe.lFrame.elementDepthCount--}function AI(){return pe.bindingsEnabled}function Jc(){return pe.skipHydrationRootTNode!==null}function rV(t){return pe.skipHydrationRootTNode===t}function oV(t){pe.skipHydrationRootTNode=t}function sV(){pe.skipHydrationRootTNode=null}function Re(){return pe.lFrame.lView}function En(){return pe.lFrame.tView}function RI(t){return pe.lFrame.contextLView=t,t[Bt]}function OI(t){return pe.lFrame.contextLView=null,t}function Dn(){let t=PI();for(;t!==null&&t.type===64;)t=t.parent;return t}function PI(){return pe.lFrame.currentTNode}function aV(){let t=pe.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function eu(t,e){let n=pe.lFrame;n.currentTNode=t,n.isParent=e}function NI(){return pe.lFrame.isParent}function lV(){pe.lFrame.isParent=!1}function kI(){return TI}function pD(t){TI=t}function cV(){return pe.lFrame.bindingIndex}function uV(t){return pe.lFrame.bindingIndex=t}function Df(){return pe.lFrame.bindingIndex++}function FI(t){let e=pe.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function dV(){return pe.lFrame.inI18n}function hV(t,e){let n=pe.lFrame;n.bindingIndex=n.bindingRootIndex=t,$y(e)}function fV(){return pe.lFrame.currentDirectiveIndex}function $y(t){pe.lFrame.currentDirectiveIndex=t}function pV(t){let e=pe.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function LI(){return pe.lFrame.currentQueryIndex}function G_(t){pe.lFrame.currentQueryIndex=t}function gV(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[oi]:null}function VI(t,e,n){if(n&fe.SkipSelf){let r=e,o=t;for(;r=r.parent,r===null&&!(n&fe.Host);)if(r=gV(o),r===null||(o=o[Qa],r.type&10))break;if(r===null)return!1;e=r,t=o}let i=pe.lFrame=jI();return i.currentTNode=e,i.lView=t,!0}function q_(t){let e=jI(),n=t[J];pe.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function jI(){let t=pe.lFrame,e=t===null?null:t.child;return e===null?BI(t):e}function BI(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function UI(){let t=pe.lFrame;return pe.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var zI=UI;function Y_(){let t=UI();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function mV(t){return(pe.lFrame.contextLView=J2(t,pe.lFrame.contextLView))[Bt]}function bo(){return pe.lFrame.selectedIndex}function ks(t){pe.lFrame.selectedIndex=t}function yV(){let t=pe.lFrame;return $_(t.tView,t.selectedIndex)}function HI(){return pe.lFrame.currentNamespace}var $I=!0;function X_(){return $I}function Co(t){$I=t}function _V(t,e,n){let{ngOnChanges:i,ngOnInit:r,ngDoCheck:o}=e.type.prototype;if(i){let s=CI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}r&&(n.preOrderHooks??=[]).push(0-t,r),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function Z_(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:u}=o;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),l&&(t.viewHooks??=[]).push(-n,l),c&&((t.viewHooks??=[]).push(n,c),(t.viewCheckHooks??=[]).push(n,c)),u!=null&&(t.destroyHooks??=[]).push(n,u)}}function $h(t,e,n){WI(t,e,3,n)}function Wh(t,e,n,i){(t[K]&3)===n&&WI(t,e,n,i)}function xy(t,e){let n=t[K];(n&3)===e&&(n&=16383,n+=1,t[K]=n)}function WI(t,e,n,i){let r=i!==void 0?t[Fa]&65535:0,o=i??-1,s=e.length-1,a=0;for(let l=r;l<s;l++)if(typeof e[l+1]=="number"){if(a=e[l],i!=null&&a>=i)break}else e[l]<0&&(t[Fa]+=65536),(a<o||o==-1)&&(vV(t,n,e,l),t[Fa]=(t[Fa]&4294901760)+l+2),l++}function gD(t,e){Ii(4,t,e);let n=ye(null);try{e.call(t)}finally{ye(n),Ii(5,t,e)}}function vV(t,e,n,i){let r=n[i]<0,o=n[i+1],s=r?-n[i]:n[i],a=t[s];r?t[K]>>14<t[Fa]>>16&&(t[K]&3)===e&&(t[K]+=16384,gD(a,o)):gD(a,o)}var ja=-1,Fs=class{constructor(e,n,i){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=i}};function xV(t){return t instanceof Fs}function bV(t){return(t.flags&8)!==0}function CV(t){return(t.flags&16)!==0}var by={},Wy=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,i){i=bf(i);let r=this.injector.get(e,by,i);return r!==by||n===by?r:this.parentInjector.get(e,n,i)}};function GI(t){return t!==ja}function rf(t){return t&32767}function wV(t){return t>>16}function of(t,e){let n=wV(t),i=e;for(;n>0;)i=i[Qa],n--;return i}var Gy=!0;function mD(t){let e=Gy;return Gy=t,e}var EV=256,qI=EV-1,YI=5,DV=0,Si={};function IV(t,e,n){let i;typeof n=="string"?i=n.charCodeAt(0)||0:n.hasOwnProperty(Fc)&&(i=n[Fc]),i==null&&(i=n[Fc]=DV++);let r=i&qI,o=1<<r;e.data[t+(r>>YI)]|=o}function sf(t,e){let n=XI(t,e);if(n!==-1)return n;let i=e[J];i.firstCreatePass&&(t.injectorIndex=e.length,Cy(i.data,t),Cy(e,null),Cy(i.blueprint,null));let r=K_(t,e),o=t.injectorIndex;if(GI(r)){let s=rf(r),a=of(r,e),l=a[J].data;for(let c=0;c<8;c++)e[o+c]=a[s+c]|l[s+c]}return e[o+8]=r,o}function Cy(t,e){t.push(0,0,0,0,0,0,0,0,e)}function XI(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function K_(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;r!==null;){if(i=eS(r),i===null)return ja;if(n++,r=r[Qa],i.injectorIndex!==-1)return i.injectorIndex|n<<16}return ja}function qy(t,e,n){IV(t,e,n)}function ZI(t,e,n){if(n&fe.Optional||t!==void 0)return t;L_(e,"NodeInjector")}function KI(t,e,n,i){if(n&fe.Optional&&i===void 0&&(i=null),!(n&(fe.Self|fe.Host))){let r=t[$a],o=Fn(void 0);try{return r?r.get(e,i,n&fe.Optional):KD(e,i,n&fe.Optional)}finally{Fn(o)}}return ZI(i,e,n)}function QI(t,e,n,i=fe.Default,r){if(t!==null){if(e[K]&2048&&!(i&fe.Self)){let s=AV(t,e,n,i,Si);if(s!==Si)return s}let o=JI(t,e,n,i,Si);if(o!==Si)return o}return KI(e,n,i,r)}function JI(t,e,n,i,r){let o=MV(n);if(typeof o=="function"){if(!VI(e,t,i))return i&fe.Host?ZI(r,n,i):KI(e,n,i,r);try{let s;if(s=o(i),s==null&&!(i&fe.Optional))L_(n);else return s}finally{zI()}}else if(typeof o=="number"){let s=null,a=XI(t,e),l=ja,c=i&fe.Host?e[bn][oi]:null;for((a===-1||i&fe.SkipSelf)&&(l=a===-1?K_(t,e):e[a+8],l===ja||!_D(i,!1)?a=-1:(s=e[J],a=rf(l),e=of(l,e)));a!==-1;){let u=e[J];if(yD(o,a,u.data)){let d=SV(a,e,n,s,i,c);if(d!==Si)return d}l=e[a+8],l!==ja&&_D(i,e[J].data[a+8]===c)&&yD(o,a,e)?(s=u,a=rf(l),e=of(l,e)):a=-1}}return r}function SV(t,e,n,i,r,o){let s=e[J],a=s.data[t+8],l=i==null?Qc(a)&&Gy:i!=s&&(a.type&3)!==0,c=r&fe.Host&&o===a,u=Gh(a,s,n,l,c);return u!==null?Ls(e,s,u,a):Si}function Gh(t,e,n,i,r){let o=t.providerIndexes,s=e.data,a=o&1048575,l=t.directiveStart,c=t.directiveEnd,u=o>>20,d=i?a:a+u,h=r?a+u:c;for(let f=d;f<h;f++){let p=s[f];if(f<l&&n===p||f>=l&&p.type===n)return f}if(r){let f=s[l];if(f&&mo(f)&&f.type===n)return l}return null}function Ls(t,e,n,i){let r=t[n],o=e.data;if(xV(r)){let s=r;s.resolving&&i2(n2(o[n]));let a=mD(s.canSeeViewProviders);s.resolving=!0;let l,c=s.injectImpl?Fn(s.injectImpl):null,u=VI(t,i,fe.Default);try{r=t[n]=s.factory(void 0,o,t,i),e.firstCreatePass&&n>=i.directiveStart&&_V(n,o[n],e)}finally{c!==null&&Fn(c),mD(a),s.resolving=!1,zI()}}return r}function MV(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Fc)?t[Fc]:void 0;return typeof e=="number"?e>=0?e&qI:TV:e}function yD(t,e,n){let i=1<<t;return!!(n[e+(t>>YI)]&i)}function _D(t,e){return!(t&fe.Self)&&!(t&fe.Host&&e)}var Rs=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,i){return QI(this._tNode,this._lView,e,bf(i),n)}};function TV(){return new Rs(Dn(),Re())}function zs(t){return Zc(()=>{let e=t.prototype.constructor,n=e[Xh]||Yy(e),i=Object.prototype,r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){let o=r[Xh]||Yy(r);if(o&&o!==n)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function Yy(t){return WD(t)?()=>{let e=Yy(Xt(t));return e&&e()}:Ba(t)}function AV(t,e,n,i,r){let o=t,s=e;for(;o!==null&&s!==null&&s[K]&2048&&!(s[K]&512);){let a=JI(o,s,n,i|fe.Self,Si);if(a!==Si)return a;let l=o.parent;if(!l){let c=s[_I];if(c){let u=c.get(n,Si,i);if(u!==Si)return u}l=eS(s),s=s[Qa]}o=l}return r}function eS(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[oi]:null}function vD(t,e=null,n=null,i){let r=tS(t,e,n,i);return r.resolveInjectorInitializers(),r}function tS(t,e=null,n=null,i,r=new Set){let o=[n||vn,N2(t)];return i=i||(typeof t=="object"?void 0:en(t)),new Bc(o,e||z_(),i||null,r)}var Ts=class Ts{static create(e,n){if(Array.isArray(e))return vD({name:""},n,e,"");{let i=e.name??"";return vD({name:i},e.parent,e.providers,i)}}};Ts.THROW_IF_NOT_FOUND=Vc,Ts.NULL=new Qh,Ts.\u0275prov=j({token:Ts,providedIn:"any",factory:()=>G(tI)}),Ts.__NG_ELEMENT_ID__=-1;var Cn=Ts;var RV=new L("");RV.__NG_ELEMENT_ID__=t=>{let e=Dn();if(e===null)throw new $(204,!1);if(e.type&2)return e.value;if(t&fe.Optional)return null;throw new $(204,!1)};var OV="ngOriginalError";function wy(t){return t[OV]}var Vn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&wy(e);for(;n&&wy(n);)n=wy(n);return n||null}},nS=new L("",{providedIn:"root",factory:()=>I(Vn).handleError.bind(void 0)}),tu=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=PV,e.__NG_ENV_ID__=i=>i;let t=e;return t})(),Xy=class extends tu{constructor(e){super(),this._lView=e}onDestroy(e){return MI(this._lView,e),()=>eV(this._lView,e)}};function PV(){return new Xy(Re())}var Zy=class{constructor(){this.destroyed=!1,this.listeners=null,this.errorHandler=I(Vn,{optional:!0}),this.destroyRef=I(tu),this.destroyRef.onDestroy(()=>{this.destroyed=!0,this.listeners=null})}subscribe(e){if(this.destroyed)throw new $(953,!1);return(this.listeners??=[]).push(e),{unsubscribe:()=>{let n=this.listeners?.indexOf(e);n!==void 0&&n!==-1&&this.listeners?.splice(n,1)}}}emit(e){if(this.destroyed)throw new $(953,!1);if(this.listeners===null)return;let n=ye(null);try{for(let i of this.listeners)try{i(e)}catch(r){this.errorHandler?.handleError(r)}}finally{ye(n)}}};function iS(t){return new Zy}function xD(t,e){return HD(t,e)}function NV(t){return HD(zD,t)}var rS=(xD.required=NV,xD);function kV(){return Ja(Dn(),Re())}function Ja(t,e){return new tn(jn(t,e))}var tn=(()=>{let e=class e{constructor(i){this.nativeElement=i}};e.__NG_ELEMENT_ID__=kV;let t=e;return t})();function FV(t){return t instanceof tn?t.nativeElement:t}var gr=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new _t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let i=this.taskId++;return this.pendingTasks.add(i),i}remove(i){this.pendingTasks.delete(i),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();var Ky=class extends yt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,mI()&&(this.destroyRef=I(tu,{optional:!0})??void 0,this.pendingTasks=I(gr,{optional:!0})??void 0)}emit(e){let n=ye(null);try{super.next(e)}finally{ye(n)}}subscribe(e,n,i){let r=e,o=n||(()=>null),s=i;if(e&&typeof e=="object"){let l=e;r=l.next?.bind(l),o=l.error?.bind(l),s=l.complete?.bind(l)}this.__isAsync&&(o=this.wrapInTimeout(o),r&&(r=this.wrapInTimeout(r)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:r,error:o,complete:s});return e instanceof et&&e.add(a),a}wrapInTimeout(e){return n=>{let i=this.pendingTasks?.add();setTimeout(()=>{e(n),i!==void 0&&this.pendingTasks?.remove(i)})}}},Xe=Ky;function LV(){return this._results[Symbol.iterator]()}var Qy=class t{get changes(){return this._changes??=new Xe}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let n=t.prototype;n[Symbol.iterator]||(n[Symbol.iterator]=LV)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){this.dirty=!1;let i=p2(e);(this._changesDetected=!f2(this._results,i,n))&&(this._results=i,this.length=i.length,this.last=i[this.length-1],this.first=i[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}},VV="ngSkipHydration",jV="ngskiphydration";function oS(t){let e=t.mergedAttrs;if(e===null)return!1;for(let n=0;n<e.length;n+=2){let i=e[n];if(typeof i=="number")return!1;if(typeof i=="string"&&i.toLowerCase()===jV)return!0}return!1}function sS(t){return t.hasAttribute(VV)}function af(t){return(t.flags&128)===128}function BV(t){if(af(t))return!0;let e=t.parent;for(;e;){if(af(t)||oS(e))return!0;e=e.parent}return!1}var aS=new Map,UV=0;function zV(){return UV++}function HV(t){aS.set(t[wf],t)}function $V(t){aS.delete(t[wf])}var bD="__ngContext__";function Vs(t,e){Mi(e)?(t[bD]=e[wf],HV(e)):t[bD]=e}function lS(t){return uS(t[Uc])}function cS(t){return uS(t[ni])}function uS(t){for(;t!==null&&!Ri(t);)t=t[ni];return t}var Jy;function dS(t){Jy=t}function If(){if(Jy!==void 0)return Jy;if(typeof document<"u")return document;throw new $(210,!1)}var Sf=new L("",{providedIn:"root",factory:()=>WV}),WV="ng",Q_=new L(""),nn=new L("",{providedIn:"platform",factory:()=>"unknown"});var J_=new L("",{providedIn:"root",factory:()=>If().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});function GV(){let t=new el;return I(nn)==="browser"&&(t.store=qV(If(),I(Sf))),t}var el=(()=>{let e=class e{constructor(){this.store={},this.onSerializeCallbacks={}}get(i,r){return this.store[i]!==void 0?this.store[i]:r}set(i,r){this.store[i]=r}remove(i){delete this.store[i]}hasKey(i){return this.store.hasOwnProperty(i)}get isEmpty(){return Object.keys(this.store).length===0}onSerialize(i,r){this.onSerializeCallbacks[i]=r}toJson(){for(let i in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(i))try{this.store[i]=this.onSerializeCallbacks[i]()}catch(r){console.warn("Exception in onSerialize callback: ",r)}return JSON.stringify(this.store).replace(/</g,"\\u003C")}};e.\u0275prov=j({token:e,providedIn:"root",factory:GV});let t=e;return t})();function qV(t,e){let n=t.getElementById(e+"-state");if(n?.textContent)try{return JSON.parse(n.textContent)}catch(i){console.warn("Exception while restoring TransferState for app "+e,i)}return{}}var hS="h",fS="b",e_=function(t){return t.FirstChild="f",t.NextSibling="n",t}(e_||{}),YV="e",XV="t",ev="c",pS="x",lf="r",ZV="i",KV="n",gS="d";var QV="__nghData__",mS=QV,Ey="ngh",JV="nghm",yS=()=>null;function ej(t,e,n=!1){let i=t.getAttribute(Ey);if(i==null)return null;let[r,o]=i.split("|");if(i=n?o:r,!i)return null;let s=o?`|${o}`:"",a=n?r:s,l={};if(i!==""){let u=e.get(el,null,{optional:!0});u!==null&&(l=u.get(mS,[])[Number(i)])}let c={data:l,firstChild:t.firstChild??null};return n&&(c.firstChild=t,Mf(c,0,t.nextSibling)),a?t.setAttribute(Ey,a):t.removeAttribute(Ey),c}function tj(){yS=ej}function tv(t,e,n=!1){return yS(t,e,n)}function nj(t){let e=t._lView;return e[J].type===2?null:(nf(e)&&(e=e[Ot]),e)}function ij(t){return t.textContent?.replace(/\s/gm,"")}function rj(t){let e=If(),n=e.createNodeIterator(t,NodeFilter.SHOW_COMMENT,{acceptNode(o){let s=ij(o);return s==="ngetn"||s==="ngtns"?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}}),i,r=[];for(;i=n.nextNode();)r.push(i);for(let o of r)o.textContent==="ngetn"?o.replaceWith(e.createTextNode("")):o.remove()}function Mf(t,e,n){t.segmentHeads??={},t.segmentHeads[e]=n}function t_(t,e){return t.segmentHeads?.[e]??null}function oj(t,e){let n=t.data,i=n[YV]?.[e]??null;return i===null&&n[ev]?.[e]&&(i=nv(t,e)),i}function _S(t,e){return t.data[ev]?.[e]??null}function nv(t,e){let n=_S(t,e)??[],i=0;for(let r of n)i+=r[lf]*(r[pS]??1);return i}function sj(t){if(typeof t.disconnectedNodes>"u"){let e=t.data[gS];t.disconnectedNodes=e?new Set(e):null}return t.disconnectedNodes}function Tf(t,e){if(typeof t.disconnectedNodes>"u"){let n=t.data[gS];t.disconnectedNodes=n?new Set(n):null}return!!sj(t)?.has(e)}var Vh=new L(""),vS=!1,xS=new L("",{providedIn:"root",factory:()=>vS});var n_=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${WL})`}};function iv(t){return t instanceof n_?t.changingThisBreaksApplicationSecurity:t}var aj=/^>|^->|<!--|-->|--!>|<!-$/g,lj=/(<|>)/g,cj="\u200B$1\u200B";function uj(t){return t.replace(aj,e=>e.replace(lj,cj))}function dj(t){return t.ownerDocument.body}function bS(t){return t instanceof Function?t():t}function kc(t){return(t??I(Cn)).get(nn)==="browser"}var hr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(hr||{}),hj;function rv(t,e){return hj(t,e)}function La(t,e,n,i,r){if(i!=null){let o,s=!1;Ri(i)?o=i:Mi(i)&&(s=!0,i=i[xn]);let a=ri(i);t===0&&n!==null?r==null?IS(e,n,a):cf(e,n,a,r||null,!0):t===1&&n!==null?cf(e,n,a,r||null,!0):t===2?cv(e,a,s):t===3&&e.destroyNode(a),o!=null&&Mj(e,t,o,n,r)}}function CS(t,e){return t.createText(e)}function fj(t,e,n){t.setValue(e,n)}function wS(t,e){return t.createComment(uj(e))}function ov(t,e,n){return t.createElement(e,n)}function pj(t,e){ES(t,e),e[xn]=null,e[oi]=null}function gj(t,e,n,i,r,o){i[xn]=r,i[oi]=e,Rf(t,i,n,1,r,o)}function ES(t,e){e[cr].changeDetectionScheduler?.notify(8),Rf(t,e,e[ot],2,null,null)}function mj(t){let e=t[Uc];if(!e)return Dy(t[J],t);for(;e;){let n=null;if(Mi(e))n=e[Uc];else{let i=e[At];i&&(n=i)}if(!n){for(;e&&!e[ni]&&e!==t;)Mi(e)&&Dy(e[J],e),e=e[Rt];e===null&&(e=t),Mi(e)&&Dy(e[J],e),n=e&&e[ni]}e=n}}function yj(t,e,n,i){let r=At+i,o=n.length;i>0&&(n[r-1][ni]=e),i<o-At?(e[ni]=n[r],eI(n,At+i,e)):(n.push(e),e[ni]=null),e[Rt]=n;let s=e[Ps];s!==null&&n!==s&&DS(s,e);let a=e[ur];a!==null&&a.insertView(t),Hy(e),e[K]|=128}function DS(t,e){let n=t[Wa],i=e[Rt];if(Mi(i))t[K]|=tf.HasTransplantedViews;else{let r=i[Rt][bn];e[bn]!==r&&(t[K]|=tf.HasTransplantedViews)}n===null?t[Wa]=[e]:n.push(e)}function sv(t,e){let n=t[Wa],i=n.indexOf(e);n.splice(i,1)}function $c(t,e){if(t.length<=At)return;let n=At+e,i=t[n];if(i){let r=i[Ps];r!==null&&r!==t&&sv(r,i),e>0&&(t[n-1][ni]=i[ni]);let o=Kh(t,At+e);pj(i[J],i);let s=o[ur];s!==null&&s.detachView(o[J]),i[Rt]=null,i[ni]=null,i[K]&=-129}return i}function Af(t,e){if(!(e[K]&256)){let n=e[ot];n.destroyNode&&Rf(t,e,n,3,null,null),mj(e)}}function Dy(t,e){if(e[K]&256)return;let n=ye(null);try{e[K]&=-129,e[K]|=256,e[Ln]&&sh(e[Ln]),vj(t,e),_j(t,e),e[J].type===1&&e[ot].destroy();let i=e[Ps];if(i!==null&&Ri(e[Rt])){i!==e[Rt]&&sv(i,e);let r=e[ur];r!==null&&r.detachView(t)}$V(e)}finally{ye(n)}}function _j(t,e){let n=t.cleanup,i=e[Jh];if(n!==null)for(let o=0;o<n.length-1;o+=2)if(typeof n[o]=="string"){let s=n[o+3];s>=0?i[s]():i[-s].unsubscribe(),o+=2}else{let s=i[n[o+1]];n[o].call(s)}i!==null&&(e[Jh]=null);let r=e[po];if(r!==null){e[po]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function vj(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let i=0;i<n.length;i+=2){let r=e[n[i]];if(!(r instanceof Fs)){let o=n[i+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],l=o[s+1];Ii(4,a,l);try{l.call(a)}finally{Ii(5,a,l)}}else{Ii(4,r,o);try{o.call(r)}finally{Ii(5,r,o)}}}}}function xj(t,e,n){return bj(t,e.parent,n)}function bj(t,e,n){let i=e;for(;i!==null&&i.type&40;)e=i,i=e.parent;if(i===null)return n[xn];{let{componentOffset:r}=i;if(r>-1){let{encapsulation:o}=t.data[i.directiveStart+r];if(o===Ti.None||o===Ti.Emulated)return null}return jn(i,n)}}function cf(t,e,n,i,r){t.insertBefore(e,n,i,r)}function IS(t,e,n){t.appendChild(e,n)}function CD(t,e,n,i,r){i!==null?cf(t,e,n,i,r):IS(t,e,n)}function Cj(t,e,n,i){t.removeChild(e,n,i)}function av(t,e){return t.parentNode(e)}function wj(t,e){return t.nextSibling(e)}function Ej(t,e,n){return Ij(t,e,n)}function Dj(t,e,n){return t.type&40?jn(t,n):null}var Ij=Dj,wD;function lv(t,e,n,i){let r=xj(t,i,e),o=e[ot],s=i.parent||e[oi],a=Ej(s,i,e);if(r!=null)if(Array.isArray(n))for(let l=0;l<n.length;l++)CD(o,r,n[l],a,!1);else CD(o,r,n,a,!1);wD!==void 0&&wD(o,i,e,n,r)}function qh(t,e){if(e!==null){let n=e.type;if(n&3)return jn(e,t);if(n&4)return i_(-1,t[e.index]);if(n&8){let i=e.child;if(i!==null)return qh(t,i);{let r=t[e.index];return Ri(r)?i_(-1,r):ri(r)}}else{if(n&32)return rv(e,t)()||ri(t[e.index]);{let i=SS(t,e);if(i!==null){if(Array.isArray(i))return i[0];let r=Ns(t[bn]);return qh(r,i)}else return qh(t,e.next)}}}return null}function SS(t,e){if(e!==null){let i=t[bn][oi],r=e.projection;return i.projection[r]}return null}function i_(t,e){let n=At+t+1;if(n<e.length){let i=e[n],r=i[J].firstChild;if(r!==null)return qh(i,r)}return e[dr]}function cv(t,e,n){let i=av(t,e);i&&Cj(t,i,e,n)}function MS(t){t.textContent=""}function uv(t,e,n,i,r,o,s){for(;n!=null;){let a=i[n.index],l=n.type;if(s&&e===0&&(a&&Vs(ri(a),i),n.flags|=2),(n.flags&32)!==32)if(l&8)uv(t,e,n.child,i,r,o,!1),La(e,t,r,a,o);else if(l&32){let c=rv(n,i),u;for(;u=c();)La(e,t,r,u,o);La(e,t,r,a,o)}else l&16?Sj(t,e,i,n,r,o):La(e,t,r,a,o);n=s?n.projectionNext:n.next}}function Rf(t,e,n,i,r,o){uv(n,i,t.firstChild,e,r,o,!1)}function Sj(t,e,n,i,r,o){let s=n[bn],l=s[oi].projection[i.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++){let u=l[c];La(e,t,r,u,o)}else{let c=l,u=s[Rt];af(i)&&(c.flags|=128),uv(t,e,c,u,r,o,!0)}}function Mj(t,e,n,i,r){let o=n[dr],s=ri(n);o!==s&&La(e,t,i,o,r);for(let a=At;a<n.length;a++){let l=n[a];Rf(l[J],l,t,e,i,o)}}function Tj(t,e,n,i,r){if(e)r?t.addClass(n,i):t.removeClass(n,i);else{let o=i.indexOf("-")===-1?void 0:hr.DashCase;r==null?t.removeStyle(n,i,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=hr.Important),t.setStyle(n,i,r,o))}}function Aj(t,e,n){t.setAttribute(e,"style",n)}function TS(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function AS(t,e,n){let{mergedAttrs:i,classes:r,styles:o}=n;i!==null&&Vy(t,e,i),r!==null&&TS(t,e,r),o!==null&&Aj(t,e,o)}var mr={};function wo(t=1){RS(En(),Re(),bo()+t,!1)}function RS(t,e,n,i){if(!i)if((e[K]&3)===3){let o=t.preOrderCheckHooks;o!==null&&$h(e,o,n)}else{let o=t.preOrderHooks;o!==null&&Wh(e,o,0,n)}ks(n)}function Ee(t,e=fe.Default){let n=Re();if(n===null)return G(t,e);let i=Dn();return QI(i,n,Xt(t),e)}function OS(){let t="invalid";throw new Error(t)}function PS(t,e,n,i,r,o){let s=ye(null);try{let a=null;r&za.SignalBased&&(a=e[i][ao]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&za.HasDecoratorInputTransform&&(o=t.inputTransforms[i].call(e,o)),t.setInput!==null?t.setInput(e,a,o,n,i):bI(e,a,i,o)}finally{ye(s)}}function Rj(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let i=0;i<n.length;i++){let r=n[i];if(r<0)ks(~r);else{let o=r,s=n[++i],a=n[++i];hV(s,o);let l=e[o];a(2,l)}}}finally{ks(-1)}}function Of(t,e,n,i,r,o,s,a,l,c,u){let d=e.blueprint.slice();return d[xn]=r,d[K]=i|4|128|8|64,(c!==null||t&&t[K]&2048)&&(d[K]|=2048),II(d),d[Rt]=d[Qa]=t,d[Bt]=n,d[cr]=s||t&&t[cr],d[ot]=a||t&&t[ot],d[$a]=l||t&&t[$a]||null,d[oi]=o,d[wf]=zV(),d[ii]=u,d[_I]=c,d[bn]=e.type==2?t[bn]:d,d}function Pf(t,e,n,i,r){let o=t.data[e];if(o===null)o=Oj(t,e,n,i,r),dV()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=i,o.attrs=r;let s=aV();o.injectorIndex=s===null?-1:s.injectorIndex}return eu(o,!0),o}function Oj(t,e,n,i,r){let o=PI(),s=NI(),a=s?o:o&&o.parent,l=t.data[e]=jj(t,a,n,e,i,r);return t.firstChild===null&&(t.firstChild=l),o!==null&&(s?o.child==null&&l.parent!==null&&(o.child=l):o.next===null&&(o.next=l,l.prev=o)),l}function NS(t,e,n,i){if(n===0)return-1;let r=e.length;for(let o=0;o<n;o++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function kS(t,e,n,i,r){let o=bo(),s=i&2;try{ks(-1),s&&e.length>Ot&&RS(t,e,Ot,!1),Ii(s?2:0,r),n(i,r)}finally{ks(o),Ii(s?3:1,r)}}function FS(t,e,n){if(xI(e)){let i=ye(null);try{let r=e.directiveStart,o=e.directiveEnd;for(let s=r;s<o;s++){let a=t.data[s];if(a.contentQueries){let l=n[s];a.contentQueries(1,l,s)}}}finally{ye(i)}}}function LS(t,e,n){AI()&&(Gj(t,e,n,jn(n,e)),(n.flags&64)===64&&HS(t,e,n))}function VS(t,e,n=jn){let i=e.localNames;if(i!==null){let r=e.index+1;for(let o=0;o<i.length;o+=2){let s=i[o+1],a=s===-1?n(e,t):t[s];t[r++]=a}}}function jS(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=dv(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function dv(t,e,n,i,r,o,s,a,l,c,u){let d=Ot+i,h=d+r,f=Pj(d,h),p=typeof c=="function"?c():c;return f[J]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:u}}function Pj(t,e){let n=[];for(let i=0;i<e;i++)n.push(i<t?null:mr);return n}function Nj(t,e,n,i){let o=i.get(xS,vS)||n===Ti.ShadowDom,s=t.selectRootElement(e,o);return kj(s),s}function kj(t){BS(t)}var BS=()=>null;function Fj(t){sS(t)?MS(t):rj(t)}function Lj(){BS=Fj}function Vj(t,e,n,i){let r=GS(e);r.push(n),t.firstCreatePass&&qS(t).push(i,r.length-1)}function jj(t,e,n,i,r,o){let s=e?e.injectorIndex:-1,a=0;return Jc()&&(a|=128),{type:n,index:i,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function ED(t,e,n,i,r){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;i??={};let a,l=za.None;Array.isArray(s)?(a=s[0],l=s[1]):a=s;let c=o;if(r!==null){if(!r.hasOwnProperty(o))continue;c=r[o]}t===0?DD(i,n,c,a,l):DD(i,n,c,a)}return i}function DD(t,e,n,i,r){let o;t.hasOwnProperty(n)?(o=t[n]).push(e,i):o=t[n]=[e,i],r!==void 0&&o.push(r)}function Bj(t,e,n){let i=e.directiveStart,r=e.directiveEnd,o=t.data,s=e.attrs,a=[],l=null,c=null;for(let u=i;u<r;u++){let d=o[u],h=n?n.get(d):null,f=h?h.inputs:null,p=h?h.outputs:null;l=ED(0,d.inputs,u,l,f),c=ED(1,d.outputs,u,c,p);let m=l!==null&&s!==null&&!B_(e)?tB(l,u,s):null;a.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}function Uj(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function zj(t,e,n,i,r,o,s,a){let l=jn(e,n),c=e.inputs,u;!a&&c!=null&&(u=c[i])?(hv(t,n,u,i,r),Qc(e)&&Hj(n,e.index)):e.type&3?(i=Uj(i),r=s!=null?s(r,e.value||"",i):r,o.setProperty(l,i,r)):e.type&12}function Hj(t,e){let n=xo(e,t);n[K]&16||(n[K]|=64)}function US(t,e,n,i){if(AI()){let r=i===null?null:{"":-1},o=Yj(t,n),s,a;o===null?s=a=null:[s,a]=o,s!==null&&zS(t,e,n,s,r,a),r&&Xj(n,i,r)}n.mergedAttrs=jc(n.mergedAttrs,n.attrs)}function zS(t,e,n,i,r,o){for(let c=0;c<i.length;c++)qy(sf(n,e),t,i[c].type);Kj(n,t.data.length,i.length);for(let c=0;c<i.length;c++){let u=i[c];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,l=NS(t,e,i.length,null);for(let c=0;c<i.length;c++){let u=i[c];n.mergedAttrs=jc(n.mergedAttrs,u.hostAttrs),Qj(t,n,e,l,u),Zj(l,u,r),u.contentQueries!==null&&(n.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(n.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),l++}Bj(t,n,o)}function $j(t,e,n,i,r){let o=r.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let a=~e.index;Wj(s)!=a&&s.push(a),s.push(n,i,o)}}function Wj(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Gj(t,e,n,i){let r=n.directiveStart,o=n.directiveEnd;Qc(n)&&Jj(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||sf(n,e),Vs(i,e);let s=n.initialInputs;for(let a=r;a<o;a++){let l=t.data[a],c=Ls(e,t,a,n);if(Vs(c,e),s!==null&&eB(e,a-r,c,l,n,s),mo(l)){let u=xo(n.index,e);u[Bt]=Ls(e,t,a,n)}}}function HS(t,e,n){let i=n.directiveStart,r=n.directiveEnd,o=n.index,s=fV();try{ks(o);for(let a=i;a<r;a++){let l=t.data[a],c=e[a];$y(a),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&qj(l,c)}}finally{ks(-1),$y(s)}}function qj(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Yj(t,e){let n=t.directiveRegistry,i=null,r=null;if(n)for(let o=0;o<n.length;o++){let s=n[o];if(D2(e,s.selectors,!1))if(i||(i=[]),mo(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),i.unshift(...a,s);let l=a.length;r_(t,e,l)}else i.unshift(s),r_(t,e,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,i,r),i.push(s)}return i===null?null:[i,r]}function r_(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Xj(t,e,n){if(e){let i=t.localNames=[];for(let r=0;r<e.length;r+=2){let o=n[e[r+1]];if(o==null)throw new $(-301,!1);i.push(e[r],o)}}}function Zj(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;mo(e)&&(n[""]=t)}}function Kj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Qj(t,e,n,i,r){t.data[i]=r;let o=r.factory||(r.factory=Ba(r.type,!0)),s=new Fs(o,mo(r),Ee);t.blueprint[i]=s,n[i]=s,$j(t,e,i,NS(t,n,r.hostVars,mr),r)}function Jj(t,e,n){let i=jn(e,t),r=jS(n),o=t[cr].rendererFactory,s=16;n.signals?s=4096:n.onPush&&(s=64);let a=Nf(t,Of(t,r,null,s,i,e,null,o.createRenderer(i,n),null,null,null));t[e.index]=a}function eB(t,e,n,i,r,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let l=s[a++],c=s[a++],u=s[a++],d=s[a++];PS(i,n,l,c,u,d)}}function tB(t,e,n){let i=null,r=0;for(;r<n.length;){let o=n[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(t.hasOwnProperty(o)){i===null&&(i=[]);let s=t[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){i.push(o,s[a+1],s[a+2],n[r+1]);break}}r+=2}return i}function $S(t,e,n,i){return[t,!0,0,e,null,i,null,n,null,null]}function WS(t,e){let n=t.contentQueries;if(n!==null){let i=ye(null);try{for(let r=0;r<n.length;r+=2){let o=n[r],s=n[r+1];if(s!==-1){let a=t.data[s];G_(o),a.contentQueries(2,e[s],s)}}}finally{ye(i)}}}function Nf(t,e){return t[Uc]?t[hD][ni]=e:t[Uc]=e,t[hD]=e,e}function o_(t,e,n){G_(0);let i=ye(null);try{e(t,n)}finally{ye(i)}}function GS(t){return t[Jh]??=[]}function qS(t){return t.cleanup??=[]}function YS(t,e){let n=t[$a],i=n?n.get(Vn,null):null;i&&i.handleError(e)}function hv(t,e,n,i,r){for(let o=0;o<n.length;){let s=n[o++],a=n[o++],l=n[o++],c=e[s],u=t.data[s];PS(u,c,i,a,l,r)}}function XS(t,e,n){let i=DI(e,t);fj(t[ot],i,n)}function nB(t,e){let n=xo(e,t),i=n[J];iB(i,n);let r=n[xn];r!==null&&n[ii]===null&&(n[ii]=tv(r,n[$a])),fv(i,n,n[Bt])}function iB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function fv(t,e,n){q_(e);try{let i=t.viewQuery;i!==null&&o_(1,i,n);let r=t.template;r!==null&&kS(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ur]?.finishViewCreation(t),t.staticContentQueries&&WS(t,e),t.staticViewQueries&&o_(2,t.viewQuery,n);let o=t.components;o!==null&&rB(e,o)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),i}finally{e[K]&=-5,Y_()}}function rB(t,e){for(let n=0;n<e.length;n++)nB(t,e[n])}function kf(t,e,n,i){let r=ye(null);try{let o=e.tView,a=t[K]&4096?4096:16,l=Of(t,o,n,a,null,e,null,null,i?.injector??null,i?.embeddedViewInjector??null,i?.dehydratedView??null),c=t[e.index];l[Ps]=c;let u=t[ur];return u!==null&&(l[ur]=u.createEmbeddedView(o)),fv(o,l,n),l}finally{ye(r)}}function ZS(t,e){let n=At+e;if(n<t.length)return t[n]}function Wc(t,e){return!e||e.firstChild===null||af(t)}function Ff(t,e,n,i=!0){let r=e[J];if(yj(r,e,t,n),i){let s=i_(n,t),a=e[ot],l=av(a,t[dr]);l!==null&&gj(r,t[oi],a,e,l,s)}let o=e[ii];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function KS(t,e){let n=$c(t,e);return n!==void 0&&Af(n[J],n),n}function uf(t,e,n,i,r=!1){for(;n!==null;){let o=e[n.index];o!==null&&i.push(ri(o)),Ri(o)&&oB(o,i);let s=n.type;if(s&8)uf(t,e,n.child,i);else if(s&32){let a=rv(n,e),l;for(;l=a();)i.push(l)}else if(s&16){let a=SS(e,n);if(Array.isArray(a))i.push(...a);else{let l=Ns(e[bn]);uf(l[J],l,a,i,!0)}}n=r?n.projectionNext:n.next}return i}function oB(t,e){for(let n=At;n<t.length;n++){let i=t[n],r=i[J].firstChild;r!==null&&uf(i[J],i,r,e)}t[dr]!==t[xn]&&e.push(t[dr])}var QS=[];function sB(t){return t[Ln]??aB(t)}function aB(t){let e=QS.pop()??Object.create(cB);return e.lView=t,e}function lB(t){t.lView[Ln]!==t&&(t.lView=null,QS.push(t))}var cB=ge(N({},Ac),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Ef(t.lView)},consumerOnSignalRead(){this.lView[Ln]=this}});function uB(t){let e=t[Ln]??Object.create(dB);return e.lView=t,e}var dB=ge(N({},Ac),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{let e=Ns(t.lView);for(;e&&!JS(e[J]);)e=Ns(e);e&&SI(e)},consumerOnSignalRead(){this.lView[Ln]=this}});function JS(t){return t.type!==2}var hB=100;function eM(t,e=!0,n=0){let i=t[cr],r=i.rendererFactory,o=!1;o||r.begin?.();try{fB(t,n)}catch(s){throw e&&YS(t,s),s}finally{o||(r.end?.(),i.inlineEffectRunner?.flush())}}function fB(t,e){let n=kI();try{pD(!0),s_(t,e);let i=0;for(;Hc(t);){if(i===hB)throw new $(103,!1);i++,s_(t,1)}}finally{pD(n)}}function pB(t,e,n,i){let r=e[K];if((r&256)===256)return;let o=!1,s=!1;!o&&e[cr].inlineEffectRunner?.flush(),q_(e);let a=!0,l=null,c=null;o||(JS(t)?(c=sB(e),l=rh(c)):yE()===null?(a=!1,c=uB(e),l=rh(c)):e[Ln]&&(sh(e[Ln]),e[Ln]=null));try{II(e),uV(t.bindingStartIndex),n!==null&&kS(t,e,n,2,i);let u=(r&3)===3;if(!o)if(u){let f=t.preOrderCheckHooks;f!==null&&$h(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Wh(e,f,0,null),xy(e,0)}if(s||gB(e),tM(e,0),t.contentQueries!==null&&WS(t,e),!o)if(u){let f=t.contentCheckHooks;f!==null&&$h(e,f)}else{let f=t.contentHooks;f!==null&&Wh(e,f,1),xy(e,1)}Rj(t,e);let d=t.components;d!==null&&iM(e,d,0);let h=t.viewQuery;if(h!==null&&o_(2,h,i),!o)if(u){let f=t.viewCheckHooks;f!==null&&$h(e,f)}else{let f=t.viewHooks;f!==null&&Wh(e,f,2),xy(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Hh]){for(let f of e[Hh])f();e[Hh]=null}o||(e[K]&=-73)}catch(u){throw o||Ef(e),u}finally{c!==null&&(Km(c,l),a&&lB(c)),Y_()}}function tM(t,e){for(let n=lS(t);n!==null;n=cS(n))for(let i=At;i<n.length;i++){let r=n[i];nM(r,e)}}function gB(t){for(let e=lS(t);e!==null;e=cS(e)){if(!(e[K]&tf.HasTransplantedViews))continue;let n=e[Wa];for(let i=0;i<n.length;i++){let r=n[i];SI(r)}}}function mB(t,e,n){let i=xo(e,t);nM(i,n)}function nM(t,e){W_(t)&&s_(t,e)}function s_(t,e){let i=t[J],r=t[K],o=t[Ln],s=!!(e===0&&r&16);if(s||=!!(r&64&&e===0),s||=!!(r&1024),s||=!!(o?.dirty&&oh(o)),s||=!1,o&&(o.dirty=!1),t[K]&=-9217,s)pB(i,t,i.template,t[Bt]);else if(r&8192){tM(t,1);let a=i.components;a!==null&&iM(t,a,1)}}function iM(t,e,n){for(let i=0;i<e.length;i++)mB(t,e[i],n)}function pv(t,e){let n=kI()?64:1088;for(t[cr].changeDetectionScheduler?.notify(e);t;){t[K]|=n;let i=Ns(t);if(nf(t)&&!i)return t;t=i}return null}var js=class{get rootNodes(){let e=this._lView,n=e[J];return uf(n,e,n.firstChild,[])}constructor(e,n,i=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=i,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Bt]}set context(e){this._lView[Bt]=e}get destroyed(){return(this._lView[K]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Rt];if(Ri(e)){let n=e[ef],i=n?n.indexOf(this):-1;i>-1&&($c(e,i),Kh(n,i))}this._attachedToViewContainer=!1}Af(this._lView[J],this._lView)}onDestroy(e){MI(this._lView,e)}markForCheck(){pv(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[K]&=-129}reattach(){Hy(this._lView),this._lView[K]|=128}detectChanges(){this._lView[K]|=1024,eM(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=nf(this._lView),n=this._lView[Ps];n!==null&&!e&&sv(n,this._lView),ES(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=nf(this._lView),i=this._lView[Ps];i!==null&&!n&&DS(i,this._lView),Hy(this._lView)}},Gc=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vB;let t=e;return t})(),yB=Gc,_B=class extends yB{constructor(e,n,i){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,i){let r=kf(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:i});return new js(r)}};function vB(){return gv(Dn(),Re())}function gv(t,e){return t.type&4?new _B(e,t,Ja(t,e)):null}var xB=new RegExp(`^(\\d+)*(${fS}|${hS})*(.*)`);function bB(t){let e=t.match(xB),[n,i,r,o]=e,s=i?parseInt(i,10):r,a=[];for(let[l,c,u]of o.matchAll(/(f|n)(\d*)/g)){let d=parseInt(u,10)||1;a.push(c,d)}return[s,...a]}function CB(t){return!t.prev&&t.parent?.type===8}function Iy(t){return t.index-Ot}function wB(t,e){let n=t.i18nNodes;if(n)return n.get(e)}function Lf(t,e,n,i){let r=Iy(i),o=wB(t,r);if(o===void 0){let s=t.data[KV];if(s?.[r])o=DB(s[r],n);else if(e.firstChild===i)o=t.firstChild;else{let a=i.prev===null,l=i.prev??i.parent;if(CB(i)){let c=Iy(i.parent);o=t_(t,c)}else{let c=jn(l,n);if(a)o=c.firstChild;else{let u=Iy(l),d=t_(t,u);if(l.type===2&&d){let f=nv(t,u)+1;o=Vf(f,d)}else o=c.nextSibling}}}}return o}function Vf(t,e){let n=e;for(let i=0;i<t;i++)n=n.nextSibling;return n}function EB(t,e){let n=t;for(let i=0;i<e.length;i+=2){let r=e[i],o=e[i+1];for(let s=0;s<o;s++)switch(r){case e_.FirstChild:n=n.firstChild;break;case e_.NextSibling:n=n.nextSibling;break}}return n}function DB(t,e){let[n,...i]=bB(t),r;if(n===hS)r=e[bn][xn];else if(n===fS)r=dj(e[bn][xn]);else{let o=Number(n);r=ri(e[o+Ot])}return EB(r,i)}var IB=!1;function SB(t){IB=t}function MB(t){let e=t[ii];if(e){let{i18nNodes:n,dehydratedIcuData:i}=e;if(n&&i){let r=t[ot];for(let o of i.values())TB(r,n,o)}e.i18nNodes=void 0,e.dehydratedIcuData=void 0}}function TB(t,e,n){for(let i of n.node.cases[n.case]){let r=e.get(i.index-Ot);r&&cv(t,r,!1)}}function rM(t){let e=t[zc]??[],i=t[Rt][ot];for(let r of e)AB(r,i);t[zc]=vn}function AB(t,e){let n=0,i=t.firstChild;if(i){let r=t.data[lf];for(;n<r;){let o=i.nextSibling;cv(e,i,!1),i=o,n++}}}function oM(t){rM(t);for(let e=At;e<t.length;e++)df(t[e])}function df(t){MB(t);let e=t[J];for(let n=Ot;n<e.bindingStartIndex;n++)if(Ri(t[n])){let i=t[n];oM(i)}else Mi(t[n])&&df(t[n])}function RB(t){let e=t._views;for(let n of e){let i=nj(n);if(i!==null&&i[xn]!==null)if(Mi(i))df(i);else{let r=i[xn];df(r),oM(i)}}}function OB(t,e){let n=[];for(let i of e)for(let r=0;r<(i[pS]??1);r++){let o={data:i,firstChild:null};i[lf]>0&&(o.firstChild=t,t=Vf(i[lf],t)),n.push(o)}return[t,n]}var sM=()=>null;function PB(t,e){let n=t[zc];return!e||n===null||n.length===0?null:n[0].data[ZV]===e?n.shift():(rM(t),null)}function NB(){sM=PB}function qc(t,e){return sM(t,e)}var qa=class{},mv=new L("",{providedIn:"root",factory:()=>!1});var aM=new L(""),a_=class{},hf=class{};function kB(t){let e=Error(`No component factory found for ${en(t)}.`);return e[FB]=t,e}var FB="ngComponent";var l_=class{resolveComponentFactory(e){throw kB(e)}},Sv=class Sv{};Sv.NULL=new l_;var Ya=Sv,Xa=class{},Eo=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>LB();let t=e;return t})();function LB(){let t=Re(),e=Dn(),n=xo(e.index,t);return(Mi(n)?n:t)[ot]}var VB=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>null});let t=e;return t})();var ID=new Set;function si(t){ID.has(t)||(ID.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function lM(t){let e=!0;return setTimeout(()=>{e&&(e=!1,t())}),typeof As.requestAnimationFrame=="function"&&As.requestAnimationFrame(()=>{e&&(e=!1,t())}),()=>{e=!1}}function SD(t){let e=!0;return queueMicrotask(()=>{e&&t()}),()=>{e=!1}}function MD(...t){}var Pe=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:i=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!i&&n,r.shouldCoalesceRunChangeDetection=i,r.callbackScheduled=!1,UB(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,i){return this._inner.run(e,n,i)}runTask(e,n,i,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,e,jB,MD,MD);try{return o.runTask(s,n,i)}finally{o.cancelTask(s)}}runGuarded(e,n,i){return this._inner.runGuarded(e,n,i)}runOutsideAngular(e){return this._outer.run(e)}},jB={};function yv(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function BB(t){t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,Zone.root.run(()=>{lM(()=>{t.callbackScheduled=!1,c_(t),t.isCheckStableRunning=!0,yv(t),t.isCheckStableRunning=!1})}),c_(t))}function UB(t){let e=()=>{BB(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,o,s,a)=>{if(zB(a))return n.invokeTask(r,o,s,a);try{return TD(t),n.invokeTask(r,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),AD(t)}},onInvoke:(n,i,r,o,s,a,l)=>{try{return TD(t),n.invoke(r,o,s,a,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!HB(a)&&e(),AD(t)}},onHasTask:(n,i,r,o)=>{n.hasTask(r,o),i===r&&(o.change=="microTask"?(t._hasPendingMicrotasks=o.microTask,c_(t),yv(t)):o.change=="macroTask"&&(t.hasPendingMacrotasks=o.macroTask))},onHandleError:(n,i,r,o)=>(n.handleError(r,o),t.runOutsideAngular(()=>t.onError.emit(o)),!1)})}function c_(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function TD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function AD(t){t._nesting--,yv(t)}var u_=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Xe,this.onMicrotaskEmpty=new Xe,this.onStable=new Xe,this.onError=new Xe}run(e,n,i){return e.apply(n,i)}runGuarded(e,n,i){return e.apply(n,i)}runOutsideAngular(e){return e()}runTask(e,n,i,r){return e.apply(n,i)}};function zB(t){return cM(t,"__ignore_ng_zone__")}function HB(t){return cM(t,"__scheduler_tick__")}function cM(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var fo=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(fo||{}),$B={destroy(){}};function jf(t,e){!e&&yI(jf);let n=e?.injector??I(Cn);if(!kc(n))return $B;si("NgAfterNextRender");let i=n.get(_v),r=i.handler??=new h_,o=e?.phase??fo.MixedReadWrite,s=()=>{r.unregister(l),a()},a=n.get(tu).onDestroy(s),l=wn(n,()=>new d_(o,()=>{s(),t()}));return r.register(l),{destroy:s}}var d_=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=I(Pe),this.errorHandler=I(Vn,{optional:!0}),I(qa,{optional:!0})?.notify(6)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},h_=class{constructor(){this.executingCallbacks=!1,this.buckets={[fo.EarlyRead]:new Set,[fo.Write]:new Set,[fo.MixedReadWrite]:new Set,[fo.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},_v=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let i=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let r of i)r()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function f_(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)r=nD(r,a);else if(o==2){let l=a,c=e[++s];i=nD(i,l+": "+c+";")}}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}var ff=class extends Ya{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=go(e);return new Za(n,this.ngModule)}};function RD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let i=t[n];i!==void 0&&e.push({propName:Array.isArray(i)?i[0]:i,templateName:n})}return e}function WB(t){let e=t.toLowerCase();return e==="svg"?X2:e==="math"?Z2:null}var Za=class extends hf{get inputs(){let e=this.componentDef,n=e.inputTransforms,i=RD(e.inputs);if(n!==null)for(let r of i)n.hasOwnProperty(r.propName)&&(r.transform=n[r.propName]);return i}get outputs(){return RD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=T2(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,i,r){let o=ye(null);try{r=r||this.ngModule;let s=r instanceof Ut?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Wy(e,s):e,l=a.get(Xa,null);if(l===null)throw new $(407,!1);let c=a.get(VB,null),u=a.get(_v,null),d=a.get(qa,null),h={rendererFactory:l,sanitizer:c,inlineEffectRunner:null,afterRenderEventManager:u,changeDetectionScheduler:d},f=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=i?Nj(f,i,this.componentDef.encapsulation,a):ov(f,p,WB(p)),g=512;this.componentDef.signals?g|=4096:this.componentDef.onPush||(g|=16);let y=null;m!==null&&(y=tv(m,a,!0));let _=dv(0,null,null,1,0,null,null,null,null,null,null),x=Of(null,_,null,g,null,null,h,f,a,null,y);q_(x);let b,v;try{let C=this.componentDef,E,w=null;C.findHostDirectiveDefs?(E=[],w=new Map,C.findHostDirectiveDefs(C,E,w),E.push(C)):E=[C];let D=GB(x,m),A=qB(D,m,C,E,x,h,f);v=$_(_,Ot),m&&ZB(f,C,m,i),n!==void 0&&KB(v,this.ngContentSelectors,n),b=XB(A,C,E,w,x,[QB]),fv(_,x,null)}finally{Y_()}return new p_(this.componentType,b,Ja(v,x),x,v)}finally{ye(o)}}},p_=class extends a_{constructor(e,n,i,r,o){super(),this.location=i,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new js(r,void 0,!1),this.componentType=e}setInput(e,n){let i=this._tNode.inputs,r;if(i!==null&&(r=i[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let o=this._rootLView;hv(o[J],o,r,e,n),this.previousInputValues.set(e,n);let s=xo(this._tNode.index,o);pv(s,1)}}get injector(){return new Rs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function GB(t,e){let n=t[J],i=Ot;return t[i]=e,Pf(n,i,2,"#host",null)}function qB(t,e,n,i,r,o,s){let a=r[J];YB(i,t,e,s);let l=null;e!==null&&(l=tv(e,r[$a]));let c=o.rendererFactory.createRenderer(e,n),u=16;n.signals?u=4096:n.onPush&&(u=64);let d=Of(r,jS(n),null,u,r[t.index],t,o,c,null,null,l);return a.firstCreatePass&&r_(a,t,i.length-1),Nf(r,d),r[t.index]=d}function YB(t,e,n,i){for(let r of t)e.mergedAttrs=jc(e.mergedAttrs,r.hostAttrs);e.mergedAttrs!==null&&(f_(e,e.mergedAttrs,!0),n!==null&&AS(i,n,e))}function XB(t,e,n,i,r,o){let s=Dn(),a=r[J],l=jn(s,r);zS(a,r,s,n,null,i);for(let u=0;u<n.length;u++){let d=s.directiveStart+u,h=Ls(r,a,d,s);Vs(h,r)}HS(a,r,s),l&&Vs(l,r);let c=Ls(r,a,s.directiveStart+s.componentOffset,s);if(t[Bt]=r[Bt]=c,o!==null)for(let u of o)u(c,e);return FS(a,s,r),c}function ZB(t,e,n,i){if(i)Vy(t,n,["ng-version","18.0.4"]);else{let{attrs:r,classes:o}=A2(e.selectors[0]);r&&Vy(t,n,r),o&&o.length>0&&TS(t,n,o.join(" "))}}function KB(t,e,n){let i=t.projection=[];for(let r=0;r<e.length;r++){let o=n[r];i.push(o!=null?Array.from(o):null)}}function QB(){let t=Dn();Z_(Re()[J],t)}var tl=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=JB;let t=e;return t})();function JB(){let t=Dn();return dM(t,Re())}var eU=tl,uM=class extends eU{constructor(e,n,i){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=i}get element(){return Ja(this._hostTNode,this._hostLView)}get injector(){return new Rs(this._hostTNode,this._hostLView)}get parentInjector(){let e=K_(this._hostTNode,this._hostLView);if(GI(e)){let n=of(e,this._hostLView),i=rf(e),r=n[J].data[i+8];return new Rs(r,n)}else return new Rs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=OD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-At}createEmbeddedView(e,n,i){let r,o;typeof i=="number"?r=i:i!=null&&(r=i.index,o=i.injector);let s=qc(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,r,Wc(this._hostTNode,s)),a}createComponent(e,n,i,r,o){let s=e&&!W2(e),a;if(s)a=n;else{let p=n||{};a=p.index,i=p.injector,r=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let l=s?e:new Za(go(e)),c=i||this.parentInjector;if(!o&&l.ngModule==null){let m=(s?c:this.parentInjector).get(Ut,null);m&&(o=m)}let u=go(l.componentType??{}),d=qc(this._lContainer,u?.id??null),h=d?.firstChild??null,f=l.create(c,r,h,o);return this.insertImpl(f.hostView,a,Wc(this._hostTNode,d)),f}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,i){let r=e._lView;if(Q2(r)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let l=r[Rt],c=new uM(l,l[oi],l[Rt]);c.detach(c.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Ff(s,r,o,i),e.attachToViewContainerRef(),eI(Sy(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=OD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),i=$c(this._lContainer,n);i&&(Kh(Sy(this._lContainer),n),Af(i[J],i))}detach(e){let n=this._adjustIndex(e,-1),i=$c(this._lContainer,n);return i&&Kh(Sy(this._lContainer),n)!=null?new js(i):null}_adjustIndex(e,n=0){return e??this.length+n}};function OD(t){return t[ef]}function Sy(t){return t[ef]||(t[ef]=[])}function dM(t,e){let n,i=e[t.index];return Ri(i)?n=i:(n=$S(i,e,null,t),e[t.index]=n,Nf(e,n)),hM(n,e,t,i),new uM(n,t,e)}function tU(t,e){let n=t[ot],i=n.createComment(""),r=jn(e,t),o=av(n,r);return cf(n,o,i,wj(n,r),!1),i}var hM=fM,vv=()=>!1;function nU(t,e,n){return vv(t,e,n)}function fM(t,e,n,i){if(t[dr])return;let r;n.type&8?r=ri(i):r=tU(e,n),t[dr]=r}function iU(t,e,n){if(t[dr]&&t[zc])return!0;let i=n[ii],r=e.index-Ot;if(!i||BV(e)||Tf(i,r))return!1;let s=t_(i,r),a=i.data[ev]?.[r],[l,c]=OB(s,a);return t[dr]=l,t[zc]=c,!0}function rU(t,e,n,i){vv(t,n,e)||fM(t,e,n,i)}function oU(){hM=rU,vv=iU}var g_=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},m_=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let n=e.queries;if(n!==null){let i=e.contentQueries!==null?e.contentQueries[0]:n.length,r=[];for(let o=0;o<i;o++){let s=n.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new t(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)xv(e,n).matches!==null&&this.queries[n].setDirty()}},y_=class{constructor(e,n,i=null){this.flags=n,this.read=i,typeof e=="string"?this.predicate=fU(e):this.predicate=e}},__=class t{constructor(e=[]){this.queries=e}elementStart(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let i=0;i<this.length;i++){let r=n!==null?n.length:0,o=this.getByIndex(i).embeddedTView(e,r);o&&(o.indexInDeclarationView=i,n!==null?n.push(o):n=[o])}return n!==null?new t(n):null}template(e,n){for(let i=0;i<this.queries.length;i++)this.queries[i].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},v_=class t{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let n=this._declarationNodeIndex,i=e.parent;for(;i!==null&&i.type&8&&i.index!==n;)i=i.parent;return n===(i!==null?i.index:-1)}return this._appliesToNextNode}matchTNode(e,n){let i=this.metadata.predicate;if(Array.isArray(i))for(let r=0;r<i.length;r++){let o=i[r];this.matchTNodeWithReadOption(e,n,sU(n,o)),this.matchTNodeWithReadOption(e,n,Gh(n,e,o,!1,!1))}else i===Gc?n.type&4&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,Gh(n,e,i,!1,!1))}matchTNodeWithReadOption(e,n,i){if(i!==null){let r=this.metadata.read;if(r!==null)if(r===tn||r===tl||r===Gc&&n.type&4)this.addMatch(n.index,-2);else{let o=Gh(n,e,r,!1,!1);o!==null&&this.addMatch(n.index,o)}else this.addMatch(n.index,i)}}addMatch(e,n){this.matches===null?this.matches=[e,n]:this.matches.push(e,n)}};function sU(t,e){let n=t.localNames;if(n!==null){for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1]}return null}function aU(t,e){return t.type&11?Ja(t,e):t.type&4?gv(t,e):null}function lU(t,e,n,i){return n===-1?aU(e,t):n===-2?cU(t,e,i):Ls(t,t[J],n,e)}function cU(t,e,n){if(n===tn)return Ja(e,t);if(n===Gc)return gv(e,t);if(n===tl)return dM(e,t)}function pM(t,e,n,i){let r=e[ur].queries[i];if(r.matches===null){let o=t.data,s=n.matches,a=[];for(let l=0;s!==null&&l<s.length;l+=2){let c=s[l];if(c<0)a.push(null);else{let u=o[c];a.push(lU(e,u,s[l+1],n.metadata.read))}}r.matches=a}return r.matches}function x_(t,e,n,i){let r=t.queries.getByIndex(n),o=r.matches;if(o!==null){let s=pM(t,e,r,n);for(let a=0;a<o.length;a+=2){let l=o[a];if(l>0)i.push(s[a/2]);else{let c=o[a+1],u=e[-l];for(let d=At;d<u.length;d++){let h=u[d];h[Ps]===h[Rt]&&x_(h[J],h,c,i)}if(u[Wa]!==null){let d=u[Wa];for(let h=0;h<d.length;h++){let f=d[h];x_(f[J],f,c,i)}}}}}return i}function uU(t,e){return t[ur].queries[e].queryList}function dU(t,e,n){let i=new Qy((n&4)===4);return Vj(t,e,i,i.destroy),(e[ur]??=new m_).queries.push(new g_(i))-1}function hU(t,e,n){let i=En();return i.firstCreatePass&&(pU(i,new y_(t,e,n),-1),(e&2)===2&&(i.staticViewQueries=!0)),dU(i,Re(),e)}function fU(t){return t.split(",").map(e=>e.trim())}function pU(t,e,n){t.queries===null&&(t.queries=new __),t.queries.track(new v_(e,n))}function xv(t,e){return t.queries.getByIndex(e)}function gU(t,e){let n=t[J],i=xv(n,e);return i.crossesNgTemplate?x_(n,t,e,[]):pM(n,t,i,e)}function nu(t,e){si("NgSignals");let n=SE(t),i=n[ao];return e?.equal&&(i.equal=e.equal),n.set=r=>ch(i,r),n.update=r=>ME(i,r),n.asReadonly=mU.bind(n),n}function mU(){let t=this[ao];if(t.readonlyFn===void 0){let e=()=>this();e[ao]=t,t.readonlyFn=e}return t.readonlyFn}function yU(t){return Object.getPrototypeOf(t.prototype).constructor}function Do(t){let e=yU(t.type),n=!0,i=[t];for(;e;){let r;if(mo(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new $(903,!1);r=e.\u0275dir}if(r){if(n){i.push(r);let s=t;s.inputs=jh(t.inputs),s.inputTransforms=jh(t.inputTransforms),s.declaredInputs=jh(t.declaredInputs),s.outputs=jh(t.outputs);let a=r.hostBindings;a&&CU(t,a);let l=r.viewQuery,c=r.contentQueries;if(l&&xU(t,l),c&&bU(t,c),_U(t,r),YL(t.outputs,r.outputs),mo(r)&&r.data.animation){let u=t.data;u.animation=(u.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(t),a===Do&&(n=!1)}}e=Object.getPrototypeOf(e)}vU(i)}function _U(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let i=e.inputs[n];if(i!==void 0&&(t.inputs[n]=i,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let r=Array.isArray(i)?i[0]:i;if(!e.inputTransforms.hasOwnProperty(r))continue;t.inputTransforms??={},t.inputTransforms[r]=e.inputTransforms[r]}}}function vU(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){let r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=jc(r.hostAttrs,n=jc(n,r.hostAttrs))}}function jh(t){return t===Ua?{}:t===vn?[]:t}function xU(t,e){let n=t.viewQuery;n?t.viewQuery=(i,r)=>{e(i,r),n(i,r)}:t.viewQuery=e}function bU(t,e){let n=t.contentQueries;n?t.contentQueries=(i,r,o)=>{e(i,r,o),n(i,r,o)}:t.contentQueries=e}function CU(t,e){let n=t.hostBindings;n?t.hostBindings=(i,r)=>{e(i,r),n(i,r)}:t.hostBindings=e}var yo=class{},Yc=class{};var b_=class extends yo{constructor(e,n,i){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ff(this);let r=cI(e);this._bootstrapComponents=bS(r.bootstrap),this._r3Injector=tS(e,n,[{provide:yo,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver},...i],en(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},C_=class extends Yc{constructor(e){super(),this.moduleType=e}create(e){return new b_(this.moduleType,e,[])}};var pf=class extends yo{constructor(e){super(),this.componentFactoryResolver=new ff(this),this.instance=null;let n=new Bc([...e.providers,{provide:yo,useValue:this},{provide:Ya,useValue:this.componentFactoryResolver}],e.parent||z_(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Bf(t,e,n=null){return new pf({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}function _o(t,e,n){let i=t[e];return Object.is(i,n)?!1:(t[e]=n,!0)}function wU(t,e,n,i){let r=_o(t,e,n);return _o(t,e+1,i)||r}function EU(t,e,n,i,r){let o=wU(t,e,n,i);return _o(t,e+2,r)||o}function iu(t){return(t.flags&32)===32}function DU(t,e,n,i,r,o,s,a,l){let c=e.consts,u=Pf(e,t,4,s||null,a||null);US(e,n,u,Ga(c,l)),Z_(e,u);let d=u.tView=dv(2,u,i,r,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function w_(t,e,n,i,r,o,s,a,l,c){let u=n+Ot,d=e.firstCreatePass?DU(u,e,t,i,r,o,s,a,l):e.data[u];eu(d,!1);let h=gM(e,t,d,n);X_()&&lv(e,t,h,d),Vs(h,t);let f=$S(h,t,h,d);return t[u]=f,Nf(t,f),nU(f,d,t),H_(d)&&LS(e,t,d),l!=null&&VS(t,d,c),d}function nl(t,e,n,i,r,o,s,a){let l=Re(),c=En(),u=Ga(c.consts,o);return w_(l,c,t,e,n,i,r,u,s,a),nl}var gM=mM;function mM(t,e,n,i){return Co(!0),e[ot].createComment("")}function IU(t,e,n,i){let r=e[ii],o=!r||Jc()||iu(n)||Tf(r,i);if(Co(o),o)return mM(t,e,n,i);let s=r.data[XV]?.[i]??null;s!==null&&n.tView!==null&&n.tView.ssrId===null&&(n.tView.ssrId=s);let a=Lf(r,t,e,n);Mf(r,i,a);let l=nv(r,i);return Vf(l,a)}function SU(){gM=IU}function MU(t,e,n,i){return _o(t,Df(),n)?e+Lc(n)+i:mr}function TU(t,e,n,i,r,o,s,a){let l=cV(),c=EU(t,l,n,r,s);return FI(3),c?e+Lc(n)+i+Lc(r)+o+Lc(s)+a:mr}function Bh(t,e){return t<<17|e<<2}function Bs(t){return t>>17&32767}function AU(t){return(t&2)==2}function RU(t,e){return t&131071|e<<17}function E_(t){return t|2}function Ka(t){return(t&131068)>>2}function My(t,e){return t&-131069|e<<2}function OU(t){return(t&1)===1}function D_(t){return t|1}function PU(t,e,n,i,r,o){let s=o?e.classBindings:e.styleBindings,a=Bs(s),l=Ka(s);t[i]=n;let c=!1,u;if(Array.isArray(n)){let d=n;u=d[1],(u===null||Kc(d,u)>0)&&(c=!0)}else u=n;if(r)if(l!==0){let h=Bs(t[a+1]);t[i+1]=Bh(h,a),h!==0&&(t[h+1]=My(t[h+1],i)),t[a+1]=RU(t[a+1],i)}else t[i+1]=Bh(a,0),a!==0&&(t[a+1]=My(t[a+1],i)),a=i;else t[i+1]=Bh(l,0),a===0?a=i:t[l+1]=My(t[l+1],i),l=i;c&&(t[i+1]=E_(t[i+1])),PD(t,u,i,!0),PD(t,u,i,!1),NU(e,u,t,i,o),s=Bh(a,l),o?e.classBindings=s:e.styleBindings=s}function NU(t,e,n,i,r){let o=r?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&Kc(o,e)>=0&&(n[i+1]=D_(n[i+1]))}function PD(t,e,n,i){let r=t[n+1],o=e===null,s=i?Bs(r):Ka(r),a=!1;for(;s!==0&&(a===!1||o);){let l=t[s],c=t[s+1];kU(l,e)&&(a=!0,t[s+1]=i?D_(c):E_(c)),s=i?Bs(c):Ka(c)}a&&(t[n+1]=i?E_(r):D_(r))}function kU(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?Kc(t,e)>=0:!1}function yr(t,e,n){let i=Re(),r=Df();if(_o(i,r,e)){let o=En(),s=yV();zj(o,s,i,t,e,i[ot],n,!1)}return yr}function ND(t,e,n,i,r){let o=e.inputs,s=r?"class":"style";hv(t,n,o[s],s,i)}function bv(t,e){return FU(t,e,null,!0),bv}function FU(t,e,n,i){let r=Re(),o=En(),s=FI(2);if(o.firstUpdatePass&&VU(o,t,s,i),e!==mr&&_o(r,s,e)){let a=o.data[bo()];HU(o,a,r,r[ot],t,r[s+1]=$U(e,n),i,s)}}function LU(t,e){return e>=t.expandoStartIndex}function VU(t,e,n,i){let r=t.data;if(r[n+1]===null){let o=r[bo()],s=LU(t,n);WU(o,i)&&e===null&&!s&&(e=!1),e=jU(r,o,e,i),PU(r,o,e,n,s,i)}}function jU(t,e,n,i){let r=pV(t),o=i?e.residualClasses:e.residualStyles;if(r===null)(i?e.classBindings:e.styleBindings)===0&&(n=Ty(null,t,e,n,i),n=Xc(n,e.attrs,i),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==r)if(n=Ty(r,t,e,n,i),o===null){let l=BU(t,e,i);l!==void 0&&Array.isArray(l)&&(l=Ty(null,t,e,l[1],i),l=Xc(l,e.attrs,i),UU(t,e,i,l))}else o=zU(t,e,i)}return o!==void 0&&(i?e.residualClasses=o:e.residualStyles=o),n}function BU(t,e,n){let i=n?e.classBindings:e.styleBindings;if(Ka(i)!==0)return t[Bs(i)]}function UU(t,e,n,i){let r=n?e.classBindings:e.styleBindings;t[Bs(r)]=i}function zU(t,e,n){let i,r=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<r;o++){let s=t[o].hostAttrs;i=Xc(i,s,n)}return Xc(i,e.attrs,n)}function Ty(t,e,n,i,r){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=e[a],i=Xc(i,o.hostAttrs,r),o!==t);)a++;return t!==null&&(n.directiveStylingLast=a),i}function Xc(t,e,n){let i=n?1:2,r=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?r=s:r===i&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),m2(t,s,n?!0:e[++o]))}return t===void 0?null:t}function HU(t,e,n,i,r,o,s,a){if(!(e.type&3))return;let l=t.data,c=l[a+1],u=OU(c)?kD(l,e,n,r,Ka(c),s):void 0;if(!gf(u)){gf(o)||AU(c)&&(o=kD(l,null,n,r,a,s));let d=DI(bo(),n);Tj(i,s,d,r,o)}}function kD(t,e,n,i,r,o){let s=e===null,a;for(;r>0;){let l=t[r],c=Array.isArray(l),u=c?l[1]:l,d=u===null,h=n[r+1];h===mr&&(h=d?vn:void 0);let f=d?_y(h,i):u===i?h:void 0;if(c&&!gf(f)&&(f=_y(l,i)),gf(f)&&(a=f,s))return a;let p=t[r+1];r=s?Bs(p):Ka(p)}if(e!==null){let l=o?e.residualClasses:e.residualStyles;l!=null&&(a=_y(l,i))}return a}function gf(t){return t!==void 0}function $U(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=en(iv(t)))),t}function WU(t,e){return(t.flags&(e?8:16))!==0}var I_=class{destroy(e){}updateValue(e,n){}swap(e,n){let i=Math.min(e,n),r=Math.max(e,n),o=this.detach(r);if(r-i>1){let s=this.detach(i);this.attach(i,o),this.attach(r,s)}else this.attach(i,o)}move(e,n){this.attach(n,this.detach(e))}};function Ay(t,e,n,i,r){return t===n&&Object.is(e,i)?1:Object.is(r(t,e),r(n,i))?-1:0}function GU(t,e,n){let i,r,o=0,s=t.length-1,a=void 0;if(Array.isArray(e)){let l=e.length-1;for(;o<=s&&o<=l;){let c=t.at(o),u=e[o],d=Ay(o,c,o,u,n);if(d!==0){d<0&&t.updateValue(o,u),o++;continue}let h=t.at(s),f=e[l],p=Ay(s,h,l,f,n);if(p!==0){p<0&&t.updateValue(s,f),s--,l--;continue}let m=n(o,c),g=n(s,h),y=n(o,u);if(Object.is(y,g)){let _=n(l,f);Object.is(_,m)?(t.swap(o,s),t.updateValue(s,f),l--,s--):t.move(s,o),t.updateValue(o,u),o++;continue}if(i??=new mf,r??=LD(t,o,s,n),S_(t,i,o,y))t.updateValue(o,u),o++,s++;else if(r.has(y))i.set(m,t.detach(o)),s--;else{let _=t.create(o,e[o]);t.attach(o,_),o++,s++}}for(;o<=l;)FD(t,i,n,o,e[o]),o++}else if(e!=null){let l=e[Symbol.iterator](),c=l.next();for(;!c.done&&o<=s;){let u=t.at(o),d=c.value,h=Ay(o,u,o,d,n);if(h!==0)h<0&&t.updateValue(o,d),o++,c=l.next();else{i??=new mf,r??=LD(t,o,s,n);let f=n(o,d);if(S_(t,i,o,f))t.updateValue(o,d),o++,s++,c=l.next();else if(!r.has(f))t.attach(o,t.create(o,d)),o++,s++,c=l.next();else{let p=n(o,u);i.set(p,t.detach(o)),s--}}}for(;!c.done;)FD(t,i,n,t.length,c.value),c=l.next()}for(;o<=s;)t.destroy(t.detach(s--));i?.forEach(l=>{t.destroy(l)})}function S_(t,e,n,i){return e!==void 0&&e.has(i)?(t.attach(n,e.get(i)),e.delete(i),!0):!1}function FD(t,e,n,i,r){if(S_(t,e,i,n(i,r)))t.updateValue(i,r);else{let o=t.create(i,r);t.attach(i,o)}}function LD(t,e,n,i){let r=new Set;for(let o=e;o<=n;o++)r.add(i(o,t.at(o)));return r}var mf=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let i=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(i);)i=r.get(i);r.set(i,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,i]of this.kvMap)if(e(i,n),this._vMap!==void 0){let r=this._vMap;for(;r.has(i);)i=r.get(i),e(i,n)}}};function ru(t,e){si("NgControlFlow");let n=Re(),i=Df(),r=n[i]!==mr?n[i]:-1,o=r!==-1?yf(n,Ot+r):void 0,s=0;if(_o(n,i,t)){let a=ye(null);try{if(o!==void 0&&KS(o,s),t!==-1){let l=Ot+t,c=yf(n,l),u=R_(n[J],l),d=qc(c,u.tView.ssrId),h=kf(n,u,e,{dehydratedView:d});Ff(c,h,s,Wc(u,d))}}finally{ye(a)}}else if(o!==void 0){let a=ZS(o,s);a!==void 0&&(a[Bt]=e)}}var M_=class{constructor(e,n,i){this.lContainer=e,this.$implicit=n,this.$index=i}get $count(){return this.lContainer.length-At}};function yM(t){return t}var T_=class{constructor(e,n,i){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=i}};function _M(t,e,n,i,r,o,s,a,l,c,u,d,h){si("NgControlFlow");let f=Re(),p=En(),m=l!==void 0,g=Re(),y=a?s.bind(g[bn][Bt]):s,_=new T_(m,y);g[Ot+t]=_,w_(f,p,t+1,e,n,i,r,Ga(p.consts,o)),m&&w_(f,p,t+2,l,c,u,d,Ga(p.consts,h))}var A_=class extends I_{constructor(e,n,i){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=i,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-At}at(e){return this.getLView(e)[Bt].$implicit}attach(e,n){let i=n[ii];this.needsIndexUpdate||=e!==this.length,Ff(this.lContainer,n,e,Wc(this.templateTNode,i))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,qU(this.lContainer,e)}create(e,n){let i=qc(this.lContainer,this.templateTNode.tView.ssrId),r=kf(this.hostLView,this.templateTNode,new M_(this.lContainer,n,e),{dehydratedView:i});return this.operationsCounter?.recordCreate(),r}destroy(e){Af(e[J],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Bt].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Bt].$index=e}getLView(e){return YU(this.lContainer,e)}};function vM(t){let e=ye(null),n=bo();try{let i=Re(),r=i[J],o=i[n],s=n+1,a=yf(i,s);if(o.liveCollection===void 0){let c=R_(r,s);o.liveCollection=new A_(a,i,c)}else o.liveCollection.reset();let l=o.liveCollection;if(GU(l,t,o.trackByFn),l.updateIndexes(),o.hasEmptyBlock){let c=Df(),u=l.length===0;if(_o(i,c,u)){let d=n+2,h=yf(i,d);if(u){let f=R_(r,d),p=qc(h,f.tView.ssrId),m=kf(i,f,void 0,{dehydratedView:p});Ff(h,m,0,Wc(f,p))}else KS(h,0)}}}finally{ye(e)}}function yf(t,e){return t[e]}function qU(t,e){return $c(t,e)}function YU(t,e){return ZS(t,e)}function R_(t,e){return $_(t,e)}function XU(t,e,n,i,r,o){let s=e.consts,a=Ga(s,r),l=Pf(e,t,2,i,a);return US(e,n,l,Ga(s,o)),l.attrs!==null&&f_(l,l.attrs,!1),l.mergedAttrs!==null&&f_(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function Io(t,e,n,i){let r=Re(),o=En(),s=Ot+t,a=r[ot],l=o.firstCreatePass?XU(s,o,r,e,n,i):o.data[s],c=xM(o,r,l,a,e,t);r[s]=c;let u=H_(l);return eu(l,!0),AS(a,c,l),!iu(l)&&X_()&&lv(o,r,c,l),tV()===0&&Vs(c,r),nV(),u&&(LS(o,r,l),FS(o,l,r)),i!==null&&VS(r,l),Io}function _r(){let t=Dn();NI()?lV():(t=t.parent,eu(t,!1));let e=t;rV(e)&&sV(),iV();let n=En();return n.firstCreatePass&&(Z_(n,t),xI(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&bV(e)&&ND(n,e,Re(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&CV(e)&&ND(n,e,Re(),e.stylesWithoutHost,!1),_r}function vr(t,e,n,i){return Io(t,e,n,i),_r(),vr}var xM=(t,e,n,i,r,o)=>(Co(!0),ov(i,r,HI()));function ZU(t,e,n,i,r,o){let s=e[ii],a=!s||Jc()||iu(n)||Tf(s,o);if(Co(a),a)return ov(i,r,HI());let l=Lf(s,t,e,n);return _S(s,o)&&Mf(s,o,l.nextSibling),s&&(oS(n)||sS(l))&&Qc(n)&&(oV(n),MS(l)),l}function KU(){xM=ZU}var QU=(t,e,n,i)=>(Co(!0),wS(e[ot],""));function JU(t,e,n,i){let r,o=e[ii],s=!o||Jc()||iu(n);if(Co(s),s)return wS(e[ot],"");let a=Lf(o,t,e,n),l=oj(o,i);return Mf(o,i,a),r=Vf(l,a),r}function ez(){QU=JU}function bM(){return Re()}var Ms=void 0;function tz(t){let e=t,n=Math.floor(Math.abs(t)),i=t.toString().replace(/^[^.]*\.?/,"").length;return n===1&&i===0?1:5}var nz=["en",[["a","p"],["AM","PM"],Ms],[["AM","PM"],Ms,Ms],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ms,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ms,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ms,"{1} 'at' {0}",Ms],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",tz],Ry={};function Bn(t){let e=iz(t),n=VD(e);if(n)return n;let i=e.split("-")[0];if(n=VD(i),n)return n;if(i==="en")return nz;throw new $(701,!1)}function VD(t){return t in Ry||(Ry[t]=As.ng&&As.ng.common&&As.ng.common.locales&&As.ng.common.locales[t]),Ry[t]}var st=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}(st||{});function iz(t){return t.toLowerCase().replace(/_/g,"-")}var _f="en-US";var rz=_f;function oz(t){typeof t=="string"&&(rz=t.toLowerCase().replace(/_/g,"-"))}var sz=(t,e,n)=>{};function xr(t,e,n,i){let r=Re(),o=En(),s=Dn();return lz(o,r,r[ot],s,t,e,i),xr}function az(t,e,n,i){let r=t.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===n&&r[o+1]===i){let a=e[Jh],l=r[o+2];return a.length>l?a[l]:null}typeof s=="string"&&(o+=2)}return null}function lz(t,e,n,i,r,o,s){let a=H_(i),c=t.firstCreatePass&&qS(t),u=e[Bt],d=GS(e),h=!0;if(i.type&3||s){let m=jn(i,e),g=s?s(m):m,y=d.length,_=s?b=>s(ri(b[i.index])):i.index,x=null;if(!s&&a&&(x=az(t,e,r,i.index)),x!==null){let b=x.__ngLastListenerFn__||x;b.__ngNextListenerFn__=o,x.__ngLastListenerFn__=o,h=!1}else{o=BD(i,e,u,o),sz(m,r,o);let b=n.listen(g,r,o);d.push(o,b),c&&c.push(r,_,y,y+1)}}else o=BD(i,e,u,o);let f=i.outputs,p;if(h&&f!==null&&(p=f[r])){let m=p.length;if(m)for(let g=0;g<m;g+=2){let y=p[g],_=p[g+1],v=e[y][_].subscribe(o),C=d.length;d.push(o,v),c&&c.push(r,i.index,C,-(C+1))}}}function jD(t,e,n,i){let r=ye(null);try{return Ii(6,e,n),n(i)!==!1}catch(o){return YS(t,o),!1}finally{Ii(7,e,n),ye(r)}}function BD(t,e,n,i){return function r(o){if(o===Function)return i;let s=t.componentOffset>-1?xo(t.index,e):e;pv(s,5);let a=jD(e,n,i,o),l=r.__ngNextListenerFn__;for(;l;)a=jD(e,n,l,o)&&a,l=l.__ngNextListenerFn__;return a}}function il(t=1){return mV(t)}function CM(t,e,n){hU(t,e,n)}function Cv(t){let e=Re(),n=En(),i=LI();G_(i+1);let r=xv(n,i);if(t.dirty&&K2(e)===((r.metadata.flags&2)===2)){if(r.matches===null)t.reset([]);else{let o=gU(e,i);t.reset(o,FV),t.notifyOnChanges()}return!0}return!1}function wv(){return uU(Re(),LI())}function ou(t,e=""){let n=Re(),i=En(),r=t+Ot,o=i.firstCreatePass?Pf(i,r,1,e,null):i.data[r],s=wM(i,n,o,e,t);n[r]=s,X_()&&lv(i,n,s,o),eu(o,!1)}var wM=(t,e,n,i,r)=>(Co(!0),CS(e[ot],i));function cz(t,e,n,i,r){let o=e[ii],s=!o||Jc()||iu(n)||Tf(o,r);return Co(s),s?CS(e[ot],i):Lf(o,t,e,n)}function uz(){wM=cz}function Ev(t,e,n){let i=Re(),r=MU(i,t,e,n);return r!==mr&&XS(i,bo(),r),Ev}function Dv(t,e,n,i,r,o,s){let a=Re(),l=TU(a,t,e,n,i,r,o,s);return l!==mr&&XS(a,bo(),l),Dv}function dz(t,e,n){let i=En();if(i.firstCreatePass){let r=mo(t);O_(n,i.data,i.blueprint,r,!0),O_(e,i.data,i.blueprint,r,!1)}}function O_(t,e,n,i,r){if(t=Xt(t),Array.isArray(t))for(let o=0;o<t.length;o++)O_(t[o],e,n,i,r);else{let o=En(),s=Re(),a=Dn(),l=Ha(t)?t:Xt(t.provide),c=gI(t),u=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Ha(t)||!t.multi){let f=new Fs(c,r,Ee),p=Py(l,e,r?u:u+h,d);p===-1?(qy(sf(a,s),o,l),Oy(o,t,e.length),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=Py(l,e,u+h,d),p=Py(l,e,u,u+h),m=f>=0&&n[f],g=p>=0&&n[p];if(r&&!g||!r&&!m){qy(sf(a,s),o,l);let y=pz(r?fz:hz,n.length,r,i,c);!r&&g&&(n[p].providerFactory=y),Oy(o,t,e.length,0),e.push(l),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),n.push(y),s.push(y)}else{let y=EM(n[r?p:f],c,!r&&i);Oy(o,t,f>-1?f:p,y)}!r&&i&&g&&n[p].componentProviders++}}}function Oy(t,e,n,i){let r=Ha(e),o=V2(e);if(r||o){let l=(o?Xt(e.useClass):e).prototype.ngOnDestroy;if(l){let c=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){let u=c.indexOf(n);u===-1?c.push(n,[i,l]):c[u+1].push(i,l)}else c.push(n,l)}}}function EM(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Py(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function hz(t,e,n,i){return P_(this.multi,[])}function fz(t,e,n,i){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Ls(n,n[J],this.providerFactory.index,i);o=a.slice(0,s),P_(r,o);for(let l=s;l<a.length;l++)o.push(a[l])}else o=[],P_(r,o);return o}function P_(t,e){for(let n=0;n<t.length;n++){let i=t[n];e.push(i())}return e}function pz(t,e,n,i,r){let o=new Fs(t,n,Ee);return o.multi=[],o.index=e,o.componentProviders=0,EM(o,r,i&&!n),o}function su(t,e=[]){return n=>{n.providersResolver=(i,r)=>dz(i,r?r(t):t,e)}}var gz=(()=>{let e=class e{constructor(i){this._injector=i,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(i){if(!i.standalone)return null;if(!this.cachedInjectors.has(i)){let r=hI(!1,i.type),o=r.length>0?Bf([r],this._injector,`Standalone[${i.type.name}]`):null;this.cachedInjectors.set(i,o)}return this.cachedInjectors.get(i)}ngOnDestroy(){try{for(let i of this.cachedInjectors.values())i!==null&&i.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=j({token:e,providedIn:"environment",factory:()=>new e(G(Ut))});let t=e;return t})();function Pi(t){si("NgStandalone"),t.getStandaloneInjector=e=>e.get(gz).getOrCreateStandaloneInjector(t)}var Uf=(()=>{let e=class e{log(i){console.log(i)}warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var DM=new L("");function Hs(t){return!!t&&typeof t.then=="function"}function IM(t){return!!t&&typeof t.subscribe=="function"}var zf=new L(""),SM=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((i,r)=>{this.resolve=i,this.reject=r}),this.appInits=I(zf,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let i=[];for(let o of this.appInits){let s=o();if(Hs(s))i.push(s);else if(IM(s)){let a=new Promise((l,c)=>{s.subscribe({complete:l,error:c})});i.push(a)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(i).then(()=>{r()}).catch(o=>{this.reject(o)}),i.length===0&&r(),this.initialized=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),$s=new L("");function mz(){IE(()=>{throw new $(600,!1)})}function yz(t){return t.isBoundToModule}var _z=10;function vz(t,e,n){try{let i=n();return Hs(i)?i.catch(r=>{throw e.runOutsideAngular(()=>t.handleError(r)),r}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}var br=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=I(nS),this.afterRenderEffectManager=I(_v),this.zonelessEnabled=I(mv),this.externalTestViews=new Set,this.beforeRender=new yt,this.afterTick=new yt,this.componentTypes=[],this.components=[],this.isStable=I(gr).hasPendingTasks.pipe(ee(i=>!i)),this._injector=I(Ut)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(i,r){let o=i instanceof hf;if(!this._injector.get(SM).done){let f=!o&&lI(i),p=!1;throw new $(405,p)}let a;o?a=i:a=this._injector.get(Ya).resolveComponentFactory(i),this.componentTypes.push(a.componentType);let l=yz(a)?void 0:this._injector.get(yo),c=r||a.selector,u=a.create(Cn.NULL,[],c,l),d=u.location.nativeElement,h=u.injector.get(DM,null);return h?.registerApplication(d),u.onDestroy(()=>{this.detachView(u.hostView),Ny(this.components,u),h?.unregisterApplication(d)}),this._loadComponent(u),u}tick(){this._tick(!0)}_tick(i){if(this._runningTick)throw new $(101,!1);let r=ye(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(i)}catch(o){this.internalErrorHandler(o)}finally{this._runningTick=!1,ye(r),this.afterTick.next()}}detectChangesInAttachedViews(i){let r=null;this._injector.destroyed||(r=this._injector.get(Xa,null,{optional:!0}));let o=0,s=this.afterRenderEffectManager;for(;o<_z;){let a=o===0;if(i||!a){this.beforeRender.next(a);for(let{_lView:l,notifyErrorHandler:c}of this._views)xz(l,c,a,this.zonelessEnabled)}else r?.begin?.(),r?.end?.();if(o++,s.executeInternalCallbacks(),!this.allViews.some(({_lView:l})=>Hc(l))&&(s.execute(),!this.allViews.some(({_lView:l})=>Hc(l))))break}}attachView(i){let r=i;this._views.push(r),r.attachToAppRef(this)}detachView(i){let r=i;Ny(this._views,r),r.detachFromAppRef()}_loadComponent(i){this.attachView(i.hostView),this.tick(),this.components.push(i);let r=this._injector.get($s,[]);[...this._bootstrapListeners,...r].forEach(o=>o(i))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(i=>i()),this._views.slice().forEach(i=>i.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(i){return this._destroyListeners.push(i),()=>Ny(this._destroyListeners,i)}destroy(){if(this._destroyed)throw new $(406,!1);let i=this._injector;i.destroy&&!i.destroyed&&i.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ny(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}var Uh;function Iv(t){Uh??=new WeakMap;let e=Uh.get(t);if(e)return e;let n=t.isStable.pipe(ei(i=>i)).toPromise().then(()=>{});return Uh.set(t,n),t.onDestroy(()=>Uh?.delete(t)),n}function xz(t,e,n,i){if(!n&&!Hc(t))return;eM(t,e,n&&!i?0:1)}var N_=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Hf=(()=>{let e=class e{compileModuleSync(i){return new C_(i)}compileModuleAsync(i){return Promise.resolve(this.compileModuleSync(i))}compileModuleAndAllComponentsSync(i){let r=this.compileModuleSync(i),o=cI(i),s=bS(o.declarations).reduce((a,l)=>{let c=go(l);return c&&a.push(new Za(c)),a},[]);return new N_(r,s)}compileModuleAndAllComponentsAsync(i){return Promise.resolve(this.compileModuleAndAllComponentsSync(i))}clearCache(){}clearCacheFor(i){}getModuleId(i){}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var bz=(()=>{let e=class e{constructor(){this.zone=I(Pe),this.changeDetectionScheduler=I(qa),this.applicationRef=I(br)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Cz=new L("",{factory:()=>!1});function MM({ngZoneFactory:t,ignoreChangesOutsideZone:e}){return t??=()=>new Pe(AM()),[{provide:Pe,useFactory:t},{provide:Os,multi:!0,useFactory:()=>{let n=I(bz,{optional:!0});return()=>n.initialize()}},{provide:Os,multi:!0,useFactory:()=>{let n=I(Ez);return()=>{n.initialize()}}},{provide:nS,useFactory:wz},e===!0?{provide:aM,useValue:!0}:[]]}function wz(){let t=I(Pe),e=I(Vn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function TM(t){let e=t?.ignoreChangesOutsideZone,n=MM({ngZoneFactory:()=>{let i=AM(t);return i.shouldCoalesceEventChangeDetection&&si("NgZone_CoalesceEvent"),new Pe(i)},ignoreChangesOutsideZone:e});return vo([{provide:Cz,useValue:!0},{provide:mv,useValue:!1},n])}function AM(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var Ez=(()=>{let e=class e{constructor(){this.subscription=new et,this.initialized=!1,this.zone=I(Pe),this.pendingTasks=I(gr)}initialize(){if(this.initialized)return;this.initialized=!0;let i=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(i=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pe.assertNotInAngularZone(),queueMicrotask(()=>{i!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(i),i=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pe.assertInAngularZone(),i??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Dz=(()=>{let e=class e{constructor(){this.appRef=I(br),this.taskService=I(gr),this.ngZone=I(Pe),this.zonelessEnabled=I(mv),this.disableScheduling=I(aM,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new et,this.cancelScheduledCallback=null,this.shouldRefreshViews=!1,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof u_||!this.zoneIsDefined)}notify(i){if(!this.zonelessEnabled&&i===5)return;switch(i){case 3:case 2:case 0:case 4:case 5:case 1:{this.shouldRefreshViews=!0;break}case 8:case 7:case 6:case 9:default:}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?SD:lM;this.pendingRenderTaskId=this.taskService.add(),this.zoneIsDefined?Zone.root.run(()=>{this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}):this.cancelScheduledCallback=r(()=>{this.tick(this.shouldRefreshViews)})}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Pe.isInAngularZone())}tick(i){if(this.runningTick||this.appRef.destroyed)return;let r=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick(i)},void 0,this.schedulerTickApplyArgs)}catch(o){throw this.taskService.remove(r),o}finally{this.cleanup()}this.useMicrotaskScheduler=!0,SD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(r)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.shouldRefreshViews=!1,this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let i=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(i)}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Iz(){return typeof $localize<"u"&&$localize.locale||_f}var $f=new L("",{providedIn:"root",factory:()=>I($f,fe.Optional|fe.SkipSelf)||Iz()});var RM=new L("");var Yh=null;function Sz(t=[],e){return Cn.create({name:e,providers:[{provide:Cf,useValue:"platform"},{provide:RM,useValue:new Set([()=>Yh=null])},...t]})}function Mz(t=[]){if(Yh)return Yh;let e=Sz(t);return Yh=e,mz(),Tz(e),e}function Tz(t){t.get(Q_,null)?.forEach(n=>n())}var Ws=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Az;let t=e;return t})();function Az(t){return Rz(Dn(),Re(),(t&16)===16)}function Rz(t,e,n){if(Qc(t)&&!n){let i=xo(t.index,e);return new js(i,i)}else if(t.type&47){let i=e[bn];return new js(i,e)}return null}function OM(t){try{let{rootComponent:e,appProviders:n,platformProviders:i}=t,r=Mz(i),o=[MM({}),{provide:qa,useExisting:Dz},...n||[]],a=new pf({providers:o,parent:r,debugName:"",runEnvironmentInitializers:!1}).injector,l=a.get(Pe);return l.run(()=>{a.resolveInjectorInitializers();let c=a.get(Vn,null),u;l.runOutsideAngular(()=>{u=l.onError.subscribe({next:f=>{c.handleError(f)}})});let d=()=>a.destroy(),h=r.get(RM);return h.add(d),a.onDestroy(()=>{u.unsubscribe(),h.delete(d)}),vz(c,l,()=>{let f=a.get(SM);return f.runInitializers(),f.donePromise.then(()=>{let p=a.get($f,_f);oz(p||_f);let m=a.get(br);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var UD=!1;function Oz(){UD||(UD=!0,tj(),KU(),uz(),ez(),SU(),oU(),NB(),Lj())}function Pz(t,e){return Iv(t)}function PM(){return vo([{provide:Vh,useFactory:()=>{let t=!0;return kc()&&(t=!!I(el,{optional:!0})?.get(mS,null)),t&&si("NgHydration"),t}},{provide:Os,useValue:()=>{SB(!1),kc()&&I(Vh)&&(Nz(),Oz())},multi:!0},{provide:xS,useFactory:()=>kc()&&I(Vh)},{provide:$s,useFactory:()=>{if(kc()&&I(Vh)){let t=I(br),e=I(Cn);return()=>{Pz(t,e).then(()=>{RB(t)})}}return()=>{}},multi:!0}])}function Nz(){let t=If(),e;for(let n of t.body.childNodes)if(n.nodeType===Node.COMMENT_NODE&&n.textContent?.trim()===JV){e=n;break}if(!e)throw new $(-507,!1)}var kz=new L("",{providedIn:"root",factory:()=>I(Fz)}),Fz=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>new k_});let t=e;return t})(),k_=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=I(gr),this.taskId=null}scheduleEffect(e){if(this.enqueue(e),this.taskId===null){let n=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(n),this.taskId=null})}}enqueue(e){let n=e.creationZone;this.queues.has(n)||this.queues.set(n,new Set);let i=this.queues.get(n);i.has(e)||(this.queuedEffectCount++,i.add(e))}flush(){for(;this.queuedEffectCount>0;)for(let[e,n]of this.queues)e===null?this.flushQueue(n):e.run(()=>this.flushQueue(n))}flushQueue(e){for(let n of e)e.delete(n),this.queuedEffectCount--,n.run()}},F_=class{constructor(e,n,i,r,o,s){this.scheduler=e,this.effectFn=n,this.creationZone=i,this.injector=o,this.watcher=TE(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(e){try{this.effectFn(e)}catch(n){this.injector.get(Vn,null,{optional:!0})?.handleError(n)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function au(t,e){si("NgSignals"),!e?.injector&&yI(au);let n=e?.injector??I(Cn),i=e?.manualCleanup!==!0?n.get(tu):null,r=new F_(n.get(kz),t,typeof Zone>"u"?null:Zone.current,i,n,e?.allowSignalWrites??!1),o=n.get(Ws,null,{optional:!0});return!o||!(o._lView[K]&8)?r.watcher.notify():(o._lView[Hh]??=[]).push(r.watcher.notify),r}function NM(t){let e=go(t);if(!e)return null;let n=new Za(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var jM=null;function Dr(){return jM}function BM(t){jM??=t}var Jf=class{};var zt=new L(""),Nv=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>I(jz),providedIn:"platform"});let t=e;return t})(),UM=new L(""),jz=(()=>{let e=class e extends Nv{constructor(){super(),this._doc=I(zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Dr().getBaseHref(this._doc)}onPopState(i){let r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",i,!1),()=>r.removeEventListener("popstate",i)}onHashChange(i){let r=Dr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",i,!1),()=>r.removeEventListener("hashchange",i)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(i){this._location.pathname=i}pushState(i,r,o){this._history.pushState(i,r,o)}replaceState(i,r,o){this._history.replaceState(i,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(i=0){this._history.go(i)}getState(){return this._history.state}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function kv(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function kM(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,i=n-(t[n-1]==="/"?1:0);return t.slice(0,i)+t.slice(n)}function wr(t){return t&&t[0]!=="?"?"?"+t:t}var Gs=(()=>{let e=class e{historyGo(i){throw new Error("")}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>I(Fv),providedIn:"root"});let t=e;return t})(),zM=new L(""),Fv=(()=>{let e=class e extends Gs{constructor(i,r){super(),this._platformLocation=i,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??I(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}prepareExternalUrl(i){return kv(this._baseHref,i)}path(i=!1){let r=this._platformLocation.pathname+wr(this._platformLocation.search),o=this._platformLocation.hash;return o&&i?`${r}${o}`:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+wr(s));this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+wr(s));this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(G(Nv),G(zM,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),HM=(()=>{let e=class e extends Gs{constructor(i,r){super(),this._platformLocation=i,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(i){this._removeListenerFns.push(this._platformLocation.onPopState(i),this._platformLocation.onHashChange(i))}getBaseHref(){return this._baseHref}path(i=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(i){let r=kv(this._baseHref,i);return r.length>0?"#"+r:r}pushState(i,r,o,s){let a=this.prepareExternalUrl(o+wr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(i,r,a)}replaceState(i,r,o,s){let a=this.prepareExternalUrl(o+wr(s));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(i,r,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(i=0){this._platformLocation.historyGo?.(i)}};e.\u0275fac=function(r){return new(r||e)(G(Nv),G(zM,8))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),ol=(()=>{let e=class e{constructor(i){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=i;let r=this._locationStrategy.getBaseHref();this._basePath=zz(kM(FM(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(i=!1){return this.normalize(this._locationStrategy.path(i))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(i,r=""){return this.path()==this.normalize(i+wr(r))}normalize(i){return e.stripTrailingSlash(Uz(this._basePath,FM(i)))}prepareExternalUrl(i){return i&&i[0]!=="/"&&(i="/"+i),this._locationStrategy.prepareExternalUrl(i)}go(i,r="",o=null){this._locationStrategy.pushState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+wr(r)),o)}replaceState(i,r="",o=null){this._locationStrategy.replaceState(o,"",i,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(i+wr(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(i=0){this._locationStrategy.historyGo?.(i)}onUrlChange(i){return this._urlChangeListeners.push(i),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(i);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(i="",r){this._urlChangeListeners.forEach(o=>o(i,r))}subscribe(i,r,o){return this._subject.subscribe({next:i,error:r,complete:o})}};e.normalizeQueryParams=wr,e.joinWithSlash=kv,e.stripTrailingSlash=kM,e.\u0275fac=function(r){return new(r||e)(G(Gs))},e.\u0275prov=j({token:e,factory:()=>Bz(),providedIn:"root"});let t=e;return t})();function Bz(){return new ol(G(Gs))}function Uz(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function FM(t){return t.replace(/\/index.html$/,"")}function zz(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}var Kt=function(t){return t[t.Format=0]="Format",t[t.Standalone=1]="Standalone",t}(Kt||{}),ke=function(t){return t[t.Narrow=0]="Narrow",t[t.Abbreviated=1]="Abbreviated",t[t.Wide=2]="Wide",t[t.Short=3]="Short",t}(ke||{}),In=function(t){return t[t.Short=0]="Short",t[t.Medium=1]="Medium",t[t.Long=2]="Long",t[t.Full=3]="Full",t}(In||{}),So={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Hz(t){return Bn(t)[st.LocaleId]}function $z(t,e,n){let i=Bn(t),r=[i[st.DayPeriodsFormat],i[st.DayPeriodsStandalone]],o=zn(r,e);return zn(o,n)}function Wz(t,e,n){let i=Bn(t),r=[i[st.DaysFormat],i[st.DaysStandalone]],o=zn(r,e);return zn(o,n)}function Gz(t,e,n){let i=Bn(t),r=[i[st.MonthsFormat],i[st.MonthsStandalone]],o=zn(r,e);return zn(o,n)}function qz(t,e){let i=Bn(t)[st.Eras];return zn(i,e)}function Wf(t,e){let n=Bn(t);return zn(n[st.DateFormat],e)}function Gf(t,e){let n=Bn(t);return zn(n[st.TimeFormat],e)}function qf(t,e){let i=Bn(t)[st.DateTimeFormat];return zn(i,e)}function tp(t,e){let n=Bn(t),i=n[st.NumberSymbols][e];if(typeof i>"u"){if(e===So.CurrencyDecimal)return n[st.NumberSymbols][So.Decimal];if(e===So.CurrencyGroup)return n[st.NumberSymbols][So.Group]}return i}function $M(t){if(!t[st.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[st.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Yz(t){let e=Bn(t);return $M(e),(e[st.ExtraData][2]||[]).map(i=>typeof i=="string"?Mv(i):[Mv(i[0]),Mv(i[1])])}function Xz(t,e,n){let i=Bn(t);$M(i);let r=[i[st.ExtraData][0],i[st.ExtraData][1]],o=zn(r,e)||[];return zn(o,n)||[]}function zn(t,e){for(let n=e;n>-1;n--)if(typeof t[n]<"u")return t[n];throw new Error("Locale data API: locale data undefined")}function Mv(t){let[e,n]=t.split(":");return{hours:+e,minutes:+n}}var Zz=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Yf={},Kz=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,Er=function(t){return t[t.Short=0]="Short",t[t.ShortGMT=1]="ShortGMT",t[t.Long=2]="Long",t[t.Extended=3]="Extended",t}(Er||{}),Ie=function(t){return t[t.FullYear=0]="FullYear",t[t.Month=1]="Month",t[t.Date=2]="Date",t[t.Hours=3]="Hours",t[t.Minutes=4]="Minutes",t[t.Seconds=5]="Seconds",t[t.FractionalSeconds=6]="FractionalSeconds",t[t.Day=7]="Day",t}(Ie||{}),De=function(t){return t[t.DayPeriods=0]="DayPeriods",t[t.Days=1]="Days",t[t.Months=2]="Months",t[t.Eras=3]="Eras",t}(De||{});function Qz(t,e,n,i){let r=aH(t);e=Cr(n,e)||e;let s=[],a;for(;e;)if(a=Kz.exec(e),a){s=s.concat(a.slice(1));let u=s.pop();if(!u)break;e=u}else{s.push(e);break}let l=r.getTimezoneOffset();i&&(l=GM(i,l),r=sH(r,i,!0));let c="";return s.forEach(u=>{let d=rH(u);c+=d?d(r,n,l):u==="''"?"'":u.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),c}function ep(t,e,n){let i=new Date(0);return i.setFullYear(t,e,n),i.setHours(0,0,0),i}function Cr(t,e){let n=Hz(t);if(Yf[n]??={},Yf[n][e])return Yf[n][e];let i="";switch(e){case"shortDate":i=Wf(t,In.Short);break;case"mediumDate":i=Wf(t,In.Medium);break;case"longDate":i=Wf(t,In.Long);break;case"fullDate":i=Wf(t,In.Full);break;case"shortTime":i=Gf(t,In.Short);break;case"mediumTime":i=Gf(t,In.Medium);break;case"longTime":i=Gf(t,In.Long);break;case"fullTime":i=Gf(t,In.Full);break;case"short":let r=Cr(t,"shortTime"),o=Cr(t,"shortDate");i=Xf(qf(t,In.Short),[r,o]);break;case"medium":let s=Cr(t,"mediumTime"),a=Cr(t,"mediumDate");i=Xf(qf(t,In.Medium),[s,a]);break;case"long":let l=Cr(t,"longTime"),c=Cr(t,"longDate");i=Xf(qf(t,In.Long),[l,c]);break;case"full":let u=Cr(t,"fullTime"),d=Cr(t,"fullDate");i=Xf(qf(t,In.Full),[u,d]);break}return i&&(Yf[n][e]=i),i}function Xf(t,e){return e&&(t=t.replace(/\{([^}]+)}/g,function(n,i){return e!=null&&i in e?e[i]:n})),t}function ai(t,e,n="-",i,r){let o="";(t<0||r&&t<=0)&&(r?t=-t+1:(t=-t,o=n));let s=String(t);for(;s.length<e;)s="0"+s;return i&&(s=s.slice(s.length-e)),o+s}function Jz(t,e){return ai(t,3).substring(0,e)}function ut(t,e,n=0,i=!1,r=!1){return function(o,s){let a=eH(t,o);if((n>0||a>-n)&&(a+=n),t===Ie.Hours)a===0&&n===-12&&(a=12);else if(t===Ie.FractionalSeconds)return Jz(a,e);let l=tp(s,So.MinusSign);return ai(a,e,l,i,r)}}function eH(t,e){switch(t){case Ie.FullYear:return e.getFullYear();case Ie.Month:return e.getMonth();case Ie.Date:return e.getDate();case Ie.Hours:return e.getHours();case Ie.Minutes:return e.getMinutes();case Ie.Seconds:return e.getSeconds();case Ie.FractionalSeconds:return e.getMilliseconds();case Ie.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}function Ve(t,e,n=Kt.Format,i=!1){return function(r,o){return tH(r,o,t,e,n,i)}}function tH(t,e,n,i,r,o){switch(n){case De.Months:return Gz(e,r,i)[t.getMonth()];case De.Days:return Wz(e,r,i)[t.getDay()];case De.DayPeriods:let s=t.getHours(),a=t.getMinutes();if(o){let c=Yz(e),u=Xz(e,r,i),d=c.findIndex(h=>{if(Array.isArray(h)){let[f,p]=h,m=s>=f.hours&&a>=f.minutes,g=s<p.hours||s===p.hours&&a<p.minutes;if(f.hours<p.hours){if(m&&g)return!0}else if(m||g)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(d!==-1)return u[d]}return $z(e,r,i)[s<12?0:1];case De.Eras:return qz(e,i)[t.getFullYear()<=0?0:1];default:let l=n;throw new Error(`unexpected translation type ${l}`)}}function Zf(t){return function(e,n,i){let r=-1*i,o=tp(n,So.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(t){case Er.Short:return(r>=0?"+":"")+ai(s,2,o)+ai(Math.abs(r%60),2,o);case Er.ShortGMT:return"GMT"+(r>=0?"+":"")+ai(s,1,o);case Er.Long:return"GMT"+(r>=0?"+":"")+ai(s,2,o)+":"+ai(Math.abs(r%60),2,o);case Er.Extended:return i===0?"Z":(r>=0?"+":"")+ai(s,2,o)+":"+ai(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${t}"`)}}}var nH=0,Qf=4;function iH(t){let e=ep(t,nH,1).getDay();return ep(t,0,1+(e<=Qf?Qf:Qf+7)-e)}function WM(t){let e=t.getDay(),n=e===0?-3:Qf-e;return ep(t.getFullYear(),t.getMonth(),t.getDate()+n)}function Tv(t,e=!1){return function(n,i){let r;if(e){let o=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,s=n.getDate();r=1+Math.floor((s+o)/7)}else{let o=WM(n),s=iH(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return ai(r,t,tp(i,So.MinusSign))}}function Kf(t,e=!1){return function(n,i){let o=WM(n).getFullYear();return ai(o,t,tp(i,So.MinusSign),e)}}var Av={};function rH(t){if(Av[t])return Av[t];let e;switch(t){case"G":case"GG":case"GGG":e=Ve(De.Eras,ke.Abbreviated);break;case"GGGG":e=Ve(De.Eras,ke.Wide);break;case"GGGGG":e=Ve(De.Eras,ke.Narrow);break;case"y":e=ut(Ie.FullYear,1,0,!1,!0);break;case"yy":e=ut(Ie.FullYear,2,0,!0,!0);break;case"yyy":e=ut(Ie.FullYear,3,0,!1,!0);break;case"yyyy":e=ut(Ie.FullYear,4,0,!1,!0);break;case"Y":e=Kf(1);break;case"YY":e=Kf(2,!0);break;case"YYY":e=Kf(3);break;case"YYYY":e=Kf(4);break;case"M":case"L":e=ut(Ie.Month,1,1);break;case"MM":case"LL":e=ut(Ie.Month,2,1);break;case"MMM":e=Ve(De.Months,ke.Abbreviated);break;case"MMMM":e=Ve(De.Months,ke.Wide);break;case"MMMMM":e=Ve(De.Months,ke.Narrow);break;case"LLL":e=Ve(De.Months,ke.Abbreviated,Kt.Standalone);break;case"LLLL":e=Ve(De.Months,ke.Wide,Kt.Standalone);break;case"LLLLL":e=Ve(De.Months,ke.Narrow,Kt.Standalone);break;case"w":e=Tv(1);break;case"ww":e=Tv(2);break;case"W":e=Tv(1,!0);break;case"d":e=ut(Ie.Date,1);break;case"dd":e=ut(Ie.Date,2);break;case"c":case"cc":e=ut(Ie.Day,1);break;case"ccc":e=Ve(De.Days,ke.Abbreviated,Kt.Standalone);break;case"cccc":e=Ve(De.Days,ke.Wide,Kt.Standalone);break;case"ccccc":e=Ve(De.Days,ke.Narrow,Kt.Standalone);break;case"cccccc":e=Ve(De.Days,ke.Short,Kt.Standalone);break;case"E":case"EE":case"EEE":e=Ve(De.Days,ke.Abbreviated);break;case"EEEE":e=Ve(De.Days,ke.Wide);break;case"EEEEE":e=Ve(De.Days,ke.Narrow);break;case"EEEEEE":e=Ve(De.Days,ke.Short);break;case"a":case"aa":case"aaa":e=Ve(De.DayPeriods,ke.Abbreviated);break;case"aaaa":e=Ve(De.DayPeriods,ke.Wide);break;case"aaaaa":e=Ve(De.DayPeriods,ke.Narrow);break;case"b":case"bb":case"bbb":e=Ve(De.DayPeriods,ke.Abbreviated,Kt.Standalone,!0);break;case"bbbb":e=Ve(De.DayPeriods,ke.Wide,Kt.Standalone,!0);break;case"bbbbb":e=Ve(De.DayPeriods,ke.Narrow,Kt.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ve(De.DayPeriods,ke.Abbreviated,Kt.Format,!0);break;case"BBBB":e=Ve(De.DayPeriods,ke.Wide,Kt.Format,!0);break;case"BBBBB":e=Ve(De.DayPeriods,ke.Narrow,Kt.Format,!0);break;case"h":e=ut(Ie.Hours,1,-12);break;case"hh":e=ut(Ie.Hours,2,-12);break;case"H":e=ut(Ie.Hours,1);break;case"HH":e=ut(Ie.Hours,2);break;case"m":e=ut(Ie.Minutes,1);break;case"mm":e=ut(Ie.Minutes,2);break;case"s":e=ut(Ie.Seconds,1);break;case"ss":e=ut(Ie.Seconds,2);break;case"S":e=ut(Ie.FractionalSeconds,1);break;case"SS":e=ut(Ie.FractionalSeconds,2);break;case"SSS":e=ut(Ie.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Zf(Er.Short);break;case"ZZZZZ":e=Zf(Er.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Zf(Er.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Zf(Er.Long);break;default:return null}return Av[t]=e,e}function GM(t,e){t=t.replace(/:/g,"");let n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?e:n}function oH(t,e){return t=new Date(t.getTime()),t.setMinutes(t.getMinutes()+e),t}function sH(t,e,n){let i=n?-1:1,r=t.getTimezoneOffset(),o=GM(e,r);return oH(t,i*(o-r))}function aH(t){if(LM(t))return t;if(typeof t=="number"&&!isNaN(t))return new Date(t);if(typeof t=="string"){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){let[r,o=1,s=1]=t.split("-").map(a=>+a);return ep(r,o-1,s)}let n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let i;if(i=t.match(Zz))return lH(i)}let e=new Date(t);if(!LM(e))throw new Error(`Unable to convert "${t}" into a date`);return e}function lH(t){let e=new Date(0),n=0,i=0,r=t[8]?e.setUTCFullYear:e.setFullYear,o=t[8]?e.setUTCHours:e.setHours;t[9]&&(n=Number(t[9]+t[10]),i=Number(t[9]+t[11])),r.call(e,Number(t[1]),Number(t[2])-1,Number(t[3]));let s=Number(t[4]||0)-n,a=Number(t[5]||0)-i,l=Number(t[6]||0),c=Math.floor(parseFloat("0."+(t[7]||0))*1e3);return o.call(e,s,a,l,c),e}function LM(t){return t instanceof Date&&!isNaN(t.valueOf())}function np(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let i=n.indexOf("="),[r,o]=i==-1?[n,""]:[n.slice(0,i),n.slice(i+1)];if(r.trim()===e)return decodeURIComponent(o)}return null}function cH(t,e){return new $(2100,!1)}var uH="mediumDate",dH=new L(""),hH=new L(""),qM=(()=>{let e=class e{constructor(i,r,o){this.locale=i,this.defaultTimezone=r,this.defaultOptions=o}transform(i,r,o,s){if(i==null||i===""||i!==i)return null;try{let a=r??this.defaultOptions?.dateFormat??uH,l=o??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Qz(i,a,s||this.locale,l)}catch(a){throw cH(e,a.message)}}};e.\u0275fac=function(r){return new(r||e)(Ee($f,16),Ee(dH,24),Ee(hH,24))},e.\u0275pipe=oI({name:"date",type:e,pure:!0,standalone:!0});let t=e;return t})();var qs=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=pr({type:e}),e.\u0275inj=fr({});let t=e;return t})(),Lv="browser",fH="server";function Vv(t){return t===Lv}function lu(t){return t===fH}var YM=(()=>{let e=class e{};e.\u0275prov=j({token:e,providedIn:"root",factory:()=>Vv(I(nn))?new Rv(I(zt),window):new Ov});let t=e;return t})(),Rv=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=pH(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),i=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(i-o[0],r-o[1])}};function pH(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let i=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),r=i.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}r=i.nextNode()}}return null}var Ov=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},rl=class{};var uu=class{},du=class{},Ni=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let i=n.indexOf(":");if(i>0){let r=n.slice(0,i),o=r.toLowerCase(),s=n.slice(i+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,i)=>{this.setHeaderEntries(i,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,i])=>{this.setHeaderEntries(n,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...i),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let i=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Bv=class{encodeKey(e){return XM(e)}encodeValue(e){return XM(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function mH(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var yH=/%(\d[a-f0-9])/gi,_H={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function XM(t){return encodeURIComponent(t).replace(yH,(e,n)=>_H[n]??e)}function ip(t){return`${t}`}var To=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Bv,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=mH(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let i=e.fromObject[n],r=Array.isArray(i)?i.map(ip):[ip(i)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(o=>{n.push({param:i,value:o,op:"a"})}):n.push({param:i,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(i=>n+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(ip(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(ip(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Uv=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function vH(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function ZM(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function KM(t){return typeof Blob<"u"&&t instanceof Blob}function QM(t){return typeof FormData<"u"&&t instanceof FormData}function xH(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var cu=class t{constructor(e,n,i,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(vH(this.method)||r?(this.body=i!==void 0?i:null,o=r):o=i,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Ni,this.context??=new Uv,!this.params)this.params=new To,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||ZM(this.body)||KM(this.body)||QM(this.body)||xH(this.body)?this.body:this.body instanceof To?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||QM(this.body)?null:KM(this.body)?this.body.type||null:ZM(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof To?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,u=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((h,f)=>h.set(f,e.setHeaders[f]),c)),e.setParams&&(u=Object.keys(e.setParams).reduce((h,f)=>h.set(f,e.setParams[f]),u)),new t(n,i,s,{params:u,headers:c,context:d,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Ao=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Ao||{}),hu=class{constructor(e,n=200,i="OK"){this.headers=e.headers||new Ni,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},op=class t extends hu{constructor(e={}){super(e),this.type=Ao.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Ys=class t extends hu{constructor(e={}){super(e),this.type=Ao.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Mo=class extends hu{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},cT=200,bH=204;function jv(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var Wv=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,o={}){let s;if(i instanceof cu)s=i;else{let c;o.headers instanceof Ni?c=o.headers:c=new Ni(o.headers);let u;o.params&&(o.params instanceof To?u=o.params:u=new To({fromObject:o.params})),s=new cu(i,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=Y(s).pipe(ar(c=>this.handler.handle(c)));if(i instanceof cu||o.observe==="events")return a;let l=a.pipe(Mt(c=>c instanceof Ys));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(ee(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(ee(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(ee(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(ee(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new To().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,o={}){return this.request("PATCH",i,jv(o,r))}post(i,r,o={}){return this.request("POST",i,jv(o,r))}put(i,r,o={}){return this.request("PUT",i,jv(o,r))}};e.\u0275fac=function(r){return new(r||e)(G(uu))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),CH=/^\)\]\}',?\n/,wH="X-Request-URL";function JM(t){if(t.url)return t.url;let e=wH.toLocaleLowerCase();return t.headers.get(e)}var zv=(()=>{let e=class e{constructor(){this.fetchImpl=I(Hv,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=I(Pe)}handle(i){return new ve(r=>{let o=new AbortController;return this.doRequest(i,o.signal,r).then($v,s=>r.error(new Mo({error:s}))),()=>o.abort()})}doRequest(i,r,o){return Cs(this,null,function*(){let s=this.createRequestInit(i),a;try{let p=this.fetchImpl(i.urlWithParams,N({signal:r},s));EH(p),o.next({type:Ao.Sent}),a=yield p}catch(p){o.error(new Mo({error:p,status:p.status??0,statusText:p.statusText,url:i.urlWithParams,headers:p.headers}));return}let l=new Ni(a.headers),c=a.statusText,u=JM(a)??i.urlWithParams,d=a.status,h=null;if(i.reportProgress&&o.next(new op({headers:l,status:d,statusText:c,url:u})),a.body){let p=a.headers.get("content-length"),m=[],g=a.body.getReader(),y=0,_,x,b=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Cs(this,null,function*(){for(;;){let{done:C,value:E}=yield g.read();if(C)break;if(m.push(E),y+=E.length,i.reportProgress){x=i.responseType==="text"?(x??"")+(_??=new TextDecoder).decode(E,{stream:!0}):void 0;let w=()=>o.next({type:Ao.DownloadProgress,total:p?+p:void 0,loaded:y,partialText:x});b?b.run(w):w()}}}));let v=this.concatChunks(m,y);try{let C=a.headers.get("Content-Type")??"";h=this.parseBody(i,v,C)}catch(C){o.error(new Mo({error:C,headers:new Ni(a.headers),status:a.status,statusText:a.statusText,url:JM(a)??i.urlWithParams}));return}}d===0&&(d=h?cT:0),d>=200&&d<300?(o.next(new Ys({body:h,headers:l,status:d,statusText:c,url:u})),o.complete()):o.error(new Mo({error:h,headers:l,status:d,statusText:c,url:u}))})}parseBody(i,r,o){switch(i.responseType){case"json":let s=new TextDecoder().decode(r).replace(CH,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:o});case"arraybuffer":return r.buffer}}createRequestInit(i){let r={},o=i.withCredentials?"include":void 0;if(i.headers.forEach((s,a)=>r[s]=a.join(",")),r.Accept??="application/json, text/plain, */*",!r["Content-Type"]){let s=i.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:i.serializeBody(),method:i.method,headers:r,credentials:o}}concatChunks(i,r){let o=new Uint8Array(r),s=0;for(let a of i)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Hv=class{};function $v(){}function EH(t){t.then($v,$v)}function DH(t,e){return e(t)}function IH(t,e,n){return(i,r)=>wn(n,()=>e(i,o=>t(o,r)))}var uT=new L(""),dT=new L(""),SH=new L("",{providedIn:"root",factory:()=>!0});var eT=(()=>{let e=class e extends uu{constructor(i,r){super(),this.backend=i,this.injector=r,this.chain=null,this.pendingTasks=I(gr),this.contributeToStability=I(SH)}handle(i){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(uT),...this.injector.get(dT,[])]));this.chain=r.reduceRight((o,s)=>IH(o,s,this.injector),DH)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(i,o=>this.backend.handle(o)).pipe(Ss(()=>this.pendingTasks.remove(r)))}else return this.chain(i,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(G(du),G(Ut))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();var MH=/^\)\]\}',?\n/;function TH(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var tT=(()=>{let e=class e{constructor(i){this.xhrFactory=i}handle(i){if(i.method==="JSONP")throw new $(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?He(r.\u0275loadImpl()):Y(null)).pipe(Tt(()=>new ve(s=>{let a=r.build();if(a.open(i.method,i.urlWithParams),i.withCredentials&&(a.withCredentials=!0),i.headers.forEach((g,y)=>a.setRequestHeader(g,y.join(","))),i.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!i.headers.has("Content-Type")){let g=i.detectContentTypeHeader();g!==null&&a.setRequestHeader("Content-Type",g)}if(i.responseType){let g=i.responseType.toLowerCase();a.responseType=g!=="json"?g:"text"}let l=i.serializeBody(),c=null,u=()=>{if(c!==null)return c;let g=a.statusText||"OK",y=new Ni(a.getAllResponseHeaders()),_=TH(a)||i.url;return c=new op({headers:y,status:a.status,statusText:g,url:_}),c},d=()=>{let{headers:g,status:y,statusText:_,url:x}=u(),b=null;y!==bH&&(b=typeof a.response>"u"?a.responseText:a.response),y===0&&(y=b?cT:0);let v=y>=200&&y<300;if(i.responseType==="json"&&typeof b=="string"){let C=b;b=b.replace(MH,"");try{b=b!==""?JSON.parse(b):null}catch(E){b=C,v&&(v=!1,b={error:E,text:b})}}v?(s.next(new Ys({body:b,headers:g,status:y,statusText:_,url:x||void 0})),s.complete()):s.error(new Mo({error:b,headers:g,status:y,statusText:_,url:x||void 0}))},h=g=>{let{url:y}=u(),_=new Mo({error:g,status:a.status||0,statusText:a.statusText||"Unknown Error",url:y||void 0});s.error(_)},f=!1,p=g=>{f||(s.next(u()),f=!0);let y={type:Ao.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),i.responseType==="text"&&a.responseText&&(y.partialText=a.responseText),s.next(y)},m=g=>{let y={type:Ao.UploadProgress,loaded:g.loaded};g.lengthComputable&&(y.total=g.total),s.next(y)};return a.addEventListener("load",d),a.addEventListener("error",h),a.addEventListener("timeout",h),a.addEventListener("abort",h),i.reportProgress&&(a.addEventListener("progress",p),l!==null&&a.upload&&a.upload.addEventListener("progress",m)),a.send(l),s.next({type:Ao.Sent}),()=>{a.removeEventListener("error",h),a.removeEventListener("abort",h),a.removeEventListener("load",d),a.removeEventListener("timeout",h),i.reportProgress&&(a.removeEventListener("progress",p),l!==null&&a.upload&&a.upload.removeEventListener("progress",m)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(G(rl))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),hT=new L(""),AH="XSRF-TOKEN",RH=new L("",{providedIn:"root",factory:()=>AH}),OH="X-XSRF-TOKEN",PH=new L("",{providedIn:"root",factory:()=>OH}),sp=class{},NH=(()=>{let e=class e{constructor(i,r,o){this.doc=i,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let i=this.doc.cookie||"";return i!==this.lastCookieString&&(this.parseCount++,this.lastToken=np(i,this.cookieName),this.lastCookieString=i),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(G(zt),G(nn),G(RH))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function kH(t,e){let n=t.url.toLowerCase();if(!I(hT)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let i=I(sp).getToken(),r=I(PH);return i!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,i)})),e(t)}var fT=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(fT||{});function FH(t,e){return{\u0275kind:t,\u0275providers:e}}function pT(...t){let e=[Wv,tT,eT,{provide:uu,useExisting:eT},{provide:du,useFactory:()=>I(zv,{optional:!0})??I(tT)},{provide:uT,useValue:kH,multi:!0},{provide:hT,useValue:!0},{provide:sp,useClass:NH}];for(let n of t)e.push(...n.\u0275providers);return vo(e)}function gT(){return FH(fT.Fetch,[zv,{provide:du,useExisting:zv}])}var LH=new L(""),nT="b",iT="h",rT="s",oT="st",sT="u",aT="rt",rp=new L(""),VH=["GET","HEAD"];function jH(t,e){let f=I(rp),{isCacheActive:n}=f,i=gE(f,["isCacheActive"]),{transferCache:r,method:o}=t;if(!n||r===!1||o==="POST"&&!i.includePostRequests&&!r||o!=="POST"&&!VH.includes(o)||!i.includeRequestsWithAuthHeaders&&BH(t)||i.filter?.(t)===!1)return e(t);let s=I(el),a=I(LH,{optional:!0}),l=lu(I(nn));if(a&&!l)throw new $(2803,!1);let c=l&&a?$H(t.url,a):t.url,u=zH(t,c),d=s.get(u,null),h=i.includeHeaders;if(typeof r=="object"&&r.includeHeaders&&(h=r.includeHeaders),d){let{[nT]:p,[aT]:m,[iT]:g,[rT]:y,[oT]:_,[sT]:x}=d,b=p;switch(m){case"arraybuffer":b=new TextEncoder().encode(p).buffer;break;case"blob":b=new Blob([p]);break}let v=new Ni(g);return Y(new Ys({body:b,headers:v,status:y,statusText:_,url:x}))}return e(t).pipe(qe(p=>{p instanceof Ys&&l&&s.set(u,{[nT]:p.body,[iT]:UH(p.headers,h),[rT]:p.status,[oT]:p.statusText,[sT]:c,[aT]:t.responseType})}))}function BH(t){return t.headers.has("authorization")||t.headers.has("proxy-authorization")}function UH(t,e){if(!e)return{};let n={};for(let i of e){let r=t.getAll(i);r!==null&&(n[i]=r)}return n}function lT(t){return[...t.keys()].sort().map(e=>`${e}=${t.getAll(e)}`).join("&")}function zH(t,e){let{params:n,method:i,responseType:r}=t,o=lT(n),s=t.serializeBody();s instanceof URLSearchParams?s=lT(s):typeof s!="string"&&(s="");let a=[i,r,e,s,o].join("|"),l=HH(a);return l}function HH(t){let e=0;for(let n of t)e=Math.imul(31,e)+n.charCodeAt(0)<<0;return e+=2147483648,e.toString()}function mT(t){return[{provide:rp,useFactory:()=>(si("NgHttpTransferCache"),N({isCacheActive:!0},t))},{provide:dT,useValue:jH,multi:!0,deps:[el,rp]},{provide:$s,multi:!0,useFactory:()=>{let e=I(br),n=I(rp);return()=>{Iv(e).then(()=>{n.isCacheActive=!1})}}}]}function $H(t,e){let n=new URL(t,"resolve://").origin,i=e[n];return i?t.replace(n,i):t}var Yv=class extends Jf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Xv=class t extends Yv{static makeCurrent(){BM(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=WH();return n==null?null:GH(n)}resetBaseElement(){fu=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return np(document.cookie,e)}},fu=null;function WH(){return fu=fu||document.querySelector("base"),fu?fu.getAttribute("href"):null}function GH(t){return new URL(t,document.baseURI).pathname}var qH=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),Zv=new L(""),xT=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(o=>{o.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,o){return this._findPluginFor(r).addEventListener(i,r,o)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(s=>s.supports(i)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(G(Zv),G(Pe))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),ap=class{constructor(e){this._doc=e}},Gv="ng-app-id",bT=(()=>{let e=class e{constructor(i,r,o,s={}){this.doc=i,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lu(s),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(o=>o.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Gv}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(i,r){let o=this.styleRef;if(o.has(i)){let s=o.get(i);return s.usage+=r,s.usage}return o.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===i)return o.delete(r),s.removeAttribute(Gv),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Gv,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let o=this.getStyleElement(i,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(G(zt),G(Sf),G(J_,8),G(nn))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),qv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Jv=/%COMP%/g,CT="%COMP%",YH=`_nghost-${CT}`,XH=`_ngcontent-${CT}`,ZH=!0,KH=new L("",{providedIn:"root",factory:()=>ZH});function QH(t){return XH.replace(Jv,t)}function JH(t){return YH.replace(Jv,t)}function wT(t,e){return e.map(n=>n.replace(Jv,t))}var yT=(()=>{let e=class e{constructor(i,r,o,s,a,l,c,u=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=u,this.rendererByCompId=new Map,this.platformIsServer=lu(l),this.defaultRenderer=new pu(i,a,c,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Ti.ShadowDom&&(r=ge(N({},r),{encapsulation:Ti.Emulated}));let o=this.getOrCreateRenderer(i,r);return o instanceof lp?o.applyToHost(i):o instanceof gu&&o.applyStyles(),o}getOrCreateRenderer(i,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(r.encapsulation){case Ti.Emulated:s=new lp(c,u,r,this.appId,d,a,l,h);break;case Ti.ShadowDom:return new Kv(c,u,i,r,a,l,this.nonce,h);default:s=new gu(c,u,r,d,a,l,h);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(G(xT),G(bT),G(Sf),G(KH),G(zt),G(nn),G(Pe),G(J_))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),pu=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(qv[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(_T(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(_T(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new $(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let o=qv[r];o?e.setAttributeNS(o,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=qv[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(hr.DashCase|hr.Important)?e.style.setProperty(n,i,r&hr.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&hr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Dr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function _T(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Kv=class extends pu{constructor(e,n,i,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=wT(r.id,r.styles);for(let u of c){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},gu=class extends pu{constructor(e,n,i,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?wT(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},lp=class extends gu{constructor(e,n,i,r,o,s,a,l){let c=r+"-"+i.id;super(e,n,i,o,s,a,l,c),this.contentAttr=QH(c),this.hostAttr=JH(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},e$=(()=>{let e=class e extends ap{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,o){return i.addEventListener(r,o,!1),()=>this.removeEventListener(i,r,o)}removeEventListener(i,r,o){return i.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(G(zt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})(),vT=["alt","control","meta","shift"],t$={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},n$={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},i$=(()=>{let e=class e extends ap{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Dr().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),vT.forEach(u=>{let d=r.indexOf(u);d>-1&&(r.splice(d,1),a+=u+".")}),a+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(i,r){let o=t$[i.key]||i.key,s="";return r.indexOf("code.")>-1&&(o=i.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),vT.forEach(a=>{if(a!==o){let l=n$[a];l(i)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(i,r,o){return s=>{e.matchEventFullKeyCode(s,i)&&o.runGuarded(()=>r(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(G(zt))},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function ET(t,e){return OM(N({rootComponent:t},r$(e)))}function r$(t){return{appProviders:[...c$,...t?.providers??[]],platformProviders:l$}}function o$(){Xv.makeCurrent()}function s$(){return new Vn}function a$(){return dS(document),document}var l$=[{provide:nn,useValue:Lv},{provide:Q_,useValue:o$,multi:!0},{provide:zt,useFactory:a$,deps:[]}];var c$=[{provide:Cf,useValue:"root"},{provide:Vn,useFactory:s$,deps:[]},{provide:Zv,useClass:e$,multi:!0,deps:[zt,Pe,nn]},{provide:Zv,useClass:i$,multi:!0,deps:[zt]},yT,bT,xT,{provide:Xa,useExisting:yT},{provide:rl,useClass:qH,deps:[]},[]];var DT=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(G(zt))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Qv=function(t){return t[t.NoHttpTransferCache=0]="NoHttpTransferCache",t[t.HttpTransferCacheOptions=1]="HttpTransferCacheOptions",t[t.I18nSupport=2]="I18nSupport",t[t.EventReplay=3]="EventReplay",t}(Qv||{});function IT(...t){let e=[],n=new Set,i=n.has(Qv.HttpTransferCacheOptions);for(let{\u0275providers:r,\u0275kind:o}of t)n.add(o),r.length&&e.push(r);return vo([[],PM(),n.has(Qv.NoHttpTransferCache)||i?[]:mT({}),e])}var le="primary",Ru=Symbol("RouteTitle"),r0=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function dl(t){return new r0(t)}function h$(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let o=0;o<i.length;o++){let s=i[o],a=t[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function f$(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!ki(t[n],e[n]))return!1;return!0}function ki(t,e){let n=t?o0(t):void 0,i=e?o0(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!LT(t[r],e[r]))return!1;return!0}function o0(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function LT(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,o)=>i[o]===r)}else return t===e}function VT(t){return t.length>0?t[t.length-1]:null}function No(t){return uy(t)?t:Hs(t)?He(Promise.resolve(t)):Y(t)}var p$={exact:BT,subset:UT},jT={exact:g$,subset:m$,ignored:()=>!0};function ST(t,e,n){return p$[n.paths](t.root,e.root,n.matrixParams)&&jT[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function g$(t,e){return ki(t,e)}function BT(t,e,n){if(!Zs(t.segments,e.segments)||!dp(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!BT(t.children[i],e.children[i],n))return!1;return!0}function m$(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>LT(t[n],e[n]))}function UT(t,e,n){return zT(t,e,e.segments,n)}function zT(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!Zs(r,n)||e.hasChildren()||!dp(r,n,i))}else if(t.segments.length===n.length){if(!Zs(t.segments,n)||!dp(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!UT(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!Zs(t.segments,r)||!dp(t.segments,r,i)||!t.children[le]?!1:zT(t.children[le],e,o,i)}}function dp(t,e,n){return e.every((i,r)=>jT[n](t[r].parameters,i.parameters))}var Ro=class{constructor(e=new Te([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=dl(this.queryParams),this._queryParamMap}toString(){return v$.serialize(this)}},Te=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hp(this)}},Xs=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=dl(this.parameters),this._parameterMap}toString(){return $T(this)}};function y$(t,e){return Zs(t,e)&&t.every((n,i)=>ki(n.parameters,e[i].parameters))}function Zs(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function _$(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===le&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==le&&(n=n.concat(e(r,i)))}),n}var Ou=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>new hl,providedIn:"root"});let t=e;return t})(),hl=class{parse(e){let n=new a0(e);return new Ro(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${mu(e.root,!0)}`,i=C$(e.queryParams),r=typeof e.fragment=="string"?`#${x$(e.fragment)}`:"";return`${n}${i}${r}`}},v$=new hl;function hp(t){return t.segments.map(e=>$T(e)).join("/")}function mu(t,e){if(!t.hasChildren())return hp(t);if(e){let n=t.children[le]?mu(t.children[le],!1):"",i=[];return Object.entries(t.children).forEach(([r,o])=>{r!==le&&i.push(`${r}:${mu(o,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=_$(t,(i,r)=>r===le?[mu(t.children[le],!1)]:[`${r}:${mu(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[le]!=null?`${hp(t)}/${n[0]}`:`${hp(t)}/(${n.join("//")})`}}function HT(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function cp(t){return HT(t).replace(/%3B/gi,";")}function x$(t){return encodeURI(t)}function s0(t){return HT(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fp(t){return decodeURIComponent(t)}function MT(t){return fp(t.replace(/\+/g,"%20"))}function $T(t){return`${s0(t.path)}${b$(t.parameters)}`}function b$(t){return Object.entries(t).map(([e,n])=>`;${s0(e)}=${s0(n)}`).join("")}function C$(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${cp(n)}=${cp(r)}`).join("&"):`${cp(n)}=${cp(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var w$=/^[^\/()?;#]+/;function e0(t){let e=t.match(w$);return e?e[0]:""}var E$=/^[^\/()?;=#]+/;function D$(t){let e=t.match(E$);return e?e[0]:""}var I$=/^[^=?&#]+/;function S$(t){let e=t.match(I$);return e?e[0]:""}var M$=/^[^&#]+/;function T$(t){let e=t.match(M$);return e?e[0]:""}var a0=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Te([],{}):new Te([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[le]=new Te(e,n)),i}parseSegment(){let e=e0(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Xs(fp(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=D$(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=e0(this.remaining);r&&(i=r,this.capture(i))}e[fp(n)]=fp(i)}parseQueryParam(e){let n=S$(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=T$(this.remaining);s&&(i=s,this.capture(i))}let r=MT(n),o=MT(i);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=e0(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new $(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=le);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[le]:new Te([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function WT(t){return t.segments.length>0?new Te([],{[le]:t}):t}function GT(t){let e={};for(let[i,r]of Object.entries(t.children)){let o=GT(r);if(i===le&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let n=new Te(t.segments,e);return A$(n)}function A$(t){if(t.numberOfChildren===1&&t.children[le]){let e=t.children[le];return new Te(t.segments.concat(e.segments),e.children)}return t}function Cu(t){return t instanceof Ro}function R$(t,e,n=null,i=null){let r=qT(t);return YT(r,e,n,i)}function qT(t){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new Te(o.url,s);return o===t&&(e=a),a}let i=n(t.root),r=WT(i);return e??r}function YT(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return t0(r,r,r,n,i);let o=O$(e);if(o.toRoot())return t0(r,r,new Te([],{}),n,i);let s=P$(o,r,t),a=s.processChildren?vu(s.segmentGroup,s.index,o.commands):ZT(s.segmentGroup,s.index,o.commands);return t0(r,s.segmentGroup,a,n,i)}function pp(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function wu(t){return typeof t=="object"&&t!=null&&t.outlets}function t0(t,e,n,i,r){let o={};i&&Object.entries(i).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let s;t===e?s=n:s=XT(t,e,n);let a=WT(GT(s));return new Ro(a,o,r)}function XT(t,e,n){let i={};return Object.entries(t.children).forEach(([r,o])=>{o===e?i[r]=n:i[r]=XT(o,e,n)}),new Te(t.segments,i)}var gp=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&pp(i[0]))throw new $(4003,!1);let r=i.find(wu);if(r&&r!==VT(i))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function O$(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new gp(!0,0,t);let e=0,n=!1,i=t.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new gp(n,e,i)}var ll=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function P$(t,e,n){if(t.isAbsolute)return new ll(e,!0,0);if(!n)return new ll(e,!1,NaN);if(n.parent===null)return new ll(n,!0,0);let i=pp(t.commands[0])?0:1,r=n.segments.length-1+i;return N$(n,r,t.numberOfDoubleDots)}function N$(t,e,n){let i=t,r=e,o=n;for(;o>r;){if(o-=r,i=i.parent,!i)throw new $(4005,!1);r=i.segments.length}return new ll(i,!1,r-o)}function k$(t){return wu(t[0])?t[0].outlets:{[le]:t}}function ZT(t,e,n){if(t??=new Te([],{}),t.segments.length===0&&t.hasChildren())return vu(t,e,n);let i=F$(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let o=new Te(t.segments.slice(0,i.pathIndex),{});return o.children[le]=new Te(t.segments.slice(i.pathIndex),t.children),vu(o,0,r)}else return i.match&&r.length===0?new Te(t.segments,{}):i.match&&!t.hasChildren()?l0(t,e,n):i.match?vu(t,0,r):l0(t,e,n)}function vu(t,e,n){if(n.length===0)return new Te(t.segments,{});{let i=k$(n),r={};if(Object.keys(i).some(o=>o!==le)&&t.children[le]&&t.numberOfChildren===1&&t.children[le].segments.length===0){let o=vu(t.children[le],e,n);return new Te(t.segments,o.children)}return Object.entries(i).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=ZT(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{i[o]===void 0&&(r[o]=s)}),new Te(t.segments,r)}}function F$(t,e,n){let i=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return o;let s=t.segments[r],a=n[i];if(wu(a))break;let l=`${a}`,c=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!AT(l,c,s))return o;i+=2}else{if(!AT(l,{},s))return o;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function l0(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(wu(o)){let l=L$(o.outlets);return new Te(i,l)}if(r===0&&pp(n[0])){let l=t.segments[e];i.push(new Xs(l.path,TT(n[0]))),r++;continue}let s=wu(o)?o.outlets[le]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&pp(a)?(i.push(new Xs(s,TT(a))),r+=2):(i.push(new Xs(s,{})),r++)}return new Te(i,{})}function L$(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=l0(new Te([],{}),0,i))}),e}function TT(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function AT(t,e,n){return t==n.path&&ki(e,n.parameters)}var xu="imperative",wt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(wt||{}),Hn=class{constructor(e,n){this.id=e,this.url=n}},fl=class extends Hn{constructor(e,n,i="imperative",r=null){super(e,n),this.type=wt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Sr=class extends Hn{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=wt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Mn=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Mn||{}),mp=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(mp||{}),Ir=class extends Hn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=wt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Oo=class extends Hn{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=wt.NavigationSkipped}},Eu=class extends Hn{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=wt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yp=class extends Hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},c0=class extends Hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},u0=class extends Hn{constructor(e,n,i,r,o){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=o,this.type=wt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},d0=class extends Hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},h0=class extends Hn{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=wt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},f0=class{constructor(e){this.route=e,this.type=wt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},p0=class{constructor(e){this.route=e,this.type=wt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},g0=class{constructor(e){this.snapshot=e,this.type=wt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},m0=class{constructor(e){this.snapshot=e,this.type=wt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},y0=class{constructor(e){this.snapshot=e,this.type=wt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_0=class{constructor(e){this.snapshot=e,this.type=wt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},_p=class{constructor(e,n,i){this.routerEvent=e,this.position=n,this.anchor=i,this.type=wt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Du=class{},pl=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};var v0=class{constructor(e){this.injector=e,this.outlet=null,this.route=null,this.children=new Pu(this.injector),this.attachRef=null}},Pu=(()=>{let e=class e{constructor(i){this.parentInjector=i,this.contexts=new Map}onChildOutletCreated(i,r){let o=this.getOrCreateContext(i);o.outlet=r,this.contexts.set(i,o)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new v0(this.parentInjector),this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)(G(Ut))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),vp=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=x0(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=x0(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=b0(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return b0(e,this._root).map(n=>n.value)}};function x0(t,e){if(t===e.value)return e;for(let n of e.children){let i=x0(t,n);if(i)return i}return null}function b0(t,e){if(t===e.value)return[e];for(let n of e.children){let i=b0(t,n);if(i.length)return i.unshift(e),i}return[]}var Sn=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function al(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var xp=class extends vp{constructor(e,n){super(e),this.snapshot=n,A0(this,e)}toString(){return this.snapshot.toString()}};function KT(t){let e=V$(t),n=new _t([new Xs("",{})]),i=new _t({}),r=new _t({}),o=new _t({}),s=new _t(""),a=new Ks(n,i,o,s,r,le,t,e.root);return a.snapshot=e.root,new xp(new Sn(a,[]),e)}function V$(t){let e={},n={},i={},r="",o=new cl([],e,i,r,n,le,t,null,{});return new Cp("",new Sn(o,[]))}var Ks=class{constructor(e,n,i,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(ee(c=>c[Ru]))??Y(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ee(e=>dl(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ee(e=>dl(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function bp(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:N(N({},e.params),t.params),data:N(N({},e.data),t.data),resolve:N(N(N(N({},t.data),e.data),r?.data),t._resolvedData)}:i={params:N({},t.params),data:N({},t.data),resolve:N(N({},t.data),t._resolvedData??{})},r&&JT(r)&&(i.resolve[Ru]=r.title),i}var cl=class{get title(){return this.data?.[Ru]}constructor(e,n,i,r,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=dl(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=dl(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Cp=class extends vp{constructor(e,n){super(n),this.url=e,A0(this,n)}toString(){return QT(this._root)}};function A0(t,e){e.value._routerState=t,e.children.forEach(n=>A0(t,n))}function QT(t){let e=t.children.length>0?` { ${t.children.map(QT).join(", ")} } `:"";return`${t.value}${e}`}function n0(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,ki(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),ki(e.params,n.params)||t.paramsSubject.next(n.params),f$(e.url,n.url)||t.urlSubject.next(n.url),ki(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function C0(t,e){let n=ki(t.params,e.params)&&y$(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||C0(t.parent,e.parent))}function JT(t){return typeof t.title=="string"||t.title===null}var R0=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=le,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=I(Pu),this.location=I(tl),this.changeDetector=I(Ws),this.inputBinder=I(Ip,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:o}=i.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=i;let o=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new w0(i,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Zt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Oi]});let t=e;return t})(),w0=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===Ks?this.route:e===Pu?this.childContexts:this.parent.get(e,n)}},Ip=new L(""),RT=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(i){this.unsubscribeFromRouteData(i),this.subscribeToRouteData(i)}unsubscribeFromRouteData(i){this.outletDataSubscriptions.get(i)?.unsubscribe(),this.outletDataSubscriptions.delete(i)}subscribeToRouteData(i){let{activatedRoute:r}=i,o=Pc([r.queryParams,r.params,r.data]).pipe(Tt(([s,a,l],c)=>(l=N(N(N({},s),a),l),c===0?Y(l):Promise.resolve(l)))).subscribe(s=>{if(!i.isActivated||!i.activatedComponentRef||i.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(i);return}let a=NM(r.component);if(!a){this.unsubscribeFromRouteData(i);return}for(let{templateName:l}of a.inputs)i.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(i,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function j$(t,e,n){let i=Iu(t,e._root,n?n._root:void 0);return new xp(i,e)}function Iu(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=B$(t,e,n);return new Sn(i,r)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Iu(t,a)),s}}let i=U$(e.value),r=e.children.map(o=>Iu(t,o));return new Sn(i,r)}}function B$(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Iu(t,i,r);return Iu(t,i)})}function U$(t){return new Ks(new _t(t.url),new _t(t.params),new _t(t.queryParams),new _t(t.fragment),new _t(t.data),t.outlet,t.component,t)}var Su=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},eA="ngNavigationCancelingError";function wp(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=Cu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=tA(!1,Mn.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function tA(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[eA]=!0,n.cancellationCode=e,n}function z$(t){return nA(t)&&Cu(t.url)}function nA(t){return!!t&&t[eA]}var H$=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ai({type:e,selectors:[["ng-component"]],standalone:!0,features:[Pi],decls:1,vars:0,template:function(r,o){r&1&&vr(0,"router-outlet")},dependencies:[R0],encapsulation:2});let t=e;return t})();function $$(t,e){return t.providers&&!t._injector&&(t._injector=Bf(t.providers,e,`Route: ${t.path}`)),t._injector??e}function O0(t){let e=t.children&&t.children.map(O0),n=e?ge(N({},t),{children:e}):N({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==le&&(n.component=H$),n}function li(t){return t.outlet||le}function W$(t,e){let n=t.filter(i=>li(i)===e);return n.push(...t.filter(i=>li(i)!==e)),n}function Nu(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var G$=(t,e,n,i)=>ee(r=>(new E0(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),E0=class{constructor(e,n,i,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),n0(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=al(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],i),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=i.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,i);else o&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=al(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,o=al(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=al(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],i),this.forwardEvent(new _0(o.value.snapshot))}),e.children.length&&this.forwardEvent(new m0(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,o=n?n.value:null;if(n0(r),r===o)if(r.component){let s=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let s=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),n0(a.route.value),this.activateChildRoutes(e,null,s.children)}else{let a=Nu(r.snapshot);s.attachRef=null,s.route=r,s.injector=a??s.injector,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,i)}},Ep=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},ul=class{constructor(e,n){this.component=e,this.route=n}};function q$(t,e,n){let i=t._root,r=e?e._root:null;return yu(i,r,n,[i.value])}function Y$(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function ml(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!GD(t)?t:e.get(t):i}function yu(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=al(e);return t.children.forEach(s=>{X$(s,o[s.value.outlet],n,i.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>bu(a,n.getContext(s),r)),r}function X$(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Z$(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Ep(i)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?yu(t,e,a?a.children:null,i,r):yu(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new ul(a.outlet.component,s))}else s&&bu(e,a,r),r.canActivateChecks.push(new Ep(i)),o.component?yu(t,null,a?a.children:null,i,r):yu(t,null,n,i,r);return r}function Z$(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Zs(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Zs(t.url,e.url)||!ki(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!C0(t,e)||!ki(t.queryParams,e.queryParams);case"paramsChange":default:return!C0(t,e)}}function bu(t,e,n){let i=al(t),r=t.value;Object.entries(i).forEach(([o,s])=>{r.component?e?bu(s,e.children.getContext(o),n):bu(s,null,n):bu(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new ul(e.outlet.component,r)):n.canDeactivateChecks.push(new ul(null,r)):n.canDeactivateChecks.push(new ul(null,r))}function ku(t){return typeof t=="function"}function K$(t){return typeof t=="boolean"}function Q$(t){return t&&ku(t.canLoad)}function J$(t){return t&&ku(t.canActivate)}function e5(t){return t&&ku(t.canActivateChild)}function t5(t){return t&&ku(t.canDeactivate)}function n5(t){return t&&ku(t.canMatch)}function iA(t){return t instanceof sr||t?.name==="EmptyError"}var up=Symbol("INITIAL_VALUE");function gl(){return Tt(t=>Pc(t.map(e=>e.pipe(lr(1),gy(up)))).pipe(ee(e=>{for(let n of e)if(n!==!0){if(n===up)return up;if(n===!1||i5(n))return n}return!0}),Mt(e=>e!==up),lr(1)))}function i5(t){return Cu(t)||t instanceof Su}function r5(t,e){return ct(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?Y(ge(N({},n),{guardsResult:!0})):o5(s,i,r,t).pipe(ct(a=>a&&K$(a)?s5(i,o,t,e):Y(a)),ee(a=>ge(N({},n),{guardsResult:a})))})}function o5(t,e,n,i){return He(t).pipe(ct(r=>d5(r.component,r.route,n,e,i)),ei(r=>r!==!0,!0))}function s5(t,e,n,i){return He(e).pipe(ar(r=>Oa(l5(r.route.parent,i),a5(r.route,i),u5(t,r.path,n),c5(t,r.route,n))),ei(r=>r!==!0,!0))}function a5(t,e){return t!==null&&e&&e(new y0(t)),Y(!0)}function l5(t,e){return t!==null&&e&&e(new g0(t)),Y(!0)}function c5(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Y(!0);let r=i.map(o=>kh(()=>{let s=Nu(e)??n,a=ml(o,s),l=J$(a)?a.canActivate(e,t):wn(s,()=>a(e,t));return No(l).pipe(ei())}));return Y(r).pipe(gl())}function u5(t,e,n){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>Y$(s)).filter(s=>s!==null).map(s=>kh(()=>{let a=s.guards.map(l=>{let c=Nu(s.node)??n,u=ml(l,c),d=e5(u)?u.canActivateChild(i,t):wn(c,()=>u(i,t));return No(d).pipe(ei())});return Y(a).pipe(gl())}));return Y(o).pipe(gl())}function d5(t,e,n,i,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return Y(!0);let s=o.map(a=>{let l=Nu(e)??r,c=ml(a,l),u=t5(c)?c.canDeactivate(t,e,n,i):wn(l,()=>c(t,e,n,i));return No(u).pipe(ei())});return Y(s).pipe(gl())}function h5(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return Y(!0);let o=r.map(s=>{let a=ml(s,t),l=Q$(a)?a.canLoad(e,n):wn(t,()=>a(e,n));return No(l)});return Y(o).pipe(gl(),rA(i))}function rA(t){return ry(qe(e=>{if(typeof e!="boolean")throw wp(t,e)}),ee(e=>e===!0))}function f5(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return Y(!0);let o=r.map(s=>{let a=ml(s,t),l=n5(a)?a.canMatch(e,n):wn(t,()=>a(e,n));return No(l)});return Y(o).pipe(gl(),rA(i))}var Mu=class{constructor(e){this.segmentGroup=e||null}},Tu=class extends Error{constructor(e){super(),this.urlTree=e}};function sl(t){return Aa(new Mu(t))}function p5(t){return Aa(new $(4e3,!1))}function g5(t){return Aa(tA(!1,Mn.GuardRejected))}var D0=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Y(i);if(r.numberOfChildren>1||!r.children[le])return p5(`${e.redirectTo}`);r=r.children[le]}}applyRedirectCommands(e,n,i,r,o){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,params:f,data:p,title:m}=r,g=wn(o,()=>a({params:f,data:p,queryParams:l,fragment:c,routeConfig:u,url:d,outlet:h,title:m}));if(g instanceof Ro)throw new Tu(g);n=g}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n[0]==="/")throw new Tu(s);return s}applyRedirectCreateUrlTree(e,n,i,r){let o=this.createSegmentGroup(e,n.root,i,r);return new Ro(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);i[r]=n[a]}else i[r]=o}),i}createSegmentGroup(e,n,i,r){let o=this.createSegments(e,n.segments,i,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,i,r)}),new Te(o,s)}createSegments(e,n,i,r){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new $(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},I0={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m5(t,e,n,i,r){let o=P0(t,e,n);return o.matched?(i=$$(e,i),f5(i,e,n,r).pipe(ee(s=>s===!0?o:N({},I0)))):Y(o)}function P0(t,e,n){if(e.path==="**")return y5(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?N({},I0):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||h$)(n,t,e);if(!r)return N({},I0);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?N(N({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function y5(t){return{matched:!0,parameters:t.length>0?VT(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function OT(t,e,n,i){return n.length>0&&x5(t,n,i)?{segmentGroup:new Te(e,v5(i,new Te(n,t.children))),slicedSegments:[]}:n.length===0&&b5(t,n,i)?{segmentGroup:new Te(t.segments,_5(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new Te(t.segments,t.children),slicedSegments:n}}function _5(t,e,n,i){let r={};for(let o of n)if(Sp(t,e,o)&&!i[li(o)]){let s=new Te([],{});r[li(o)]=s}return N(N({},i),r)}function v5(t,e){let n={};n[le]=e;for(let i of t)if(i.path===""&&li(i)!==le){let r=new Te([],{});n[li(i)]=r}return n}function x5(t,e,n){return n.some(i=>Sp(t,e,i)&&li(i)!==le)}function b5(t,e,n){return n.some(i=>Sp(t,e,i))}function Sp(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function C5(t,e,n,i){return li(t)!==i&&(i===le||!Sp(e,n,t))?!1:P0(e,t,n).matched}function w5(t,e,n){return e.length===0&&!t.children[n]}var S0=class{};function E5(t,e,n,i,r,o,s="emptyOnly"){return new M0(t,e,n,i,r,s,o).recognize()}var D5=31,M0=class{constructor(e,n,i,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new D0(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}recognize(){let e=OT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ee(({children:n,rootSnapshot:i})=>{let r=new Sn(i,n),o=new Cp("",r),s=R$(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new cl([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),le,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,le,n).pipe(ee(i=>({children:i,rootSnapshot:n})),co(i=>{if(i instanceof Tu)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Mu?this.noMatchError(i):i}))}processSegmentGroup(e,n,i,r,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i,o):this.processSegment(e,n,i,i.segments,r,!0,o).pipe(ee(s=>s instanceof Sn?[s]:[]))}processChildren(e,n,i,r){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return He(o).pipe(ar(s=>{let a=i.children[s],l=W$(n,s);return this.processSegmentGroup(e,l,a,s,r)}),py((s,a)=>(s.push(...a),s)),uo(null),fy(),ct(s=>{if(s===null)return sl(i);let a=oA(s);return I5(a),Y(a)}))}processSegment(e,n,i,r,o,s,a){return He(n).pipe(ar(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,i,r,o,s,a).pipe(co(c=>{if(c instanceof Mu)return Y(null);throw c}))),ei(l=>!!l),co(l=>{if(iA(l))return w5(i,r,o)?Y(new S0):sl(i);throw l}))}processSegmentAgainstRoute(e,n,i,r,o,s,a,l){return C5(i,r,o,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,o,s,l):sl(r):sl(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,o,s,a){let{matched:l,parameters:c,consumedSegments:u,positionalParamSegments:d,remainingSegments:h}=P0(n,r,o);if(!l)return sl(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>D5&&(this.allowRedirects=!1));let f=new cl(o,c,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,PT(r),li(r),r.component??r._loadedComponent??null,r,NT(r)),p=bp(f,a,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,r.redirectTo,d,f,e);return this.applyRedirects.lineralizeSegments(r,m).pipe(ct(g=>this.processSegment(e,i,n,g.concat(h),s,!1,a)))}matchSegmentAgainstRoute(e,n,i,r,o,s){let a=m5(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),a.pipe(Tt(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(Tt(({routes:c})=>{let u=i._loadedInjector??e,{parameters:d,consumedSegments:h,remainingSegments:f}=l,p=new cl(h,d,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,PT(i),li(i),i.component??i._loadedComponent??null,i,NT(i)),m=bp(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:y}=OT(n,h,f,c);if(y.length===0&&g.hasChildren())return this.processChildren(u,c,g,p).pipe(ee(x=>new Sn(p,x)));if(c.length===0&&y.length===0)return Y(new Sn(p,[]));let _=li(i)===o;return this.processSegment(u,c,g,y,_?le:o,!0,p).pipe(ee(x=>new Sn(p,x instanceof Sn?[x]:[])))}))):sl(n)))}getChildConfig(e,n,i){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):h5(e,n,i,this.urlSerializer).pipe(ct(r=>r?this.configLoader.loadChildren(e,n).pipe(qe(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):g5(n))):Y({routes:[],injector:e})}};function I5(t){t.sort((e,n)=>e.value.outlet===le?-1:n.value.outlet===le?1:e.value.outlet.localeCompare(n.value.outlet))}function S5(t){let e=t.value.routeConfig;return e&&e.path===""}function oA(t){let e=[],n=new Set;for(let i of t){if(!S5(i)){e.push(i);continue}let r=e.find(o=>i.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=oA(i.children);e.push(new Sn(i.value,r))}return e.filter(i=>!n.has(i))}function PT(t){return t.data||{}}function NT(t){return t.resolve||{}}function M5(t,e,n,i,r,o){return ct(s=>E5(t,e,n,i,s.extractedUrl,r,o).pipe(ee(({state:a,tree:l})=>ge(N({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function T5(t,e){return ct(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return Y(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of sA(l))s.add(c);let a=0;return He(s).pipe(ar(l=>o.has(l)?A5(l,i,t,e):(l.data=bp(l,l.parent,t).resolve,Y(void 0))),qe(()=>a++),Na(1),ct(l=>a===s.size?Y(n):_n))})}function sA(t){let e=t.children.map(n=>sA(n)).flat();return[t,...e]}function A5(t,e,n,i){let r=t.routeConfig,o=t._resolve;return r?.title!==void 0&&!JT(r)&&(o[Ru]=r.title),R5(o,t,e,i).pipe(ee(s=>(t._resolvedData=s,t.data=bp(t,t.parent,n).resolve,null)))}function R5(t,e,n,i){let r=o0(t);if(r.length===0)return Y({});let o={};return He(r).pipe(ct(s=>O5(t[s],e,n,i).pipe(ei(),qe(a=>{if(a instanceof Su)throw wp(new hl,a);o[s]=a}))),Na(1),hy(o),co(s=>iA(s)?_n:Aa(s)))}function O5(t,e,n,i){let r=Nu(e)??i,o=ml(t,r),s=o.resolve?o.resolve(e,n):wn(r,()=>o(e,n));return No(s)}function i0(t){return Tt(e=>{let n=t(e);return n?He(n).pipe(ee(()=>e)):Y(e)})}var aA=(()=>{let e=class e{buildTitle(i){let r,o=i.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===le);return r}getResolvedTitleForRoute(i){return i.data[Ru]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>I(P5),providedIn:"root"});let t=e;return t})(),P5=(()=>{let e=class e extends aA{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(G(DT))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Fu=new L("",{providedIn:"root",factory:()=>({})}),Au=new L(""),N0=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=I(Hf)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Y(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=No(i.loadComponent()).pipe(ee(lA),qe(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),Ss(()=>{this.componentLoaders.delete(i)})),o=new Ma(r,()=>new yt).pipe(Sa());return this.componentLoaders.set(i,o),o}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Y({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=N5(r,this.compiler,i,this.onLoadEndListener).pipe(Ss(()=>{this.childrenLoaders.delete(r)})),a=new Ma(s,()=>new yt).pipe(Sa());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function N5(t,e,n,i){return No(t.loadChildren()).pipe(ee(lA),ct(r=>r instanceof Yc||Array.isArray(r)?Y(r):He(e.compileModuleAsync(r))),ee(r=>{i&&i(t);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(Au,[],{optional:!0,self:!0}).flat()),{routes:s.map(O0),injector:o}}))}function k5(t){return t&&typeof t=="object"&&"default"in t}function lA(t){return k5(t)?t.default:t}var k0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>I(F5),providedIn:"root"});let t=e;return t})(),F5=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),cA=new L(""),uA=new L("");function L5(t,e,n){let i=t.get(uA),r=t.get(zt);return t.get(Pe).runOutsideAngular(()=>{if(!r.startViewTransition||i.skipNextTransition)return i.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),V5(t))),{onViewTransitionCreated:l}=i;return l&&wn(t,()=>l({transition:a,from:e,to:n})),s})}function V5(t){return new Promise(e=>{jf(()=>setTimeout(e),{injector:t,phase:fo.Read})})}var j5=new L(""),F0=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yt,this.transitionAbortSubject=new yt,this.configLoader=I(N0),this.environmentInjector=I(Ut),this.urlSerializer=I(Ou),this.rootContexts=I(Pu),this.location=I(ol),this.inputBindingEnabled=I(Ip,{optional:!0})!==null,this.titleStrategy=I(aA),this.options=I(Fu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=I(k0),this.createViewTransition=I(cA,{optional:!0}),this.navigationErrorHandler=I(j5,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let i=o=>this.events.next(new f0(o)),r=o=>this.events.next(new p0(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(ge(N(N({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,o){return this.transitions=new _t({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:xu,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Mt(s=>s.id!==0),ee(s=>ge(N({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Tt(s=>{let a=!1,l=!1;return Y(s).pipe(Tt(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),_n;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?ge(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let u=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!u&&d!=="reload"){let h="";return this.events.next(new Oo(c.id,this.urlSerializer.serialize(c.rawUrl),h,mp.IgnoredSameUrlNavigation)),c.resolve(!1),_n}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return Y(c).pipe(Tt(h=>{let f=this.transitions?.getValue();return this.events.next(new fl(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?_n:Promise.resolve(h)}),M5(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),qe(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=ge(N({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new yp(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:m,extras:g}=c,y=new fl(h,this.urlSerializer.serialize(f),p,m);this.events.next(y);let _=KT(this.rootComponentType).snapshot;return this.currentTransition=s=ge(N({},c),{targetSnapshot:_,urlAfterRedirects:f,extras:ge(N({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,Y(s)}else{let h="";return this.events.next(new Oo(c.id,this.urlSerializer.serialize(c.extractedUrl),h,mp.IgnoredByUrlHandlingStrategy)),c.resolve(!1),_n}}),qe(c=>{let u=new c0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),ee(c=>(this.currentTransition=s=ge(N({},c),{guards:q$(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),r5(this.environmentInjector,c=>this.events.next(c)),qe(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw wp(this.urlSerializer,c.guardsResult);let u=new u0(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(u)}),Mt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",Mn.GuardRejected),!1)),i0(c=>{if(c.guards.canActivateChecks.length)return Y(c).pipe(qe(u=>{let d=new d0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}),Tt(u=>{let d=!1;return Y(u).pipe(T5(this.paramsInheritanceStrategy,this.environmentInjector),qe({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(u,"",Mn.NoDataFromResolver)}}))}),qe(u=>{let d=new h0(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(d)}))}),i0(c=>{let u=d=>{let h=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(d.routeConfig).pipe(qe(f=>{d.component=f}),ee(()=>{})));for(let f of d.children)h.push(...u(f));return h};return Pc(u(c.targetSnapshot.root)).pipe(uo(null),lr(1))}),i0(()=>this.afterPreactivation()),Tt(()=>{let{currentSnapshot:c,targetSnapshot:u}=s,d=this.createViewTransition?.(this.environmentInjector,c.root,u.root);return d?He(d).pipe(ee(()=>s)):Y(s)}),ee(c=>{let u=j$(i.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=ge(N({},c),{targetRouterState:u}),this.currentNavigation.targetRouterState=u,s}),qe(()=>{this.events.next(new Du)}),G$(this.rootContexts,i.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),lr(1),qe({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Sr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),my(this.transitionAbortSubject.pipe(qe(c=>{throw c}))),Ss(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",Mn.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),co(c=>{if(l=!0,nA(c))this.events.next(new Ir(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),z$(c)?this.events.next(new pl(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let u=new Eu(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let d=wn(this.environmentInjector,()=>this.navigationErrorHandler?.(u));if(d instanceof Su){let{message:h,cancellationCode:f}=wp(this.urlSerializer,d);this.events.next(new Ir(s.id,this.urlSerializer.serialize(s.extractedUrl),h,f)),this.events.next(new pl(d.redirectTo,d.navigationBehaviorOptions))}else{this.events.next(u);let h=i.errorHandler(c);s.resolve(!!h)}}catch(d){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(d)}}return _n}))}))}cancelNavigationTransition(i,r,o){let s=new Ir(i.id,this.urlSerializer.serialize(i.extractedUrl),r,o);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function B5(t){return t!==xu}var U5=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>I(z5),providedIn:"root"});let t=e;return t})(),T0=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},z5=(()=>{let e=class e extends T0{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=zs(e)))(o||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),dA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:()=>I(H5),providedIn:"root"});let t=e;return t})(),H5=(()=>{let e=class e extends dA{constructor(){super(...arguments),this.location=I(ol),this.urlSerializer=I(Ou),this.options=I(Fu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=I(k0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ro,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=KT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof fl)this.stateMemento=this.createStateMemento();else if(i instanceof Oo)this.rawUrlTree=r.initialUrl;else if(i instanceof yp){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(o,r)}}else i instanceof Du?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Ir&&(i.code===Mn.GuardRejected||i.code===Mn.NoDataFromResolver)?this.restoreHistory(r):i instanceof Eu?this.restoreHistory(r,!0):i instanceof Sr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let o=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=N(N({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=zs(e)))(o||e)}})(),e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_u=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(_u||{});function hA(t,e){t.events.pipe(Mt(n=>n instanceof Sr||n instanceof Ir||n instanceof Eu||n instanceof Oo),ee(n=>n instanceof Sr||n instanceof Oo?_u.COMPLETE:(n instanceof Ir?n.code===Mn.Redirect||n.code===Mn.SupersededByNewNavigation:!1)?_u.REDIRECTING:_u.FAILED),Mt(n=>n!==_u.REDIRECTING),lr(1)).subscribe(()=>{e()})}function $5(t){throw t}var W5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},G5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Po=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=I(Uf),this.stateManager=I(dA),this.options=I(Fu,{optional:!0})||{},this.pendingTasks=I(gr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=I(F0),this.urlSerializer=I(Ou),this.location=I(ol),this.urlHandlingStrategy=I(k0),this._events=new yt,this.errorHandler=this.options.errorHandler||$5,this.navigated=!1,this.routeReuseStrategy=I(U5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=I(Au,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!I(Ip,{optional:!0}),this.eventsSubscription=new et,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof Ir&&r.code!==Mn.Redirect&&r.code!==Mn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Sr)this.navigated=!0;else if(r instanceof pl){let a=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=N({info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||B5(o.source)},a);this.scheduleNavigation(l,xu,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}Y5(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=N({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(O0),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:a,d=null;switch(l){case"merge":d=N(N({},this.currentUrlTree.queryParams),s);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=s||null}d!==null&&(d=this.removeEmptyProps(d));let h;try{let f=o?o.snapshot:this.routerState.snapshot.root;h=qT(f)}catch{(typeof i[0]!="string"||i[0][0]!=="/")&&(i=[]),h=this.currentUrlTree.root}return YT(h,i,d,u??null)}navigateByUrl(i,r={skipLocationChange:!1}){let o=Cu(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,xu,null,r)}navigate(i,r={skipLocationChange:!1}){return q5(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let o;if(r===!0?o=N({},W5):r===!1?o=N({},G5):o=r,Cu(i))return ST(this.currentUrlTree,i,o);let s=this.parseUrl(i);return ST(this.currentUrlTree,s,o)}removeEmptyProps(i){return Object.entries(i).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(i,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,u;a?(l=a.resolve,c=a.reject,u=a.promise):u=new Promise((h,f)=>{l=h,c=f});let d=this.pendingTasks.add();return hA(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:l,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(h=>Promise.reject(h))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function q5(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}function Y5(t){return!(t instanceof Du)&&!(t instanceof pl)}var Dp=class{};var X5=(()=>{let e=class e{constructor(i,r,o,s,a){this.router=i,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Mt(i=>i instanceof Sr),ar(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(i,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=Bf(s.providers,i,`Route: ${s.path}`));let a=s._injector??i,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(l,s.children??s._loadedRoutes))}return He(o).pipe(Ra())}preloadConfig(i,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(i,r):o=Y(null);let s=o.pipe(ct(a=>a===null?Y(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??i,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return He([s,a]).pipe(Ra())}else return s})}};e.\u0275fac=function(r){return new(r||e)(G(Po),G(Hf),G(Ut),G(Dp),G(N0))},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),fA=new L(""),Z5=(()=>{let e=class e{constructor(i,r,o,s,a={}){this.urlSerializer=i,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=I(Ut),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof fl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=i.navigationTrigger,this.restoredId=i.restoredState?i.restoredState.navigationId:0):i instanceof Sr?(this.lastId=i.id,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.urlAfterRedirects).fragment)):i instanceof Oo&&i.code===mp.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(i,this.urlSerializer.parse(i.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(i=>{i instanceof _p&&(i.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(i.position):i.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(i.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(i,r){this.zone.runOutsideAngular(()=>Cs(this,null,function*(){yield new Promise(o=>{setTimeout(()=>{o()}),jf(()=>{o()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new _p(i,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){OS()},e.\u0275prov=j({token:e,factory:e.\u0275fac});let t=e;return t})();function pA(t,...e){return vo([{provide:Au,multi:!0,useValue:t},[],{provide:Ks,useFactory:gA,deps:[Po]},{provide:$s,multi:!0,useFactory:mA},e.map(n=>n.\u0275providers)])}function gA(t){return t.routerState.root}function Lu(t,e){return{\u0275kind:t,\u0275providers:e}}function mA(){let t=I(Cn);return e=>{let n=t.get(br);if(e!==n.components[0])return;let i=t.get(Po),r=t.get(yA);t.get(L0)===1&&i.initialNavigation(),t.get(_A,null,fe.Optional)?.setUpPreloading(),t.get(fA,null,fe.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var yA=new L("",{factory:()=>new yt}),L0=new L("",{providedIn:"root",factory:()=>1});function K5(){return Lu(2,[{provide:L0,useValue:0},{provide:zf,multi:!0,deps:[Cn],useFactory:e=>{let n=e.get(UM,Promise.resolve());return()=>n.then(()=>new Promise(i=>{let r=e.get(Po),o=e.get(yA);hA(r,()=>{i(!0)}),e.get(F0).afterPreactivation=()=>(i(!0),o.closed?Y(void 0):o),r.initialNavigation()}))}}])}function Q5(){return Lu(3,[{provide:zf,multi:!0,useFactory:()=>{let e=I(Po);return()=>{e.setUpLocationChangeListener()}}},{provide:L0,useValue:2}])}var _A=new L("");function J5(t){return Lu(0,[{provide:_A,useExisting:X5},{provide:Dp,useExisting:t}])}function e3(){return Lu(8,[RT,{provide:Ip,useExisting:RT}])}function t3(t){let e=[{provide:cA,useValue:L5},{provide:uA,useValue:N({skipNextTransition:!!t?.skipInitialTransition},t)}];return Lu(9,e)}var kT=new L("ROUTER_FORROOT_GUARD"),n3=[ol,{provide:Ou,useClass:hl},Po,Pu,{provide:Ks,useFactory:gA,deps:[Po]},N0,[]],vA=(()=>{let e=class e{constructor(i){}static forRoot(i,r){return{ngModule:e,providers:[n3,[],{provide:Au,multi:!0,useValue:i},{provide:kT,useFactory:s3,deps:[[Po,new V_,new JD]]},{provide:Fu,useValue:r||{}},r?.useHash?r3():o3(),i3(),r?.preloadingStrategy?J5(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?a3(r):[],r?.bindToComponentInputs?e3().\u0275providers:[],r?.enableViewTransitions?t3().\u0275providers:[],l3()]}}static forChild(i){return{ngModule:e,providers:[{provide:Au,multi:!0,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)(G(kT,8))},e.\u0275mod=pr({type:e}),e.\u0275inj=fr({});let t=e;return t})();function i3(){return{provide:fA,useFactory:()=>{let t=I(YM),e=I(Pe),n=I(Fu),i=I(F0),r=I(Ou);return n.scrollOffset&&t.setOffset(n.scrollOffset),new Z5(r,i,t,e,n)}}}function r3(){return{provide:Gs,useClass:HM}}function o3(){return{provide:Gs,useClass:Fv}}function s3(t){return"guarded"}function a3(t){return[t.initialNavigation==="disabled"?Q5().\u0275providers:[],t.initialNavigation==="enabledBlocking"?K5().\u0275providers:[]]}var FT=new L("");function l3(){return[{provide:FT,useFactory:mA},{provide:$s,multi:!0,useExisting:FT}]}function Bu(t){return t+.5|0}var ko=(t,e,n)=>Math.max(Math.min(t,n),e);function Vu(t){return ko(Bu(t*2.55),0,255)}function Fo(t){return ko(Bu(t*255),0,255)}function Mr(t){return ko(Bu(t/2.55)/100,0,1)}function xA(t){return ko(Bu(t*100),0,100)}var $n={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},j0=[..."0123456789ABCDEF"],u3=t=>j0[t&15],d3=t=>j0[(t&240)>>4]+j0[t&15],Mp=t=>(t&240)>>4===(t&15),h3=t=>Mp(t.r)&&Mp(t.g)&&Mp(t.b)&&Mp(t.a);function f3(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&$n[t[1]]*17,g:255&$n[t[2]]*17,b:255&$n[t[3]]*17,a:e===5?$n[t[4]]*17:255}:(e===7||e===9)&&(n={r:$n[t[1]]<<4|$n[t[2]],g:$n[t[3]]<<4|$n[t[4]],b:$n[t[5]]<<4|$n[t[6]],a:e===9?$n[t[7]]<<4|$n[t[8]]:255})),n}var p3=(t,e)=>t<255?e(t):"";function g3(t){var e=h3(t)?u3:d3;return t?"#"+e(t.r)+e(t.g)+e(t.b)+p3(t.a,e):void 0}var m3=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function EA(t,e,n){let i=e*Math.min(n,1-n),r=(o,s=(o+t/30)%12)=>n-i*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function y3(t,e,n){let i=(r,o=(r+t/60)%6)=>n-n*e*Math.max(Math.min(o,4-o,1),0);return[i(5),i(3),i(1)]}function _3(t,e,n){let i=EA(t,1,.5),r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function v3(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function B0(t){let n=t.r/255,i=t.g/255,r=t.b/255,o=Math.max(n,i,r),s=Math.min(n,i,r),a=(o+s)/2,l,c,u;return o!==s&&(u=o-s,c=a>.5?u/(2-o-s):u/(o+s),l=v3(n,i,r,u,o),l=l*60+.5),[l|0,c||0,a]}function U0(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Fo)}function z0(t,e,n){return U0(EA,t,e,n)}function x3(t,e,n){return U0(_3,t,e,n)}function b3(t,e,n){return U0(y3,t,e,n)}function DA(t){return(t%360+360)%360}function C3(t){let e=m3.exec(t),n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?Vu(+e[5]):Fo(+e[5]));let r=DA(+e[2]),o=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?i=x3(r,o,s):e[1]==="hsv"?i=b3(r,o,s):i=z0(r,o,s),{r:i[0],g:i[1],b:i[2],a:n}}function w3(t,e){var n=B0(t);n[0]=DA(n[0]+e),n=z0(n),t.r=n[0],t.g=n[1],t.b=n[2]}function E3(t){if(!t)return;let e=B0(t),n=e[0],i=xA(e[1]),r=xA(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Mr(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}var bA={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},CA={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function D3(){let t={},e=Object.keys(CA),n=Object.keys(bA),i,r,o,s,a;for(i=0;i<e.length;i++){for(s=a=e[i],r=0;r<n.length;r++)o=n[r],a=a.replace(o,bA[o]);o=parseInt(CA[s],16),t[a]=[o>>16&255,o>>8&255,o&255]}return t}var Tp;function I3(t){Tp||(Tp=D3(),Tp.transparent=[0,0,0,0]);let e=Tp[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var S3=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function M3(t){let e=S3.exec(t),n=255,i,r,o;if(e){if(e[7]!==i){let s=+e[7];n=e[8]?Vu(s):ko(s*255,0,255)}return i=+e[1],r=+e[3],o=+e[5],i=255&(e[2]?Vu(i):ko(i,0,255)),r=255&(e[4]?Vu(r):ko(r,0,255)),o=255&(e[6]?Vu(o):ko(o,0,255)),{r:i,g:r,b:o,a:n}}}function T3(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Mr(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}var V0=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,yl=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function A3(t,e,n){let i=yl(Mr(t.r)),r=yl(Mr(t.g)),o=yl(Mr(t.b));return{r:Fo(V0(i+n*(yl(Mr(e.r))-i))),g:Fo(V0(r+n*(yl(Mr(e.g))-r))),b:Fo(V0(o+n*(yl(Mr(e.b))-o))),a:t.a+n*(e.a-t.a)}}function Ap(t,e,n){if(t){let i=B0(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=z0(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function IA(t,e){return t&&Object.assign(e||{},t)}function wA(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Fo(t[3]))):(e=IA(t,{r:0,g:0,b:0,a:1}),e.a=Fo(e.a)),e}function R3(t){return t.charAt(0)==="r"?M3(t):C3(t)}var ju=class t{constructor(e){if(e instanceof t)return e;let n=typeof e,i;n==="object"?i=wA(e):n==="string"&&(i=f3(e)||I3(e)||R3(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=IA(this._rgb);return e&&(e.a=Mr(e.a)),e}set rgb(e){this._rgb=wA(e)}rgbString(){return this._valid?T3(this._rgb):void 0}hexString(){return this._valid?g3(this._rgb):void 0}hslString(){return this._valid?E3(this._rgb):void 0}mix(e,n){if(e){let i=this.rgb,r=e.rgb,o,s=n===o?.5:n,a=2*s-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;o=1-c,i.r=255&c*i.r+o*r.r+.5,i.g=255&c*i.g+o*r.g+.5,i.b=255&c*i.b+o*r.b+.5,i.a=s*i.a+(1-s)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=A3(this._rgb,e._rgb,n)),this}clone(){return new t(this.rgb)}alpha(e){return this._rgb.a=Fo(e),this}clearer(e){let n=this._rgb;return n.a*=1-e,this}greyscale(){let e=this._rgb,n=Bu(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){let n=this._rgb;return n.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ap(this._rgb,2,e),this}darken(e){return Ap(this._rgb,2,-e),this}saturate(e){return Ap(this._rgb,1,e),this}desaturate(e){return Ap(this._rgb,1,-e),this}rotate(e){return w3(this._rgb,e),this}};function Vi(){}var LA=(()=>{let t=0;return()=>t++})();function be(t){return t===null||typeof t>"u"}function je(t){if(Array.isArray&&Array.isArray(t))return!0;let e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function _e(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ze(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function on(t,e){return Ze(t)?t:e}function ie(t,e){return typeof t>"u"?e:t}var VA=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,G0=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Fe(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ae(t,e,n,i){let r,o,s;if(je(t))if(o=t.length,i)for(r=o-1;r>=0;r--)e.call(n,t[r],r);else for(r=0;r<o;r++)e.call(n,t[r],r);else if(_e(t))for(s=Object.keys(t),o=s.length,r=0;r<o;r++)e.call(n,t[s[r]],s[r])}function Hu(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function Np(t){if(je(t))return t.map(Np);if(_e(t)){let e=Object.create(null),n=Object.keys(t),i=n.length,r=0;for(;r<i;++r)e[n[r]]=Np(t[n[r]]);return e}return t}function jA(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function O3(t,e,n,i){if(!jA(t))return;let r=e[t],o=n[t];_e(r)&&_e(o)?vl(r,o,i):e[t]=Np(o)}function vl(t,e,n){let i=je(e)?e:[e],r=i.length;if(!_e(t))return t;n=n||{};let o=n.merger||O3,s;for(let a=0;a<r;++a){if(s=i[a],!_e(s))continue;let l=Object.keys(s);for(let c=0,u=l.length;c<u;++c)o(l[c],t,s,n)}return t}function bl(t,e){return vl(t,e,{merger:P3})}function P3(t,e,n){if(!jA(t))return;let i=e[t],r=n[t];_e(i)&&_e(r)?bl(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Np(r))}var SA={"":t=>t,x:t=>t.x,y:t=>t.y};function N3(t){let e=t.split("."),n=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function k3(t){let e=N3(t);return n=>{for(let i of e){if(i==="")break;n=n&&n[i]}return n}}function Rr(t,e){return(SA[e]||(SA[e]=k3(e)))(t)}function Vp(t){return t.charAt(0).toUpperCase()+t.slice(1)}var Cl=t=>typeof t<"u",Tr=t=>typeof t=="function",q0=(t,e)=>{if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0};function BA(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}var Be=Math.PI,Ue=2*Be,F3=Ue+Be,kp=Number.POSITIVE_INFINITY,L3=Be/180,nt=Be/2,Qs=Be/4,MA=Be*2/3,Ar=Math.log10,ci=Math.sign;function wl(t,e,n){return Math.abs(t-e)<n}function Y0(t){let e=Math.round(t);t=wl(t,e,t/1e3)?e:t;let n=Math.pow(10,Math.floor(Ar(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function UA(t){let e=[],n=Math.sqrt(t),i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,o)=>r-o).pop(),e}function ta(t){return!isNaN(parseFloat(t))&&isFinite(t)}function zA(t,e){let n=Math.round(t);return n-e<=t&&n+e>=t}function X0(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Wn(t){return t*(Be/180)}function jp(t){return t*(180/Be)}function Z0(t){if(!Ze(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function K0(t,e){let n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),o=Math.atan2(i,n);return o<-.5*Be&&(o+=Ue),{angle:o,distance:r}}function Fp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function V3(t,e){return(t-e+F3)%Ue-Be}function rn(t){return(t%Ue+Ue)%Ue}function El(t,e,n,i){let r=rn(t),o=rn(e),s=rn(n),a=rn(o-r),l=rn(s-r),c=rn(r-o),u=rn(r-s);return r===o||r===s||i&&o===s||a>l&&c<u}function vt(t,e,n){return Math.max(e,Math.min(n,t))}function HA(t){return vt(t,-32768,32767)}function ji(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function Bp(t,e,n){n=n||(s=>t[s]<e);let i=t.length-1,r=0,o;for(;i-r>1;)o=r+i>>1,n(o)?r=o:i=o;return{lo:r,hi:i}}var Fi=(t,e,n,i)=>Bp(t,n,i?r=>{let o=t[r][e];return o<n||o===n&&t[r+1][e]===n}:r=>t[r][e]<n),$A=(t,e,n)=>Bp(t,n,i=>t[i][e]>=n);function WA(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}var GA=["push","pop","shift","splice","unshift"];function qA(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),GA.forEach(n=>{let i="_onData"+Vp(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...o){let s=r.apply(this,o);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...o)}),s}})})}function Q0(t,e){let n=t._chartjs;if(!n)return;let i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(GA.forEach(o=>{delete t[o]}),delete t._chartjs)}function J0(t){let e=new Set(t);return e.size===t.length?t:Array.from(e)}var ex=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function tx(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ex.call(window,()=>{i=!1,t.apply(e,n)}))}}function YA(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}var Up=t=>t==="start"?"left":t==="end"?"right":"center",Pt=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,XA=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function nx(t,e,n){let i=e.length,r=0,o=i;if(t._sorted){let{iScale:s,_parsed:a}=t,l=s.axis,{min:c,max:u,minDefined:d,maxDefined:h}=s.getUserBounds();d&&(r=vt(Math.min(Fi(a,l,c).lo,n?i:Fi(e,l,s.getPixelForValue(c)).lo),0,i-1)),h?o=vt(Math.max(Fi(a,s.axis,u,!0).hi+1,n?0:Fi(e,l,s.getPixelForValue(u),!0).hi+1),r,i)-r:o=i-r}return{start:r,count:o}}function ix(t){let{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;let o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}var Rp=t=>t===0||t===1,TA=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Ue/n)),AA=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Ue/n)+1,_l={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*nt)+1,easeOutSine:t=>Math.sin(t*nt),easeInOutSine:t=>-.5*(Math.cos(Be*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Rp(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Rp(t)?t:TA(t,.075,.3),easeOutElastic:t=>Rp(t)?t:AA(t,.075,.3),easeInOutElastic(t){return Rp(t)?t:t<.5?.5*TA(t*2,.1125,.45):.5+.5*AA(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-_l.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?_l.easeInBounce(t*2)*.5:_l.easeOutBounce(t*2-1)*.5+.5};function rx(t){if(t&&typeof t=="object"){let e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function ox(t){return rx(t)?t:new ju(t)}function H0(t){return rx(t)?t:new ju(t).saturate(.5).darken(.1).hexString()}var j3=["x","y","borderWidth","radius","tension"],B3=["color","borderColor","backgroundColor"];function U3(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:B3},numbers:{type:"number",properties:j3}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function z3(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var RA=new Map;function H3(t,e){e=e||{};let n=t+JSON.stringify(e),i=RA.get(n);return i||(i=new Intl.NumberFormat(t,e),RA.set(n,i)),i}function Dl(t,e,n){return H3(e,n).format(t)}var ZA={values(t){return je(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";let i=this.chart.options.locale,r,o=t;if(n.length>1){let c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),o=$3(t,n)}let s=Ar(Math.abs(o)),a=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Dl(t,i,l)},logarithmic(t,e,n){if(t===0)return"0";let i=n[e].significand||t/Math.pow(10,Math.floor(Ar(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?ZA.numeric.call(this,t,e,n):""}};function $3(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var $u={formatters:ZA};function W3(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$u.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Vo=Object.create(null),zp=Object.create(null);function Uu(t,e){if(!e)return t;let n=e.split(".");for(let i=0,r=n.length;i<r;++i){let o=n[i];t=t[o]||(t[o]=Object.create(null))}return t}function $0(t,e,n){return typeof e=="string"?vl(Uu(t,e),n):vl(Uu(t,""),e)}var W0=class{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>H0(r.backgroundColor),this.hoverBorderColor=(i,r)=>H0(r.borderColor),this.hoverColor=(i,r)=>H0(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return $0(this,e,n)}get(e){return Uu(this,e)}describe(e,n){return $0(zp,e,n)}override(e,n){return $0(Vo,e,n)}route(e,n,i,r){let o=Uu(this,e),s=Uu(this,i),a="_"+n;Object.defineProperties(o,{[a]:{value:o[n],writable:!0},[n]:{enumerable:!0,get(){let l=this[a],c=s[r];return _e(l)?Object.assign({},c,l):ie(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}},$e=new W0({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[U3,z3,W3]);function G3(t){return!t||be(t.size)||be(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function zu(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function KA(t,e,n,i){i=i||{};let r=i.data=i.data||{},o=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},o=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let s=0,a=n.length,l,c,u,d,h;for(l=0;l<a;l++)if(d=n[l],d!=null&&!je(d))s=zu(t,r,o,s,d);else if(je(d))for(c=0,u=d.length;c<u;c++)h=d[c],h!=null&&!je(h)&&(s=zu(t,r,o,s,h));t.restore();let f=o.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[o[l]];o.splice(0,f)}return s}function jo(t,e,n){let i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function sx(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Hp(t,e,n,i){ax(t,e,n,i,null)}function ax(t,e,n,i,r){let o,s,a,l,c,u,d,h,f=e.pointStyle,p=e.rotation,m=e.radius,g=(p||0)*L3;if(f&&typeof f=="object"&&(o=f.toString(),o==="[object HTMLImageElement]"||o==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(g),t.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),t.restore();return}if(!(isNaN(m)||m<=0)){switch(t.beginPath(),f){default:r?t.ellipse(n,i,r/2,m,0,0,Ue):t.arc(n,i,m,0,Ue),t.closePath();break;case"triangle":u=r?r/2:m,t.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=MA,t.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=MA,t.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),t.closePath();break;case"rectRounded":c=m*.516,l=m-c,s=Math.cos(g+Qs)*l,d=Math.cos(g+Qs)*(r?r/2-c:l),a=Math.sin(g+Qs)*l,h=Math.sin(g+Qs)*(r?r/2-c:l),t.arc(n-d,i-a,c,g-Be,g-nt),t.arc(n+h,i-s,c,g-nt,g),t.arc(n+d,i+a,c,g,g+nt),t.arc(n-h,i+s,c,g+nt,g+Be),t.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}g+=Qs;case"rectRot":d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),t.moveTo(n-d,i-a),t.lineTo(n+h,i-s),t.lineTo(n+d,i+a),t.lineTo(n-h,i+s),t.closePath();break;case"crossRot":g+=Qs;case"cross":d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s);break;case"star":d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s),g+=Qs,d=Math.cos(g)*(r?r/2:m),s=Math.cos(g)*m,a=Math.sin(g)*m,h=Math.sin(g)*(r?r/2:m),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+h,i-s),t.lineTo(n-h,i+s);break;case"line":s=r?r/2:Math.cos(g)*m,a=Math.sin(g)*m,t.moveTo(n-s,i-a),t.lineTo(n+s,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Li(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Wu(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Gu(t){t.restore()}function QA(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){let o=(e.x+n.x)/2;t.lineTo(o,e.y),t.lineTo(o,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function JA(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function q3(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),be(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Y3(t,e,n,i,r){if(r.strikethrough||r.underline){let o=t.measureText(i),s=e-o.actualBoundingBoxLeft,a=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(s,u),t.lineTo(a,u),t.stroke()}}function X3(t,e){let n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Bo(t,e,n,i,r,o={}){let s=je(e)?e:[e],a=o.strokeWidth>0&&o.strokeColor!=="",l,c;for(t.save(),t.font=r.string,q3(t,o),l=0;l<s.length;++l)c=s[l],o.backdrop&&X3(t,o.backdrop),a&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),be(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,i,o.maxWidth)),t.fillText(c,n,i,o.maxWidth),Y3(t,n,i,c,o),i+=Number(r.lineHeight);t.restore()}function Il(t,e){let{x:n,y:i,w:r,h:o,radius:s}=e;t.arc(n+s.topLeft,i+s.topLeft,s.topLeft,1.5*Be,Be,!0),t.lineTo(n,i+o-s.bottomLeft),t.arc(n+s.bottomLeft,i+o-s.bottomLeft,s.bottomLeft,Be,nt,!0),t.lineTo(n+r-s.bottomRight,i+o),t.arc(n+r-s.bottomRight,i+o-s.bottomRight,s.bottomRight,nt,0,!0),t.lineTo(n+r,i+s.topRight),t.arc(n+r-s.topRight,i+s.topRight,s.topRight,0,-nt,!0),t.lineTo(n+s.topLeft,i)}var Z3=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,K3=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Q3(t,e){let n=(""+t).match(Z3);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}var J3=t=>+t||0;function $p(t,e){let n={},i=_e(e),r=i?Object.keys(e):e,o=_e(t)?i?s=>ie(t[s],t[e[s]]):s=>t[s]:()=>t;for(let s of r)n[s]=J3(o(s));return n}function lx(t){return $p(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Uo(t){return $p(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Nt(t){let e=lx(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function dt(t,e){t=t||{},e=e||$e.font;let n=ie(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ie(t.style,e.style);i&&!(""+i).match(K3)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:ie(t.family,e.family),lineHeight:Q3(ie(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ie(t.weight,e.weight),string:""};return r.string=G3(r),r}function Sl(t,e,n,i){let r=!0,o,s,a;for(o=0,s=t.length;o<s;++o)if(a=t[o],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),n!==void 0&&je(a)&&(a=a[n%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function eR(t,e,n){let{min:i,max:r}=t,o=G0(e,(r-i)/2),s=(a,l)=>n&&a===0?0:a+l;return{min:s(i,-Math.abs(o)),max:s(r,o)}}function Or(t,e){return Object.assign(Object.create(t),e)}function Wp(t,e=[""],n,i,r=()=>t[0]){let o=n||t;typeof i>"u"&&(i=iR("_fallback",t));let s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:i,_getTarget:r,override:a=>Wp([a,...t],e,o,i)};return new Proxy(s,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return tR(a,l,()=>aW(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return PA(a).includes(l)},ownKeys(a){return PA(a)},set(a,l,c){let u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function ea(t,e,n,i){let r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:cx(t,i),setContext:o=>ea(t,o,n,i),override:o=>ea(t.override(o),e,n,i)};return new Proxy(r,{deleteProperty(o,s){return delete o[s],delete t[s],!0},get(o,s,a){return tR(o,s,()=>tW(o,s,a))},getOwnPropertyDescriptor(o,s){return o._descriptors.allKeys?Reflect.has(t,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,s)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(o,s){return Reflect.has(t,s)},ownKeys(){return Reflect.ownKeys(t)},set(o,s,a){return t[s]=a,delete o[s],!0}})}function cx(t,e={scriptable:!0,indexable:!0}){let{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Tr(n)?n:()=>n,isIndexable:Tr(i)?i:()=>i}}var eW=(t,e)=>t?t+Vp(e):e,ux=(t,e)=>_e(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function tR(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];let i=n();return t[e]=i,i}function tW(t,e,n){let{_proxy:i,_context:r,_subProxy:o,_descriptors:s}=t,a=i[e];return Tr(a)&&s.isScriptable(e)&&(a=nW(e,a,t,n)),je(a)&&a.length&&(a=iW(e,a,t,s.isIndexable)),ux(e,a)&&(a=ea(a,r,o&&o[e],s)),a}function nW(t,e,n,i){let{_proxy:r,_context:o,_subProxy:s,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(o,s||i);return a.delete(t),ux(t,l)&&(l=dx(r._scopes,r,t,l)),l}function iW(t,e,n,i){let{_proxy:r,_context:o,_subProxy:s,_descriptors:a}=n;if(typeof o.index<"u"&&i(t))return e[o.index%e.length];if(_e(e[0])){let l=e,c=r._scopes.filter(u=>u!==l);e=[];for(let u of l){let d=dx(c,r,t,u);e.push(ea(d,o,s&&s[t],a))}}return e}function nR(t,e,n){return Tr(t)?t(e,n):t}var rW=(t,e)=>t===!0?e:typeof t=="string"?Rr(e,t):void 0;function oW(t,e,n,i,r){for(let o of e){let s=rW(n,o);if(s){t.add(s);let a=nR(s._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(s===!1&&typeof i<"u"&&n!==i)return null}return!1}function dx(t,e,n,i){let r=e._rootScopes,o=nR(e._fallback,n,i),s=[...t,...r],a=new Set;a.add(i);let l=OA(a,s,n,o||n,i);return l===null||typeof o<"u"&&o!==n&&(l=OA(a,s,o,l,i),l===null)?!1:Wp(Array.from(a),[""],r,o,()=>sW(e,n,i))}function OA(t,e,n,i,r){for(;n;)n=oW(t,e,n,i,r);return n}function sW(t,e,n){let i=t._getTarget();e in i||(i[e]={});let r=i[e];return je(r)&&_e(n)?n:r||{}}function aW(t,e,n,i){let r;for(let o of e)if(r=iR(eW(o,t),n),typeof r<"u")return ux(t,r)?dx(n,i,t,r):r}function iR(t,e){for(let n of e){if(!n)continue;let i=n[t];if(typeof i<"u")return i}}function PA(t){let e=t._keys;return e||(e=t._keys=lW(t._scopes)),e}function lW(t){let e=new Set;for(let n of t)for(let i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function hx(t,e,n,i){let{iScale:r}=t,{key:o="r"}=this._parsing,s=new Array(i),a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=e[c],s[a]={r:r.parse(Rr(u,o),c)};return s}var cW=Number.EPSILON||1e-14,xl=(t,e)=>e<t.length&&!t[e].skip&&t[e],rR=t=>t==="x"?"y":"x";function uW(t,e,n,i){let r=t.skip?e:t,o=e,s=n.skip?e:n,a=Fp(o,r),l=Fp(s,o),c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;let d=i*c,h=i*u;return{previous:{x:o.x-d*(s.x-r.x),y:o.y-d*(s.y-r.y)},next:{x:o.x+h*(s.x-r.x),y:o.y+h*(s.y-r.y)}}}function dW(t,e,n){let i=t.length,r,o,s,a,l,c=xl(t,0);for(let u=0;u<i-1;++u)if(l=c,c=xl(t,u+1),!(!l||!c)){if(wl(e[u],0,cW)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],o=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(o,2),!(a<=9)&&(s=3/Math.sqrt(a),n[u]=r*s*e[u],n[u+1]=o*s*e[u])}}function hW(t,e,n="x"){let i=rR(n),r=t.length,o,s,a,l=xl(t,0);for(let c=0;c<r;++c){if(s=a,a=l,l=xl(t,c+1),!a)continue;let u=a[n],d=a[i];s&&(o=(u-s[n])/3,a[`cp1${n}`]=u-o,a[`cp1${i}`]=d-o*e[c]),l&&(o=(l[n]-u)/3,a[`cp2${n}`]=u+o,a[`cp2${i}`]=d+o*e[c])}}function fW(t,e="x"){let n=rR(e),i=t.length,r=Array(i).fill(0),o=Array(i),s,a,l,c=xl(t,0);for(s=0;s<i;++s)if(a=l,l=c,c=xl(t,s+1),!!l){if(c){let u=c[e]-l[e];r[s]=u!==0?(c[n]-l[n])/u:0}o[s]=a?c?ci(r[s-1])!==ci(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}dW(t,r,o),hW(t,o,e)}function Op(t,e,n){return Math.max(Math.min(t,n),e)}function pW(t,e){let n,i,r,o,s,a=Li(t[0],e);for(n=0,i=t.length;n<i;++n)s=o,o=a,a=n<i-1&&Li(t[n+1],e),o&&(r=t[n],s&&(r.cp1x=Op(r.cp1x,e.left,e.right),r.cp1y=Op(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Op(r.cp2x,e.left,e.right),r.cp2y=Op(r.cp2y,e.top,e.bottom)))}function oR(t,e,n,i,r){let o,s,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")fW(t,r);else{let c=i?t[t.length-1]:t[0];for(o=0,s=t.length;o<s;++o)a=t[o],l=uW(c,a,t[Math.min(o+1,s-(i?0:1))%s],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&pW(t,n)}function Gp(){return typeof window<"u"&&typeof document<"u"}function qp(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lp(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}var Yp=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function gW(t,e){return Yp(t).getPropertyValue(e)}var mW=["top","right","bottom","left"];function Js(t,e,n){let i={};n=n?"-"+n:"";for(let r=0;r<4;r++){let o=mW[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var yW=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function _W(t,e){let n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:o}=i,s=!1,a,l;if(yW(r,o,t.target))a=r,l=o;else{let c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,s=!0}return{x:a,y:l,box:s}}function zo(t,e){if("native"in t)return t;let{canvas:n,currentDevicePixelRatio:i}=e,r=Yp(n),o=r.boxSizing==="border-box",s=Js(r,"padding"),a=Js(r,"border","width"),{x:l,y:c,box:u}=_W(t,n),d=s.left+(u&&a.left),h=s.top+(u&&a.top),{width:f,height:p}=e;return o&&(f-=s.width+a.width,p-=s.height+a.height),{x:Math.round((l-d)/f*n.width/i),y:Math.round((c-h)/p*n.height/i)}}function vW(t,e,n){let i,r;if(e===void 0||n===void 0){let o=t&&qp(t);if(!o)e=t.clientWidth,n=t.clientHeight;else{let s=o.getBoundingClientRect(),a=Yp(o),l=Js(a,"border","width"),c=Js(a,"padding");e=s.width-c.width-l.width,n=s.height-c.height-l.height,i=Lp(a.maxWidth,o,"clientWidth"),r=Lp(a.maxHeight,o,"clientHeight")}}return{width:e,height:n,maxWidth:i||kp,maxHeight:r||kp}}var Pp=t=>Math.round(t*10)/10;function sR(t,e,n,i){let r=Yp(t),o=Js(r,"margin"),s=Lp(r.maxWidth,t,"clientWidth")||kp,a=Lp(r.maxHeight,t,"clientHeight")||kp,l=vW(t,e,n),{width:c,height:u}=l;if(r.boxSizing==="content-box"){let h=Js(r,"border","width"),f=Js(r,"padding");c-=f.width+h.width,u-=f.height+h.height}return c=Math.max(0,c-o.width),u=Math.max(0,i?c/i:u-o.height),c=Pp(Math.min(c,s,l.maxWidth)),u=Pp(Math.min(u,a,l.maxHeight)),c&&!u&&(u=Pp(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=Pp(Math.floor(u*i))),{width:c,height:u}}function fx(t,e,n){let i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);let s=t.canvas;return s.style&&(n||!s.style.height&&!s.style.width)&&(s.style.height=`${t.height}px`,s.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||s.height!==r||s.width!==o?(t.currentDevicePixelRatio=i,s.height=r,s.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}var aR=function(){let t=!1;try{let e={get passive(){return t=!0,!1}};Gp()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function px(t,e){let n=gW(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Lo(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function lR(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function cR(t,e,n,i){let r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},s=Lo(t,r,n),a=Lo(r,o,n),l=Lo(o,e,n),c=Lo(s,a,n),u=Lo(a,l,n);return Lo(c,u,n)}var xW=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},bW=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function na(t,e,n){return t?xW(e,n):bW()}function gx(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function mx(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function uR(t){return t==="angle"?{between:El,compare:V3,normalize:rn}:{between:ji,compare:(e,n)=>e-n,normalize:e=>e}}function NA({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function CW(t,e,n){let{property:i,start:r,end:o}=n,{between:s,normalize:a}=uR(i),l=e.length,{start:c,end:u,loop:d}=t,h,f;if(d){for(c+=l,u+=l,h=0,f=l;h<f&&s(a(e[c%l][i]),r,o);++h)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:d,style:t.style}}function yx(t,e,n){if(!n)return[t];let{property:i,start:r,end:o}=n,s=e.length,{compare:a,between:l,normalize:c}=uR(i),{start:u,end:d,loop:h,style:f}=CW(t,e,n),p=[],m=!1,g=null,y,_,x,b=()=>l(r,x,y)&&a(r,x)!==0,v=()=>a(o,y)===0||l(o,x,y),C=()=>m||b(),E=()=>!m||v();for(let w=u,D=u;w<=d;++w)_=e[w%s],!_.skip&&(y=c(_[i]),y!==x&&(m=l(y,r,o),g===null&&C()&&(g=a(y,r)===0?w:D),g!==null&&E()&&(p.push(NA({start:g,end:w,loop:h,count:s,style:f})),g=null),D=w,x=y));return g!==null&&p.push(NA({start:g,end:d,loop:h,count:s,style:f})),p}function _x(t,e){let n=[],i=t.segments;for(let r=0;r<i.length;r++){let o=yx(i[r],t.points,e);o.length&&n.push(...o)}return n}function wW(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}function EW(t,e,n,i){let r=t.length,o=[],s=e,a=t[e],l;for(l=e+1;l<=n;++l){let c=t[l%r];c.skip||c.stop?a.skip||(i=!1,o.push({start:e%r,end:(l-1)%r,loop:i}),e=s=c.stop?l:null):(s=l,a.skip&&(e=l)),a=c}return s!==null&&o.push({start:e%r,end:s%r,loop:i}),o}function dR(t,e){let n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];let o=!!t._loop,{start:s,end:a}=wW(n,r,o,i);if(i===!0)return kA(t,[{start:s,end:a,loop:o}],n,e);let l=a<s?a+r:a,c=!!t._fullLoop&&s===0&&a===r-1;return kA(t,EW(n,s,l,c),n,e)}function kA(t,e,n,i){return!i||!i.setContext||!n?e:DW(t,e,n,i)}function DW(t,e,n,i){let r=t._chart.getContext(),o=FA(t.options),{_datasetIndex:s,options:{spanGaps:a}}=t,l=n.length,c=[],u=o,d=e[0].start,h=d;function f(p,m,g,y){let _=a?-1:1;if(p!==m){for(p+=l;n[p%l].skip;)p-=_;for(;n[m%l].skip;)m+=_;p%l!==m%l&&(c.push({start:p%l,end:m%l,loop:g,style:y}),u=y,d=m%l)}}for(let p of e){d=a?d:p.start;let m=n[d%l],g;for(h=d+1;h<=p.end;h++){let y=n[h%l];g=FA(i.setContext(Or(r,{type:"segment",p0:m,p1:y,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:s}))),IW(g,u)&&f(d,h-1,p.loop,u),m=y,u=g}d<h-1&&f(d,h-1,p.loop,u)}return c}function FA(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function IW(t,e){if(!e)return!1;let n=[],i=function(r,o){return rx(o)?(n.includes(o)||n.push(o),n.indexOf(o)):o};return JSON.stringify(t,i)!==JSON.stringify(e,i)}var Mx=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){let o=n.listeners[r],s=n.duration;o.forEach(a=>a({chart:e,initial:n.initial,numSteps:s,currentStep:Math.min(i-n.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=ex.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let o=i.items,s=o.length-1,a=!1,l;for(;s>=0;--s)l=o[s],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(o[s]=o[o.length-1],o.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),o.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=o.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){let n=this._charts,i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){let n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){let n=this._charts.get(e);if(!n||!n.items.length)return;let i=n.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},Pr=new Mx,hR="transparent",SW={boolean(t,e,n){return n>.5?e:t},color(t,e,n){let i=ox(t||hR),r=i.valid&&ox(e||hR);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}},Tx=class{constructor(e,n,i,r){let o=n[i];r=Sl([e.to,r,o,e.from]);let s=Sl([e.from,o,r]);this._active=!0,this._fn=e.fn||SW[e.type||typeof s],this._easing=_l[e.easing]||_l.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);let r=this._target[this._prop],o=i-this._start,s=this._duration-o;this._start=i,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=o,this._loop=!!e.loop,this._to=Sl([e.to,n,r,e.from]),this._from=Sl([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let n=e-this._start,i=this._duration,r=this._prop,o=this._from,s=this._loop,a=this._to,l;if(this._active=o!==a&&(s||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=o;return}l=n/i%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(o,a,l)}wait(){let e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){let n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}},rg=class{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!_e(e))return;let n=Object.keys($e.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let o=e[r];if(!_e(o))return;let s={};for(let a of n)s[a]=o[a];(je(o.properties)&&o.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,s)})})}_animateOptions(e,n){let i=n.options,r=TW(e,i);if(!r)return[];let o=this._createAnimations(r,i);return i.$shared&&MW(e.options.$animations,i).then(()=>{e.options=i},()=>{}),o}_createAnimations(e,n){let i=this._properties,r=[],o=e.$animations||(e.$animations={}),s=Object.keys(n),a=Date.now(),l;for(l=s.length-1;l>=0;--l){let c=s[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}let u=n[c],d=o[c],h=i.get(c);if(d)if(h&&d.active()){d.update(h,u,a);continue}else d.cancel();if(!h||!h.duration){e[c]=u;continue}o[c]=d=new Tx(h,e,c,u),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}let i=this._createAnimations(e,n);if(i.length)return Pr.add(this._chart,i),!0}};function MW(t,e){let n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let o=t[i[r]];o&&o.active()&&n.push(o.wait())}return Promise.all(n)}function TW(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fR(t,e){let n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,o=n.max===void 0?e:0;return{start:i?o:r,end:i?r:o}}function AW(t,e,n){if(n===!1)return!1;let i=fR(t,n),r=fR(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function RW(t){let e,n,i,r;return _e(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function f1(t,e){let n=[],i=t._getSortedDatasetMetas(e),r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function pR(t,e,n,i={}){let r=t.keys,o=i.mode==="single",s,a,l,c;if(e!==null){for(s=0,a=r.length;s<a;++s){if(l=+r[s],l===n){if(i.all)continue;break}c=t.values[l],Ze(c)&&(o||e===0||ci(e)===ci(c))&&(e+=c)}return e}}function OW(t,e){let{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",o=i.axis==="x"?"x":"y",s=Object.keys(t),a=new Array(s.length),l,c,u;for(l=0,c=s.length;l<c;++l)u=s[l],a[l]={[r]:u,[o]:t[u]};return a}function gR(t,e){let n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function PW(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function NW(t){let{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function kW(t,e,n){let i=t[e]||(t[e]={});return i[n]||(i[n]={})}function mR(t,e,n,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let o=t[r.index];if(n&&o>0||!n&&o<0)return r.index}return null}function yR(t,e){let{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:s,index:a}=i,l=o.axis,c=s.axis,u=PW(o,s,i),d=e.length,h;for(let f=0;f<d;++f){let p=e[f],{[l]:m,[c]:g}=p,y=p._stacks||(p._stacks={});h=y[c]=kW(r,u,m),h[a]=g,h._top=mR(h,s,!0,i.type),h._bottom=mR(h,s,!1,i.type);let _=h._visualValues||(h._visualValues={});_[a]=g}}function vx(t,e){let n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function FW(t,e){return Or(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function LW(t,e,n){return Or(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function qu(t,e){let n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(let r of e){let o=r._stacks;if(!o||o[i]===void 0||o[i][n]===void 0)return;delete o[i][n],o[i]._visualValues!==void 0&&o[i]._visualValues[n]!==void 0&&delete o[i]._visualValues[n]}}}var xx=t=>t==="reset"||t==="none",_R=(t,e)=>e?t:Object.assign({},t),VW=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:f1(n,!0),values:null},$o=(()=>{class t{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(n,i){this.chart=n,this._ctx=n.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let n=this._cachedMeta;this.configure(),this.linkScales(),n._stacked=gR(n.vScale,n),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(n){this.index!==n&&qu(this._cachedMeta),this.index=n}linkScales(){let n=this.chart,i=this._cachedMeta,r=this.getDataset(),o=(h,f,p,m)=>h==="x"?f:h==="r"?m:p,s=i.xAxisID=ie(r.xAxisID,vx(n,"x")),a=i.yAxisID=ie(r.yAxisID,vx(n,"y")),l=i.rAxisID=ie(r.rAxisID,vx(n,"r")),c=i.indexAxis,u=i.iAxisID=o(c,s,a,l),d=i.vAxisID=o(c,a,s,l);i.xScale=this.getScaleForId(s),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(l),i.iScale=this.getScaleForId(u),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(n){return this.chart.scales[n]}_getOtherScale(n){let i=this._cachedMeta;return n===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let n=this._cachedMeta;this._data&&Q0(this._data,this),n._stacked&&qu(n)}_dataCheck(){let n=this.getDataset(),i=n.data||(n.data=[]),r=this._data;if(_e(i)){let o=this._cachedMeta;this._data=OW(i,o)}else if(r!==i){if(r){Q0(r,this);let o=this._cachedMeta;qu(o),o._parsed=[]}i&&Object.isExtensible(i)&&qA(i,this),this._syncList=[],this._data=i}}addElements(){let n=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(n.dataset=new this.datasetElementType)}buildOrUpdateElements(n){let i=this._cachedMeta,r=this.getDataset(),o=!1;this._dataCheck();let s=i._stacked;i._stacked=gR(i.vScale,i),i.stack!==r.stack&&(o=!0,qu(i),i.stack=r.stack),this._resyncElements(n),(o||s!==i._stacked)&&yR(this,i._parsed)}configure(){let n=this.chart.config,i=n.datasetScopeKeys(this._type),r=n.getOptionScopes(this.getDataset(),i,!0);this.options=n.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(n,i){let{_cachedMeta:r,_data:o}=this,{iScale:s,_stacked:a}=r,l=s.axis,c=n===0&&i===o.length?!0:r._sorted,u=n>0&&r._parsed[n-1],d,h,f;if(this._parsing===!1)r._parsed=o,r._sorted=!0,f=o;else{je(o[n])?f=this.parseArrayData(r,o,n,i):_e(o[n])?f=this.parseObjectData(r,o,n,i):f=this.parsePrimitiveData(r,o,n,i);let p=()=>h[l]===null||u&&h[l]<u[l];for(d=0;d<i;++d)r._parsed[d+n]=h=f[d],c&&(p()&&(c=!1),u=h);r._sorted=c}a&&yR(this,f)}parsePrimitiveData(n,i,r,o){let{iScale:s,vScale:a}=n,l=s.axis,c=a.axis,u=s.getLabels(),d=s===a,h=new Array(o),f,p,m;for(f=0,p=o;f<p;++f)m=f+r,h[f]={[l]:d||s.parse(u[m],m),[c]:a.parse(i[m],m)};return h}parseArrayData(n,i,r,o){let{xScale:s,yScale:a}=n,l=new Array(o),c,u,d,h;for(c=0,u=o;c<u;++c)d=c+r,h=i[d],l[c]={x:s.parse(h[0],d),y:a.parse(h[1],d)};return l}parseObjectData(n,i,r,o){let{xScale:s,yScale:a}=n,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=new Array(o),d,h,f,p;for(d=0,h=o;d<h;++d)f=d+r,p=i[f],u[d]={x:s.parse(Rr(p,l),f),y:a.parse(Rr(p,c),f)};return u}getParsed(n){return this._cachedMeta._parsed[n]}getDataElement(n){return this._cachedMeta.data[n]}applyStack(n,i,r){let o=this.chart,s=this._cachedMeta,a=i[n.axis],l={keys:f1(o,!0),values:i._stacks[n.axis]._visualValues};return pR(l,a,s.index,{mode:r})}updateRangeFromParsed(n,i,r,o){let s=r[i.axis],a=s===null?NaN:s,l=o&&r._stacks[i.axis];o&&l&&(o.values=l,a=pR(o,s,this._cachedMeta.index)),n.min=Math.min(n.min,a),n.max=Math.max(n.max,a)}getMinMax(n,i){let r=this._cachedMeta,o=r._parsed,s=r._sorted&&n===r.iScale,a=o.length,l=this._getOtherScale(n),c=VW(i,r,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:h}=NW(l),f,p;function m(){p=o[f];let g=p[l.axis];return!Ze(p[n.axis])||d>g||h<g}for(f=0;f<a&&!(!m()&&(this.updateRangeFromParsed(u,n,p,c),s));++f);if(s){for(f=a-1;f>=0;--f)if(!m()){this.updateRangeFromParsed(u,n,p,c);break}}return u}getAllParsedValues(n){let i=this._cachedMeta._parsed,r=[],o,s,a;for(o=0,s=i.length;o<s;++o)a=i[o][n.axis],Ze(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(n){let i=this._cachedMeta,r=i.iScale,o=i.vScale,s=this.getParsed(n);return{label:r?""+r.getLabelForValue(s[r.axis]):"",value:o?""+o.getLabelForValue(s[o.axis]):""}}_update(n){let i=this._cachedMeta;this.update(n||"default"),i._clip=RW(ie(this.options.clip,AW(i.xScale,i.yScale,this.getMaxOverflow())))}update(n){}draw(){let n=this._ctx,i=this.chart,r=this._cachedMeta,o=r.data||[],s=i.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||o.length-l,u=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(n,s,l,c),d=l;d<l+c;++d){let h=o[d];h.hidden||(h.active&&u?a.push(h):h.draw(n,s))}for(d=0;d<a.length;++d)a[d].draw(n,s)}getStyle(n,i){let r=i?"active":"default";return n===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(n||0,r)}getContext(n,i,r){let o=this.getDataset(),s;if(n>=0&&n<this._cachedMeta.data.length){let a=this._cachedMeta.data[n];s=a.$context||(a.$context=LW(this.getContext(),n,a)),s.parsed=this.getParsed(n),s.raw=o.data[n],s.index=s.dataIndex=n}else s=this.$context||(this.$context=FW(this.chart.getContext(),this.index)),s.dataset=o,s.index=s.datasetIndex=this.index;return s.active=!!i,s.mode=r,s}resolveDatasetElementOptions(n){return this._resolveElementOptions(this.datasetElementType.id,n)}resolveDataElementOptions(n,i){return this._resolveElementOptions(this.dataElementType.id,i,n)}_resolveElementOptions(n,i="default",r){let o=i==="active",s=this._cachedDataOpts,a=n+"-"+i,l=s[a],c=this.enableOptionSharing&&Cl(r);if(l)return _R(l,c);let u=this.chart.config,d=u.datasetElementScopeKeys(this._type,n),h=o?[`${n}Hover`,"hover",n,""]:[n,""],f=u.getOptionScopes(this.getDataset(),d),p=Object.keys($e.elements[n]),m=()=>this.getContext(r,o,i),g=u.resolveNamedOptions(f,p,m,h);return g.$shared&&(g.$shared=c,s[a]=Object.freeze(_R(g,c))),g}_resolveAnimations(n,i,r){let o=this.chart,s=this._cachedDataOpts,a=`animation-${i}`,l=s[a];if(l)return l;let c;if(o.options.animation!==!1){let d=this.chart.config,h=d.datasetAnimationScopeKeys(this._type,i),f=d.getOptionScopes(this.getDataset(),h);c=d.createResolver(f,this.getContext(n,r,i))}let u=new rg(o,c&&c.animations);return c&&c._cacheable&&(s[a]=Object.freeze(u)),u}getSharedOptions(n){if(n.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},n))}includeOptions(n,i){return!i||xx(n)||this.chart._animationsDisabled}_getSharedOptions(n,i){let r=this.resolveDataElementOptions(n,i),o=this._sharedOptions,s=this.getSharedOptions(r),a=this.includeOptions(i,s)||s!==o;return this.updateSharedOptions(s,i,r),{sharedOptions:s,includeOptions:a}}updateElement(n,i,r,o){xx(o)?Object.assign(n,r):this._resolveAnimations(i,o).update(n,r)}updateSharedOptions(n,i,r){n&&!xx(i)&&this._resolveAnimations(void 0,i).update(n,r)}_setStyle(n,i,r,o){n.active=o;let s=this.getStyle(i,o);this._resolveAnimations(i,r,o).update(n,{options:!o&&this.getSharedOptions(s)||s})}removeHoverStyle(n,i,r){this._setStyle(n,r,"active",!1)}setHoverStyle(n,i,r){this._setStyle(n,r,"active",!0)}_removeDatasetHoverStyle(){let n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!1)}_setDatasetHoverStyle(){let n=this._cachedMeta.dataset;n&&this._setStyle(n,void 0,"active",!0)}_resyncElements(n){let i=this._data,r=this._cachedMeta.data;for(let[l,c,u]of this._syncList)this[l](c,u);this._syncList=[];let o=r.length,s=i.length,a=Math.min(s,o);a&&this.parse(0,a),s>o?this._insertElements(o,s-o,n):s<o&&this._removeElements(s,o-s)}_insertElements(n,i,r=!0){let o=this._cachedMeta,s=o.data,a=n+i,l,c=u=>{for(u.length+=i,l=u.length-1;l>=a;l--)u[l]=u[l-i]};for(c(s),l=n;l<a;++l)s[l]=new this.dataElementType;this._parsing&&c(o._parsed),this.parse(n,i),r&&this.updateElements(s,n,i,"reset")}updateElements(n,i,r,o){}_removeElements(n,i){let r=this._cachedMeta;if(this._parsing){let o=r._parsed.splice(n,i);r._stacked&&qu(r,o)}r.data.splice(n,i)}_sync(n){if(this._parsing)this._syncList.push(n);else{let[i,r,o]=n;this[i](r,o)}this.chart._dataChanges.push([this.index,...n])}_onDataPush(){let n=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-n,n])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(n,i){i&&this._sync(["_removeElements",n,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",n,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return t})();function jW(t,e){if(!t._cache.$bar){let n=t.getMatchingVisibleMetas(e),i=[];for(let r=0,o=n.length;r<o;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=J0(i.sort((r,o)=>r-o))}return t._cache.$bar}function BW(t){let e=t.iScale,n=jW(e,t.type),i=e._length,r,o,s,a,l=()=>{s===32767||s===-32768||(Cl(a)&&(i=Math.min(i,Math.abs(s-a)||i)),a=s)};for(r=0,o=n.length;r<o;++r)s=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,o=e.ticks.length;r<o;++r)s=e.getPixelForTick(r),l();return i}function UW(t,e,n,i){let r=n.barThickness,o,s;return be(r)?(o=e.min*n.categoryPercentage,s=n.barPercentage):(o=r*i,s=1),{chunk:o/i,ratio:s,start:e.pixels[t]-o/2}}function zW(t,e,n,i){let r=e.pixels,o=r[t],s=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null,l=n.categoryPercentage;s===null&&(s=o-(a===null?e.end-e.start:a-o)),a===null&&(a=o+o-s);let c=o-(o-Math.min(s,a))/2*l;return{chunk:Math.abs(a-s)/2*l/i,ratio:n.barPercentage,start:c}}function HW(t,e,n,i){let r=n.parse(t[0],i),o=n.parse(t[1],i),s=Math.min(r,o),a=Math.max(r,o),l=s,c=a;Math.abs(s)>Math.abs(a)&&(l=a,c=s),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:o,min:s,max:a}}function p1(t,e,n,i){return je(t)?HW(t,e,n,i):e[n.axis]=n.parse(t,i),e}function vR(t,e,n,i){let r=t.iScale,o=t.vScale,s=r.getLabels(),a=r===o,l=[],c,u,d,h;for(c=n,u=n+i;c<u;++c)h=e[c],d={},d[r.axis]=a||r.parse(s[c],c),l.push(p1(h,d,o,c));return l}function bx(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function $W(t,e,n){return t!==0?ci(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function WW(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}function GW(t,e,n,i){let r=e.borderSkipped,o={};if(!r){t.borderSkipped=o;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:s,end:a,reverse:l,top:c,bottom:u}=WW(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(o[xR(u,s,a,l)]=!0,r=c)),o[xR(r,s,a,l)]=!0,t.borderSkipped=o}function xR(t,e,n,i){return i?(t=qW(t,e,n),t=bR(t,n,e)):t=bR(t,e,n),t}function qW(t,e,n){return t===e?n:t===n?e:t}function bR(t,e,n){return t==="start"?e:t==="end"?n:t}function YW(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}var XW=(()=>{class t extends $o{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(n,i,r,o){return vR(n,i,r,o)}parseArrayData(n,i,r,o){return vR(n,i,r,o)}parseObjectData(n,i,r,o){let{iScale:s,vScale:a}=n,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,u=s.axis==="x"?l:c,d=a.axis==="x"?l:c,h=[],f,p,m,g;for(f=r,p=r+o;f<p;++f)g=i[f],m={},m[s.axis]=s.parse(Rr(g,u),f),h.push(p1(Rr(g,d),m,a,f));return h}updateRangeFromParsed(n,i,r,o){super.updateRangeFromParsed(n,i,r,o);let s=r._custom;s&&i===this._cachedMeta.vScale&&(n.min=Math.min(n.min,s.min),n.max=Math.max(n.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(n){let i=this._cachedMeta,{iScale:r,vScale:o}=i,s=this.getParsed(n),a=s._custom,l=bx(a)?"["+a.start+", "+a.end+"]":""+o.getLabelForValue(s[o.axis]);return{label:""+r.getLabelForValue(s[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let n=this._cachedMeta;n.stack=this.getDataset().stack}update(n){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,n)}updateElements(n,i,r,o){let s=o==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),u=l.isHorizontal(),d=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(i,o);for(let p=i;p<i+r;p++){let m=this.getParsed(p),g=s||be(m[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(p),y=this._calculateBarIndexPixels(p,d),_=(m._stacks||{})[l.axis],x={horizontal:u,base:g.base,enableBorderRadius:!_||bx(m._custom)||a===_._top||a===_._bottom,x:u?g.head:y.center,y:u?y.center:g.head,height:u?y.size:Math.abs(g.size),width:u?Math.abs(g.size):y.size};f&&(x.options=h||this.resolveDataElementOptions(p,n[p].active?"active":o));let b=x.options||n[p].options;GW(x,b,_,a),YW(x,b,d.ratio),this.updateElement(n[p],p,x,o)}}_getStacks(n,i){let{iScale:r}=this._cachedMeta,o=r.getMatchingVisibleMetas(this._type).filter(c=>c.controller.options.grouped),s=r.options.stacked,a=[],l=c=>{let u=c.controller.getParsed(i),d=u&&u[c.vScale.axis];if(be(d)||isNaN(d))return!0};for(let c of o)if(!(i!==void 0&&l(c))&&((s===!1||a.indexOf(c.stack)===-1||s===void 0&&c.stack===void 0)&&a.push(c.stack),c.index===n))break;return a.length||a.push(void 0),a}_getStackCount(n){return this._getStacks(void 0,n).length}_getStackIndex(n,i,r){let o=this._getStacks(n,r),s=i!==void 0?o.indexOf(i):-1;return s===-1?o.length-1:s}_getRuler(){let n=this.options,i=this._cachedMeta,r=i.iScale,o=[],s,a;for(s=0,a=i.data.length;s<a;++s)o.push(r.getPixelForValue(this.getParsed(s)[r.axis],s));let l=n.barThickness;return{min:l||BW(i),pixels:o,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:n.grouped,ratio:l?1:n.categoryPercentage*n.barPercentage}}_calculateBarValuePixels(n){let{_cachedMeta:{vScale:i,_stacked:r,index:o},options:{base:s,minBarLength:a}}=this,l=s||0,c=this.getParsed(n),u=c._custom,d=bx(u),h=c[i.axis],f=0,p=r?this.applyStack(i,c,r):h,m,g;p!==h&&(f=p-h,p=h),d&&(h=u.barStart,p=u.barEnd-u.barStart,h!==0&&ci(h)!==ci(u.barEnd)&&(f=0),f+=h);let y=!be(s)&&!d?s:f,_=i.getPixelForValue(y);if(this.chart.getDataVisibility(n)?m=i.getPixelForValue(f+p):m=_,g=m-_,Math.abs(g)<a){g=$W(g,i,l)*a,h===l&&(_-=g/2);let x=i.getPixelForDecimal(0),b=i.getPixelForDecimal(1),v=Math.min(x,b),C=Math.max(x,b);_=Math.max(Math.min(_,C),v),m=_+g,r&&!d&&(c._stacks[i.axis]._visualValues[o]=i.getValueForPixel(m)-i.getValueForPixel(_))}if(_===i.getPixelForValue(l)){let x=ci(g)*i.getLineWidthForValue(l)/2;_+=x,g-=x}return{size:g,base:_,head:m,center:m+g/2}}_calculateBarIndexPixels(n,i){let r=i.scale,o=this.options,s=o.skipNull,a=ie(o.maxBarThickness,1/0),l,c;if(i.grouped){let u=s?this._getStackCount(n):i.stackCount,d=o.barThickness==="flex"?zW(n,i,o,u):UW(n,i,o,u),h=this._getStackIndex(this.index,this._cachedMeta.stack,s?n:void 0);l=d.start+d.chunk*h+d.chunk/2,c=Math.min(a,d.chunk*d.ratio)}else l=r.getPixelForValue(this.getParsed(n)[r.axis],n),c=Math.min(a,i.min*i.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let n=this._cachedMeta,i=n.vScale,r=n.data,o=r.length,s=0;for(;s<o;++s)this.getParsed(s)[i.axis]!==null&&!r[s].hidden&&r[s].draw(this._ctx)}}return t})(),ZW=(()=>{class t extends $o{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(n,i,r,o){let s=super.parsePrimitiveData(n,i,r,o);for(let a=0;a<s.length;a++)s[a]._custom=this.resolveDataElementOptions(a+r).radius;return s}parseArrayData(n,i,r,o){let s=super.parseArrayData(n,i,r,o);for(let a=0;a<s.length;a++){let l=i[r+a];s[a]._custom=ie(l[2],this.resolveDataElementOptions(a+r).radius)}return s}parseObjectData(n,i,r,o){let s=super.parseObjectData(n,i,r,o);for(let a=0;a<s.length;a++){let l=i[r+a];s[a]._custom=ie(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return s}getMaxOverflow(){let n=this._cachedMeta.data,i=0;for(let r=n.length-1;r>=0;--r)i=Math.max(i,n[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(n){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=i,a=this.getParsed(n),l=o.getLabelForValue(a.x),c=s.getLabelForValue(a.y),u=a._custom;return{label:r[n]||"",value:"("+l+", "+c+(u?", "+u:"")+")"}}update(n){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,n)}updateElements(n,i,r,o){let s=o==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(i,o),d=a.axis,h=l.axis;for(let f=i;f<i+r;f++){let p=n[f],m=!s&&this.getParsed(f),g={},y=g[d]=s?a.getPixelForDecimal(.5):a.getPixelForValue(m[d]),_=g[h]=s?l.getBasePixel():l.getPixelForValue(m[h]);g.skip=isNaN(y)||isNaN(_),u&&(g.options=c||this.resolveDataElementOptions(f,p.active?"active":o),s&&(g.options.radius=0)),this.updateElement(p,f,g,o)}}resolveDataElementOptions(n,i){let r=this.getParsed(n),o=super.resolveDataElementOptions(n,i);o.$shared&&(o=Object.assign({},o,{$shared:!1}));let s=o.radius;return i!=="active"&&(o.radius=0),o.radius+=ie(r&&r._custom,s),o}}return t})();function KW(t,e,n){let i=1,r=1,o=0,s=0;if(e<Ue){let a=t,l=a+e,c=Math.cos(a),u=Math.sin(a),d=Math.cos(l),h=Math.sin(l),f=(x,b,v)=>El(x,a,l,!0)?1:Math.max(b,b*n,v,v*n),p=(x,b,v)=>El(x,a,l,!0)?-1:Math.min(b,b*n,v,v*n),m=f(0,c,d),g=f(nt,u,h),y=p(Be,c,d),_=p(Be+nt,u,h);i=(m-y)/2,r=(g-_)/2,o=-(m+y)/2,s=-(g+_)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:s}}var Xx=(()=>{class t extends $o{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:n=>n!=="spacing",_indexable:n=>n!=="spacing"&&!n.startsWith("borderDash")&&!n.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){let i=n.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:o}}=n.legend.options;return i.labels.map((s,a)=>{let c=n.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:r,hidden:!n.getDataVisibility(a),index:a}})}return[]}},onClick(n,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(n,i){super(n,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(n,i){let r=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=r;else{let s=c=>+r[c];if(_e(r[n])){let{key:c="value"}=this._parsing;s=u=>+Rr(r[u],c)}let a,l;for(a=n,l=n+i;a<l;++a)o._parsed[a]=s(a)}}_getRotation(){return Wn(this.options.rotation-90)}_getCircumference(){return Wn(this.options.circumference)}_getRotationExtents(){let n=Ue,i=-Ue;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let o=this.chart.getDatasetMeta(r).controller,s=o._getRotation(),a=o._getCircumference();n=Math.min(n,s),i=Math.max(i,s+a)}return{rotation:n,circumference:i-n}}update(n){let i=this.chart,{chartArea:r}=i,o=this._cachedMeta,s=o.data,a=this.getMaxBorderWidth()+this.getMaxOffset(s)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(VA(this.options.cutout,l),1),u=this._getRingWeight(this.index),{circumference:d,rotation:h}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=KW(h,d,c),y=(r.width-a)/f,_=(r.height-a)/p,x=Math.max(Math.min(y,_)/2,0),b=G0(this.options.radius,x),v=Math.max(b*c,0),C=(b-v)/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,o.total=this.calculateTotal(),this.outerRadius=b-C*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-C*u,0),this.updateElements(s,0,s.length,n)}_circumference(n,i){let r=this.options,o=this._cachedMeta,s=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(n)||o._parsed[n]===null||o.data[n].hidden?0:this.calculateCircumference(o._parsed[n]*s/Ue)}updateElements(n,i,r,o){let s=o==="reset",a=this.chart,l=a.chartArea,u=a.options.animation,d=(l.left+l.right)/2,h=(l.top+l.bottom)/2,f=s&&u.animateScale,p=f?0:this.innerRadius,m=f?0:this.outerRadius,{sharedOptions:g,includeOptions:y}=this._getSharedOptions(i,o),_=this._getRotation(),x;for(x=0;x<i;++x)_+=this._circumference(x,s);for(x=i;x<i+r;++x){let b=this._circumference(x,s),v=n[x],C={x:d+this.offsetX,y:h+this.offsetY,startAngle:_,endAngle:_+b,circumference:b,outerRadius:m,innerRadius:p};y&&(C.options=g||this.resolveDataElementOptions(x,v.active?"active":o)),_+=b,this.updateElement(v,x,C,o)}}calculateTotal(){let n=this._cachedMeta,i=n.data,r=0,o;for(o=0;o<i.length;o++){let s=n._parsed[o];s!==null&&!isNaN(s)&&this.chart.getDataVisibility(o)&&!i[o].hidden&&(r+=Math.abs(s))}return r}calculateCircumference(n){let i=this._cachedMeta.total;return i>0&&!isNaN(n)?Ue*(Math.abs(n)/i):0}getLabelAndValue(n){let i=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=Dl(i._parsed[n],r.options.locale);return{label:o[n]||"",value:s}}getMaxBorderWidth(n){let i=0,r=this.chart,o,s,a,l,c;if(!n){for(o=0,s=r.data.datasets.length;o<s;++o)if(r.isDatasetVisible(o)){a=r.getDatasetMeta(o),n=a.data,l=a.controller;break}}if(!n)return 0;for(o=0,s=n.length;o<s;++o)c=l.resolveDataElementOptions(o),c.borderAlign!=="inner"&&(i=Math.max(i,c.borderWidth||0,c.hoverBorderWidth||0));return i}getMaxOffset(n){let i=0;for(let r=0,o=n.length;r<o;++r){let s=this.resolveDataElementOptions(r);i=Math.max(i,s.offset||0,s.hoverOffset||0)}return i}_getRingWeightOffset(n){let i=0;for(let r=0;r<n;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(n){return Math.max(ie(this.chart.data.datasets[n].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return t})(),QW=(()=>{class t extends $o{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(n){let i=this._cachedMeta,{dataset:r,data:o=[],_dataset:s}=i,a=this.chart._animationsDisabled,{start:l,count:c}=nx(i,o,a);this._drawStart=l,this._drawCount=c,ix(i)&&(l=0,c=o.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=o;let u=this.resolveDatasetElementOptions(n);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:u},n),this.updateElements(o,l,c,n)}updateElements(n,i,r,o){let s=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,{sharedOptions:d,includeOptions:h}=this._getSharedOptions(i,o),f=a.axis,p=l.axis,{spanGaps:m,segment:g}=this.options,y=ta(m)?m:Number.POSITIVE_INFINITY,_=this.chart._animationsDisabled||s||o==="none",x=i+r,b=n.length,v=i>0&&this.getParsed(i-1);for(let C=0;C<b;++C){let E=n[C],w=_?E:{};if(C<i||C>=x){w.skip=!0;continue}let D=this.getParsed(C),A=be(D[p]),M=w[f]=a.getPixelForValue(D[f],C),T=w[p]=s||A?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,D,c):D[p],C);w.skip=isNaN(M)||isNaN(T)||A,w.stop=C>0&&Math.abs(D[f]-v[f])>y,g&&(w.parsed=D,w.raw=u.data[C]),h&&(w.options=d||this.resolveDataElementOptions(C,E.active?"active":o)),_||this.updateElement(E,C,w,o),v=D}}getMaxOverflow(){let n=this._cachedMeta,i=n.dataset,r=i.options&&i.options.borderWidth||0,o=n.data||[];if(!o.length)return r;let s=o[0].size(this.resolveDataElementOptions(0)),a=o[o.length-1].size(this.resolveDataElementOptions(o.length-1));return Math.max(r,s,a)/2}draw(){let n=this._cachedMeta;n.dataset.updateControlPoints(this.chart.chartArea,n.iScale.axis),super.draw()}}return t})(),g1=(()=>{class t extends $o{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(n){let i=n.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:o}}=n.legend.options;return i.labels.map((s,a)=>{let c=n.getDatasetMeta(0).controller.getStyle(a);return{text:s,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:o,lineWidth:c.borderWidth,pointStyle:r,hidden:!n.getDataVisibility(a),index:a}})}return[]}},onClick(n,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(n,i){super(n,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(n){let i=this._cachedMeta,r=this.chart,o=r.data.labels||[],s=Dl(i._parsed[n].r,r.options.locale);return{label:o[n]||"",value:s}}parseObjectData(n,i,r,o){return hx.bind(this)(n,i,r,o)}update(n){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,n)}getMinMax(){let n=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return n.data.forEach((r,o)=>{let s=this.getParsed(o).r;!isNaN(s)&&this.chart.getDataVisibility(o)&&(s<i.min&&(i.min=s),s>i.max&&(i.max=s))}),i}_updateRadius(){let n=this.chart,i=n.chartArea,r=n.options,o=Math.min(i.right-i.left,i.bottom-i.top),s=Math.max(o/2,0),a=Math.max(r.cutoutPercentage?s/100*r.cutoutPercentage:1,0),l=(s-a)/n.getVisibleDatasetCount();this.outerRadius=s-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(n,i,r,o){let s=o==="reset",a=this.chart,c=a.options.animation,u=this._cachedMeta.rScale,d=u.xCenter,h=u.yCenter,f=u.getIndexAngle(0)-.5*Be,p=f,m,g=360/this.countVisibleElements();for(m=0;m<i;++m)p+=this._computeAngle(m,o,g);for(m=i;m<i+r;m++){let y=n[m],_=p,x=p+this._computeAngle(m,o,g),b=a.getDataVisibility(m)?u.getDistanceFromCenterForValue(this.getParsed(m).r):0;p=x,s&&(c.animateScale&&(b=0),c.animateRotate&&(_=x=f));let v={x:d,y:h,innerRadius:0,outerRadius:b,startAngle:_,endAngle:x,options:this.resolveDataElementOptions(m,y.active?"active":o)};this.updateElement(y,m,v,o)}}countVisibleElements(){let n=this._cachedMeta,i=0;return n.data.forEach((r,o)=>{!isNaN(this.getParsed(o).r)&&this.chart.getDataVisibility(o)&&i++}),i}_computeAngle(n,i,r){return this.chart.getDataVisibility(n)?Wn(this.resolveDataElementOptions(n,i).angle||r):0}}return t})(),JW=(()=>{class t extends Xx{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return t})(),eG=(()=>{class t extends $o{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(n){let i=this._cachedMeta.vScale,r=this.getParsed(n);return{label:i.getLabels()[n],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(n,i,r,o){return hx.bind(this)(n,i,r,o)}update(n){let i=this._cachedMeta,r=i.dataset,o=i.data||[],s=i.iScale.getLabels();if(r.points=o,n!=="resize"){let a=this.resolveDatasetElementOptions(n);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:s.length===o.length,options:a};this.updateElement(r,void 0,l,n)}this.updateElements(o,0,o.length,n)}updateElements(n,i,r,o){let s=this._cachedMeta.rScale,a=o==="reset";for(let l=i;l<i+r;l++){let c=n[l],u=this.resolveDataElementOptions(l,c.active?"active":o),d=s.getPointPositionForValue(l,this.getParsed(l).r),h=a?s.xCenter:d.x,f=a?s.yCenter:d.y,p={x:h,y:f,angle:d.angle,skip:isNaN(h)||isNaN(f),options:u};this.updateElement(c,l,p,o)}}}return t})(),tG=(()=>{class t extends $o{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(n){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:o,yScale:s}=i,a=this.getParsed(n),l=o.getLabelForValue(a.x),c=s.getLabelForValue(a.y);return{label:r[n]||"",value:"("+l+", "+c+")"}}update(n){let i=this._cachedMeta,{data:r=[]}=i,o=this.chart._animationsDisabled,{start:s,count:a}=nx(i,r,o);if(this._drawStart=s,this._drawCount=a,ix(i)&&(s=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=i;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let u=this.resolveDatasetElementOptions(n);u.segment=this.options.segment,this.updateElement(l,void 0,{animated:!o,options:u},n)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,s,a,n)}addElements(){let{showLine:n}=this.options;!this.datasetElementType&&n&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(n,i,r,o){let s=o==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:u}=this._cachedMeta,d=this.resolveDataElementOptions(i,o),h=this.getSharedOptions(d),f=this.includeOptions(o,h),p=a.axis,m=l.axis,{spanGaps:g,segment:y}=this.options,_=ta(g)?g:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||s||o==="none",b=i>0&&this.getParsed(i-1);for(let v=i;v<i+r;++v){let C=n[v],E=this.getParsed(v),w=x?C:{},D=be(E[m]),A=w[p]=a.getPixelForValue(E[p],v),M=w[m]=s||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,E,c):E[m],v);w.skip=isNaN(A)||isNaN(M)||D,w.stop=v>0&&Math.abs(E[p]-b[p])>_,y&&(w.parsed=E,w.raw=u.data[v]),f&&(w.options=h||this.resolveDataElementOptions(v,C.active?"active":o)),x||this.updateElement(C,v,w,o),b=E}this.updateSharedOptions(h,o,d)}getMaxOverflow(){let n=this._cachedMeta,i=n.data||[];if(!this.options.showLine){let l=0;for(let c=i.length-1;c>=0;--c)l=Math.max(l,i[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=n.dataset,o=r.options&&r.options.borderWidth||0;if(!i.length)return o;let s=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(o,s,a)/2}}return t})(),nG=Object.freeze({__proto__:null,BarController:XW,BubbleController:ZW,DoughnutController:Xx,LineController:QW,PieController:JW,PolarAreaController:g1,RadarController:eG,ScatterController:tG});function ia(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Ax=class t{static override(e){Object.assign(t.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ia()}parse(){return ia()}format(){return ia()}add(){return ia()}diff(){return ia()}startOf(){return ia()}endOf(){return ia()}},iG={_date:Ax};function rG(t,e,n,i){let{controller:r,data:o,_sorted:s}=t,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&s&&o.length){let l=a._reversePixels?$A:Fi;if(i){if(r._sharedOptions){let c=o[0],u=typeof c.getRange=="function"&&c.getRange(e);if(u){let d=l(o,e,n-u),h=l(o,e,n+u);return{lo:d.lo,hi:h.hi}}}}else return l(o,e,n)}return{lo:0,hi:o.length-1}}function id(t,e,n,i,r){let o=t.getSortedVisibleDatasetMetas(),s=n[e];for(let a=0,l=o.length;a<l;++a){let{index:c,data:u}=o[a],{lo:d,hi:h}=rG(o[a],e,s,r);for(let f=d;f<=h;++f){let p=u[f];p.skip||i(p,c,f)}}}function oG(t){let e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){let o=e?Math.abs(i.x-r.x):0,s=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(o,2)+Math.pow(s,2))}}function Cx(t,e,n,i,r){let o=[];return!r&&!t.isPointInArea(e)||id(t,n,e,function(a,l,c){!r&&!Li(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&o.push({element:a,datasetIndex:l,index:c})},!0),o}function sG(t,e,n,i){let r=[];function o(s,a,l){let{startAngle:c,endAngle:u}=s.getProps(["startAngle","endAngle"],i),{angle:d}=K0(s,{x:e.x,y:e.y});El(d,c,u)&&r.push({element:s,datasetIndex:a,index:l})}return id(t,n,e,o),r}function aG(t,e,n,i,r,o){let s=[],a=oG(n),l=Number.POSITIVE_INFINITY;function c(u,d,h){let f=u.inRange(e.x,e.y,r);if(i&&!f)return;let p=u.getCenterPoint(r);if(!(!!o||t.isPointInArea(p))&&!f)return;let g=a(e,p);g<l?(s=[{element:u,datasetIndex:d,index:h}],l=g):g===l&&s.push({element:u,datasetIndex:d,index:h})}return id(t,n,e,c),s}function wx(t,e,n,i,r,o){return!o&&!t.isPointInArea(e)?[]:n==="r"&&!i?sG(t,e,n,r):aG(t,e,n,i,r,o)}function CR(t,e,n,i,r){let o=[],s=n==="x"?"inXRange":"inYRange",a=!1;return id(t,n,e,(l,c,u)=>{l[s](e[n],r)&&(o.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:o}var lG={evaluateInteractionItems:id,modes:{index(t,e,n,i){let r=zo(e,t),o=n.axis||"x",s=n.includeInvisible||!1,a=n.intersect?Cx(t,r,o,i,s):wx(t,r,o,!1,i,s),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{let u=a[0].index,d=c.data[u];d&&!d.skip&&l.push({element:d,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){let r=zo(e,t),o=n.axis||"xy",s=n.includeInvisible||!1,a=n.intersect?Cx(t,r,o,i,s):wx(t,r,o,!1,i,s);if(a.length>0){let l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){let r=zo(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;return Cx(t,r,o,i,s)},nearest(t,e,n,i){let r=zo(e,t),o=n.axis||"xy",s=n.includeInvisible||!1;return wx(t,r,o,n.intersect,i,s)},x(t,e,n,i){let r=zo(e,t);return CR(t,r,"x",n.intersect,i)},y(t,e,n,i){let r=zo(e,t);return CR(t,r,"y",n.intersect,i)}}},m1=["left","top","right","bottom"];function Yu(t,e){return t.filter(n=>n.pos===e)}function wR(t,e){return t.filter(n=>m1.indexOf(n.pos)===-1&&n.box.axis===e)}function Xu(t,e){return t.sort((n,i)=>{let r=e?i:n,o=e?n:i;return r.weight===o.weight?r.index-o.index:r.weight-o.weight})}function cG(t){let e=[],n,i,r,o,s,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:o,options:{stack:s,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&o+s,stackWeight:a});return e}function uG(t){let e={};for(let n of t){let{stack:i,pos:r,stackWeight:o}=n;if(!i||!m1.includes(r))continue;let s=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=o}return e}function dG(t,e){let n=uG(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,o,s,a;for(o=0,s=t.length;o<s;++o){a=t[o];let{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function hG(t){let e=cG(t),n=Xu(e.filter(c=>c.box.fullSize),!0),i=Xu(Yu(e,"left"),!0),r=Xu(Yu(e,"right")),o=Xu(Yu(e,"top"),!0),s=Xu(Yu(e,"bottom")),a=wR(e,"x"),l=wR(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(s).concat(a),chartArea:Yu(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(s).concat(a)}}function ER(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function y1(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function fG(t,e,n,i){let{pos:r,box:o}=n,s=t.maxPadding;if(!_e(r)){n.size&&(t[r]-=n.size);let d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?o.height:o.width),n.size=d.size/d.count,t[r]+=n.size}o.getPadding&&y1(s,o.getPadding());let a=Math.max(0,e.outerWidth-ER(s,t,"left","right")),l=Math.max(0,e.outerHeight-ER(s,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function pG(t){let e=t.maxPadding;function n(i){let r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function gG(t,e){let n=e.maxPadding;function i(r){let o={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{o[s]=Math.max(e[s],n[s])}),o}return i(t?["left","right"]:["top","bottom"])}function Qu(t,e,n,i){let r=[],o,s,a,l,c,u;for(o=0,s=t.length,c=0;o<s;++o){a=t[o],l=a.box,l.update(a.width||e.w,a.height||e.h,gG(a.horizontal,e));let{same:d,other:h}=fG(e,n,a,i);c|=d&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&Qu(r,e,n,i)||u}function Xp(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function DR(t,e,n,i){let r=n.padding,{x:o,y:s}=e;for(let a of t){let l=a.box,c=i[a.stack]||{count:1,placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){let d=e.w*u,h=c.size||l.height;Cl(c.start)&&(s=c.start),l.fullSize?Xp(l,r.left,s,n.outerWidth-r.right-r.left,h):Xp(l,e.left+c.placed,s,d,h),c.start=s,c.placed+=d,s=l.bottom}else{let d=e.h*u,h=c.size||l.width;Cl(c.start)&&(o=c.start),l.fullSize?Xp(l,o,r.top,h,n.outerHeight-r.bottom-r.top):Xp(l,o,e.top+c.placed,h,d),c.start=o,c.placed+=d,o=l.right}}e.x=o,e.y=s}var Ht={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){let n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;let r=Nt(t.options.layout.padding),o=Math.max(e-r.width,0),s=Math.max(n-r.height,0),a=hG(t.boxes),l=a.vertical,c=a.horizontal;Ae(t.boxes,m=>{typeof m.beforeLayout=="function"&&m.beforeLayout()});let u=l.reduce((m,g)=>g.box.options&&g.box.options.display===!1?m:m+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:s,vBoxMaxWidth:o/2/u,hBoxMaxHeight:s/2}),h=Object.assign({},r);y1(h,Nt(i));let f=Object.assign({maxPadding:h,w:o,h:s,x:r.left,y:r.top},r),p=dG(l.concat(c),d);Qu(a.fullSize,f,d,p),Qu(l,f,d,p),Qu(c,f,d,p)&&Qu(l,f,d,p),pG(f),DR(a.leftAndTop,f,d,p),f.x+=f.w,f.y+=f.h,DR(a.rightAndBottom,f,d,p),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Ae(a.chartArea,m=>{let g=m.box;Object.assign(g,t.chartArea),g.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}},og=class{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}},Rx=class extends og{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},ng="$chartjs",mG={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},IR=t=>t===null||t==="";function yG(t,e){let n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[ng]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",IR(r)){let o=px(t,"width");o!==void 0&&(t.width=o)}if(IR(i))if(t.style.height==="")t.height=t.width/(e||2);else{let o=px(t,"height");o!==void 0&&(t.height=o)}return t}var _1=aR?{passive:!0}:!1;function _G(t,e,n){t&&t.addEventListener(e,n,_1)}function vG(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,_1)}function xG(t,e){let n=mG[t.type]||t.type,{x:i,y:r}=zo(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function sg(t,e){for(let n of t)if(n===e||n.contains(e))return!0}function bG(t,e,n){let i=t.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||sg(a.addedNodes,i),s=s&&!sg(a.removedNodes,i);s&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function CG(t,e,n){let i=t.canvas,r=new MutationObserver(o=>{let s=!1;for(let a of o)s=s||sg(a.removedNodes,i),s=s&&!sg(a.addedNodes,i);s&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}var ed=new Map,SR=0;function v1(){let t=window.devicePixelRatio;t!==SR&&(SR=t,ed.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function wG(t,e){ed.size||window.addEventListener("resize",v1),ed.set(t,e)}function EG(t){ed.delete(t),ed.size||window.removeEventListener("resize",v1)}function DG(t,e,n){let i=t.canvas,r=i&&qp(i);if(!r)return;let o=tx((a,l)=>{let c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),s=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||o(c,u)});return s.observe(r),wG(t,o),s}function Ex(t,e,n){n&&n.disconnect(),e==="resize"&&EG(t)}function IG(t,e,n){let i=t.canvas,r=tx(o=>{t.ctx!==null&&n(xG(o,t))},t);return _G(i,e,r),r}var Ox=class extends og{acquireContext(e,n){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(yG(e,n),i):null}releaseContext(e){let n=e.canvas;if(!n[ng])return!1;let i=n[ng].initial;["height","width"].forEach(o=>{let s=i[o];be(s)?n.removeAttribute(o):n.setAttribute(o,s)});let r=i.style||{};return Object.keys(r).forEach(o=>{n.style[o]=r[o]}),n.width=n.width,delete n[ng],!0}addEventListener(e,n,i){this.removeEventListener(e,n);let r=e.$proxies||(e.$proxies={}),s={attach:bG,detach:CG,resize:DG}[n]||IG;r[n]=s(e,n,i)}removeEventListener(e,n){let i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Ex,detach:Ex,resize:Ex}[n]||vG)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return sR(e,n,i,r)}isAttached(e){let n=e&&qp(e);return!!(n&&n.isConnected)}};function SG(t){return!Gp()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Rx:Ox}var ui=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return ta(this.x)&&ta(this.y)}getProps(e,n){let i=this.$animations;if(!n||!i)return this;let r={};return e.forEach(o=>{r[o]=i[o]&&i[o].active()?i[o]._to:this[o]}),r}};function MG(t,e){let n=t.options.ticks,i=TG(t),r=Math.min(n.maxTicksLimit||i,i),o=n.major.enabled?RG(e):[],s=o.length,a=o[0],l=o[s-1],c=[];if(s>r)return OG(e,c,o,s/r),c;let u=AG(o,e,r);if(s>0){let d,h,f=s>1?Math.round((l-a)/(s-1)):null;for(Zp(e,c,u,be(f)?0:a-f,a),d=0,h=s-1;d<h;d++)Zp(e,c,u,o[d],o[d+1]);return Zp(e,c,u,l,be(f)?e.length:l+f),c}return Zp(e,c,u),c}function TG(t){let e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function AG(t,e,n){let i=PG(t),r=e.length/n;if(!i)return Math.max(r,1);let o=UA(i);for(let s=0,a=o.length-1;s<a;s++){let l=o[s];if(l>r)return l}return Math.max(r,1)}function RG(t){let e=[],n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function OG(t,e,n,i){let r=0,o=n[0],s;for(i=Math.ceil(i),s=0;s<t.length;s++)s===o&&(e.push(t[s]),r++,o=n[r*i])}function Zp(t,e,n,i,r){let o=ie(i,0),s=Math.min(ie(r,t.length),t.length),a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=o;u<0;)a++,u=Math.round(o+a*n);for(c=Math.max(o,0);c<s;c++)c===u&&(e.push(t[c]),a++,u=Math.round(o+a*n))}function PG(t){let e=t.length,n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}var NG=t=>t==="left"?"right":t==="right"?"left":t,MR=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,TR=(t,e)=>Math.min(e||t,t);function AR(t,e){let n=[],i=t.length/e,r=t.length,o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function kG(t,e,n){let i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,s=t._endPixel,a=1e-6,l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-o,s-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<o-a||l>s+a)))return l}function FG(t,e){Ae(t,n=>{let i=n.gc,r=i.length/2,o;if(r>e){for(o=0;o<r;++o)delete n.data[i[o]];i.splice(0,r)}})}function Zu(t){return t.drawTicks?t.tickLength:0}function RR(t,e){if(!t.display)return 0;let n=dt(t.font,e),i=Nt(t.padding);return(je(t.text)?t.text.length:1)*n.lineHeight+i.height}function LG(t,e){return Or(t,{scale:e,type:"scale"})}function VG(t,e,n){return Or(t,{tick:n,index:e,type:"tick"})}function jG(t,e,n){let i=Up(t);return(n&&e!=="right"||!n&&e==="right")&&(i=NG(i)),i}function BG(t,e,n,i){let{top:r,left:o,bottom:s,right:a,chart:l}=t,{chartArea:c,scales:u}=l,d=0,h,f,p,m=s-r,g=a-o;if(t.isHorizontal()){if(f=Pt(i,o,a),_e(n)){let y=Object.keys(n)[0],_=n[y];p=u[y].getPixelForValue(_)+m-e}else n==="center"?p=(c.bottom+c.top)/2+m-e:p=MR(t,n,e);h=a-o}else{if(_e(n)){let y=Object.keys(n)[0],_=n[y];f=u[y].getPixelForValue(_)-g+e}else n==="center"?f=(c.left+c.right)/2-g+e:f=MR(t,n,e);p=Pt(i,s,r),d=n==="left"?-nt:nt}return{titleX:f,titleY:p,maxWidth:h,rotation:d}}var oa=class t extends ui{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=on(e,Number.POSITIVE_INFINITY),n=on(n,Number.NEGATIVE_INFINITY),i=on(i,Number.POSITIVE_INFINITY),r=on(r,Number.NEGATIVE_INFINITY),{min:on(e,i),max:on(n,r),minDefined:Ze(e),maxDefined:Ze(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds(),s;if(r&&o)return{min:n,max:i};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)s=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,s.min)),o||(i=Math.max(i,s.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:on(n,on(i,n)),max:on(i,on(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Fe(this.options.beforeUpdate,[this])}update(e,n,i){let{beginAtZero:r,grace:o,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=eR(this,o,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?AR(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=MG(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Fe(this.options.afterUpdate,[this])}beforeSetDimensions(){Fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Fe(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Fe(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let n=this.options.ticks,i,r,o;for(i=0,r=e.length;i<r;i++)o=e[i],o.label=Fe(n.callback,[o.value,i,e],this)}afterTickToLabelConversion(){Fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,n=e.ticks,i=TR(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,o=n.maxRotation,s=r,a,l,c;if(!this._isVisible()||!n.display||r>=o||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let u=this._getLabelSizes(),d=u.widest.width,h=u.highest.height,f=vt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:f/(i-1),d+6>a&&(a=f/(i-(e.offset?.5:1)),l=this.maxHeight-Zu(e.grid)-n.padding-RR(e.title,this.chart.options.font),c=Math.sqrt(d*d+h*h),s=jp(Math.min(Math.asin(vt((u.highest.height+6)/a,-1,1)),Math.asin(vt(l/c,-1,1))-Math.asin(vt(h/c,-1,1)))),s=Math.max(r,Math.min(o,s))),this.labelRotation=s}afterCalculateLabelRotation(){Fe(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Fe(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:o}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){let l=RR(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Zu(o)+l):(e.height=this.maxHeight,e.width=Zu(o)+l),i.display&&this.ticks.length){let{first:c,last:u,widest:d,highest:h}=this._getLabelSizes(),f=i.padding*2,p=Wn(this.labelRotation),m=Math.cos(p),g=Math.sin(p);if(a){let y=i.mirror?0:g*d.width+m*h.height;e.height=Math.min(this.maxHeight,e.height+y+f)}else{let y=i.mirror?0:m*d.width+g*h.height;e.width=Math.min(this.maxWidth,e.width+y+f)}this._calculatePadding(c,u,g,m)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){let{ticks:{align:o,padding:s},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let u=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),h=0,f=0;l?c?(h=r*e.width,f=i*n.height):(h=i*e.height,f=r*n.width):o==="start"?f=n.width:o==="end"?h=e.width:o!=="inner"&&(h=e.width/2,f=n.width/2),this.paddingLeft=Math.max((h-u+s)*this.width/(this.width-u),0),this.paddingRight=Math.max((f-d+s)*this.width/(this.width-d),0)}else{let u=n.height/2,d=e.height/2;o==="start"?(u=0,d=e.height):o==="end"&&(u=n.height,d=0),this.paddingTop=u+s,this.paddingBottom=d+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Fe(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)be(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let n=this.options.ticks.sampleSize,i=this.ticks;n<i.length&&(i=AR(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){let{ctx:r,_longestTextCache:o}=this,s=[],a=[],l=Math.floor(n/TR(n,i)),c=0,u=0,d,h,f,p,m,g,y,_,x,b,v;for(d=0;d<n;d+=l){if(p=e[d].label,m=this._resolveTickFontOptions(d),r.font=g=m.string,y=o[g]=o[g]||{data:{},gc:[]},_=m.lineHeight,x=b=0,!be(p)&&!je(p))x=zu(r,y.data,y.gc,x,p),b=_;else if(je(p))for(h=0,f=p.length;h<f;++h)v=p[h],!be(v)&&!je(v)&&(x=zu(r,y.data,y.gc,x,v),b+=_);s.push(x),a.push(b),c=Math.max(x,c),u=Math.max(b,u)}FG(o,n);let C=s.indexOf(c),E=a.indexOf(u),w=D=>({width:s[D]||0,height:a[D]||0});return{first:w(0),last:w(n-1),widest:w(C),highest:w(E),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){let n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let n=this._startPixel+e*this._length;return HA(this._alignToPixels?jo(this.chart,n,0):n)}getDecimalForPixel(e){let n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){let n=this.ticks||[];if(e>=0&&e<n.length){let i=n[e];return i.$context||(i.$context=VG(this.getContext(),e,i))}return this.$context||(this.$context=LG(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,n=Wn(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),o=this._getLabelSizes(),s=e.autoSkipPadding||0,a=o?o.widest.width+s:0,l=o?o.highest.height+s:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let n=this.axis,i=this.chart,r=this.options,{grid:o,position:s,border:a}=r,l=o.offset,c=this.isHorizontal(),d=this.ticks.length+(l?1:0),h=Zu(o),f=[],p=a.setContext(this.getContext()),m=p.display?p.width:0,g=m/2,y=function(R){return jo(i,R,m)},_,x,b,v,C,E,w,D,A,M,T,F;if(s==="top")_=y(this.bottom),E=this.bottom-h,D=_-g,M=y(e.top)+g,F=e.bottom;else if(s==="bottom")_=y(this.top),M=e.top,F=y(e.bottom)-g,E=_+g,D=this.top+h;else if(s==="left")_=y(this.right),C=this.right-h,w=_-g,A=y(e.left)+g,T=e.right;else if(s==="right")_=y(this.left),A=e.left,T=y(e.right)-g,C=_+g,w=this.left+h;else if(n==="x"){if(s==="center")_=y((e.top+e.bottom)/2+.5);else if(_e(s)){let R=Object.keys(s)[0],k=s[R];_=y(this.chart.scales[R].getPixelForValue(k))}M=e.top,F=e.bottom,E=_+g,D=E+h}else if(n==="y"){if(s==="center")_=y((e.left+e.right)/2);else if(_e(s)){let R=Object.keys(s)[0],k=s[R];_=y(this.chart.scales[R].getPixelForValue(k))}C=_-g,w=C-h,A=e.left,T=e.right}let q=ie(r.ticks.maxTicksLimit,d),O=Math.max(1,Math.ceil(d/q));for(x=0;x<d;x+=O){let R=this.getContext(x),k=o.setContext(R),B=a.setContext(R),X=k.lineWidth,z=k.color,he=B.dash||[],re=B.dashOffset,we=k.tickWidth,P=k.tickColor,rt=k.tickBorderDash||[],Ge=k.tickBorderDashOffset;b=kG(this,x,l),b!==void 0&&(v=jo(i,b,X),c?C=w=A=T=v:E=D=M=F=v,f.push({tx1:C,ty1:E,tx2:w,ty2:D,x1:A,y1:M,x2:T,y2:F,width:X,color:z,borderDash:he,borderDashOffset:re,tickWidth:we,tickColor:P,tickBorderDash:rt,tickBorderDashOffset:Ge}))}return this._ticksLength=d,this._borderValue=_,f}_computeLabelItems(e){let n=this.axis,i=this.options,{position:r,ticks:o}=i,s=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:d}=o,h=Zu(i.grid),f=h+u,p=d?-u:f,m=-Wn(this.labelRotation),g=[],y,_,x,b,v,C,E,w,D,A,M,T,F="middle";if(r==="top")C=this.bottom-p,E=this._getXAxisLabelAlignment();else if(r==="bottom")C=this.top+p,E=this._getXAxisLabelAlignment();else if(r==="left"){let O=this._getYAxisLabelAlignment(h);E=O.textAlign,v=O.x}else if(r==="right"){let O=this._getYAxisLabelAlignment(h);E=O.textAlign,v=O.x}else if(n==="x"){if(r==="center")C=(e.top+e.bottom)/2+f;else if(_e(r)){let O=Object.keys(r)[0],R=r[O];C=this.chart.scales[O].getPixelForValue(R)+f}E=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")v=(e.left+e.right)/2-f;else if(_e(r)){let O=Object.keys(r)[0],R=r[O];v=this.chart.scales[O].getPixelForValue(R)}E=this._getYAxisLabelAlignment(h).textAlign}n==="y"&&(l==="start"?F="top":l==="end"&&(F="bottom"));let q=this._getLabelSizes();for(y=0,_=a.length;y<_;++y){x=a[y],b=x.label;let O=o.setContext(this.getContext(y));w=this.getPixelForTick(y)+o.labelOffset,D=this._resolveTickFontOptions(y),A=D.lineHeight,M=je(b)?b.length:1;let R=M/2,k=O.color,B=O.textStrokeColor,X=O.textStrokeWidth,z=E;s?(v=w,E==="inner"&&(y===_-1?z=this.options.reverse?"left":"right":y===0?z=this.options.reverse?"right":"left":z="center"),r==="top"?c==="near"||m!==0?T=-M*A+A/2:c==="center"?T=-q.highest.height/2-R*A+A:T=-q.highest.height+A/2:c==="near"||m!==0?T=A/2:c==="center"?T=q.highest.height/2-R*A:T=q.highest.height-M*A,d&&(T*=-1),m!==0&&!O.showLabelBackdrop&&(v+=A/2*Math.sin(m))):(C=w,T=(1-M)*A/2);let he;if(O.showLabelBackdrop){let re=Nt(O.backdropPadding),we=q.heights[y],P=q.widths[y],rt=T-re.top,Ge=0-re.left;switch(F){case"middle":rt-=we/2;break;case"bottom":rt-=we;break}switch(E){case"center":Ge-=P/2;break;case"right":Ge-=P;break;case"inner":y===_-1?Ge-=P:y>0&&(Ge-=P/2);break}he={left:Ge,top:rt,width:P+re.width,height:we+re.height,color:O.backdropColor}}g.push({label:b,font:D,textOffset:T,options:{rotation:m,color:k,strokeColor:B,strokeWidth:X,textAlign:z,textBaseline:F,translation:[v,C],backdrop:he}})}return g}_getXAxisLabelAlignment(){let{position:e,ticks:n}=this.options;if(-Wn(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:n,ticks:{crossAlign:i,mirror:r,padding:o}}=this.options,s=this._getLabelSizes(),a=e+o,l=s.widest.width,c,u;return n==="left"?r?(u=this.right+o,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+o,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:n},left:i,top:r,width:o,height:s}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,o,s),e.restore())}getLineWidthForValue(e){let n=this.options.grid;if(!this._isVisible()||!n.display)return 0;let r=this.ticks.findIndex(o=>o.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),o,s,a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(o=0,s=r.length;o<s;++o){let l=r[o];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:n,options:{border:i,grid:r}}=this,o=i.setContext(this.getContext()),s=i.display?o.width:0;if(!s)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,u,d,h;this.isHorizontal()?(c=jo(e,this.left,s)-s/2,u=jo(e,this.right,a)+a/2,d=h=l):(d=jo(e,this.top,s)-s/2,h=jo(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=o.width,n.strokeStyle=o.color,n.beginPath(),n.moveTo(c,d),n.lineTo(u,h),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Wu(i,r);let o=this.getLabelItems(e);for(let s of o){let a=s.options,l=s.font,c=s.label,u=s.textOffset;Bo(i,c,0,u,l,a)}r&&Gu(i)}drawTitle(){let{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;let o=dt(i.font),s=Nt(i.padding),a=i.align,l=o.lineHeight/2;n==="bottom"||n==="center"||_e(n)?(l+=s.bottom,je(i.text)&&(l+=o.lineHeight*(i.text.length-1))):l+=s.top;let{titleX:c,titleY:u,maxWidth:d,rotation:h}=BG(this,l,n,a);Bo(e,i.text,0,0,o,{color:i.color,maxWidth:d,rotation:h,textAlign:jG(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,n=e.ticks&&e.ticks.z||0,i=ie(e.grid&&e.grid.z,-1),r=ie(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==t.prototype.draw?[{z:n,draw:o=>{this.draw(o)}}]:[{z:i,draw:o=>{this.drawBackground(),this.drawGrid(o),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:o=>{this.drawLabels(o)}}]}getMatchingVisibleMetas(e){let n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],o,s;for(o=0,s=n.length;o<s;++o){let a=n[o];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let n=this.options.ticks.setContext(this.getContext(e));return dt(n.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},Tl=class{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let n=Object.getPrototypeOf(e),i;HG(n)&&(i=this.register(n));let r=this.items,o=e.id,s=this.scope+"."+o;if(!o)throw new Error("class does not have id: "+e);return o in r||(r[o]=e,UG(e,s,i),this.override&&$e.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){let n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in $e[r]&&(delete $e[r][i],this.override&&delete Vo[i])}};function UG(t,e,n){let i=vl(Object.create(null),[n?$e.get(n):{},$e.get(e),t.defaults]);$e.set(e,i),t.defaultRoutes&&zG(e,t.defaultRoutes),t.descriptors&&$e.describe(e,t.descriptors)}function zG(t,e){Object.keys(e).forEach(n=>{let i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),s=e[n].split("."),a=s.pop(),l=s.join(".");$e.route(o,r,l,a)})}function HG(t){return"id"in t&&"defaults"in t}var Px=class{constructor(){this.controllers=new Tl($o,"datasets",!0),this.elements=new Tl(ui,"elements"),this.plugins=new Tl(Object,"plugins"),this.scales=new Tl(oa,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{let o=i||this._getRegistryForType(r);i||o.isForType(r)||o===this.plugins&&r.id?this._exec(e,o,r):Ae(r,s=>{let a=i||this._getRegistryForType(s);this._exec(e,a,s)})})}_exec(e,n,i){let r=Vp(e);Fe(i["before"+r],[],i),n[e](i),Fe(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){let i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){let r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},Ui=new Px,Nx=class{constructor(){this._init=[]}notify(e,n,i,r){n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let o=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(o,e,n,i);return n==="afterDestroy"&&(this._notify(o,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,n,i,r){r=r||{};for(let o of e){let s=o.plugin,a=s[i],l=[n,r,o.options];if(Fe(a,l,s)===!1&&r.cancelable)return!1}return!0}invalidate(){be(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){let i=e&&e.config,r=ie(i.options&&i.options.plugins,{}),o=$G(i);return r===!1&&!n?[]:GG(e,o,r,n)}_notifyStateChanges(e){let n=this._oldCache||[],i=this._cache,r=(o,s)=>o.filter(a=>!s.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}};function $G(t){let e={},n=[],i=Object.keys(Ui.plugins.items);for(let o=0;o<i.length;o++)n.push(Ui.getPlugin(i[o]));let r=t.plugins||[];for(let o=0;o<r.length;o++){let s=r[o];n.indexOf(s)===-1&&(n.push(s),e[s.id]=!0)}return{plugins:n,localIds:e}}function WG(t,e){return!e&&t===!1?null:t===!0?{}:t}function GG(t,{plugins:e,localIds:n},i,r){let o=[],s=t.getContext();for(let a of e){let l=a.id,c=WG(i[l],r);c!==null&&o.push({plugin:a,options:qG(t.config,{plugin:a,local:n[l]},c,s)})}return o}function qG(t,{plugin:e,local:n},i,r){let o=t.pluginScopeKeys(e),s=t.getOptionScopes(i,o);return n&&e.defaults&&s.push(e.defaults),t.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kx(t,e){let n=$e.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function YG(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function XG(t,e){return t===e?"_index_":"_value_"}function OR(t){if(t==="x"||t==="y"||t==="r")return t}function ZG(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Fx(t,...e){if(OR(t))return t;for(let n of e){let i=n.axis||ZG(n.position)||t.length>1&&OR(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function PR(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function KG(t,e){if(e.data&&e.data.datasets){let n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return PR(t,"x",n[0])||PR(t,"y",n[0])}return{}}function QG(t,e){let n=Vo[t.type]||{scales:{}},i=e.scales||{},r=kx(t.type,e),o=Object.create(null);return Object.keys(i).forEach(s=>{let a=i[s];if(!_e(a))return console.error(`Invalid scale configuration for scale: ${s}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);let l=Fx(s,a,KG(s,t),$e.scales[a.type]),c=XG(l,r),u=n.scales||{};o[s]=bl(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(s=>{let a=s.type||t.type,l=s.indexAxis||kx(a,e),u=(Vo[a]||{}).scales||{};Object.keys(u).forEach(d=>{let h=YG(d,l),f=s[h+"AxisID"]||h;o[f]=o[f]||Object.create(null),bl(o[f],[{axis:h},i[f],u[d]])})}),Object.keys(o).forEach(s=>{let a=o[s];bl(a,[$e.scales[a.type],$e.scale])}),o}function x1(t){let e=t.options||(t.options={});e.plugins=ie(e.plugins,{}),e.scales=QG(t,e)}function b1(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function JG(t){return t=t||{},t.data=b1(t.data),x1(t),t}var NR=new Map,C1=new Set;function Kp(t,e){let n=NR.get(t);return n||(n=e(),NR.set(t,n),C1.add(n)),n}var Ku=(t,e,n)=>{let i=Rr(e,n);i!==void 0&&t.add(i)},Lx=class{constructor(e){this._config=JG(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=b1(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),x1(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Kp(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Kp(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Kp(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){let n=e.id,i=this.type;return Kp(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){let i=this._scopeCache,r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){let{options:r,type:o}=this,s=this._cachedScopes(e,i),a=s.get(n);if(a)return a;let l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(d=>Ku(l,e,d))),u.forEach(d=>Ku(l,r,d)),u.forEach(d=>Ku(l,Vo[o]||{},d)),u.forEach(d=>Ku(l,$e,d)),u.forEach(d=>Ku(l,zp,d))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),C1.has(n)&&s.set(n,c),c}chartOptionScopes(){let{options:e,type:n}=this;return[e,Vo[n]||{},$e.datasets[n]||{},{type:n},$e,zp]}resolveNamedOptions(e,n,i,r=[""]){let o={$shared:!0},{resolver:s,subPrefixes:a}=kR(this._resolverCache,e,r),l=s;if(t8(s,n)){o.$shared=!1,i=Tr(i)?i():i;let c=this.createResolver(e,i,a);l=ea(s,i,c)}for(let c of n)o[c]=l[c];return o}createResolver(e,n,i=[""],r){let{resolver:o}=kR(this._resolverCache,e,i);return _e(n)?ea(o,n,void 0,r):o}};function kR(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));let r=n.join(),o=i.get(r);return o||(o={resolver:Wp(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,o)),o}var e8=t=>_e(t)&&Object.getOwnPropertyNames(t).some(e=>Tr(t[e]));function t8(t,e){let{isScriptable:n,isIndexable:i}=cx(t);for(let r of e){let o=n(r),s=i(r),a=(s||o)&&t[r];if(o&&(Tr(a)||e8(a))||s&&je(a))return!0}return!1}var n8="4.4.3",i8=["top","bottom","left","right","chartArea"];function FR(t,e){return t==="top"||t==="bottom"||i8.indexOf(t)===-1&&e==="x"}function LR(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function VR(t){let e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Fe(n&&n.onComplete,[t],e)}function r8(t){let e=t.chart,n=e.options.animation;Fe(n&&n.onProgress,[t],e)}function w1(t){return Gp()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}var ig={},jR=t=>{let e=w1(t);return Object.values(ig).filter(n=>n.canvas===e).pop()};function o8(t,e,n){let i=Object.keys(t);for(let r of i){let o=+r;if(o>=e){let s=t[r];delete t[r],(n>0||o>e)&&(t[o+n]=s)}}}function s8(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}function Qp(t,e,n){return t.options.clip?t[n]:e[n]}function a8(t,e){let{xScale:n,yScale:i}=t;return n&&i?{left:Qp(n,e,"left"),right:Qp(n,e,"right"),top:Qp(i,e,"top"),bottom:Qp(i,e,"bottom")}:e}var ug=(()=>{class t{static defaults=$e;static instances=ig;static overrides=Vo;static registry=Ui;static version=n8;static getChart=jR;static register(...n){Ui.add(...n),BR()}static unregister(...n){Ui.remove(...n),BR()}constructor(n,i){let r=this.config=new Lx(i),o=w1(n),s=jR(o);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||SG(o)),this.platform.updateConfig(r);let l=this.platform.acquireContext(o,a.aspectRatio),c=l&&l.canvas,u=c&&c.height,d=c&&c.width;if(this.id=LA(),this.ctx=l,this.canvas=c,this.width=d,this.height=u,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Nx,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=YA(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],ig[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Pr.listen(this,"complete",VR),Pr.listen(this,"progress",r8),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:n,maintainAspectRatio:i},width:r,height:o,_aspectRatio:s}=this;return be(n)?i&&s?s:o?r/o:null:n}get data(){return this.config.data}set data(n){this.config.data=n}get options(){return this._options}set options(n){this.config.options=n}get registry(){return Ui}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():fx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sx(this.canvas,this.ctx),this}stop(){return Pr.stop(this),this}resize(n,i){Pr.running(this)?this._resizeBeforeDraw={width:n,height:i}:this._resize(n,i)}_resize(n,i){let r=this.options,o=this.canvas,s=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(o,n,i,s),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,fx(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Fe(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};Ae(i,(r,o)=>{r.id=o})}buildOrUpdateScales(){let n=this.options,i=n.scales,r=this.scales,o=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),s=[];i&&(s=s.concat(Object.keys(i).map(a=>{let l=i[a],c=Fx(a,l),u=c==="r",d=c==="x";return{options:l,dposition:u?"chartArea":d?"bottom":"left",dtype:u?"radialLinear":d?"category":"linear"}}))),Ae(s,a=>{let l=a.options,c=l.id,u=Fx(c,l),d=ie(l.type,a.dtype);(l.position===void 0||FR(l.position,u)!==FR(a.dposition))&&(l.position=a.dposition),o[c]=!0;let h=null;if(c in r&&r[c].type===d)h=r[c];else{let f=Ui.getScale(d);h=new f({id:c,type:d,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,n)}),Ae(o,(a,l)=>{a||delete r[l]}),Ae(r,a=>{Ht.configure(this,a,a.options),Ht.addBox(this,a)})}_updateMetasets(){let n=this._metasets,i=this.data.datasets.length,r=n.length;if(n.sort((o,s)=>o.index-s.index),r>i){for(let o=i;o<r;++o)this._destroyDatasetMeta(o);n.splice(i,r-i)}this._sortedMetasets=n.slice(0).sort(LR("order","index"))}_removeUnreferencedMetasets(){let{_metasets:n,data:{datasets:i}}=this;n.length>i.length&&delete this._stacks,n.forEach((r,o)=>{i.filter(s=>s===r._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){let n=[],i=this.data.datasets,r,o;for(this._removeUnreferencedMetasets(),r=0,o=i.length;r<o;r++){let s=i[r],a=this.getDatasetMeta(r),l=s.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=s.indexAxis||kx(l,this.options),a.order=s.order||0,a.index=r,a.label=""+s.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=Ui.getController(l),{datasetElementType:u,dataElementType:d}=$e.datasets[l];Object.assign(c,{dataElementType:Ui.getElement(d),datasetElementType:u&&Ui.getElement(u)}),a.controller=new c(this,r),n.push(a.controller)}}return this._updateMetasets(),n}_resetElements(){Ae(this.data.datasets,(n,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(n){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:n,cancelable:!0})===!1)return;let s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let u=0,d=this.data.datasets.length;u<d;u++){let{controller:h}=this.getDatasetMeta(u),f=!o&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),o||Ae(s,u=>{u.reset()}),this._updateDatasets(n),this.notifyPlugins("afterUpdate",{mode:n}),this._layers.sort(LR("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ae(this.scales,n=>{Ht.removeBox(this,n)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let n=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(n.events);(!q0(i,r)||!!this._responsiveListeners!==n.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:n}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:o,count:s}of i){let a=r==="_removeElements"?-s:s;o8(n,o,a)}}_getUniformDataChanges(){let n=this._dataChanges;if(!n||!n.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=s=>new Set(n.filter(a=>a[0]===s).map((a,l)=>l+","+a.splice(1).join(","))),o=r(0);for(let s=1;s<i;s++)if(!q0(o,r(s)))return;return Array.from(o).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(n){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Ht.update(this,this.width,this.height,n);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],Ae(this.boxes,o=>{r&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,s)=>{o._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(n){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:n,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Tr(n)?n({datasetIndex:i}):n);this.notifyPlugins("afterDatasetsUpdate",{mode:n})}}_updateDataset(n,i){let r=this.getDatasetMeta(n),o={meta:r,index:n,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(r.controller._update(i),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Pr.has(this)?this.attached&&!Pr.running(this)&&Pr.start(this):(this.draw(),VR({chart:this})))}draw(){let n;if(this._resizeBeforeDraw){let{width:r,height:o}=this._resizeBeforeDraw;this._resize(r,o),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(n=0;n<i.length&&i[n].z<=0;++n)i[n].draw(this.chartArea);for(this._drawDatasets();n<i.length;++n)i[n].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(n){let i=this._sortedMetasets,r=[],o,s;for(o=0,s=i.length;o<s;++o){let a=i[o];(!n||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let n=this.getSortedVisibleDatasetMetas();for(let i=n.length-1;i>=0;--i)this._drawDataset(n[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(n){let i=this.ctx,r=n._clip,o=!r.disabled,s=a8(n,this.chartArea),a={meta:n,index:n.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(o&&Wu(i,{left:r.left===!1?0:s.left-r.left,right:r.right===!1?this.width:s.right+r.right,top:r.top===!1?0:s.top-r.top,bottom:r.bottom===!1?this.height:s.bottom+r.bottom}),n.controller.draw(),o&&Gu(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(n){return Li(n,this.chartArea,this._minPadding)}getElementsAtEventForMode(n,i,r,o){let s=lG.modes[i];return typeof s=="function"?s(this,n,r,o):[]}getDatasetMeta(n){let i=this.data.datasets[n],r=this._metasets,o=r.filter(s=>s&&s._dataset===i).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:n,_dataset:i,_parsed:[],_sorted:!1},r.push(o)),o}getContext(){return this.$context||(this.$context=Or(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(n){let i=this.data.datasets[n];if(!i)return!1;let r=this.getDatasetMeta(n);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(n,i){let r=this.getDatasetMeta(n);r.hidden=!i}toggleDataVisibility(n){this._hiddenIndices[n]=!this._hiddenIndices[n]}getDataVisibility(n){return!this._hiddenIndices[n]}_updateVisibility(n,i,r){let o=r?"show":"hide",s=this.getDatasetMeta(n),a=s.controller._resolveAnimations(void 0,o);Cl(i)?(s.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(n,r),a.update(s,{visible:r}),this.update(l=>l.datasetIndex===n?o:void 0))}hide(n,i){this._updateVisibility(n,i,!1)}show(n,i){this._updateVisibility(n,i,!0)}_destroyDatasetMeta(n){let i=this._metasets[n];i&&i.controller&&i.controller._destroy(),delete this._metasets[n]}_stop(){let n,i;for(this.stop(),Pr.remove(this),n=0,i=this.data.datasets.length;n<i;++n)this._destroyDatasetMeta(n)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:n,ctx:i}=this;this._stop(),this.config.clearCache(),n&&(this.unbindEvents(),sx(n,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete ig[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...n){return this.canvas.toDataURL(...n)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let n=this._listeners,i=this.platform,r=(s,a)=>{i.addEventListener(this,s,a),n[s]=a},o=(s,a,l)=>{s.offsetX=a,s.offsetY=l,this._eventHandler(s)};Ae(this.options.events,s=>r(s,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let n=this._responsiveListeners,i=this.platform,r=(c,u)=>{i.addEventListener(this,c,u),n[c]=u},o=(c,u)=>{n[c]&&(i.removeEventListener(this,c,u),delete n[c])},s=(c,u)=>{this.canvas&&this.resize(c,u)},a,l=()=>{o("attach",l),this.attached=!0,this.resize(),r("resize",s),r("detach",a)};a=()=>{this.attached=!1,o("resize",s),this._stop(),this._resize(0,0),r("attach",l)},i.isAttached(this.canvas)?l():a()}unbindEvents(){Ae(this._listeners,(n,i)=>{this.platform.removeEventListener(this,i,n)}),this._listeners={},Ae(this._responsiveListeners,(n,i)=>{this.platform.removeEventListener(this,i,n)}),this._responsiveListeners=void 0}updateHoverStyle(n,i,r){let o=r?"set":"remove",s,a,l,c;for(i==="dataset"&&(s=this.getDatasetMeta(n[0].datasetIndex),s.controller["_"+o+"DatasetHoverStyle"]()),l=0,c=n.length;l<c;++l){a=n[l];let u=a&&this.getDatasetMeta(a.datasetIndex).controller;u&&u[o+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(n){let i=this._active||[],r=n.map(({datasetIndex:s,index:a})=>{let l=this.getDatasetMeta(s);if(!l)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:l.data[a],index:a}});!Hu(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(n,i,r){return this._plugins.notify(this,n,i,r)}isPluginEnabled(n){return this._plugins._cache.filter(i=>i.plugin.id===n).length===1}_updateHoverStyles(n,i,r){let o=this.options.hover,s=(c,u)=>c.filter(d=>!u.some(h=>d.datasetIndex===h.datasetIndex&&d.index===h.index)),a=s(i,n),l=r?n:s(n,i);a.length&&this.updateHoverStyle(a,o.mode,!1),l.length&&o.mode&&this.updateHoverStyle(l,o.mode,!0)}_eventHandler(n,i){let r={event:n,replay:i,cancelable:!0,inChartArea:this.isPointInArea(n)},o=a=>(a.options.events||this.options.events).includes(n.native.type);if(this.notifyPlugins("beforeEvent",r,o)===!1)return;let s=this._handleEvent(n,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,o),(s||r.changed)&&this.render(),this}_handleEvent(n,i,r){let{_active:o=[],options:s}=this,a=i,l=this._getActiveElements(n,o,r,a),c=BA(n),u=s8(n,this._lastEvent,r,c);r&&(this._lastEvent=null,Fe(s.onHover,[n,l,this],this),c&&Fe(s.onClick,[n,l,this],this));let d=!Hu(l,o);return(d||i)&&(this._active=l,this._updateHoverStyles(l,o,i)),this._lastEvent=u,d}_getActiveElements(n,i,r,o){if(n.type==="mouseout")return[];if(!r)return i;let s=this.options.hover;return this.getElementsAtEventForMode(n,s.mode,s,o)}}return t})();function BR(){return Ae(ug.instances,t=>t._plugins.invalidate())}function l8(t,e,n){let{startAngle:i,pixelMargin:r,x:o,y:s,outerRadius:a,innerRadius:l}=e,c=r/a;t.beginPath(),t.arc(o,s,a,i-c,n+c),l>r?(c=r/l,t.arc(o,s,l,n+c,i-c,!0)):t.arc(o,s,r,n+nt,i-nt),t.closePath(),t.clip()}function c8(t){return $p(t,["outerStart","outerEnd","innerStart","innerEnd"])}function u8(t,e,n,i){let r=c8(t.options.borderRadius),o=(n-e)/2,s=Math.min(o,i*e/2),a=l=>{let c=(n-Math.min(o,l))*i/2;return vt(l,0,Math.min(o,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:vt(r.innerStart,0,s),innerEnd:vt(r.innerEnd,0,s)}}function Ml(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function ag(t,e,n,i,r,o){let{x:s,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=e,d=Math.max(e.outerRadius+i+n-c,0),h=u>0?u+i+n+c:0,f=0,p=r-l;if(i){let O=u>0?u-i:0,R=d>0?d-i:0,k=(O+R)/2,B=k!==0?p*k/(k+i):p;f=(p-B)/2}let m=Math.max(.001,p*d-n/Be)/d,g=(p-m)/2,y=l+g+f,_=r-g-f,{outerStart:x,outerEnd:b,innerStart:v,innerEnd:C}=u8(e,h,d,_-y),E=d-x,w=d-b,D=y+x/E,A=_-b/w,M=h+v,T=h+C,F=y+v/M,q=_-C/T;if(t.beginPath(),o){let O=(D+A)/2;if(t.arc(s,a,d,D,O),t.arc(s,a,d,O,A),b>0){let X=Ml(w,A,s,a);t.arc(X.x,X.y,b,A,_+nt)}let R=Ml(T,_,s,a);if(t.lineTo(R.x,R.y),C>0){let X=Ml(T,q,s,a);t.arc(X.x,X.y,C,_+nt,q+Math.PI)}let k=(_-C/h+(y+v/h))/2;if(t.arc(s,a,h,_-C/h,k,!0),t.arc(s,a,h,k,y+v/h,!0),v>0){let X=Ml(M,F,s,a);t.arc(X.x,X.y,v,F+Math.PI,y-nt)}let B=Ml(E,y,s,a);if(t.lineTo(B.x,B.y),x>0){let X=Ml(E,D,s,a);t.arc(X.x,X.y,x,y-nt,D)}}else{t.moveTo(s,a);let O=Math.cos(D)*d+s,R=Math.sin(D)*d+a;t.lineTo(O,R);let k=Math.cos(A)*d+s,B=Math.sin(A)*d+a;t.lineTo(k,B)}t.closePath()}function d8(t,e,n,i,r){let{fullCircles:o,startAngle:s,circumference:a}=e,l=e.endAngle;if(o){ag(t,e,n,i,l,r);for(let c=0;c<o;++c)t.fill();isNaN(a)||(l=s+(a%Ue||Ue))}return ag(t,e,n,i,l,r),t.fill(),l}function h8(t,e,n,i,r){let{fullCircles:o,startAngle:s,circumference:a,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:d,borderDashOffset:h}=l,f=l.borderAlign==="inner";if(!c)return;t.setLineDash(d||[]),t.lineDashOffset=h,f?(t.lineWidth=c*2,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let p=e.endAngle;if(o){ag(t,e,n,i,p,r);for(let m=0;m<o;++m)t.stroke();isNaN(a)||(p=s+(a%Ue||Ue))}f&&l8(t,e,p),o||(ag(t,e,n,i,p,r),t.stroke())}var Vx=class extends ui{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,n,i){let r=this.getProps(["x","y"],i),{angle:o,distance:s}=K0(r,{x:e,y:n}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:u,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),h=(this.options.spacing+this.options.borderWidth)/2,p=ie(d,l-a)>=Ue||El(o,a,l),m=ji(s,c+h,u+h);return p&&m}getCenterPoint(e){let{x:n,y:i,startAngle:r,endAngle:o,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:l,spacing:c}=this.options,u=(r+o)/2,d=(s+a+c+l)/2;return{x:n+Math.cos(u)*d,y:i+Math.sin(u)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:n,circumference:i}=this,r=(n.offset||0)/4,o=(n.spacing||0)/2,s=n.circular;if(this.pixelMargin=n.borderAlign==="inner"?.33:0,this.fullCircles=i>Ue?Math.floor(i/Ue):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(Be,i||0)),c=r*l;e.fillStyle=n.backgroundColor,e.strokeStyle=n.borderColor,d8(e,this,c,o,s),h8(e,this,c,o,s),e.restore()}};function E1(t,e,n=e){t.lineCap=ie(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ie(n.borderDash,e.borderDash)),t.lineDashOffset=ie(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ie(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ie(n.borderWidth,e.borderWidth),t.strokeStyle=ie(n.borderColor,e.borderColor)}function f8(t,e,n){t.lineTo(n.x,n.y)}function p8(t){return t.stepped?QA:t.tension||t.cubicInterpolationMode==="monotone"?JA:f8}function D1(t,e,n={}){let i=t.length,{start:r=0,end:o=i-1}=n,{start:s,end:a}=e,l=Math.max(r,s),c=Math.min(o,a),u=r<s&&o<s||r>a&&o>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function g8(t,e,n,i){let{points:r,options:o}=e,{count:s,start:a,loop:l,ilen:c}=D1(r,n,i),u=p8(o),{move:d=!0,reverse:h}=i||{},f,p,m;for(f=0;f<=c;++f)p=r[(a+(h?c-f:f))%s],!p.skip&&(d?(t.moveTo(p.x,p.y),d=!1):u(t,m,p,h,o.stepped),m=p);return l&&(p=r[(a+(h?c:0))%s],u(t,m,p,h,o.stepped)),!!l}function m8(t,e,n,i){let r=e.points,{count:o,start:s,ilen:a}=D1(r,n,i),{move:l=!0,reverse:c}=i||{},u=0,d=0,h,f,p,m,g,y,_=b=>(s+(c?a-b:b))%o,x=()=>{m!==g&&(t.lineTo(u,g),t.lineTo(u,m),t.lineTo(u,y))};for(l&&(f=r[_(0)],t.moveTo(f.x,f.y)),h=0;h<=a;++h){if(f=r[_(h)],f.skip)continue;let b=f.x,v=f.y,C=b|0;C===p?(v<m?m=v:v>g&&(g=v),u=(d*u+b)/++d):(x(),t.lineTo(b,v),p=C,d=0,m=g=v),y=v}x()}function jx(t){let e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?m8:g8}function y8(t){return t.stepped?lR:t.tension||t.cubicInterpolationMode==="monotone"?cR:Lo}function _8(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),E1(t,e.options),t.stroke(r)}function v8(t,e,n,i){let{segments:r,options:o}=e,s=jx(e);for(let a of r)E1(t,o,a.style),t.beginPath(),s(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}var x8=typeof Path2D=="function";function b8(t,e,n,i){x8&&!e.options.segment?_8(t,e,n,i):v8(t,e,n,i)}var dg=(()=>{class t extends ui{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:n=>n!=="borderDash"&&n!=="fill"};constructor(n){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,n&&Object.assign(this,n)}updateControlPoints(n,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let o=r.spanGaps?this._loop:this._fullLoop;oR(this._points,r,n,o,i),this._pointsUpdated=!0}}set points(n){this._points=n,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=dR(this,this.options.segment))}first(){let n=this.segments,i=this.points;return n.length&&i[n[0].start]}last(){let n=this.segments,i=this.points,r=n.length;return r&&i[n[r-1].end]}interpolate(n,i){let r=this.options,o=n[i],s=this.points,a=_x(this,{property:i,start:o,end:o});if(!a.length)return;let l=[],c=y8(r),u,d;for(u=0,d=a.length;u<d;++u){let{start:h,end:f}=a[u],p=s[h],m=s[f];if(p===m){l.push(p);continue}let g=Math.abs((o-p[i])/(m[i]-p[i])),y=c(p,m,g,r.stepped);y[i]=n[i],l.push(y)}return l.length===1?l[0]:l}pathSegment(n,i,r){return jx(this)(n,this,i,r)}path(n,i,r){let o=this.segments,s=jx(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let l of o)a&=s(n,this,l,{start:i,end:i+r-1});return!!a}draw(n,i,r,o){let s=this.options||{};(this.points||[]).length&&s.borderWidth&&(n.save(),b8(n,this,r,o),n.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return t})();function UR(t,e,n,i){let r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}var C8=(()=>{class t extends ui{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(n){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){let o=this.options,{x:s,y:a}=this.getProps(["x","y"],r);return Math.pow(n-s,2)+Math.pow(i-a,2)<Math.pow(o.hitRadius+o.radius,2)}inXRange(n,i){return UR(this,n,"x",i)}inYRange(n,i){return UR(this,n,"y",i)}getCenterPoint(n){let{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);let r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){let r=this.options;this.skip||r.radius<.1||!Li(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Hp(n,r,this.x,this.y))}getRange(){let n=this.options||{};return n.radius+n.hitRadius}}return t})();function I1(t,e){let{x:n,y:i,base:r,width:o,height:s}=t.getProps(["x","y","base","width","height"],e),a,l,c,u,d;return t.horizontal?(d=s/2,a=Math.min(n,r),l=Math.max(n,r),c=i-d,u=i+d):(d=o/2,a=n-d,l=n+d,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Ho(t,e,n,i){return t?0:vt(e,n,i)}function w8(t,e,n){let i=t.options.borderWidth,r=t.borderSkipped,o=lx(i);return{t:Ho(r.top,o.top,0,n),r:Ho(r.right,o.right,0,e),b:Ho(r.bottom,o.bottom,0,n),l:Ho(r.left,o.left,0,e)}}function E8(t,e,n){let{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,o=Uo(r),s=Math.min(e,n),a=t.borderSkipped,l=i||_e(r);return{topLeft:Ho(!l||a.top||a.left,o.topLeft,0,s),topRight:Ho(!l||a.top||a.right,o.topRight,0,s),bottomLeft:Ho(!l||a.bottom||a.left,o.bottomLeft,0,s),bottomRight:Ho(!l||a.bottom||a.right,o.bottomRight,0,s)}}function D8(t){let e=I1(t),n=e.right-e.left,i=e.bottom-e.top,r=w8(t,n/2,i/2),o=E8(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:o},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,o.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(r.b,r.r))}}}}function Dx(t,e,n,i){let r=e===null,o=n===null,a=t&&!(r&&o)&&I1(t,i);return a&&(r||ji(e,a.left,a.right))&&(o||ji(n,a.top,a.bottom))}function I8(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function S8(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ix(t,e,n={}){let i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,s=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+s,radius:t.radius}}var Bx=class extends ui{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:o,outer:s}=D8(this),a=I8(s.radius)?Il:S8;e.save(),(s.w!==o.w||s.h!==o.h)&&(e.beginPath(),a(e,Ix(s,n,o)),e.clip(),a(e,Ix(o,-n,s)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,Ix(o,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Dx(this,e,n,i)}inXRange(e,n){return Dx(this,e,null,n)}inYRange(e,n){return Dx(this,null,e,n)}getCenterPoint(e){let{x:n,y:i,base:r,horizontal:o}=this.getProps(["x","y","base","horizontal"],e);return{x:o?(n+r)/2:n,y:o?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},M8=Object.freeze({__proto__:null,ArcElement:Vx,BarElement:Bx,LineElement:dg,PointElement:C8}),Ux=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],zR=Ux.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function S1(t){return Ux[t%Ux.length]}function M1(t){return zR[t%zR.length]}function T8(t,e){return t.borderColor=S1(e),t.backgroundColor=M1(e),++e}function A8(t,e){return t.backgroundColor=t.data.map(()=>S1(e++)),e}function R8(t,e){return t.backgroundColor=t.data.map(()=>M1(e++)),e}function O8(t){let e=0;return(n,i)=>{let r=t.getDatasetMeta(i).controller;r instanceof Xx?e=A8(n,e):r instanceof g1?e=R8(n,e):r&&(e=T8(n,e))}}function HR(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}function P8(t){return t&&(t.borderColor||t.backgroundColor)}var N8={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;let{data:{datasets:i},options:r}=t.config,{elements:o}=r;if(!n.forceOverride&&(HR(i)||P8(r)||o&&HR(o)))return;let s=O8(t);i.forEach(s)}};function k8(t,e,n,i,r){let o=r.samples||i;if(o>=n)return t.slice(e,e+n);let s=[],a=(n-2)/(o-2),l=0,c=e+n-1,u=e,d,h,f,p,m;for(s[l++]=t[u],d=0;d<o-2;d++){let g=0,y=0,_,x=Math.floor((d+1)*a)+1+e,b=Math.min(Math.floor((d+2)*a)+1,n)+e,v=b-x;for(_=x;_<b;_++)g+=t[_].x,y+=t[_].y;g/=v,y/=v;let C=Math.floor(d*a)+1+e,E=Math.min(Math.floor((d+1)*a)+1,n)+e,{x:w,y:D}=t[u];for(f=p=-1,_=C;_<E;_++)p=.5*Math.abs((w-g)*(t[_].y-D)-(w-t[_].x)*(y-D)),p>f&&(f=p,h=t[_],m=_);s[l++]=h,u=m}return s[l++]=t[c],s}function F8(t,e,n,i){let r=0,o=0,s,a,l,c,u,d,h,f,p,m,g=[],y=e+n-1,_=t[e].x,b=t[y].x-_;for(s=e;s<e+n;++s){a=t[s],l=(a.x-_)/b*i,c=a.y;let v=l|0;if(v===u)c<p?(p=c,d=s):c>m&&(m=c,h=s),r=(o*r+a.x)/++o;else{let C=s-1;if(!be(d)&&!be(h)){let E=Math.min(d,h),w=Math.max(d,h);E!==f&&E!==C&&g.push(ge(N({},t[E]),{x:r})),w!==f&&w!==C&&g.push(ge(N({},t[w]),{x:r}))}s>0&&C!==f&&g.push(t[C]),g.push(a),u=v,o=0,p=m=c,d=h=f=s}}return g}function T1(t){if(t._decimated){let e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function $R(t){t.data.datasets.forEach(e=>{T1(e)})}function L8(t,e){let n=e.length,i=0,r,{iScale:o}=t,{min:s,max:a,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(i=vt(Fi(e,o.axis,s).lo,0,n-1)),c?r=vt(Fi(e,o.axis,a).hi+1,i,n)-i:r=n-i,{start:i,count:r}}var V8={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled){$R(t);return}let i=t.width;t.data.datasets.forEach((r,o)=>{let{_data:s,indexAxis:a}=r,l=t.getDatasetMeta(o),c=s||r.data;if(Sl([a,t.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let u=t.scales[l.xAxisID];if(u.type!=="linear"&&u.type!=="time"||t.options.parsing)return;let{start:d,count:h}=L8(l,c),f=n.threshold||4*i;if(h<=f){T1(r);return}be(s)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(m){this._data=m}}));let p;switch(n.algorithm){case"lttb":p=k8(c,d,h,i,n);break;case"min-max":p=F8(c,d,h,i);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}r._decimated=p})},destroy(t){$R(t)}};function j8(t,e,n){let i=t.segments,r=t.points,o=e.points,s=[];for(let a of i){let{start:l,end:c}=a;c=Zx(l,c,r);let u=zx(n,r[l],r[c],a.loop);if(!e.segments){s.push({source:a,target:u,start:r[l],end:r[c]});continue}let d=_x(e,u);for(let h of d){let f=zx(n,o[h.start],o[h.end],h.loop),p=yx(a,r,f);for(let m of p)s.push({source:m,target:h,start:{[n]:WR(u,f,"start",Math.max)},end:{[n]:WR(u,f,"end",Math.min)}})}}return s}function zx(t,e,n,i){if(i)return;let r=e[t],o=n[t];return t==="angle"&&(r=rn(r),o=rn(o)),{property:t,start:r,end:o}}function B8(t,e){let{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach(({start:s,end:a})=>{a=Zx(s,a,r);let l=r[s],c=r[a];i!==null?(o.push({x:l.x,y:i}),o.push({x:c.x,y:i})):n!==null&&(o.push({x:n,y:l.y}),o.push({x:n,y:c.y}))}),o}function Zx(t,e,n){for(;e>t;e--){let i=n[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function WR(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function A1(t,e){let n=[],i=!1;return je(t)?(i=!0,n=t):n=B8(t,e),n.length?new dg({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function GR(t){return t&&t.fill!==!1}function U8(t,e,n){let r=t[e].fill,o=[e],s;if(!n)return r;for(;r!==!1&&o.indexOf(r)===-1;){if(!Ze(r))return r;if(s=t[r],!s)return!1;if(s.visible)return r;o.push(r),r=s.fill}return!1}function z8(t,e,n){let i=G8(t);if(_e(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Ze(r)&&Math.floor(r)===r?H8(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function H8(t,e,n,i){return(t==="-"||t==="+")&&(n=e+n),n===e||n<0||n>=i?!1:n}function $8(t,e){let n=null;return t==="start"?n=e.bottom:t==="end"?n=e.top:_e(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}function W8(t,e,n){let i;return t==="start"?i=n:t==="end"?i=e.options.reverse?e.min:e.max:_e(t)?i=t.value:i=e.getBaseValue(),i}function G8(t){let e=t.options,n=e.fill,i=ie(n&&n.target,n);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function q8(t){let{scale:e,index:n,line:i}=t,r=[],o=i.segments,s=i.points,a=Y8(e,n);a.push(A1({x:null,y:e.bottom},i));for(let l=0;l<o.length;l++){let c=o[l];for(let u=c.start;u<=c.end;u++)X8(r,s[u],a)}return new dg({points:r,options:{}})}function Y8(t,e){let n=[],i=t.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let o=i[r];if(o.index===e)break;o.hidden||n.unshift(o.dataset)}return n}function X8(t,e,n){let i=[];for(let r=0;r<n.length;r++){let o=n[r],{first:s,last:a,point:l}=Z8(o,e,"x");if(!(!l||s&&a)){if(s)i.unshift(l);else if(t.push(l),!a)break}}t.push(...i)}function Z8(t,e,n){let i=t.interpolate(e,n);if(!i)return{};let r=i[n],o=t.segments,s=t.points,a=!1,l=!1;for(let c=0;c<o.length;c++){let u=o[c],d=s[u.start][n],h=s[u.end][n];if(ji(r,d,h)){a=r===d,l=r===h;break}}return{first:a,last:l,point:i}}var lg=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,n,i){let{x:r,y:o,radius:s}=this;return n=n||{start:0,end:Ue},e.arc(r,o,s,n.end,n.start,!0),!i.bounds}interpolate(e){let{x:n,y:i,radius:r}=this,o=e.angle;return{x:n+Math.cos(o)*r,y:i+Math.sin(o)*r,angle:o}}};function K8(t){let{chart:e,fill:n,line:i}=t;if(Ze(n))return Q8(e,n);if(n==="stack")return q8(t);if(n==="shape")return!0;let r=J8(t);return r instanceof lg?r:A1(r,i)}function Q8(t,e){let n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}function J8(t){return(t.scale||{}).getPointPositionForValue?t4(t):e4(t)}function e4(t){let{scale:e={},fill:n}=t,i=$8(n,e);if(Ze(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function t4(t){let{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,o=i.reverse?e.max:e.min,s=W8(n,e,o),a=[];if(i.grid.circular){let l=e.getPointPositionForValue(0,o);return new lg({x:l.x,y:l.y,radius:e.getDistanceFromCenterForValue(s)})}for(let l=0;l<r;++l)a.push(e.getPointPositionForValue(l,s));return a}function Sx(t,e,n){let i=K8(e),{line:r,scale:o,axis:s}=e,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:d=c}=l||{};i&&r.points.length&&(Wu(t,n),n4(t,{line:r,target:i,above:u,below:d,area:n,scale:o,axis:s}),Gu(t))}function n4(t,e){let{line:n,target:i,above:r,below:o,area:s,scale:a}=e,l=n._loop?"angle":e.axis;t.save(),l==="x"&&o!==r&&(qR(t,i,s.top),YR(t,{line:n,target:i,color:r,scale:a,property:l}),t.restore(),t.save(),qR(t,i,s.bottom)),YR(t,{line:n,target:i,color:o,scale:a,property:l}),t.restore()}function qR(t,e,n){let{segments:i,points:r}=e,o=!0,s=!1;t.beginPath();for(let a of i){let{start:l,end:c}=a,u=r[l],d=r[Zx(l,c,r)];o?(t.moveTo(u.x,u.y),o=!1):(t.lineTo(u.x,n),t.lineTo(u.x,u.y)),s=!!e.pathSegment(t,a,{move:s}),s?t.closePath():t.lineTo(d.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function YR(t,e){let{line:n,target:i,property:r,color:o,scale:s}=e,a=j8(n,i,r);for(let{source:l,target:c,start:u,end:d}of a){let{style:{backgroundColor:h=o}={}}=l,f=i!==!0;t.save(),t.fillStyle=h,i4(t,s,f&&zx(r,u,d)),t.beginPath();let p=!!n.pathSegment(t,l),m;if(f){p?t.closePath():XR(t,i,d,r);let g=!!i.pathSegment(t,c,{move:p,reverse:!0});m=p&&g,m||XR(t,i,u,r)}t.closePath(),t.fill(m?"evenodd":"nonzero"),t.restore()}}function i4(t,e,n){let{top:i,bottom:r}=e.chart.chartArea,{property:o,start:s,end:a}=n||{};o==="x"&&(t.beginPath(),t.rect(s,i,a-s,r-i),t.clip())}function XR(t,e,n,i){let r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var r4={id:"filler",afterDatasetsUpdate(t,e,n){let i=(t.data.datasets||[]).length,r=[],o,s,a,l;for(s=0;s<i;++s)o=t.getDatasetMeta(s),a=o.dataset,l=null,a&&a.options&&a instanceof dg&&(l={visible:t.isDatasetVisible(s),index:s,fill:z8(a,s,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:a}),o.$filler=l,r.push(l);for(s=0;s<i;++s)l=r[s],!(!l||l.fill===!1)&&(l.fill=U8(r,s,n.propagate))},beforeDraw(t,e,n){let i=n.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let s=r.length-1;s>=0;--s){let a=r[s].$filler;a&&(a.line.updateControlPoints(o,a.axis),i&&a.fill&&Sx(t.ctx,a,o))}},beforeDatasetsDraw(t,e,n){if(n.drawTime!=="beforeDatasetsDraw")return;let i=t.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let o=i[r].$filler;GR(o)&&Sx(t.ctx,o,t.chartArea)}},beforeDatasetDraw(t,e,n){let i=e.meta.$filler;!GR(i)||n.drawTime!=="beforeDatasetDraw"||Sx(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},ZR=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},o4=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index,cg=class extends ui{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},n=Fe(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){let{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=dt(i.font),o=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=ZR(i,o),c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(s,o,a,l)+10):(u=this.maxHeight,c=this._fitCols(s,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){let{ctx:o,maxWidth:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a,d=e;o.textAlign="left",o.textBaseline="middle";let h=-1,f=-u;return this.legendItems.forEach((p,m)=>{let g=i+n/2+o.measureText(p.text).width;(m===0||c[c.length-1]+g+2*a>s)&&(d+=u,c[c.length-(m>0?0:1)]=0,f+=u,h++),l[m]={left:0,top:f,row:h,width:g,height:r},c[c.length-1]+=g+a}),d}_fitCols(e,n,i,r){let{ctx:o,maxHeight:s,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=s-e,d=a,h=0,f=0,p=0,m=0;return this.legendItems.forEach((g,y)=>{let{itemWidth:_,itemHeight:x}=s4(i,n,o,g,r);y>0&&f+x+2*a>u&&(d+=h+a,c.push({width:h,height:f}),p+=h+a,m++,h=f=0),l[y]={left:p,top:f,col:m,width:_,height:x},h=Math.max(h,_),f+=x+a}),d+=h,c.push({width:h,height:f}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:o}}=this,s=na(o,this.left,this.width);if(this.isHorizontal()){let a=0,l=Pt(i,this.left+r,this.right-this.lineWidths[a]);for(let c of n)a!==c.row&&(a=c.row,l=Pt(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=s.leftForLtr(s.x(l),c.width),l+=c.width+r}else{let a=0,l=Pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let c of n)c.col!==a&&(a=c.col,l=Pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=s.leftForLtr(s.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;Wu(e,this),this._draw(),Gu(e)}}_draw(){let{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:o,labels:s}=e,a=$e.color,l=na(e.rtl,this.left,this.width),c=dt(s.font),{padding:u}=s,d=c.size,h=d/2,f;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:p,boxHeight:m,itemHeight:g}=ZR(s,d),y=function(C,E,w){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();let D=ie(w.lineWidth,1);if(r.fillStyle=ie(w.fillStyle,a),r.lineCap=ie(w.lineCap,"butt"),r.lineDashOffset=ie(w.lineDashOffset,0),r.lineJoin=ie(w.lineJoin,"miter"),r.lineWidth=D,r.strokeStyle=ie(w.strokeStyle,a),r.setLineDash(ie(w.lineDash,[])),s.usePointStyle){let A={radius:m*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:D},M=l.xPlus(C,p/2),T=E+h;ax(r,A,M,T,s.pointStyleWidth&&p)}else{let A=E+Math.max((d-m)/2,0),M=l.leftForLtr(C,p),T=Uo(w.borderRadius);r.beginPath(),Object.values(T).some(F=>F!==0)?Il(r,{x:M,y:A,w:p,h:m,radius:T}):r.rect(M,A,p,m),r.fill(),D!==0&&r.stroke()}r.restore()},_=function(C,E,w){Bo(r,w.text,C,E+g/2,c,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},x=this.isHorizontal(),b=this._computeTitleHeight();x?f={x:Pt(o,this.left+u,this.right-i[0]),y:this.top+u+b,line:0}:f={x:this.left+u,y:Pt(o,this.top+b+u,this.bottom-n[0].height),line:0},gx(this.ctx,e.textDirection);let v=g+u;this.legendItems.forEach((C,E)=>{r.strokeStyle=C.fontColor,r.fillStyle=C.fontColor;let w=r.measureText(C.text).width,D=l.textAlign(C.textAlign||(C.textAlign=s.textAlign)),A=p+h+w,M=f.x,T=f.y;l.setWidth(this.width),x?E>0&&M+A+u>this.right&&(T=f.y+=v,f.line++,M=f.x=Pt(o,this.left+u,this.right-i[f.line])):E>0&&T+v>this.bottom&&(M=f.x=M+n[f.line].width+u,f.line++,T=f.y=Pt(o,this.top+b+u,this.bottom-n[f.line].height));let F=l.x(M);if(y(F,T,C),M=XA(D,M+p+h,x?M+A:this.right,e.rtl),_(l.x(M),T,C),x)f.x+=A+u;else if(typeof C.text!="string"){let q=c.lineHeight;f.y+=R1(C,q)+u}else f.y+=v}),mx(this.ctx,e.textDirection)}drawTitle(){let e=this.options,n=e.title,i=dt(n.font),r=Nt(n.padding);if(!n.display)return;let o=na(e.rtl,this.left,this.width),s=this.ctx,a=n.position,l=i.size/2,c=r.top+l,u,d=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),u=this.top+c,d=Pt(e.align,d,this.right-h);else{let p=this.columnSizes.reduce((m,g)=>Math.max(m,g.height),0);u=c+Pt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}let f=Pt(a,d,d+h);s.textAlign=o.textAlign(Up(a)),s.textBaseline="middle",s.strokeStyle=n.color,s.fillStyle=n.color,s.font=i.string,Bo(s,n.text,f,u,i)}_computeTitleHeight(){let e=this.options.title,n=dt(e.font),i=Nt(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,o;if(ji(e,this.left,this.right)&&ji(n,this.top,this.bottom)){for(o=this.legendHitBoxes,i=0;i<o.length;++i)if(r=o[i],ji(e,r.left,r.left+r.width)&&ji(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let n=this.options;if(!c4(e.type,n))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,o=o4(r,i);r&&!o&&Fe(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!o&&Fe(n.onHover,[e,i,this],this)}else i&&Fe(n.onClick,[e,i,this],this)}};function s4(t,e,n,i,r){let o=a4(i,t,e,n),s=l4(r,i,e.lineHeight);return{itemWidth:o,itemHeight:s}}function a4(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((o,s)=>o.length>s.length?o:s)),e+n.size/2+i.measureText(r).width}function l4(t,e,n){let i=t;return typeof e.text!="string"&&(i=R1(e,n)),i}function R1(t,e){let n=t.text?t.text.length:0;return e*n}function c4(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var u4={id:"legend",_element:cg,start(t,e,n){let i=t.legend=new cg({ctx:t.ctx,options:n,chart:t});Ht.configure(t,i,n),Ht.addBox(t,i)},stop(t){Ht.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){let i=t.legend;Ht.configure(t,i,n),i.options=n},afterUpdate(t){let e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){let i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){let e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o,useBorderRadius:s,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(n?0:void 0),u=Nt(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:o,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:s&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}},td=class extends ui{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;let r=je(i.text)?i.text.length:1;this._padding=Nt(i.padding);let o=r*dt(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:n,left:i,bottom:r,right:o,options:s}=this,a=s.align,l=0,c,u,d;return this.isHorizontal()?(u=Pt(a,i,o),d=n+e,c=o-i):(s.position==="left"?(u=i+e,d=Pt(a,r,n),l=Be*-.5):(u=o-e,d=Pt(a,n,r),l=Be*.5),c=r-n),{titleX:u,titleY:d,maxWidth:c,rotation:l}}draw(){let e=this.ctx,n=this.options;if(!n.display)return;let i=dt(n.font),o=i.lineHeight/2+this._padding.top,{titleX:s,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(o);Bo(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:Up(n.align),textBaseline:"middle",translation:[s,a]})}};function d4(t,e){let n=new td({ctx:t.ctx,options:e,chart:t});Ht.configure(t,n,e),Ht.addBox(t,n),t.titleBlock=n}var h4={id:"title",_element:td,start(t,e,n){d4(t,n)},stop(t){let e=t.titleBlock;Ht.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){let i=t.titleBlock;Ht.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Jp=new WeakMap,f4={id:"subtitle",start(t,e,n){let i=new td({ctx:t.ctx,options:n,chart:t});Ht.configure(t,i,n),Ht.addBox(t,i),Jp.set(t,i)},stop(t){Ht.removeBox(t,Jp.get(t)),Jp.delete(t)},beforeUpdate(t,e,n){let i=Jp.get(t);Ht.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Ju={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,o=0;for(e=0,n=t.length;e<n;++e){let a=t[e].element;if(a&&a.hasValue()){let l=a.tooltipPosition();i.add(l.x),r+=l.y,++o}}return{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/o}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,o,s,a;for(o=0,s=t.length;o<s;++o){let l=t[o].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),u=Fp(e,c);u<r&&(r=u,a=l)}}if(a){let l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Bi(t,e){return e&&(je(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Nr(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function p4(t,e){let{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:s,value:a}=o.getLabelAndValue(r);return{chart:t,label:s,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function KR(t,e){let n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:s,boxHeight:a}=e,l=dt(e.bodyFont),c=dt(e.titleFont),u=dt(e.footerFont),d=o.length,h=r.length,f=i.length,p=Nt(e.padding),m=p.height,g=0,y=i.reduce((b,v)=>b+v.before.length+v.lines.length+v.after.length,0);if(y+=t.beforeBody.length+t.afterBody.length,d&&(m+=d*c.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),y){let b=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;m+=f*b+(y-f)*l.lineHeight+(y-1)*e.bodySpacing}h&&(m+=e.footerMarginTop+h*u.lineHeight+(h-1)*e.footerSpacing);let _=0,x=function(b){g=Math.max(g,n.measureText(b).width+_)};return n.save(),n.font=c.string,Ae(t.title,x),n.font=l.string,Ae(t.beforeBody.concat(t.afterBody),x),_=e.displayColors?s+2+e.boxPadding:0,Ae(i,b=>{Ae(b.before,x),Ae(b.lines,x),Ae(b.after,x)}),_=0,n.font=u.string,Ae(t.footer,x),n.restore(),g+=p.width,{width:g,height:m}}function g4(t,e){let{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function m4(t,e,n,i){let{x:r,width:o}=i,s=n.caretSize+n.caretPadding;if(t==="left"&&r+o+s>e.width||t==="right"&&r-o-s<0)return!0}function y4(t,e,n,i){let{x:r,width:o}=n,{width:s,chartArea:{left:a,right:l}}=t,c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=o/2?c="left":r>=s-o/2&&(c="right"),m4(c,t,e,n)&&(c="center"),c}function QR(t,e,n){let i=n.yAlign||e.yAlign||g4(t,n);return{xAlign:n.xAlign||e.xAlign||y4(t,e,n,i),yAlign:i}}function _4(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function v4(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function JR(t,e,n,i){let{caretSize:r,caretPadding:o,cornerRadius:s}=t,{xAlign:a,yAlign:l}=n,c=r+o,{topLeft:u,topRight:d,bottomLeft:h,bottomRight:f}=Uo(s),p=_4(e,a),m=v4(e,l,c);return l==="center"?a==="left"?p+=c:a==="right"&&(p-=c):a==="left"?p-=Math.max(u,h)+r:a==="right"&&(p+=Math.max(d,f)+r),{x:vt(p,0,i.width-e.width),y:vt(m,0,i.height-e.height)}}function eg(t,e,n){let i=Nt(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function e1(t){return Bi([],Nr(t))}function x4(t,e,n){return Or(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function t1(t,e){let n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}var O1={beforeTitle:Vi,title(t){if(t.length>0){let e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:Vi,beforeBody:Vi,beforeLabel:Vi,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");let n=t.formattedValue;return be(n)||(e+=n),e},labelColor(t){let n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){let n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:Vi,afterBody:Vi,beforeFooter:Vi,footer:Vi,afterFooter:Vi};function sn(t,e,n,i){let r=t[e].call(n,i);return typeof r>"u"?O1[e].call(n,i):r}var n1=(()=>{class t extends ui{static positioners=Ju;constructor(n){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=n.chart,this.options=n.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(n){this.options=n,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let n=this._cachedAnimations;if(n)return n;let i=this.chart,r=this.options.setContext(this.getContext()),o=r.enabled&&i.options.animation&&r.animations,s=new rg(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=x4(this.chart.getContext(),this,this._tooltipItems))}getTitle(n,i){let{callbacks:r}=i,o=sn(r,"beforeTitle",this,n),s=sn(r,"title",this,n),a=sn(r,"afterTitle",this,n),l=[];return l=Bi(l,Nr(o)),l=Bi(l,Nr(s)),l=Bi(l,Nr(a)),l}getBeforeBody(n,i){return e1(sn(i.callbacks,"beforeBody",this,n))}getBody(n,i){let{callbacks:r}=i,o=[];return Ae(n,s=>{let a={before:[],lines:[],after:[]},l=t1(r,s);Bi(a.before,Nr(sn(l,"beforeLabel",this,s))),Bi(a.lines,sn(l,"label",this,s)),Bi(a.after,Nr(sn(l,"afterLabel",this,s))),o.push(a)}),o}getAfterBody(n,i){return e1(sn(i.callbacks,"afterBody",this,n))}getFooter(n,i){let{callbacks:r}=i,o=sn(r,"beforeFooter",this,n),s=sn(r,"footer",this,n),a=sn(r,"afterFooter",this,n),l=[];return l=Bi(l,Nr(o)),l=Bi(l,Nr(s)),l=Bi(l,Nr(a)),l}_createItems(n){let i=this._active,r=this.chart.data,o=[],s=[],a=[],l=[],c,u;for(c=0,u=i.length;c<u;++c)l.push(p4(this.chart,i[c]));return n.filter&&(l=l.filter((d,h,f)=>n.filter(d,h,f,r))),n.itemSort&&(l=l.sort((d,h)=>n.itemSort(d,h,r))),Ae(l,d=>{let h=t1(n.callbacks,d);o.push(sn(h,"labelColor",this,d)),s.push(sn(h,"labelPointStyle",this,d)),a.push(sn(h,"labelTextColor",this,d))}),this.labelColors=o,this.labelPointStyles=s,this.labelTextColors=a,this.dataPoints=l,l}update(n,i){let r=this.options.setContext(this.getContext()),o=this._active,s,a=[];if(!o.length)this.opacity!==0&&(s={opacity:0});else{let l=Ju[r.position].call(this,o,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=KR(this,r),u=Object.assign({},l,c),d=QR(this.chart,r,u),h=JR(r,u,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,s={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,s&&this._resolveAnimations().update(this,s),n&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(n,i,r,o){let s=this.getCaretPosition(n,r,o);i.lineTo(s.x1,s.y1),i.lineTo(s.x2,s.y2),i.lineTo(s.x3,s.y3)}getCaretPosition(n,i,r){let{xAlign:o,yAlign:s}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:u,bottomLeft:d,bottomRight:h}=Uo(l),{x:f,y:p}=n,{width:m,height:g}=i,y,_,x,b,v,C;return s==="center"?(v=p+g/2,o==="left"?(y=f,_=y-a,b=v+a,C=v-a):(y=f+m,_=y+a,b=v-a,C=v+a),x=y):(o==="left"?_=f+Math.max(c,d)+a:o==="right"?_=f+m-Math.max(u,h)-a:_=this.caretX,s==="top"?(b=p,v=b-a,y=_-a,x=_+a):(b=p+g,v=b+a,y=_+a,x=_-a),C=b),{x1:y,x2:_,x3:x,y1:b,y2:v,y3:C}}drawTitle(n,i,r){let o=this.title,s=o.length,a,l,c;if(s){let u=na(r.rtl,this.x,this.width);for(n.x=eg(this,r.titleAlign,r),i.textAlign=u.textAlign(r.titleAlign),i.textBaseline="middle",a=dt(r.titleFont),l=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,c=0;c<s;++c)i.fillText(o[c],u.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+l,c+1===s&&(n.y+=r.titleMarginBottom-l)}}_drawColorBox(n,i,r,o,s){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:u}=s,d=dt(s.bodyFont),h=eg(this,"left",s),f=o.x(h),p=c<d.lineHeight?(d.lineHeight-c)/2:0,m=i.y+p;if(s.usePointStyle){let g={radius:Math.min(u,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=o.leftForLtr(f,u)+u/2,_=m+c/2;n.strokeStyle=s.multiKeyBackground,n.fillStyle=s.multiKeyBackground,Hp(n,g,y,_),n.strokeStyle=a.borderColor,n.fillStyle=a.backgroundColor,Hp(n,g,y,_)}else{n.lineWidth=_e(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,n.strokeStyle=a.borderColor,n.setLineDash(a.borderDash||[]),n.lineDashOffset=a.borderDashOffset||0;let g=o.leftForLtr(f,u),y=o.leftForLtr(o.xPlus(f,1),u-2),_=Uo(a.borderRadius);Object.values(_).some(x=>x!==0)?(n.beginPath(),n.fillStyle=s.multiKeyBackground,Il(n,{x:g,y:m,w:u,h:c,radius:_}),n.fill(),n.stroke(),n.fillStyle=a.backgroundColor,n.beginPath(),Il(n,{x:y,y:m+1,w:u-2,h:c-2,radius:_}),n.fill()):(n.fillStyle=s.multiKeyBackground,n.fillRect(g,m,u,c),n.strokeRect(g,m,u,c),n.fillStyle=a.backgroundColor,n.fillRect(y,m+1,u-2,c-2))}n.fillStyle=this.labelTextColors[r]}drawBody(n,i,r){let{body:o}=this,{bodySpacing:s,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:u,boxPadding:d}=r,h=dt(r.bodyFont),f=h.lineHeight,p=0,m=na(r.rtl,this.x,this.width),g=function(D){i.fillText(D,m.x(n.x+p),n.y+f/2),n.y+=f+s},y=m.textAlign(a),_,x,b,v,C,E,w;for(i.textAlign=a,i.textBaseline="middle",i.font=h.string,n.x=eg(this,y,r),i.fillStyle=r.bodyColor,Ae(this.beforeBody,g),p=l&&y!=="right"?a==="center"?u/2+d:u+2+d:0,v=0,E=o.length;v<E;++v){for(_=o[v],x=this.labelTextColors[v],i.fillStyle=x,Ae(_.before,g),b=_.lines,l&&b.length&&(this._drawColorBox(i,n,v,m,r),f=Math.max(h.lineHeight,c)),C=0,w=b.length;C<w;++C)g(b[C]),f=h.lineHeight;Ae(_.after,g)}p=0,f=h.lineHeight,Ae(this.afterBody,g),n.y-=s}drawFooter(n,i,r){let o=this.footer,s=o.length,a,l;if(s){let c=na(r.rtl,this.x,this.width);for(n.x=eg(this,r.footerAlign,r),n.y+=r.footerMarginTop,i.textAlign=c.textAlign(r.footerAlign),i.textBaseline="middle",a=dt(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,l=0;l<s;++l)i.fillText(o[l],c.x(n.x),n.y+a.lineHeight/2),n.y+=a.lineHeight+r.footerSpacing}}drawBackground(n,i,r,o){let{xAlign:s,yAlign:a}=this,{x:l,y:c}=n,{width:u,height:d}=r,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:m}=Uo(o.cornerRadius);i.fillStyle=o.backgroundColor,i.strokeStyle=o.borderColor,i.lineWidth=o.borderWidth,i.beginPath(),i.moveTo(l+h,c),a==="top"&&this.drawCaret(n,i,r,o),i.lineTo(l+u-f,c),i.quadraticCurveTo(l+u,c,l+u,c+f),a==="center"&&s==="right"&&this.drawCaret(n,i,r,o),i.lineTo(l+u,c+d-m),i.quadraticCurveTo(l+u,c+d,l+u-m,c+d),a==="bottom"&&this.drawCaret(n,i,r,o),i.lineTo(l+p,c+d),i.quadraticCurveTo(l,c+d,l,c+d-p),a==="center"&&s==="left"&&this.drawCaret(n,i,r,o),i.lineTo(l,c+h),i.quadraticCurveTo(l,c,l+h,c),i.closePath(),i.fill(),o.borderWidth>0&&i.stroke()}_updateAnimationTarget(n){let i=this.chart,r=this.$animations,o=r&&r.x,s=r&&r.y;if(o||s){let a=Ju[n.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=KR(this,n),c=Object.assign({},a,this._size),u=QR(i,n,c),d=JR(n,c,u,i);(o._to!==d.x||s._to!==d.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(n){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let o={width:this.width,height:this.height},s={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Nt(i.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&l&&(n.save(),n.globalAlpha=r,this.drawBackground(s,n,o,i),gx(n,i.textDirection),s.y+=a.top,this.drawTitle(s,n,i),this.drawBody(s,n,i),this.drawFooter(s,n,i),mx(n,i.textDirection),n.restore())}getActiveElements(){return this._active||[]}setActiveElements(n,i){let r=this._active,o=n.map(({datasetIndex:l,index:c})=>{let u=this.chart.getDatasetMeta(l);if(!u)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:u.data[c],index:c}}),s=!Hu(r,o),a=this._positionChanged(o,i);(s||a)&&(this._active=o,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(n,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let o=this.options,s=this._active||[],a=this._getActiveElements(n,s,i,r),l=this._positionChanged(a,n),c=i||!Hu(a,s)||l;return c&&(this._active=a,(o.enabled||o.external)&&(this._eventPosition={x:n.x,y:n.y},this.update(!0,i))),c}_getActiveElements(n,i,r,o){let s=this.options;if(n.type==="mouseout")return[];if(!o)return i.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(n,s.mode,s,r);return s.reverse&&a.reverse(),a}_positionChanged(n,i){let{caretX:r,caretY:o,options:s}=this,a=Ju[s.position].call(this,n,i);return a!==!1&&(r!==a.x||o!==a.y)}}return t})(),b4={id:"tooltip",_element:n1,positioners:Ju,afterInit(t,e,n){n&&(t.tooltip=new n1({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){let e=t.tooltip;if(e&&e._willRender()){let n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",ge(N({},n),{cancelable:!0}))===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){let n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:O1},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},C4=Object.freeze({__proto__:null,Colors:N8,Decimation:V8,Filler:r4,Legend:u4,SubTitle:f4,Title:h4,Tooltip:b4}),w4=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function E4(t,e,n,i){let r=t.indexOf(e);if(r===-1)return w4(t,e,n,i);let o=t.lastIndexOf(e);return r!==o?n:r}var D4=(t,e)=>t===null?null:vt(Math.round(t),0,e);function i1(t){let e=this.getLabels();return t>=0&&t<e.length?e[t]:t}var I4=(()=>{class t extends oa{static id="category";static defaults={ticks:{callback:i1}};constructor(n){super(n),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(n){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:o,label:s}of i)r[o]===s&&r.splice(o,1);this._addedLabels=[]}super.init(n)}parse(n,i){if(be(n))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===n?i:E4(r,n,ie(i,n),this._addedLabels),D4(i,r.length-1)}determineDataLimits(){let{minDefined:n,maxDefined:i}=this.getUserBounds(),{min:r,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(n||(r=0),i||(o=this.getLabels().length-1)),this.min=r,this.max=o}buildTicks(){let n=this.min,i=this.max,r=this.options.offset,o=[],s=this.getLabels();s=n===0&&i===s.length-1?s:s.slice(n,i+1),this._valueRange=Math.max(s.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=n;a<=i;a++)o.push({value:a});return o}getLabelForValue(n){return i1.call(this,n)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(n){return typeof n!="number"&&(n=this.parse(n)),n===null?NaN:this.getPixelForDecimal((n-this._startValue)/this._valueRange)}getPixelForTick(n){let i=this.ticks;return n<0||n>i.length-1?null:this.getPixelForValue(i[n].value)}getValueForPixel(n){return Math.round(this._startValue+this.getDecimalForPixel(n)*this._valueRange)}getBasePixel(){return this.bottom}}return t})();function S4(t,e){let n=[],{bounds:r,step:o,min:s,max:a,precision:l,count:c,maxTicks:u,maxDigits:d,includeBounds:h}=t,f=o||1,p=u-1,{min:m,max:g}=e,y=!be(s),_=!be(a),x=!be(c),b=(g-m)/(d+1),v=Y0((g-m)/p/f)*f,C,E,w,D;if(v<1e-14&&!y&&!_)return[{value:m},{value:g}];D=Math.ceil(g/v)-Math.floor(m/v),D>p&&(v=Y0(D*v/p/f)*f),be(l)||(C=Math.pow(10,l),v=Math.ceil(v*C)/C),r==="ticks"?(E=Math.floor(m/v)*v,w=Math.ceil(g/v)*v):(E=m,w=g),y&&_&&o&&zA((a-s)/o,v/1e3)?(D=Math.round(Math.min((a-s)/v,u)),v=(a-s)/D,E=s,w=a):x?(E=y?s:E,w=_?a:w,D=c-1,v=(w-E)/D):(D=(w-E)/v,wl(D,Math.round(D),v/1e3)?D=Math.round(D):D=Math.ceil(D));let A=Math.max(Z0(v),Z0(E));C=Math.pow(10,be(l)?A:l),E=Math.round(E*C)/C,w=Math.round(w*C)/C;let M=0;for(y&&(h&&E!==s?(n.push({value:s}),E<s&&M++,wl(Math.round((E+M*v)*C)/C,s,r1(s,b,t))&&M++):E<s&&M++);M<D;++M){let T=Math.round((E+M*v)*C)/C;if(_&&T>a)break;n.push({value:T})}return _&&h&&w!==a?n.length&&wl(n[n.length-1].value,a,r1(a,b,t))?n[n.length-1].value=a:n.push({value:a}):(!_||w===a)&&n.push({value:w}),n}function r1(t,e,{horizontal:n,minRotation:i}){let r=Wn(i),o=(n?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+t).length;return Math.min(e/o,s)}var Al=class extends oa{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return be(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds(),{min:r,max:o}=this,s=l=>r=n?r:l,a=l=>o=i?o:l;if(e){let l=ci(r),c=ci(o);l<0&&c<0?a(0):l>0&&c>0&&s(0)}if(r===o){let l=o===0?1:Math.abs(o*.05);a(o+l),e||s(r-l)}this.min=r,this.max=o}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,n=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},o=this._range||this,s=S4(r,o);return e.bounds==="ticks"&&X0(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){let e=this.ticks,n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return Dl(e,this.chart.options.locale,this.options.ticks.format)}},Hx=class extends Al{static id="linear";static defaults={ticks:{callback:$u.formatters.numeric}};determineDataLimits(){let{min:e,max:n}=this.getMinMax(!0);this.min=Ze(e)?e:0,this.max=Ze(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),n=e?this.width:this.height,i=Wn(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,o=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,o.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},nd=t=>Math.floor(Ar(t)),ra=(t,e)=>Math.pow(10,nd(t)+e);function o1(t){return t/Math.pow(10,nd(t))===1}function s1(t,e,n){let i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}function M4(t,e){let n=e-t,i=nd(n);for(;s1(t,e,i)>10;)i++;for(;s1(t,e,i)<10;)i--;return Math.min(i,nd(t))}function T4(t,{min:e,max:n}){e=on(t.min,e);let i=[],r=nd(e),o=M4(e,n),s=o<0?Math.pow(10,Math.abs(o)):1,a=Math.pow(10,o),l=r>o?Math.pow(10,r):0,c=Math.round((e-l)*s)/s,u=Math.floor((e-l)/a/10)*a*10,d=Math.floor((c-u)/Math.pow(10,o)),h=on(t.min,Math.round((l+u+d*Math.pow(10,o))*s)/s);for(;h<n;)i.push({value:h,major:o1(h),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,s=o>=0?1:s),h=Math.round((l+u+d*Math.pow(10,o))*s)/s;let f=on(t.max,h);return i.push({value:f,major:o1(f),significand:d}),i}var $x=class extends oa{static id="logarithmic";static defaults={ticks:{callback:$u.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,n){let i=Al.prototype.parse.apply(this,[e,n]);if(i===0){this._zero=!0;return}return Ze(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:n}=this.getMinMax(!0);this.min=Ze(e)?Math.max(0,e):null,this.max=Ze(n)?Math.max(0,n):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ze(this._userMin)&&(this.min=e===ra(this.min,0)?ra(this.min,-1):ra(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:n}=this.getUserBounds(),i=this.min,r=this.max,o=a=>i=e?i:a,s=a=>r=n?r:a;i===r&&(i<=0?(o(1),s(10)):(o(ra(i,-1)),s(ra(r,1)))),i<=0&&o(ra(r,-1)),r<=0&&s(ra(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,n={min:this._userMin,max:this._userMax},i=T4(n,this);return e.bounds==="ticks"&&X0(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Dl(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Ar(e),this._valueRange=Ar(this.max)-Ar(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Ar(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let n=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+n*this._valueRange)}};function Wx(t){let e=t.ticks;if(e.display&&t.display){let n=Nt(e.backdropPadding);return ie(e.font&&e.font.size,$e.font.size)+n.height}return 0}function A4(t,e,n){return n=je(n)?n:[n],{w:KA(t,e.string,n),h:n.length*e.lineHeight}}function a1(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function R4(t){let e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],r=[],o=t._pointLabels.length,s=t.options.pointLabels,a=s.centerPointLabels?Be/o:0;for(let l=0;l<o;l++){let c=s.setContext(t.getPointLabelContext(l));r[l]=c.padding;let u=t.getPointPosition(l,t.drawingArea+r[l],a),d=dt(c.font),h=A4(t.ctx,d,t._pointLabels[l]);i[l]=h;let f=rn(t.getIndexAngle(l)+a),p=Math.round(jp(f)),m=a1(p,u.x,h.w,0,180),g=a1(p,u.y,h.h,90,270);O4(n,e,f,m,g)}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=k4(t,i,r)}function O4(t,e,n,i,r){let o=Math.abs(Math.sin(n)),s=Math.abs(Math.cos(n)),a=0,l=0;i.start<e.l?(a=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+a)),r.start<e.t?(l=(e.t-r.start)/s,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/s,t.b=Math.max(t.b,e.b+l))}function P4(t,e,n){let i=t.drawingArea,{extra:r,additionalAngle:o,padding:s,size:a}=n,l=t.getPointPosition(e,i+r+s,o),c=Math.round(jp(rn(l.angle+nt))),u=V4(l.y,a.h,c),d=F4(c),h=L4(l.x,a.w,d);return{visible:!0,x:l.x,y:u,textAlign:d,left:h,top:u,right:h+a.w,bottom:u+a.h}}function N4(t,e){if(!e)return!0;let{left:n,top:i,right:r,bottom:o}=t;return!(Li({x:n,y:i},e)||Li({x:n,y:o},e)||Li({x:r,y:i},e)||Li({x:r,y:o},e))}function k4(t,e,n){let i=[],r=t._pointLabels.length,o=t.options,{centerPointLabels:s,display:a}=o.pointLabels,l={extra:Wx(o)/2,additionalAngle:s?Be/r:0},c;for(let u=0;u<r;u++){l.padding=n[u],l.size=e[u];let d=P4(t,u,l);i.push(d),a==="auto"&&(d.visible=N4(d,c),d.visible&&(c=d))}return i}function F4(t){return t===0||t===180?"center":t<180?"left":"right"}function L4(t,e,n){return n==="right"?t-=e:n==="center"&&(t-=e/2),t}function V4(t,e,n){return n===90||n===270?t-=e/2:(n>270||n<90)&&(t-=e),t}function j4(t,e,n){let{left:i,top:r,right:o,bottom:s}=n,{backdropColor:a}=e;if(!be(a)){let l=Uo(e.borderRadius),c=Nt(e.backdropPadding);t.fillStyle=a;let u=i-c.left,d=r-c.top,h=o-i+c.width,f=s-r+c.height;Object.values(l).some(p=>p!==0)?(t.beginPath(),Il(t,{x:u,y:d,w:h,h:f,radius:l}),t.fill()):t.fillRect(u,d,h,f)}}function B4(t,e){let{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){let o=t._pointLabelItems[r];if(!o.visible)continue;let s=i.setContext(t.getPointLabelContext(r));j4(n,s,o);let a=dt(s.font),{x:l,y:c,textAlign:u}=o;Bo(n,t._pointLabels[r],l,c+a.lineHeight/2,a,{color:s.color,textAlign:u,textBaseline:"middle"})}}function P1(t,e,n,i){let{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,Ue);else{let o=t.getPointPosition(0,e);r.moveTo(o.x,o.y);for(let s=1;s<i;s++)o=t.getPointPosition(s,e),r.lineTo(o.x,o.y)}}function U4(t,e,n,i,r){let o=t.ctx,s=e.circular,{color:a,lineWidth:l}=e;!s&&!i||!a||!l||n<0||(o.save(),o.strokeStyle=a,o.lineWidth=l,o.setLineDash(r.dash),o.lineDashOffset=r.dashOffset,o.beginPath(),P1(t,n,s,i),o.closePath(),o.stroke(),o.restore())}function z4(t,e,n){return Or(t,{label:n,index:e,type:"pointLabel"})}var Gx=class extends Al{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$u.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=Nt(Wx(this.options)/2),n=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+n/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(n,i)/2)}determineDataLimits(){let{min:e,max:n}=this.getMinMax(!1);this.min=Ze(e)&&!isNaN(e)?e:0,this.max=Ze(n)&&!isNaN(n)?n:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wx(this.options))}generateTickLabels(e){Al.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((n,i)=>{let r=Fe(this.options.pointLabels.callback,[n,i],this);return r||r===0?r:""}).filter((n,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?R4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,n,i,r){this.xCenter+=Math.floor((e-n)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,n,i,r))}getIndexAngle(e){let n=Ue/(this._pointLabels.length||1),i=this.options.startAngle||0;return rn(e*n+Wn(i))}getDistanceFromCenterForValue(e){if(be(e))return NaN;let n=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*n:(e-this.min)*n}getValueForDistanceFromCenter(e){if(be(e))return NaN;let n=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-n:this.min+n}getPointLabelContext(e){let n=this._pointLabels||[];if(e>=0&&e<n.length){let i=n[e];return z4(this.getContext(),e,i)}}getPointPosition(e,n,i=0){let r=this.getIndexAngle(e)-nt+i;return{x:Math.cos(r)*n+this.xCenter,y:Math.sin(r)*n+this.yCenter,angle:r}}getPointPositionForValue(e,n){return this.getPointPosition(e,this.getDistanceFromCenterForValue(n))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:n,top:i,right:r,bottom:o}=this._pointLabelItems[e];return{left:n,top:i,right:r,bottom:o}}drawBackground(){let{backgroundColor:e,grid:{circular:n}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),P1(this,this.getDistanceFromCenterForValue(this._endValue),n,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,n=this.options,{angleLines:i,grid:r,border:o}=n,s=this._pointLabels.length,a,l,c;if(n.pointLabels.display&&B4(this,s),r.display&&this.ticks.forEach((u,d)=>{if(d!==0||d===0&&this.min<0){l=this.getDistanceFromCenterForValue(u.value);let h=this.getContext(d),f=r.setContext(h),p=o.setContext(h);U4(this,f,l,s,p)}}),i.display){for(e.save(),a=s-1;a>=0;a--){let u=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:h}=u;!h||!d||(e.lineWidth=h,e.strokeStyle=d,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,l=this.getDistanceFromCenterForValue(n.ticks.reverse?this.min:this.max),c=this.getPointPosition(a,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(c.x,c.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,n=this.options,i=n.ticks;if(!i.display)return;let r=this.getIndexAngle(0),o,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!n.reverse)return;let c=i.setContext(this.getContext(l)),u=dt(c.font);if(o=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){e.font=u.string,s=e.measureText(a.label).width,e.fillStyle=c.backdropColor;let d=Nt(c.backdropPadding);e.fillRect(-s/2-d.left,-o-u.size/2-d.top,s+d.width,u.size+d.height)}Bo(e,a.label,0,-o,u,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),e.restore()}drawTitle(){}},hg={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},an=Object.keys(hg);function l1(t,e){return t-e}function c1(t,e){if(be(e))return null;let n=t._adapter,{parser:i,round:r,isoWeekday:o}=t._parseOpts,s=e;return typeof i=="function"&&(s=i(s)),Ze(s)||(s=typeof i=="string"?n.parse(s,i):n.parse(s)),s===null?null:(r&&(s=r==="week"&&(ta(o)||o===!0)?n.startOf(s,"isoWeek",o):n.startOf(s,r)),+s)}function u1(t,e,n,i){let r=an.length;for(let o=an.indexOf(t);o<r-1;++o){let s=hg[an[o]],a=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((n-e)/(a*s.size))<=i)return an[o]}return an[r-1]}function H4(t,e,n,i,r){for(let o=an.length-1;o>=an.indexOf(n);o--){let s=an[o];if(hg[s].common&&t._adapter.diff(r,i,s)>=e-1)return s}return an[n?an.indexOf(n):0]}function $4(t){for(let e=an.indexOf(t)+1,n=an.length;e<n;++e)if(hg[an[e]].common)return an[e]}function d1(t,e,n){if(!n)t[e]=!0;else if(n.length){let{lo:i,hi:r}=Bp(n,e),o=n[i]>=e?n[i]:n[r];t[o]=!0}}function W4(t,e,n,i){let r=t._adapter,o=+r.startOf(e[0].value,i),s=e[e.length-1].value,a,l;for(a=o;a<=s;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function h1(t,e,n){let i=[],r={},o=e.length,s,a;for(s=0;s<o;++s)a=e[s],r[a]=s,i.push({value:a,major:!1});return o===0||!n?i:W4(t,i,r,n)}var qx=(()=>{class t extends oa{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(n){super(n),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(n,i={}){let r=n.time||(n.time={}),o=this._adapter=new iG._date(n.adapters.date);o.init(i),bl(r.displayFormats,o.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(n),this._normalized=i.normalized}parse(n,i){return n===void 0?null:c1(this,n)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let n=this.options,i=this._adapter,r=n.time.unit||"day",{min:o,max:s,minDefined:a,maxDefined:l}=this.getUserBounds();function c(u){!a&&!isNaN(u.min)&&(o=Math.min(o,u.min)),!l&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!a||!l)&&(c(this._getLabelBounds()),(n.bounds!=="ticks"||n.ticks.source!=="labels")&&c(this.getMinMax(!1))),o=Ze(o)&&!isNaN(o)?o:+i.startOf(Date.now(),r),s=Ze(s)&&!isNaN(s)?s:+i.endOf(Date.now(),r)+1,this.min=Math.min(o,s-1),this.max=Math.max(o+1,s)}_getLabelBounds(){let n=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return n.length&&(i=n[0],r=n[n.length-1]),{min:i,max:r}}buildTicks(){let n=this.options,i=n.time,r=n.ticks,o=r.source==="labels"?this.getLabelTimestamps():this._generate();n.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);let s=this.min,a=this.max,l=WA(o,s,a);return this._unit=i.unit||(r.autoSkip?u1(i.minUnit,this.min,this.max,this._getLabelCapacity(s)):H4(this,l.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:$4(this._unit),this.initOffsets(o),n.reverse&&l.reverse(),h1(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(n=>+n.value))}initOffsets(n=[]){let i=0,r=0,o,s;this.options.offset&&n.length&&(o=this.getDecimalForValue(n[0]),n.length===1?i=1-o:i=(this.getDecimalForValue(n[1])-o)/2,s=this.getDecimalForValue(n[n.length-1]),n.length===1?r=s:r=(s-this.getDecimalForValue(n[n.length-2]))/2);let a=n.length<3?.5:.25;i=vt(i,0,a),r=vt(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let n=this._adapter,i=this.min,r=this.max,o=this.options,s=o.time,a=s.unit||u1(s.minUnit,i,r,this._getLabelCapacity(i)),l=ie(o.ticks.stepSize,1),c=a==="week"?s.isoWeekday:!1,u=ta(c)||c===!0,d={},h=i,f,p;if(u&&(h=+n.startOf(h,"isoWeek",c)),h=+n.startOf(h,u?"day":a),n.diff(r,i,a)>1e5*l)throw new Error(i+" and "+r+" are too far apart with stepSize of "+l+" "+a);let m=o.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<r;f=+n.add(f,l,a),p++)d1(d,f,m);return(f===r||o.bounds==="ticks"||p===1)&&d1(d,f,m),Object.keys(d).sort(l1).map(g=>+g)}getLabelForValue(n){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(n,r.tooltipFormat):i.format(n,r.displayFormats.datetime)}format(n,i){let o=this.options.time.displayFormats,s=this._unit,a=i||o[s];return this._adapter.format(n,a)}_tickFormatFunction(n,i,r,o){let s=this.options,a=s.ticks.callback;if(a)return Fe(a,[n,i,r],this);let l=s.time.displayFormats,c=this._unit,u=this._majorUnit,d=c&&l[c],h=u&&l[u],f=r[i],p=u&&h&&f&&f.major;return this._adapter.format(n,o||(p?h:d))}generateTickLabels(n){let i,r,o;for(i=0,r=n.length;i<r;++i)o=n[i],o.label=this._tickFormatFunction(o.value,i,n)}getDecimalForValue(n){return n===null?NaN:(n-this.min)/(this.max-this.min)}getPixelForValue(n){let i=this._offsets,r=this.getDecimalForValue(n);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(n){let i=this._offsets,r=this.getDecimalForPixel(n)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(n){let i=this.options.ticks,r=this.ctx.measureText(n).width,o=Wn(this.isHorizontal()?i.maxRotation:i.minRotation),s=Math.cos(o),a=Math.sin(o),l=this._resolveTickFontOptions(0).size;return{w:r*s+l*a,h:r*a+l*s}}_getLabelCapacity(n){let i=this.options.time,r=i.displayFormats,o=r[i.unit]||r.millisecond,s=this._tickFormatFunction(n,0,h1(this,[n],this._majorUnit),o),a=this._getLabelSize(s),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let n=this._cache.data||[],i,r;if(n.length)return n;let o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(i=0,r=o.length;i<r;++i)n=n.concat(o[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){let n=this._cache.labels||[],i,r;if(n.length)return n;let o=this.getLabels();for(i=0,r=o.length;i<r;++i)n.push(c1(this,o[i]));return this._cache.labels=this._normalized?n:this.normalize(n)}normalize(n){return J0(n.sort(l1))}}return t})();function tg(t,e,n){let i=0,r=t.length-1,o,s,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Fi(t,"pos",e)),{pos:o,time:a}=t[i],{pos:s,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Fi(t,"time",e)),{time:o,pos:a}=t[i],{time:s,pos:l}=t[r]);let c=s-o;return c?a+(l-a)*(e-o)/c:a}var Yx=class extends qx{static id="timeseries";static defaults=qx.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=tg(n,this.min),this._tableRange=tg(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:n,max:i}=this,r=[],o=[],s,a,l,c,u;for(s=0,a=e.length;s<a;++s)c=e[s],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(s=0,a=r.length;s<a;++s)u=r[s+1],l=r[s-1],c=r[s],Math.round((u+l)/2)!==c&&o.push({time:c,pos:s/(a-1)});return o}_generate(){let e=this.min,n=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,o)=>r-o)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(tg(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return tg(this._table,i*this._tableRange+this._minPos,!0)}},G4=Object.freeze({__proto__:null,CategoryScale:I4,LinearScale:Hx,LogarithmicScale:$x,RadialLinearScale:Gx,TimeScale:qx,TimeSeriesScale:Yx}),N1=[nG,M8,C4,G4];var q4=typeof global=="object"&&global&&global.Object===Object&&global,fg=q4;var Y4=typeof self=="object"&&self&&self.Object===Object&&self,X4=fg||Y4||Function("return this")(),Gn=X4;var Z4=Gn.Symbol,Rl=Z4;var k1=Object.prototype,K4=k1.hasOwnProperty,Q4=k1.toString,rd=Rl?Rl.toStringTag:void 0;function J4(t){var e=K4.call(t,rd),n=t[rd];try{t[rd]=void 0;var i=!0}catch{}var r=Q4.call(t);return i&&(e?t[rd]=n:delete t[rd]),r}var F1=J4;var eq=Object.prototype,tq=eq.toString;function nq(t){return tq.call(t)}var L1=nq;var iq="[object Null]",rq="[object Undefined]",V1=Rl?Rl.toStringTag:void 0;function oq(t){return t==null?t===void 0?rq:iq:V1&&V1 in Object(t)?F1(t):L1(t)}var Wo=oq;function sq(t){return t!=null&&typeof t=="object"}var zi=sq;var aq=Array.isArray,od=aq;function lq(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var ln=lq;function cq(t){return t}var pg=cq;var uq="[object AsyncFunction]",dq="[object Function]",hq="[object GeneratorFunction]",fq="[object Proxy]";function pq(t){if(!ln(t))return!1;var e=Wo(t);return e==dq||e==hq||e==uq||e==fq}var Ol=pq;var gq=Gn["__core-js_shared__"],gg=gq;var j1=function(){var t=/[^.]+$/.exec(gg&&gg.keys&&gg.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function mq(t){return!!j1&&j1 in t}var B1=mq;var yq=Function.prototype,_q=yq.toString;function vq(t){if(t!=null){try{return _q.call(t)}catch{}try{return t+""}catch{}}return""}var U1=vq;var xq=/[\\^$.*+?()[\]{}|]/g,bq=/^\[object .+?Constructor\]$/,Cq=Function.prototype,wq=Object.prototype,Eq=Cq.toString,Dq=wq.hasOwnProperty,Iq=RegExp("^"+Eq.call(Dq).replace(xq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Sq(t){if(!ln(t)||B1(t))return!1;var e=Ol(t)?Iq:bq;return e.test(U1(t))}var z1=Sq;function Mq(t,e){return t?.[e]}var H1=Mq;function Tq(t,e){var n=H1(t,e);return z1(n)?n:void 0}var Pl=Tq;var $1=Object.create,Aq=function(){function t(){}return function(e){if(!ln(e))return{};if($1)return $1(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),W1=Aq;function Rq(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var G1=Rq;function Oq(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var q1=Oq;var Pq=800,Nq=16,kq=Date.now;function Fq(t){var e=0,n=0;return function(){var i=kq(),r=Nq-(i-n);if(n=i,r>0){if(++e>=Pq)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var Y1=Fq;function Lq(t){return function(){return t}}var X1=Lq;var Vq=function(){try{var t=Pl(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Nl=Vq;var jq=Nl?function(t,e){return Nl(t,"toString",{configurable:!0,enumerable:!1,value:X1(e),writable:!0})}:pg,Z1=jq;var Bq=Y1(Z1),K1=Bq;var Uq=9007199254740991,zq=/^(?:0|[1-9]\d*)$/;function Hq(t,e){var n=typeof t;return e=e??Uq,!!e&&(n=="number"||n!="symbol"&&zq.test(t))&&t>-1&&t%1==0&&t<e}var mg=Hq;function $q(t,e,n){e=="__proto__"&&Nl?Nl(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}var kl=$q;function Wq(t,e){return t===e||t!==t&&e!==e}var Go=Wq;var Gq=Object.prototype,qq=Gq.hasOwnProperty;function Yq(t,e,n){var i=t[e];(!(qq.call(t,e)&&Go(i,n))||n===void 0&&!(e in t))&&kl(t,e,n)}var Q1=Yq;function Xq(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?kl(n,a,l):Q1(n,a,l)}return n}var J1=Xq;var eO=Math.max;function Zq(t,e,n){return e=eO(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=eO(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(s),G1(t,this,a)}}var tO=Zq;function Kq(t,e){return K1(tO(t,e,pg),t+"")}var nO=Kq;var Qq=9007199254740991;function Jq(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Qq}var yg=Jq;function eY(t){return t!=null&&yg(t.length)&&!Ol(t)}var Fl=eY;function tY(t,e,n){if(!ln(n))return!1;var i=typeof e;return(i=="number"?Fl(n)&&mg(e,n.length):i=="string"&&e in n)?Go(n[e],t):!1}var iO=tY;function nY(t){return nO(function(e,n){var i=-1,r=n.length,o=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(o=t.length>3&&typeof o=="function"?(r--,o):void 0,s&&iO(n[0],n[1],s)&&(o=r<3?void 0:o,r=1),e=Object(e);++i<r;){var a=n[i];a&&t(e,a,i,o)}return e})}var rO=nY;var iY=Object.prototype;function rY(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||iY;return t===n}var _g=rY;function oY(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var oO=oY;var sY="[object Arguments]";function aY(t){return zi(t)&&Wo(t)==sY}var Kx=aY;var sO=Object.prototype,lY=sO.hasOwnProperty,cY=sO.propertyIsEnumerable,uY=Kx(function(){return arguments}())?Kx:function(t){return zi(t)&&lY.call(t,"callee")&&!cY.call(t,"callee")},sd=uY;function dY(){return!1}var aO=dY;var uO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,lO=uO&&typeof module=="object"&&module&&!module.nodeType&&module,hY=lO&&lO.exports===uO,cO=hY?Gn.Buffer:void 0,fY=cO?cO.isBuffer:void 0,pY=fY||aO,vg=pY;var gY="[object Arguments]",mY="[object Array]",yY="[object Boolean]",_Y="[object Date]",vY="[object Error]",xY="[object Function]",bY="[object Map]",CY="[object Number]",wY="[object Object]",EY="[object RegExp]",DY="[object Set]",IY="[object String]",SY="[object WeakMap]",MY="[object ArrayBuffer]",TY="[object DataView]",AY="[object Float32Array]",RY="[object Float64Array]",OY="[object Int8Array]",PY="[object Int16Array]",NY="[object Int32Array]",kY="[object Uint8Array]",FY="[object Uint8ClampedArray]",LY="[object Uint16Array]",VY="[object Uint32Array]",We={};We[AY]=We[RY]=We[OY]=We[PY]=We[NY]=We[kY]=We[FY]=We[LY]=We[VY]=!0;We[gY]=We[mY]=We[MY]=We[yY]=We[TY]=We[_Y]=We[vY]=We[xY]=We[bY]=We[CY]=We[wY]=We[EY]=We[DY]=We[IY]=We[SY]=!1;function jY(t){return zi(t)&&yg(t.length)&&!!We[Wo(t)]}var dO=jY;function BY(t){return function(e){return t(e)}}var hO=BY;var fO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ad=fO&&typeof module=="object"&&module&&!module.nodeType&&module,UY=ad&&ad.exports===fO,Qx=UY&&fg.process,zY=function(){try{var t=ad&&ad.require&&ad.require("util").types;return t||Qx&&Qx.binding&&Qx.binding("util")}catch{}}(),Jx=zY;var pO=Jx&&Jx.isTypedArray,HY=pO?hO(pO):dO,xg=HY;var $Y=Object.prototype,WY=$Y.hasOwnProperty;function GY(t,e){var n=od(t),i=!n&&sd(t),r=!n&&!i&&vg(t),o=!n&&!i&&!r&&xg(t),s=n||i||r||o,a=s?oO(t.length,String):[],l=a.length;for(var c in t)(e||WY.call(t,c))&&!(s&&(c=="length"||r&&(c=="offset"||c=="parent")||o&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||mg(c,l)))&&a.push(c);return a}var gO=GY;function qY(t,e){return function(n){return t(e(n))}}var mO=qY;function YY(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var yO=YY;var XY=Object.prototype,ZY=XY.hasOwnProperty;function KY(t){if(!ln(t))return yO(t);var e=_g(t),n=[];for(var i in t)i=="constructor"&&(e||!ZY.call(t,i))||n.push(i);return n}var _O=KY;function QY(t){return Fl(t)?gO(t,!0):_O(t)}var bg=QY;var JY=Pl(Object,"create"),kr=JY;function e6(){this.__data__=kr?kr(null):{},this.size=0}var vO=e6;function t6(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var xO=t6;var n6="__lodash_hash_undefined__",i6=Object.prototype,r6=i6.hasOwnProperty;function o6(t){var e=this.__data__;if(kr){var n=e[t];return n===n6?void 0:n}return r6.call(e,t)?e[t]:void 0}var bO=o6;var s6=Object.prototype,a6=s6.hasOwnProperty;function l6(t){var e=this.__data__;return kr?e[t]!==void 0:a6.call(e,t)}var CO=l6;var c6="__lodash_hash_undefined__";function u6(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=kr&&e===void 0?c6:e,this}var wO=u6;function Ll(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Ll.prototype.clear=vO;Ll.prototype.delete=xO;Ll.prototype.get=bO;Ll.prototype.has=CO;Ll.prototype.set=wO;var eb=Ll;function d6(){this.__data__=[],this.size=0}var EO=d6;function h6(t,e){for(var n=t.length;n--;)if(Go(t[n][0],e))return n;return-1}var qo=h6;var f6=Array.prototype,p6=f6.splice;function g6(t){var e=this.__data__,n=qo(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():p6.call(e,n,1),--this.size,!0}var DO=g6;function m6(t){var e=this.__data__,n=qo(e,t);return n<0?void 0:e[n][1]}var IO=m6;function y6(t){return qo(this.__data__,t)>-1}var SO=y6;function _6(t,e){var n=this.__data__,i=qo(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}var MO=_6;function Vl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Vl.prototype.clear=EO;Vl.prototype.delete=DO;Vl.prototype.get=IO;Vl.prototype.has=SO;Vl.prototype.set=MO;var Yo=Vl;var v6=Pl(Gn,"Map"),Cg=v6;function x6(){this.size=0,this.__data__={hash:new eb,map:new(Cg||Yo),string:new eb}}var TO=x6;function b6(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}var AO=b6;function C6(t,e){var n=t.__data__;return AO(e)?n[typeof e=="string"?"string":"hash"]:n.map}var Xo=C6;function w6(t){var e=Xo(this,t).delete(t);return this.size-=e?1:0,e}var RO=w6;function E6(t){return Xo(this,t).get(t)}var OO=E6;function D6(t){return Xo(this,t).has(t)}var PO=D6;function I6(t,e){var n=Xo(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}var NO=I6;function jl(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}jl.prototype.clear=TO;jl.prototype.delete=RO;jl.prototype.get=OO;jl.prototype.has=PO;jl.prototype.set=NO;var kO=jl;var S6=mO(Object.getPrototypeOf,Object),wg=S6;var M6="[object Object]",T6=Function.prototype,A6=Object.prototype,FO=T6.toString,R6=A6.hasOwnProperty,O6=FO.call(Object);function P6(t){if(!zi(t)||Wo(t)!=M6)return!1;var e=wg(t);if(e===null)return!0;var n=R6.call(e,"constructor")&&e.constructor;return typeof n=="function"&&n instanceof n&&FO.call(n)==O6}var LO=P6;function N6(){this.__data__=new Yo,this.size=0}var VO=N6;function k6(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}var jO=k6;function F6(t){return this.__data__.get(t)}var BO=F6;function L6(t){return this.__data__.has(t)}var UO=L6;var V6=200;function j6(t,e){var n=this.__data__;if(n instanceof Yo){var i=n.__data__;if(!Cg||i.length<V6-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new kO(i)}return n.set(t,e),this.size=n.size,this}var zO=j6;function Bl(t){var e=this.__data__=new Yo(t);this.size=e.size}Bl.prototype.clear=VO;Bl.prototype.delete=jO;Bl.prototype.get=BO;Bl.prototype.has=UO;Bl.prototype.set=zO;var HO=Bl;var qO=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$O=qO&&typeof module=="object"&&module&&!module.nodeType&&module,B6=$O&&$O.exports===qO,WO=B6?Gn.Buffer:void 0,GO=WO?WO.allocUnsafe:void 0;function U6(t,e){if(e)return t.slice();var n=t.length,i=GO?GO(n):new t.constructor(n);return t.copy(i),i}var YO=U6;var z6=Gn.Uint8Array,tb=z6;function H6(t){var e=new t.constructor(t.byteLength);return new tb(e).set(new tb(t)),e}var XO=H6;function $6(t,e){var n=e?XO(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var ZO=$6;function W6(t){return typeof t.constructor=="function"&&!_g(t)?W1(wg(t)):{}}var KO=W6;function G6(t){return function(e,n,i){for(var r=-1,o=Object(e),s=i(e),a=s.length;a--;){var l=s[t?a:++r];if(n(o[l],l,o)===!1)break}return e}}var QO=G6;var q6=QO(),JO=q6;function Y6(t,e,n){(n!==void 0&&!Go(t[e],n)||n===void 0&&!(e in t))&&kl(t,e,n)}var ld=Y6;function X6(t){return zi(t)&&Fl(t)}var eP=X6;function Z6(t,e){if(!(e==="constructor"&&typeof t[e]=="function")&&e!="__proto__")return t[e]}var cd=Z6;function K6(t){return J1(t,bg(t))}var tP=K6;function Q6(t,e,n,i,r,o,s){var a=cd(t,n),l=cd(e,n),c=s.get(l);if(c){ld(t,n,c);return}var u=o?o(a,l,n+"",t,e,s):void 0,d=u===void 0;if(d){var h=od(l),f=!h&&vg(l),p=!h&&!f&&xg(l);u=l,h||f||p?od(a)?u=a:eP(a)?u=q1(a):f?(d=!1,u=YO(l,!0)):p?(d=!1,u=ZO(l,!0)):u=[]:LO(l)||sd(l)?(u=a,sd(a)?u=tP(a):(!ln(a)||Ol(a))&&(u=KO(l))):d=!1}d&&(s.set(l,u),r(u,l,i,o,s),s.delete(l)),ld(t,n,u)}var nP=Q6;function iP(t,e,n,i,r){t!==e&&JO(e,function(o,s){if(r||(r=new HO),ln(o))nP(t,e,s,n,iP,i,r);else{var a=i?i(cd(t,s),o,s+"",t,e,r):void 0;a===void 0&&(a=o),ld(t,s,a)}},bg)}var rP=iP;var J6=rO(function(t,e,n){rP(t,e,n)}),Eg=J6;var oP=new L("Configuration for ngCharts");function sP(...t){return{registerables:[...N1,...t]}}function aP(...t){let e=Eg({},...t);return{provide:oP,useValue:e}}var eX=(()=>{let e=class e{constructor(){this.colorschemesOptions=new _t(void 0)}setColorschemesOptions(i){this.pColorschemesOptions=i,this.colorschemesOptions.next(i)}getColorschemesOptions(){return this.pColorschemesOptions}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nb=(()=>{let e=class e{constructor(i,r,o,s){this.zone=r,this.themeService=o,this.type="bar",this.plugins=[],this.chartClick=new Xe,this.chartHover=new Xe,this.subs=[],this.themeOverrides={},s?.registerables&&ug.register(...s.registerables),s?.defaults&&$e.set(s.defaults),this.ctx=i.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(Pa()).subscribe(a=>this.themeChanged(a)))}ngOnChanges(i){let r=["type"],o=Object.getOwnPropertyNames(i);if(o.some(s=>r.includes(s))||o.every(s=>i[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(i=>i.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new ug(this.ctx,this.getChartConfiguration()))}update(i){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(i))}hideDataset(i,r){this.chart&&(this.chart.getDatasetMeta(i).hidden=r,this.update())}isDatasetHidden(i){return this.chart?.getDatasetMeta(i)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(i){this.themeOverrides=i,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return Eg({onHover:(i,r)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:i,active:r}))},onClick:(i,r)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:i,active:r}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}};e.\u0275fac=function(r){return new(r||e)(Ee(tn),Ee(Pe),Ee(eX),Ee(oP,8))},e.\u0275dir=Zt({type:e,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],standalone:!0,features:[Oi]});let t=e;return t})();var lP=(()=>{let e=class e{constructor(){this.http=I(Wv)}getRoutes(){return this.http.get("https://raw.githubusercontent.com/Marcura/frontend-developer-test/master/web_challenge.csv",{responseType:"text"}).pipe(ee(i=>tX(i).filter(r=>r?.points)),qe(i=>{setTimeout(()=>{nX(i)},500)}))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tX(t){let e=t.split(`
`),n=e.shift()?.split(",").map(r=>JSON.parse(r)),i=new Array(e.length).fill(null).map(()=>({}));return e.forEach((r,o)=>{if(!r)return;let s=r.slice(1,-2).split('","');n.forEach((a,l)=>{s[l]&&(i[o][a]=s[l])}),i[o].points=JSON.parse(i[o].points),i[o].route_id=Number.parseInt(i[o].route_id),i[o].leg_duration=Number.parseInt(i[o].leg_duration)}),i}function nX(t){t.forEach(e=>{e.all_distance=0,e.all_distance=e.points.reduce((n,i,r)=>{let o=e.points[r-1],s=0;return o&&(s=(i[2]-o[2])*i[3]),i.push(s),n+s},e.all_distance)})}var Ul=(()=>{let e=class e{constructor(){this.routes=nu([]),this.activeRoute=nu(null)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=j({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var sa=class{static getPointIndexFromDistance(e,n,i){if(!e)return 0;if(e===1)return n.length-1;let r=i*e,o;return n.reduce((s,a,l)=>(s=s+a[4],s>=r&&o===void 0&&(o=l),s),0),o||0}static getDistanceFromPointIndex(e,n,i){if(e===0)return 0;if(e===n.length-1)return 1;let r;return n.reduce((o,s,a)=>(o=o+s[4],a===e&&r===void 0&&(r=o/i),o),0),r||0}};function iX(t,e){if(t&1&&vr(0,"canvas",0),t&2){let n=il(2);yr("data",e)("type","line")("options",n.chartOptions)}}function rX(t,e){if(t&1&&nl(0,iX,1,3,"canvas",0),t&2){let n,i=il();ru((n=i.chardData())?0:-1,n)}}var cP=(()=>{let e=class e{constructor(){this.pointClick=iS(),this.distance=rS.required(),this.activeRoute=I(Ul).activeRoute,this.chardData=nu(null),this.chartOptions={elements:{line:{tension:.1}},animation:{duration:0},onClick:(i,r)=>{r.length>0&&(this.activeIndex=r[0].index,this.pointClick.emit(this.activeIndex),this.chart.update())},scales:{x:{display:!1}}},this.activeIndex=0,this.updateSubject=new yt,this.activeRouteEffect=au(()=>{let i=this.activeRoute();i?this.preperaData(i):this.chardData.set(null)},{allowSignalWrites:!0}),this.datePipe=new qM("en-US")}ngOnInit(){this.sub=this.updateSubject.pipe(Pa(),yy(100),Mt(()=>!!this.chart),qe(()=>this.chart.update()),Tt(()=>Nc(300))).subscribe(()=>{this.chart&&this.chart.update()})}ngOnDestroy(){this.sub&&this.sub.unsubscribe()}ngOnChanges(){let i=this.activeRoute();if(i&&this.distance!==void 0){let r=sa.getPointIndexFromDistance(this.distance(),i.points,i.all_distance);r!==this.activeIndex&&(this.activeIndex=r,this.updateSubject.next(r))}}preperaData(i){let r=[],o={label:`${i.from_port} => ${i.to_port}`,pointBackgroundColor:s=>s.dataIndex===this.activeIndex?"red":"rgba(75,192,192,0)",pointBorderColor:"rgba(0,0,0,0)",borderColor:"green",data:[]};i.points.forEach(s=>{r.push(this.datePipe.transform(new Date(s[2]),"MM.d HH:mm")||""),o.data.push(s[3])}),this.chardData.set({labels:r,datasets:[o]})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ai({type:e,selectors:[["lib-chart"]],viewQuery:function(r,o){if(r&1&&CM(nb,5),r&2){let s;Cv(s=wv())&&(o.chart=s.first)}},inputs:{distance:[1,"distance"]},outputs:{pointClick:"pointClick"},standalone:!0,features:[Oi,Pi],decls:1,vars:1,consts:[["id","chart-canvas","baseChart","",3,"data","type","options"]],template:function(r,o){r&1&&nl(0,rX,1,1),r&2&&ru(o.activeRoute()?0:-1)},dependencies:[qs,nb],styles:["#chart-canvas[_ngcontent-%COMP%]{width:700px;max-width:100%;max-height:200px;background-color:#e1e1e199}"]});let t=e;return t})();var yP=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(Ee(Eo),Ee(tn))},e.\u0275dir=Zt({type:e});let t=e;return t})(),ab=(()=>{let e=class e extends yP{};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=zs(e)))(o||e)}})(),e.\u0275dir=Zt({type:e,features:[Do]});let t=e;return t})(),Tg=new L("");var oX={provide:Tg,useExisting:Us(()=>_P),multi:!0};function sX(){let t=Dr()?Dr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var aX=new L(""),_P=(()=>{let e=class e extends yP{constructor(i,r,o){super(i,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!sX())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(Ee(Eo),Ee(tn),Ee(aX,8))},e.\u0275dir=Zt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&xr("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[su([oX]),Do]});let t=e;return t})();var lX=new L(""),cX=new L("");function vP(t){return t!=null}function xP(t){return Hs(t)?He(t):t}function bP(t){let e={};return t.forEach(n=>{e=n!=null?N(N({},e),n):e}),Object.keys(e).length===0?null:e}function CP(t,e){return e.map(n=>n(t))}function uX(t){return!t.validate}function wP(t){return t.map(e=>uX(e)?e:n=>e.validate(n))}function dX(t){if(!t)return null;let e=t.filter(vP);return e.length==0?null:function(n){return bP(CP(n,e))}}function EP(t){return t!=null?dX(wP(t)):null}function hX(t){if(!t)return null;let e=t.filter(vP);return e.length==0?null:function(n){let i=CP(n,e).map(xP);return dy(i).pipe(ee(bP))}}function DP(t){return t!=null?hX(wP(t)):null}function uP(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function IP(t){return t._rawValidators}function SP(t){return t._rawAsyncValidators}function ib(t){return t?Array.isArray(t)?t:[t]:[]}function Ig(t,e){return Array.isArray(t)?t.includes(e):t===e}function dP(t,e){let n=ib(e);return ib(t).forEach(r=>{Ig(n,r)||n.push(r)}),n}function hP(t,e){return ib(e).filter(n=>!Ig(t,n))}var rb=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=EP(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=DP(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}};var pd=class extends rb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ob=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},fX={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},yce=ge(N({},fX),{"[class.ng-submitted]":"isSubmitted"}),MP=(()=>{let e=class e extends ob{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(Ee(pd,2))},e.\u0275dir=Zt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&bv("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Do]});let t=e;return t})();var ud="VALID",Dg="INVALID",zl="PENDING",dd="DISABLED",$l=class{},Sg=class extends $l{constructor(e,n){super(),this.value=e,this.source=n}},hd=class extends $l{constructor(e,n){super(),this.pristine=e,this.source=n}},fd=class extends $l{constructor(e,n){super(),this.touched=e,this.source=n}},Hl=class extends $l{constructor(e,n){super(),this.status=e,this.source=n}};function pX(t){return(Ag(t)?t.validators:t)||null}function gX(t){return Array.isArray(t)?EP(t):t||null}function mX(t,e){return(Ag(e)?e.asyncValidators:t)||null}function yX(t){return Array.isArray(t)?DP(t):t||null}function Ag(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var sb=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._events=new yt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ud}get invalid(){return this.status===Dg}get pending(){return this.status==zl}get disabled(){return this.status===dd}get enabled(){return this.status!==dd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(dP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hP(e,this._rawAsyncValidators))}hasValidator(e){return Ig(this._rawValidators,e)}hasAsyncValidator(e){return Ig(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ge(N({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new fd(!0,i))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:i})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,i),n&&e.emitEvent!==!1&&this._events.next(new fd(!1,i))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let i=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ge(N({},e),{sourceControl:i})),n&&e.emitEvent!==!1&&this._events.next(new hd(!1,i))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let i=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,i),n&&e.emitEvent!==!1&&this._events.next(new hd(!0,i))}markAsPending(e={}){this.status=zl;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Hl(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ge(N({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=dd,this.errors=null,this._forEachChild(r=>{r.disable(ge(N({},e),{onlySelf:!0}))}),this._updateValue();let i=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sg(this.value,i)),this._events.next(new Hl(this.status,i)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ge(N({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=ud,this._forEachChild(i=>{i.enable(ge(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ge(N({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let i=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ud||this.status===zl)&&this._runAsyncValidator(i,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sg(this.value,n)),this._events.next(new Hl(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ge(N({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?dd:ud}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=zl,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let i=xP(this.asyncValidator(this));this._asyncValidationSubscription=i.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,i){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||i)&&this._events.next(new Hl(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,i)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?dd:this.errors?Dg:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(zl)?zl:this._anyControlsHaveStatus(Dg)?Dg:ud}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let i=!this._anyControlsDirty(),r=this.pristine!==i;this.pristine=i,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new hd(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new fd(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ag(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=gX(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=yX(this._rawAsyncValidators)}};var TP=new L("CallSetDisabledState",{providedIn:"root",factory:()=>lb}),lb="always";function _X(t,e,n=lb){xX(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),CX(t,e),EX(t,e),wX(t,e),vX(t,e)}function fP(t,e,n=!0){let i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),bX(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function Mg(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function vX(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function xX(t,e){let n=IP(t);e.validator!==null?t.setValidators(uP(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=SP(t);e.asyncValidator!==null?t.setAsyncValidators(uP(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();Mg(e._rawValidators,r),Mg(e._rawAsyncValidators,r)}function bX(t,e){let n=!1;if(t!==null){if(e.validator!==null){let r=IP(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,t.setValidators(o))}}if(e.asyncValidator!==null){let r=SP(t);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,t.setAsyncValidators(o))}}}let i=()=>{};return Mg(e._rawValidators,i),Mg(e._rawAsyncValidators,i),n}function CX(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&AP(t,e)})}function wX(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&AP(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function AP(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function EX(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function DX(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function IX(t){return Object.getPrototypeOf(t.constructor)===ab}function SX(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(o=>{o.constructor===_P?n=o:IX(o)?i=o:r=o}),r||i||n||null}function pP(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function gP(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var RP=class extends sb{constructor(e=null,n,i){super(pX(n),mX(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ag(n)&&(n.nonNullable||n.initialValueIsDefault)&&(gP(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){gP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var OP=new L(""),MX={provide:pd,useExisting:Us(()=>cb)},cb=(()=>{let e=class e extends pd{set isDisabled(i){}constructor(i,r,o,s,a){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=a,this.update=new Xe,this._ngModelWarningSent=!1,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=SX(this,o)}ngOnChanges(i){if(this._isControlChanged(i)){let r=i.form.previousValue;r&&fP(r,this,!1),_X(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}DX(i,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&fP(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_isControlChanged(i){return i.hasOwnProperty("form")}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(Ee(lX,10),Ee(cX,10),Ee(Tg,10),Ee(OP,8),Ee(TP,8))},e.\u0275dir=Zt({type:e,selectors:[["","formControl",""]],inputs:{form:[0,"formControl","form"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[su([MX]),Do,Oi]});let t=e;return t})();var TX={provide:Tg,useExisting:Us(()=>Rg),multi:!0};function PP(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function AX(t){return t.split(":")[0]}var Rg=(()=>{let e=class e extends ab{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),o=PP(r,i);this.setProperty("value",o)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=AX(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=zs(e)))(o||e)}})(),e.\u0275dir=Zt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&xr("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[su([TX]),Do]});let t=e;return t})(),NP=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(PP(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Ee(tn),Ee(Eo),Ee(Rg,9))},e.\u0275dir=Zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),RX={provide:Tg,useExisting:Us(()=>kP),multi:!0};function mP(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function OX(t){return t.split(":")[0]}var kP=(()=>{let e=class e extends ab{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let o=i.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let c=a[l],u=this._getOptionValue(c.value);o.push(u)}}else{let a=r.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let u=this._getOptionValue(c.value);o.push(u)}}}this.value=o,i(o)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=OX(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(o){return(i||(i=zs(e)))(o||e)}})(),e.\u0275dir=Zt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&xr("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[su([RX]),Do]});let t=e;return t})(),FP=(()=>{let e=class e{constructor(i,r,o){this._element=i,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(mP(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(mP(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Ee(tn),Ee(Eo),Ee(kP,9))},e.\u0275dir=Zt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var PX=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=pr({type:e}),e.\u0275inj=fr({});let t=e;return t})();var LP=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:OP,useValue:i.warnOnNgModelWithFormControl??"always"},{provide:TP,useValue:i.callSetDisabledState??lb}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=pr({type:e}),e.\u0275inj=fr({imports:[PX]});let t=e;return t})();function kX(t,e){if(t&1&&(Io(0,"option",1),ou(1),_r()),t&2){let n=e.$implicit;yr("ngValue",n),wo(),Dv(" ",n.route_id," ",n.from_port," => ",n.to_port," ")}}var VP=(()=>{let e=class e{constructor(){this.dataAccessService=I(lP),this.dataStorage=I(Ul),this.contol=new RP}get data(){return this.dataStorage.routes}ngOnInit(){this.getData(),this.subscribeToCotnrolValue()}getData(){this.dataAccessService.getRoutes().subscribe({next:i=>{this.dataStorage.routes.set(i)}})}subscribeToCotnrolValue(){this.contol.valueChanges.subscribe({next:i=>{this.dataStorage.activeRoute.set(i)}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ai({type:e,selectors:[["lib-route-select"]],standalone:!0,features:[Pi],decls:5,vars:2,consts:[[3,"formControl"],[3,"ngValue"]],template:function(r,o){r&1&&(Io(0,"select",0)(1,"option",1),ou(2,"--Please choose an option--"),_r(),_M(3,kX,2,4,"option",1,yM),_r()),r&2&&(yr("formControl",o.contol),wo(),yr("ngValue",null),wo(2),vM(o.data()))},dependencies:[qs,LP,NP,FP,Rg,MP,cb],styles:["[_nghost-%COMP%]{position:absolute;top:10px;right:10px}select[_ngcontent-%COMP%]{background-color:red;color:#fff}"]});let t=e;return t})();var ub=class{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}};var Et=ub;var di={PROPERTYCHANGE:"propertychange"};var db=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}},Wl=db;function jP(t,e,n){let i,r;n=n||cn;let o=0,s=t.length,a=!1;for(;o<s;)i=o+(s-o>>1),r=+n(t[i],e),r<0?o=i+1:(s=i,a=!r);return a?o:~o}function cn(t,e){return t>e?1:t<e?-1:0}function Gl(t,e,n){if(t[0]<=e)return 0;let i=t.length;if(e<=t[i-1])return i-1;if(typeof n=="function"){for(let r=1;r<i;++r){let o=t[r];if(o===e)return r;if(o<e)return n(e,t[r-1],o)>0?r-1:r}return i-1}if(n>0){for(let r=1;r<i;++r)if(t[r]<e)return r-1;return i-1}if(n<0){for(let r=1;r<i;++r)if(t[r]<=e)return r;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function BP(t,e,n){for(;e<n;){let i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function Zo(t,e){let n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function $t(t,e){let n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function UP(t,e,n){let i=e||cn;return t.every(function(r,o){if(o===0)return!0;let s=i(t[o-1],r);return!(s>0||n&&s===0)})}function Fr(){return!0}function Lr(){return!1}function hi(){}function Og(t){let e=!1,n,i,r;return function(){let o=Array.prototype.slice.call(arguments);return(!e||this!==r||!$t(o,i))&&(e=!0,r=this,i=o,n=t.apply(this,arguments)),n}}function zP(t){function e(){let n;try{n=t()}catch(i){return Promise.reject(i)}return n instanceof Promise?n:Promise.resolve(n)}return e()}function Hi(t){for(let e in t)delete t[e]}function fi(t){let e;for(e in t)return!1;return!e}var hb=class extends Wl{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,n){if(!e||!n)return;let i=this.listeners_||(this.listeners_={}),r=i[e]||(i[e]=[]);r.includes(n)||r.push(n)}dispatchEvent(e){let n=typeof e=="string",i=n?e:e.type,r=this.listeners_&&this.listeners_[i];if(!r)return;let o=n?new Et(e):e;o.target||(o.target=this.eventTarget_||this);let s=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in s||(s[i]=0,a[i]=0),++s[i];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(o):l=r[c].call(this,o),l===!1||o.propagationStopped){l=!1;break}if(--s[i]===0){let c=a[i];for(delete a[i];c--;)this.removeEventListener(i,hi);delete s[i]}return l}disposeInternal(){this.listeners_&&Hi(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,n){if(!this.listeners_)return;let i=this.listeners_[e];if(!i)return;let r=i.indexOf(n);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(i[r]=hi,++this.pendingRemovals_[e]):(i.splice(r,1),i.length===0&&delete this.listeners_[e]))}},Ko=hb;var V={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function oe(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){let s=n;n=function(){t.removeEventListener(e,n),s.apply(this,arguments)}}let o={target:t,type:e,listener:n};return t.addEventListener(e,n),o}function ql(t,e,n,i){return oe(t,e,n,i,!0)}function xe(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),Hi(t))}var Yl=class extends Ko{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(V.CHANGE)}getRevision(){return this.revision_}onInternal(e,n){if(Array.isArray(e)){let i=e.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=oe(this,e[o],n);return r}return oe(this,e,n)}onceInternal(e,n){let i;if(Array.isArray(e)){let r=e.length;i=new Array(r);for(let o=0;o<r;++o)i[o]=ql(this,e[o],n)}else i=ql(this,e,n);return n.ol_key=i,i}unInternal(e,n){let i=n.ol_key;if(i)FX(i);else if(Array.isArray(e))for(let r=0,o=e.length;r<o;++r)this.removeEventListener(e[r],n);else this.removeEventListener(e,n)}};Yl.prototype.on;Yl.prototype.once;Yl.prototype.un;function FX(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)xe(t[e]);else xe(t)}var Pg=Yl;function ue(){throw new Error("Unimplemented abstract method.")}var LX=0;function se(t){return t.ol_uid||(t.ol_uid=String(++LX))}var Ng=class extends Et{constructor(e,n,i){super(e),this.key=n,this.oldValue=i}},fb=class extends Pg{constructor(e){super(),this.on,this.once,this.un,se(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let n;return this.values_&&this.values_.hasOwnProperty(e)&&(n=this.values_[e]),n}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,n){let i;i=`change:${e}`,this.hasListener(i)&&this.dispatchEvent(new Ng(i,e,n)),i=di.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Ng(i,e,n))}addChangeListener(e,n){this.addEventListener(`change:${e}`,n)}removeChangeListener(e,n){this.removeEventListener(`change:${e}`,n)}set(e,n,i){let r=this.values_||(this.values_={});if(i)r[e]=n;else{let o=r[e];r[e]=n,o!==n&&this.notify(e,o)}}setProperties(e,n){for(let i in e)this.set(i,e[i],n)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,n){if(this.values_&&e in this.values_){let i=this.values_[e];delete this.values_[e],fi(this.values_)&&(this.values_=null),n||this.notify(e,i)}}},ht=fb;function Z(t,e){if(!t)throw new Error(e)}var pb=class t extends ht{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){let n=e;this.setGeometry(n)}else{let n=e;this.setProperties(n)}}clone(){let e=new t(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());let n=this.getGeometry();n&&e.setGeometry(n.clone());let i=this.getStyle();return i&&e.setStyle(i),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(xe(this.geometryChangeKey_),this.geometryChangeKey_=null);let e=this.getGeometry();e&&(this.geometryChangeKey_=oe(e,V.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?VX(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}};function VX(t){if(typeof t=="function")return t;let e;return Array.isArray(t)?e=t:(Z(typeof t.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}}var gd=pb;var Dt={ADD:"add",REMOVE:"remove"};var HP={LENGTH:"length"},Xl=class extends Et{constructor(e,n,i){super(e),this.element=n,this.index=i}},gb=class extends ht{constructor(e,n){if(super(),this.on,this.once,this.un,n=n||{},this.unique_=!!n.unique,this.array_=e||[],this.unique_)for(let i=0,r=this.array_.length;i<r;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let n=0,i=e.length;n<i;++n)this.push(e[n]);return this}forEach(e){let n=this.array_;for(let i=0,r=n.length;i<r;++i)e(n[i],i,n)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(HP.LENGTH)}insertAt(e,n){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n),this.array_.splice(e,0,n),this.updateLength_(),this.dispatchEvent(new Xl(Dt.ADD,n,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);let n=this.getLength();return this.insertAt(n,e),this.getLength()}remove(e){let n=this.array_;for(let i=0,r=n.length;i<r;++i)if(n[i]===e)return this.removeAt(i)}removeAt(e){if(e<0||e>=this.getLength())return;let n=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new Xl(Dt.REMOVE,n,e)),n}setAt(e,n){let i=this.getLength();if(e>=i){this.insertAt(e,n);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(n,e);let r=this.array_[e];this.array_[e]=n,this.dispatchEvent(new Xl(Dt.REMOVE,r,e)),this.dispatchEvent(new Xl(Dt.ADD,n,e))}updateLength_(){this.set(HP.LENGTH,this.array_.length)}assertUnique_(e,n){for(let i=0,r=this.array_.length;i<r;++i)if(this.array_[i]===e&&i!==n)throw new Error("Duplicate item added to a unique collection")}},Qt=gb;var Se={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};function Oe(t,e,n){return Math.min(Math.max(t,e),n)}function $P(t,e,n,i,r,o){let s=r-n,a=o-i;if(s!==0||a!==0){let l=((t-n)*s+(e-i)*a)/(s*s+a*a);l>1?(n=r,i=o):l>0&&(n+=s*l,i+=a*l)}return Vr(t,e,n,i)}function Vr(t,e,n,i){let r=n-t,o=i-e;return r*r+o*o}function WP(t){let e=t.length;for(let i=0;i<e;i++){let r=i,o=Math.abs(t[i][i]);for(let a=i+1;a<e;a++){let l=Math.abs(t[a][i]);l>o&&(o=l,r=a)}if(o===0)return null;let s=t[r];t[r]=t[i],t[i]=s;for(let a=i+1;a<e;a++){let l=-t[a][i]/t[i][i];for(let c=i;c<e+1;c++)i==c?t[a][c]=0:t[a][c]+=l*t[i][c]}}let n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function Zl(t){return t*Math.PI/180}function jr(t,e){let n=t%e;return n*e<0?n+e:n}function kt(t,e,n){return t+n*(e-t)}function kg(t,e){let n=Math.pow(10,e);return Math.round(t*n)/n}function md(t,e){return Math.floor(kg(t,e))}function yd(t,e){return Math.ceil(kg(t,e))}var mb=class extends ht{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;let n=Object.assign({},e);typeof e.properties=="object"&&(delete n.properties,Object.assign(n,e.properties)),n[Se.OPACITY]=e.opacity!==void 0?e.opacity:1,Z(typeof n[Se.OPACITY]=="number","Layer opacity must be a number"),n[Se.VISIBLE]=e.visible!==void 0?e.visible:!0,n[Se.Z_INDEX]=e.zIndex,n[Se.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,n[Se.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,n[Se.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,n[Se.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=n.className!==void 0?n.className:"ol-layer",delete n.className,this.setProperties(n),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){let n=this.state_||{layer:this,managed:e===void 0?!0:e},i=this.getZIndex();return n.opacity=Oe(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=i===void 0&&!n.managed?1/0:i,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n}getLayersArray(e){return ue()}getLayerStatesArray(e){return ue()}getExtent(){return this.get(Se.EXTENT)}getMaxResolution(){return this.get(Se.MAX_RESOLUTION)}getMinResolution(){return this.get(Se.MIN_RESOLUTION)}getMinZoom(){return this.get(Se.MIN_ZOOM)}getMaxZoom(){return this.get(Se.MAX_ZOOM)}getOpacity(){return this.get(Se.OPACITY)}getSourceState(){return ue()}getVisible(){return this.get(Se.VISIBLE)}getZIndex(){return this.get(Se.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(Se.EXTENT,e)}setMaxResolution(e){this.set(Se.MAX_RESOLUTION,e)}setMinResolution(e){this.set(Se.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(Se.MAX_ZOOM,e)}setMinZoom(e){this.set(Se.MIN_ZOOM,e)}setOpacity(e){Z(typeof e=="number","Layer opacity must be a number"),this.set(Se.OPACITY,e)}setVisible(e){this.set(Se.VISIBLE,e)}setZIndex(e){this.set(Se.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}},Fg=mb;var Ft={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var xt={ANIMATING:0,INTERACTING:1};var qn={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Br={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};var yb=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Br[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}},Lg=yb;var _d=6378137,Kl=Math.PI*_d,jX=[-Kl,-Kl,Kl,Kl],BX=[-180,-85,180,85],Vg=_d*Math.log(Math.tan(Math.PI/2)),Qo=class extends Lg{constructor(e){super({code:e,units:"m",extent:jX,global:!0,worldExtent:BX,getPointResolution:function(n,i){return n/Math.cosh(i[1]/_d)}})}},_b=[new Qo("EPSG:3857"),new Qo("EPSG:102100"),new Qo("EPSG:102113"),new Qo("EPSG:900913"),new Qo("http://www.opengis.net/def/crs/EPSG/0/3857"),new Qo("http://www.opengis.net/gml/srs/epsg.xml#3857")];function GP(t,e,n){let i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n){e[r]=Kl*t[r]/180;let o=_d*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));o>Vg?o=Vg:o<-Vg&&(o=-Vg),e[r+1]=o}return e}function qP(t,e,n){let i=t.length;n=n>1?n:2,e===void 0&&(n>2?e=t.slice():e=new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/Kl,e[r+1]=360*Math.atan(Math.exp(t[r+1]/_d))/Math.PI-90;return e}var UX=6378137,YP=[-180,-90,180,90],zX=Math.PI*UX/180,Ur=class extends Lg{constructor(e,n){super({code:e,units:"degrees",extent:YP,axisOrientation:n,global:!0,metersPerUnit:zX,worldExtent:YP})}},vb=[new Ur("CRS:84"),new Ur("EPSG:4326","neu"),new Ur("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ur("urn:ogc:def:crs:OGC:2:84"),new Ur("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ur("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ur("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var xb={};function XP(t){return xb[t]||xb[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function ZP(t,e){xb[t]=e}var Ql={};function vd(t,e,n){let i=t.getCode(),r=e.getCode();i in Ql||(Ql[i]={}),Ql[i][r]=n}function KP(t,e){let n;return t in Ql&&e in Ql[t]&&(n=Ql[t][e]),n}var ft={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function bb(t){let e=at();for(let n=0,i=t.length;n<i;++n)la(e,t[n]);return e}function HX(t,e,n){let i=Math.min.apply(null,t),r=Math.min.apply(null,e),o=Math.max.apply(null,t),s=Math.max.apply(null,e);return Tn(i,r,o,s,n)}function Jl(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function Bg(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function ec(t,e,n){let i,r;return e<t[0]?i=t[0]-e:t[2]<e?i=e-t[2]:i=0,n<t[1]?r=t[1]-n:t[3]<n?r=n-t[3]:r=0,i*i+r*r}function pi(t,e){return Cb(t,e[0],e[1])}function zr(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function Cb(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function jg(t,e){let n=t[0],i=t[1],r=t[2],o=t[3],s=e[0],a=e[1],l=ft.UNKNOWN;return s<n?l=l|ft.LEFT:s>r&&(l=l|ft.RIGHT),a<i?l=l|ft.BELOW:a>o&&(l=l|ft.ABOVE),l===ft.UNKNOWN&&(l=ft.INTERSECTING),l}function at(){return[1/0,1/0,-1/0,-1/0]}function Tn(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function aa(t){return Tn(1/0,1/0,-1/0,-1/0,t)}function Ug(t,e){let n=t[0],i=t[1];return Tn(n,i,n,i,e)}function tc(t,e,n,i,r){let o=aa(r);return wb(o,t,e,n,i)}function Hr(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function QP(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function la(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function wb(t,e,n,i,r){for(;n<i;n+=r)$X(t,e[n],e[n+1]);return t}function $X(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function zg(t,e){let n;return n=e(nc(t)),n||(n=e(ic(t)),n)||(n=e(rc(t)),n)||(n=e(Xn(t)),n)?n:!1}function xd(t){let e=0;return es(t)||(e=ce(t)*Ye(t)),e}function nc(t){return[t[0],t[1]]}function ic(t){return[t[2],t[1]]}function Yn(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function JP(t,e){let n;if(e==="bottom-left")n=nc(t);else if(e==="bottom-right")n=ic(t);else if(e==="top-left")n=Xn(t);else if(e==="top-right")n=rc(t);else throw new Error("Invalid corner");return n}function bd(t,e,n,i,r){let[o,s,a,l,c,u,d,h]=Hg(t,e,n,i);return Tn(Math.min(o,a,c,d),Math.min(s,l,u,h),Math.max(o,a,c,d),Math.max(s,l,u,h),r)}function Hg(t,e,n,i){let r=e*i[0]/2,o=e*i[1]/2,s=Math.cos(n),a=Math.sin(n),l=r*s,c=r*a,u=o*s,d=o*a,h=t[0],f=t[1];return[h-l+d,f-c-u,h-l-d,f-c+u,h+l-d,f+c+u,h+l+d,f+c-u,h-l+d,f-c-u]}function Ye(t){return t[3]-t[1]}function Jo(t,e,n){let i=n||at();return Ke(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):aa(i),i}function Xn(t){return[t[0],t[3]]}function rc(t){return[t[2],t[3]]}function ce(t){return t[2]-t[0]}function Ke(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function es(t){return t[2]<t[0]||t[3]<t[1]}function eN(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function tN(t,e,n){let i=!1,r=jg(t,e),o=jg(t,n);if(r===ft.INTERSECTING||o===ft.INTERSECTING)i=!0;else{let s=t[0],a=t[1],l=t[2],c=t[3],u=e[0],d=e[1],h=n[0],f=n[1],p=(f-d)/(h-u),m,g;o&ft.ABOVE&&!(r&ft.ABOVE)&&(m=h-(f-c)/p,i=m>=s&&m<=l),!i&&o&ft.RIGHT&&!(r&ft.RIGHT)&&(g=f-(h-l)*p,i=g>=a&&g<=c),!i&&o&ft.BELOW&&!(r&ft.BELOW)&&(m=h-(f-a)/p,i=m>=s&&m<=l),!i&&o&ft.LEFT&&!(r&ft.LEFT)&&(g=f-(h-s)*p,i=g>=a&&g<=c)}return i}function nN(t,e,n,i){if(es(t))return aa(n);let r=[];if(i>1){let a=t[2]-t[0],l=t[3]-t[1];for(let c=0;c<i;++c)r.push(t[0]+a*c/i,t[1],t[2],t[1]+l*c/i,t[2]-a*c/i,t[3],t[0],t[3]-l*c/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);let o=[],s=[];for(let a=0,l=r.length;a<l;a+=2)o.push(r[a]),s.push(r[a+1]);return HX(o,s,n)}function Eb(t,e){let n=e.getExtent(),i=Yn(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){let r=ce(n),s=Math.floor((i[0]-n[0])/r)*r;t[0]-=s,t[2]-=s}return t}function $g(t,e,n){if(e.canWrapX()){let i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];Eb(t,e);let r=ce(i);if(ce(t)>r&&!n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}function iN(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function ca(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function oc(t,e){let n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,o=t[1]*n+t[0]*i;return t[0]=r,t[1]=o,t}function rN(t,e){return t[0]*=e,t[1]*=e,t}function Wg(t,e){if(e.canWrapX()){let n=ce(e.getExtent()),i=oN(t,e,n);i&&(t[0]-=i*n)}return t}function oN(t,e,n){let i=e.getExtent(),r=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||ce(i),r=Math.floor((t[0]-i[0])/n)),r}var WX=63710088e-1;function Db(t,e,n){n=n||WX;let i=Zl(t[1]),r=Zl(e[1]),o=(r-i)/2,s=Zl(e[0]-t[0])/2,a=Math.sin(o)*Math.sin(o)+Math.sin(s)*Math.sin(s)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}var sN={info:1,warn:2,error:3,none:4},GX=sN.info;function Gg(...t){GX>sN.warn||console.warn(...t)}var Ib=!0;function lN(t){Ib=!(t===void 0?!0:t)}function Sb(t,e){if(e!==void 0){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];e=e}else e=t.slice();return e}function cN(t,e){if(e!==void 0&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function qX(t){ZP(t.getCode(),t),vd(t,t,Sb)}function YX(t){t.forEach(qX)}function It(t){return typeof t=="string"?XP(t):t||null}function Mb(t,e,n,i){t=It(t);let r,o=t.getPointResolutionFunc();if(o){if(r=o(e,n),i&&i!==t.getUnits()){let s=t.getMetersPerUnit();s&&(r=r*s/Br[i])}}else{let s=t.getUnits();if(s=="degrees"&&!i||i=="degrees")r=e;else{let a=$r(t,It("EPSG:4326"));if(a===cN&&s!=="degrees")r=e*t.getMetersPerUnit();else{let c=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];c=a(c,c,2);let u=Db(c.slice(0,2),c.slice(2,4)),d=Db(c.slice(4,6),c.slice(6,8));r=(u+d)/2}let l=i?Br[i]:t.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function aN(t){YX(t),t.forEach(function(e){t.forEach(function(n){e!==n&&vd(e,n,Sb)})})}function XX(t,e,n,i){t.forEach(function(r){e.forEach(function(o){vd(r,o,n),vd(o,r,i)})})}function qg(t,e){return t?typeof t=="string"?It(t):t:It(e)}function ts(t,e){if(t===e)return!0;let n=t.getUnits()===e.getUnits();return(t.getCode()===e.getCode()||$r(t,e)===Sb)&&n}function $r(t,e){let n=t.getCode(),i=e.getCode(),r=KP(n,i);return r||(r=cN),r}function ua(t,e){let n=It(t),i=It(e);return $r(n,i)}function ns(t,e,n){return ua(e,n)(t,void 0,t.length)}function uN(t,e,n,i){let r=ua(e,n);return nN(t,r,void 0,i)}var gi=null;function Wr(){return gi}function Cd(t,e){return gi?ns(t,e,gi):t}function mi(t,e){return gi?ns(t,gi,e):(Ib&&!ca(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(Ib=!1,Gg("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function is(t,e){return gi?uN(t,e,gi):t}function yi(t,e){return gi?uN(t,gi,e):t}function dN(t,e){if(!gi)return t;let n=It(e).getMetersPerUnit(),i=gi.getMetersPerUnit();return n&&i?t*n/i:t}function ZX(){aN(_b),aN(vb),XX(vb,_b,GP,qP)}ZX();function Tb(t,e,n){return function(i,r,o,s,a){if(!i)return;if(!r&&!e)return i;let l=e?0:o[0]*r,c=e?0:o[1]*r,u=a?a[0]:0,d=a?a[1]:0,h=t[0]+l/2+u,f=t[2]-l/2+u,p=t[1]+c/2+d,m=t[3]-c/2+d;h>f&&(h=(f+h)/2,f=h),p>m&&(p=(m+p)/2,m=p);let g=Oe(i[0],h,f),y=Oe(i[1],p,m);if(s&&n&&r){let _=30*r;g+=-_*Math.log(1+Math.max(0,h-i[0])/_)+_*Math.log(1+Math.max(0,i[0]-f)/_),y+=-_*Math.log(1+Math.max(0,p-i[1])/_)+_*Math.log(1+Math.max(0,i[1]-m)/_)}return[g,y]}}function hN(t){return t}function Ab(t,e,n,i){let r=ce(e)/n[0],o=Ye(e)/n[1];return i?Math.min(t,Math.max(r,o)):Math.min(t,Math.min(r,o))}function Rb(t,e,n){let i=Math.min(t,e),r=50;return i*=Math.log(1+r*Math.max(0,t/e-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/t-1))/r+1),Oe(i,n/2,e*2)}function fN(t,e,n,i){return e=e!==void 0?e:!0,function(r,o,s,a){if(r!==void 0){let l=t[0],c=t[t.length-1],u=n?Ab(l,n,s,i):l;if(a)return e?Rb(r,u,c):Oe(r,c,u);let d=Math.min(u,r),h=Math.floor(Gl(t,d,o));return t[h]>u&&h<t.length-1?t[h+1]:t[h]}}}function pN(t,e,n,i,r,o){return i=i!==void 0?i:!0,n=n!==void 0?n:0,function(s,a,l,c){if(s!==void 0){let u=r?Ab(e,r,l,o):e;if(c)return i?Rb(s,u,n):Oe(s,n,u);let d=1e-9,h=Math.ceil(Math.log(e/u)/Math.log(t)-d),f=-a*(.5-d)+.5,p=Math.min(u,s),m=Math.floor(Math.log(e/p)/Math.log(t)+f),g=Math.max(h,m),y=e/Math.pow(t,g);return Oe(y,n,u)}}}function Ob(t,e,n,i,r){return n=n!==void 0?n:!0,function(o,s,a,l){if(o!==void 0){let c=i?Ab(t,i,a,r):t;return!n||!l?Oe(o,e,c):Rb(o,c,e)}}}function sc(t){if(t!==void 0)return 0}function Pb(t){if(t!==void 0)return t}function gN(t){let e=2*Math.PI/t;return function(n,i){if(i)return n;if(n!==void 0)return n=Math.floor(n/e+.5)*e,n}}function mN(t){let e=t===void 0?Zl(5):t;return function(n,i){return i||n===void 0?n:Math.abs(n)<=e?0:n}}function Nb(t){return Math.pow(t,3)}function Zn(t){return 1-Nb(1-t)}function yN(t){return 3*t*t-2*t*t*t}function _N(t){return t}var lde=new Array(6);function bt(){return[1,0,0,1,0,0]}function xN(t,e){let n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],l=e[0],c=e[1],u=e[2],d=e[3],h=e[4],f=e[5];return t[0]=n*l+r*c,t[1]=i*l+o*c,t[2]=n*u+r*d,t[3]=i*u+o*d,t[4]=n*h+r*f+s,t[5]=i*h+o*f+a,t}function bN(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function it(t,e){let n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function Lt(t,e,n,i,r,o,s,a){let l=Math.sin(o),c=Math.cos(o);return t[0]=i*c,t[1]=r*l,t[2]=-i*l,t[3]=r*c,t[4]=s*i*c-a*i*l+e,t[5]=s*r*l+a*r*c+n,t}function Yg(t,e){let n=KX(e);Z(n!==0,"Transformation matrix cannot be inverted");let i=e[0],r=e[1],o=e[2],s=e[3],a=e[4],l=e[5];return t[0]=s/n,t[1]=-r/n,t[2]=-o/n,t[3]=i/n,t[4]=(o*l-s*a)/n,t[5]=-(i*l-r*a)/n,t}function KX(t){return t[0]*t[3]-t[1]*t[2]}var vN=[1e6,1e6,1e6,1e6,2,2];function CN(t){return"matrix("+t.map((n,i)=>Math.round(n*vN[i])/vN[i]).join(", ")+")"}function un(t,e,n,i,r,o){o=o||[];let s=0;for(let a=e;a<n;a+=i){let l=t[a],c=t[a+1];o[s++]=r[0]*l+r[2]*c+r[4],o[s++]=r[1]*l+r[3]*c+r[5]}return o&&o.length!=s&&(o.length=s),o}function Xg(t,e,n,i,r,o,s){s=s||[];let a=Math.cos(r),l=Math.sin(r),c=o[0],u=o[1],d=0;for(let h=e;h<n;h+=i){let f=t[h]-c,p=t[h+1]-u;s[d++]=c+f*a-p*l,s[d++]=u+f*l+p*a;for(let m=h+2;m<h+i;++m)s[d++]=t[m]}return s&&s.length!=d&&(s.length=d),s}function wN(t,e,n,i,r,o,s,a){a=a||[];let l=s[0],c=s[1],u=0;for(let d=e;d<n;d+=i){let h=t[d]-l,f=t[d+1]-c;a[u++]=l+r*h,a[u++]=c+o*f;for(let p=d+2;p<d+i;++p)a[u++]=t[p]}return a&&a.length!=u&&(a.length=u),a}function EN(t,e,n,i,r,o,s){s=s||[];let a=0;for(let l=e;l<n;l+=i){s[a++]=t[l]+r,s[a++]=t[l+1]+o;for(let c=l+2;c<l+i;++c)s[a++]=t[c]}return s&&s.length!=a&&(s.length=a),s}var DN=bt(),kb=class extends ht{constructor(){super(),this.extent_=at(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Og((e,n,i)=>{if(!i)return this.getSimplifiedGeometry(n);let r=this.clone();return r.applyTransform(i),r.getSimplifiedGeometry(n)})}simplifyTransformed(e,n){return this.simplifyTransformedInternal(this.getRevision(),e,n)}clone(){return ue()}closestPointXY(e,n,i,r){return ue()}containsXY(e,n){let i=this.getClosestPoint([e,n]);return i[0]===e&&i[1]===n}getClosestPoint(e,n){return n=n||[NaN,NaN],this.closestPointXY(e[0],e[1],n,1/0),n}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return ue()}getExtent(e){if(this.extentRevision_!=this.getRevision()){let n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&aa(n),this.extentRevision_=this.getRevision()}return eN(this.extent_,e)}rotate(e,n){ue()}scale(e,n,i){ue()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return ue()}getType(){return ue()}applyTransform(e){ue()}intersectsExtent(e){return ue()}translate(e,n){ue()}transform(e,n){let i=It(e),r=i.getUnits()=="tile-pixels"?function(o,s,a){let l=i.getExtent(),c=i.getWorldExtent(),u=Ye(c)/Ye(l);return Lt(DN,c[0],c[3],u,-u,0,0,0),un(o,0,o.length,a,DN,s),ua(i,n)(o,s,a)}:ua(i,n);return this.applyTransform(r),this}},IN=kb;var Fb=class extends IN{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return tc(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return ue()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;let n=this.getSimplifiedGeometryInternal(e);return n.getFlatCoordinates().length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,n){this.stride=SN(e),this.layout=e,this.flatCoordinates=n}setCoordinates(e,n){ue()}setLayout(e,n,i){let r;if(e)r=SN(e);else{for(let o=0;o<i;++o){if(n.length===0){this.layout="XY",this.stride=2;return}n=n[0]}r=n.length,e=QX(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,n){let i=this.getFlatCoordinates();if(i){let r=this.getStride();Xg(i,0,i.length,r,e,n,i),this.changed()}}scale(e,n,i){n===void 0&&(n=e),i||(i=Yn(this.getExtent()));let r=this.getFlatCoordinates();if(r){let o=this.getStride();wN(r,0,r.length,o,e,n,i,r),this.changed()}}translate(e,n){let i=this.getFlatCoordinates();if(i){let r=this.getStride();EN(i,0,i.length,r,e,n,i),this.changed()}}};function QX(t){let e;return t==2?e="XY":t==3?e="XYZ":t==4&&(e="XYZM"),e}function SN(t){let e;return t=="XY"?e=2:t=="XYZ"||t=="XYM"?e=3:t=="XYZM"&&(e=4),e}function MN(t,e,n){let i=t.getFlatCoordinates();if(!i)return null;let r=t.getStride();return un(i,0,i.length,r,e,n)}var rs=Fb;function TN(t,e,n,i,r,o,s){let a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l,d;if(c===0&&u===0)d=e;else{let h=((r-a)*c+(o-l)*u)/(c*c+u*u);if(h>1)d=n;else if(h>0){for(let f=0;f<i;++f)s[f]=kt(t[e+f],t[n+f],h);s.length=i;return}else d=e}for(let h=0;h<i;++h)s[h]=t[d+h];s.length=i}function wd(t,e,n,i,r){let o=t[e],s=t[e+1];for(e+=i;e<n;e+=i){let a=t[e],l=t[e+1],c=Vr(o,s,a,l);c>r&&(r=c),o=a,s=l}return r}function AN(t,e,n,i,r){for(let o=0,s=n.length;o<s;++o){let a=n[o];r=wd(t,e,a,i,r),e=a}return r}function Ed(t,e,n,i,r,o,s,a,l,c,u){if(e==n)return c;let d,h;if(r===0){if(h=Vr(s,a,t[e],t[e+1]),h<c){for(d=0;d<i;++d)l[d]=t[e+d];return l.length=i,h}return c}u=u||[NaN,NaN];let f=e+i;for(;f<n;)if(TN(t,f-i,f,i,s,a,u),h=Vr(s,a,u[0],u[1]),h<c){for(c=h,d=0;d<i;++d)l[d]=u[d];l.length=i,f+=i}else f+=i*Math.max((Math.sqrt(h)-Math.sqrt(c))/r|0,1);if(o&&(TN(t,n-i,e,i,s,a,u),h=Vr(s,a,u[0],u[1]),h<c)){for(c=h,d=0;d<i;++d)l[d]=u[d];l.length=i}return c}function RN(t,e,n,i,r,o,s,a,l,c,u){u=u||[NaN,NaN];for(let d=0,h=n.length;d<h;++d){let f=n[d];c=Ed(t,e,f,i,r,o,s,a,l,c,u),e=f}return c}function ON(t,e,n,i){for(let r=0,o=n.length;r<o;++r)t[e++]=n[r];return e}function Dd(t,e,n,i){for(let r=0,o=n.length;r<o;++r){let s=n[r];for(let a=0;a<i;++a)t[e++]=s[a]}return e}function PN(t,e,n,i,r){r=r||[];let o=0;for(let s=0,a=n.length;s<a;++s){let l=Dd(t,e,n[s],i);r[o++]=l,e=l}return r.length=o,r}function da(t,e,n,i,r,o,s){let a=(n-e)/i;if(a<3){for(;e<n;e+=i)o[s++]=t[e],o[s++]=t[e+1];return s}let l=new Array(a);l[0]=1,l[a-1]=1;let c=[e,n-i],u=0;for(;c.length>0;){let d=c.pop(),h=c.pop(),f=0,p=t[h],m=t[h+1],g=t[d],y=t[d+1];for(let _=h+i;_<d;_+=i){let x=t[_],b=t[_+1],v=$P(x,b,p,m,g,y);v>f&&(u=_,f=v)}f>r&&(l[(u-e)/i]=1,h+i<u&&c.push(h,u),u+i<d&&c.push(u,d))}for(let d=0;d<a;++d)l[d]&&(o[s++]=t[e+d*i],o[s++]=t[e+d*i+1]);return s}function NN(t,e,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){let u=n[l];s=da(t,e,u,i,r,o,s),a.push(s),e=u}return s}function os(t,e){return e*Math.round(t/e)}function JX(t,e,n,i,r,o,s){if(e==n)return s;let a=os(t[e],r),l=os(t[e+1],r);e+=i,o[s++]=a,o[s++]=l;let c,u;do if(c=os(t[e],r),u=os(t[e+1],r),e+=i,e==n)return o[s++]=c,o[s++]=u,s;while(c==a&&u==l);for(;e<n;){let d=os(t[e],r),h=os(t[e+1],r);if(e+=i,d==c&&h==u)continue;let f=c-a,p=u-l,m=d-a,g=h-l;if(f*g==p*m&&(f<0&&m<f||f==m||f>0&&m>f)&&(p<0&&g<p||p==g||p>0&&g>p)){c=d,u=h;continue}o[s++]=c,o[s++]=u,a=c,l=u,c=d,u=h}return o[s++]=c,o[s++]=u,s}function Zg(t,e,n,i,r,o,s,a){for(let l=0,c=n.length;l<c;++l){let u=n[l];s=JX(t,e,u,i,r,o,s),a.push(s),e=u}return s}function $i(t,e,n,i,r){r=r!==void 0?r:[];let o=0;for(let s=e;s<n;s+=i)r[o++]=t.slice(s,s+i);return r.length=o,r}function ac(t,e,n,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){let l=n[s];r[o++]=$i(t,e,l,i,r[o]),e=l}return r.length=o,r}function Lb(t,e,n,i,r){r=r!==void 0?r:[];let o=0;for(let s=0,a=n.length;s<a;++s){let l=n[s];r[o++]=l.length===1&&l[0]===e?[]:ac(t,e,l,i,r[o]),e=l[l.length-1]}return r.length=o,r}function Vb(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){let a=t[e],l=t[e+1];r+=s*a-o*l,o=a,s=l}return r/2}function kN(t,e,n,i){let r=0;for(let o=0,s=n.length;o<s;++o){let a=n[o];r+=Vb(t,e,a,i),e=a}return r}var jb=class t extends rs{constructor(e,n){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}clone(){return new t(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,n,i,r){return r<ec(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ed(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,n,i,r))}getArea(){return Vb(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return $i(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){let n=[];return n.length=da(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new t(n,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Dd(this.flatCoordinates,0,e,this.stride),this.changed()}},Bb=jb;var Ub=class t extends rs{constructor(e,n){super(),this.setCoordinates(e,n)}clone(){let e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){let o=this.flatCoordinates,s=Vr(e,n,o[0],o[1]);if(s<r){let a=this.stride;for(let l=0;l<a;++l)i[l]=o[l];return i.length=a,s}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Ug(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Cb(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ON(this.flatCoordinates,0,e,this.stride),this.changed()}},Id=Ub;function FN(t,e,n,i,r){return!zg(r,function(s){return!ss(t,e,n,i,s[0],s[1])})}function ss(t,e,n,i,r,o){let s=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){let c=t[e],u=t[e+1];l<=o?u>o&&(c-a)*(o-l)-(r-a)*(u-l)>0&&s++:u<=o&&(c-a)*(o-l)-(r-a)*(u-l)<0&&s--,a=c,l=u}return s!==0}function Kg(t,e,n,i,r,o){if(n.length===0||!ss(t,e,n[0],i,r,o))return!1;for(let s=1,a=n.length;s<a;++s)if(ss(t,n[s-1],n[s],i,r,o))return!1;return!0}function Sd(t,e,n,i,r,o,s){let a,l,c,u,d,h,f,p=r[o+1],m=[];for(let _=0,x=n.length;_<x;++_){let b=n[_];for(u=t[b-i],h=t[b-i+1],a=e;a<b;a+=i)d=t[a],f=t[a+1],(p<=h&&f<=p||h<=p&&p<=f)&&(c=(p-h)/(f-h)*(d-u)+u,m.push(c)),u=d,h=f}let g=NaN,y=-1/0;for(m.sort(cn),u=m[0],a=1,l=m.length;a<l;++a){d=m[a];let _=Math.abs(d-u);_>y&&(c=(u+d)/2,Kg(t,e,n,i,c,p)&&(g=c,y=_)),u=d}return isNaN(g)&&(g=r[o]),s?(s.push(g,p,y),s):[g,p,y]}function LN(t,e,n,i,r){let o=[];for(let s=0,a=n.length;s<a;++s){let l=n[s];o=Sd(t,e,l,i,r,2*s,o),e=l[l.length-1]}return o}function Qg(t,e,n,i,r){let o;for(e+=i;e<n;e+=i)if(o=r(t.slice(e-i,e),t.slice(e,e+i)),o)return o;return!1}function Jg(t,e,n,i,r){let o=wb(at(),t,e,n,i);return Ke(r,o)?zr(r,o)||o[0]>=r[0]&&o[2]<=r[2]||o[1]>=r[1]&&o[3]<=r[3]?!0:Qg(t,e,n,i,function(s,a){return tN(r,s,a)}):!1}function zb(t,e,n,i,r){return!!(Jg(t,e,n,i,r)||ss(t,e,n,i,r[0],r[1])||ss(t,e,n,i,r[0],r[3])||ss(t,e,n,i,r[2],r[1])||ss(t,e,n,i,r[2],r[3]))}function VN(t,e,n,i,r){if(!zb(t,e,n[0],i,r))return!1;if(n.length===1)return!0;for(let o=1,s=n.length;o<s;++o)if(FN(t,n[o-1],n[o],i,r)&&!Jg(t,n[o-1],n[o],i,r))return!1;return!0}function jN(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){let o=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=o}e+=i,n-=i}}function Hb(t,e,n,i){let r=0,o=t[n-i],s=t[n-i+1];for(;e<n;e+=i){let a=t[e],l=t[e+1];r+=(a-o)*(l+s),o=a,s=l}return r===0?void 0:r>0}function BN(t,e,n,i,r){r=r!==void 0?r:!1;for(let o=0,s=n.length;o<s;++o){let a=n[o],l=Hb(t,e,a,i);if(o===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function $b(t,e,n,i,r){r=r!==void 0?r:!1;for(let o=0,s=n.length;o<s;++o){let a=n[o],l=Hb(t,e,a,i);(o===0?r&&l||!r&&!l:r&&!l||!r&&l)&&jN(t,e,a,i),e=a}return e}function UN(t,e){let n=[],i=0,r=0,o;for(let s=0,a=e.length;s<a;++s){let l=e[s],c=Hb(t,i,l,2);if(o===void 0&&(o=c),c===o)n.push(e.slice(r,s+1));else{if(n.length===0)continue;n[n.length-1].push(e[r])}r=s+1,i=l}return n}var em=class t extends rs{constructor(e,n,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,n!==void 0&&i?(this.setFlatCoordinates(n,e),this.ends_=i):this.setCoordinates(e,n)}appendLinearRing(e){this.flatCoordinates?Zo(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let e=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<ec(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(AN(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),RN(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,n,i,r))}containsXY(e,n){return Kg(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,n)}getArea(){return kN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let n;return e!==void 0?(n=this.getOrientedFlatCoordinates().slice(),$b(n,0,this.ends_,this.stride,e)):n=this.flatCoordinates,ac(n,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){let e=Yn(this.getExtent());this.flatInteriorPoint_=Sd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Id(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new Bb(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){let e=this.layout,n=this.flatCoordinates,i=this.ends_,r=[],o=0;for(let s=0,a=i.length;s<a;++s){let l=i[s],c=new Bb(n.slice(o,l),e);r.push(c),o=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let e=this.flatCoordinates;BN(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=$b(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){let n=[],i=[];return n.length=Zg(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),n,0,i),new t(n,"XY",i)}getType(){return"Polygon"}intersectsExtent(e){return VN(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=PN(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}},zN=em;function Wb(t){if(es(t))throw new Error("Cannot create polygon from empty extent");let e=t[0],n=t[1],i=t[2],r=t[3],o=[e,n,e,r,i,r,i,n,e,n];return new em(o,"XY",[o.length])}var Gb=0,Yb=class extends ht{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=qg(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&lN(),e.center&&(e.center=mi(e.center,this.projection_)),e.extent&&(e.extent=yi(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){let n=Object.assign({},e);for(let a in qn)delete n[a];this.setProperties(n,!0);let i=t9(e);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=i.minZoom;let r=e9(e),o=i.constraint,s=n9(e);this.constraints_={center:r,resolution:o,rotation:s},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let n=this.padding_;this.padding_=e;let i=this.getCenterInternal();if(i){let r=e||[0,0,0,0];n=n||[0,0,0,0];let o=this.getResolution(),s=o/2*(r[3]-n[3]+n[1]-r[1]),a=o/2*(r[0]-n[0]+n[2]-r[2]);this.setCenterInternal([i[0]+s,i[1]-a])}}getUpdatedOptions_(e){let n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),Object.assign({},n,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);let n=new Array(arguments.length);for(let i=0;i<n.length;++i){let r=arguments[i];r.center&&(r=Object.assign({},r),r.center=mi(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=mi(r.anchor,this.getProjection())),n[i]=r}this.animateInternal.apply(this,n)}animateInternal(e){let n=arguments.length,i;n>1&&typeof arguments[n-1]=="function"&&(i=arguments[n-1],--n);let r=0;for(;r<n&&!this.isDef();++r){let u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===n){i&&tm(i,!0);return}let o=Date.now(),s=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_,c=[];for(;r<n;++r){let u=arguments[r],d={start:o,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||yN,callback:i};if(u.center&&(d.sourceCenter=s,d.targetCenter=u.center.slice(),s=d.targetCenter),u.zoom!==void 0?(d.sourceResolution=a,d.targetResolution=this.getResolutionForZoom(u.zoom),a=d.targetResolution):u.resolution&&(d.sourceResolution=a,d.targetResolution=u.resolution,a=d.targetResolution),u.rotation!==void 0){d.sourceRotation=l;let h=jr(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;d.targetRotation=l+h,l=d.targetRotation}i9(d)?d.complete=!0:o+=d.duration,c.push(d)}this.animations_.push(c),this.setHint(xt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[xt.ANIMATING]>0}getInteracting(){return this.hints_[xt.INTERACTING]>0}cancelAnimations(){this.setHint(xt.ANIMATING,-this.hints_[xt.ANIMATING]);let e;for(let n=0,i=this.animations_.length;n<i;++n){let r=this.animations_[n];if(r[0].callback&&tm(r[0].callback,!1),!e)for(let o=0,s=r.length;o<s;++o){let a=r[o];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;let e=Date.now(),n=!1;for(let i=this.animations_.length-1;i>=0;--i){let r=this.animations_[i],o=!0;for(let s=0,a=r.length;s<a;++s){let l=r[s];if(l.complete)continue;let c=e-l.start,u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):o=!1;let d=l.easing(u);if(l.sourceCenter){let h=l.sourceCenter[0],f=l.sourceCenter[1],p=l.targetCenter[0],m=l.targetCenter[1];this.nextCenter_=l.targetCenter;let g=h+d*(p-h),y=f+d*(m-f);this.targetCenter_=[g,y]}if(l.sourceResolution&&l.targetResolution){let h=d===1?l.targetResolution:l.sourceResolution+d*(l.targetResolution-l.sourceResolution);if(l.anchor){let f=this.getViewportSize_(this.getRotation()),p=this.constraints_.resolution(h,0,f,!0);this.targetCenter_=this.calculateCenterZoom(p,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=h,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){let h=d===1?jr(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+d*(l.targetRotation-l.sourceRotation);if(l.anchor){let f=this.constraints_.rotation(h,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=h}if(this.applyTargetState_(!0),n=!0,!l.complete)break}if(o){this.animations_[i]=null,this.setHint(xt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;let s=r[0].callback;s&&tm(s,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,n){let i,r=this.getCenterInternal();return r!==void 0&&(i=[r[0]-n[0],r[1]-n[1]],oc(i,e-this.getRotation()),iN(i,n)),i}calculateCenterZoom(e,n){let i,r=this.getCenterInternal(),o=this.getResolution();if(r!==void 0&&o!==void 0){let s=n[0]-e*(n[0]-r[0])/o,a=n[1]-e*(n[1]-r[1])/o;i=[s,a]}return i}getViewportSize_(e){let n=this.viewportSize_;if(e){let i=n[0],r=n[1];return[Math.abs(i*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(i*Math.sin(e))+Math.abs(r*Math.cos(e))]}return n}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){let e=this.getCenterInternal();return e&&Cd(e,this.getProjection())}getCenterInternal(){return this.get(qn.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){let n=this.calculateExtentInternal(e);return is(n,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();let n=this.getCenterInternal();Z(n,"The view center is not defined");let i=this.getResolution();Z(i!==void 0,"The view resolution is not defined");let r=this.getRotation();return Z(r!==void 0,"The view rotation is not defined"),bd(n,i,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(qn.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,n){return this.getResolutionForExtentInternal(yi(e,this.getProjection()),n)}getResolutionForExtentInternal(e,n){n=n||this.getViewportSizeMinusPadding_();let i=ce(e)/n[0],r=Ye(e)/n[1];return Math.max(i,r)}getResolutionForValueFunction(e){e=e||2;let n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/Math.log(e);return function(o){return n/Math.pow(e,o*r)}}getRotation(){return this.get(qn.ROTATION)}getValueForResolutionFunction(e){let n=Math.log(e||2),i=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,o=Math.log(i/r)/n;return function(s){return Math.log(i/s)/n/o}}getViewportSizeMinusPadding_(e){let n=this.getViewportSize_(e),i=this.padding_;return i&&(n=[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]),n}getState(){let e=this.getProjection(),n=this.getResolution(),i=this.getRotation(),r=this.getCenterInternal(),o=this.padding_;if(o){let s=this.getViewportSizeMinusPadding_();r=qb(r,this.getViewportSize_(),[s[0]/2+o[3],s[1]/2+o[0]],n,i)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e,n=this.getResolution();return n!==void 0&&(e=this.getZoomForResolution(n)),e}getZoomForResolution(e){let n=this.minZoom_||0,i,r;if(this.resolutions_){let o=Gl(this.resolutions_,e,1);n=o,i=this.resolutions_[o],o==this.resolutions_.length-1?r=2:r=i/this.resolutions_[o+1]}else i=this.maxResolution_,r=this.zoomFactor_;return n+Math.log(i/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;let n=Oe(Math.floor(e),0,this.resolutions_.length-2),i=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(i,Oe(e-n,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,n){let i;if(Z(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){Z(!es(e),"Cannot fit empty extent provided as `geometry`");let r=yi(e,this.getProjection());i=Wb(r)}else if(e.getType()==="Circle"){let r=yi(e.getExtent(),this.getProjection());i=Wb(r),i.rotate(this.getRotation(),Yn(r))}else{let r=Wr();r?i=e.clone().transform(r,this.getProjection()):i=e}this.fitInternal(i,n)}rotatedExtentForGeometry(e){let n=this.getRotation(),i=Math.cos(n),r=Math.sin(-n),o=e.getFlatCoordinates(),s=e.getStride(),a=1/0,l=1/0,c=-1/0,u=-1/0;for(let d=0,h=o.length;d<h;d+=s){let f=o[d]*i-o[d+1]*r,p=o[d]*r+o[d+1]*i;a=Math.min(a,f),l=Math.min(l,p),c=Math.max(c,f),u=Math.max(u,p)}return[a,l,c,u]}fitInternal(e,n){n=n||{};let i=n.size;i||(i=this.getViewportSizeMinusPadding_());let r=n.padding!==void 0?n.padding:[0,0,0,0],o=n.nearest!==void 0?n.nearest:!1,s;n.minResolution!==void 0?s=n.minResolution:n.maxZoom!==void 0?s=this.getResolutionForZoom(n.maxZoom):s=0;let a=this.rotatedExtentForGeometry(e),l=this.getResolutionForExtentInternal(a,[i[0]-r[1]-r[3],i[1]-r[0]-r[2]]);l=isNaN(l)?s:Math.max(l,s),l=this.getConstrainedResolution(l,o?0:1);let c=this.getRotation(),u=Math.sin(c),d=Math.cos(c),h=Yn(a);h[0]+=(r[1]-r[3])/2*l,h[1]+=(r[0]-r[2])/2*l;let f=h[0]*d-h[1]*u,p=h[1]*d+h[0]*u,m=this.getConstrainedCenter([f,p],l),g=n.callback?n.callback:hi;n.duration!==void 0?this.animateInternal({resolution:l,center:m,duration:n.duration,easing:n.easing},g):(this.targetResolution_=l,this.targetCenter_=m,this.applyTargetState_(!1,!0),tm(g,!0))}centerOn(e,n,i){this.centerOnInternal(mi(e,this.getProjection()),n,i)}centerOnInternal(e,n,i){this.setCenterInternal(qb(e,n,i,this.getResolution(),this.getRotation()))}calculateCenterShift(e,n,i,r){let o,s=this.padding_;if(s&&e){let a=this.getViewportSizeMinusPadding_(-i),l=qb(e,r,[a[0]/2+s[3],a[1]/2+s[0]],n,i);o=[e[0]-l[0],e[1]-l[1]]}return o}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){let n=Cd(this.targetCenter_,this.getProjection());this.setCenter([n[0]+e[0],n[1]+e[1]])}adjustCenterInternal(e){let n=this.targetCenter_;this.setCenterInternal([n[0]+e[0],n[1]+e[1]])}adjustResolution(e,n){n=n&&mi(n,this.getProjection()),this.adjustResolutionInternal(e,n)}adjustResolutionInternal(e,n){let i=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),o=this.constraints_.resolution(this.targetResolution_*e,0,r,i);n&&(this.targetCenter_=this.calculateCenterZoom(o,n)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,n){this.adjustResolution(Math.pow(this.zoomFactor_,-e),n)}adjustRotation(e,n){n&&(n=mi(n,this.getProjection())),this.adjustRotationInternal(e,n)}adjustRotationInternal(e,n){let i=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,i);n&&(this.targetCenter_=this.calculateCenterRotate(r,n)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&mi(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,n){return this.hints_[e]+=n,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,n){let i=this.getAnimating()||this.getInteracting()||n,r=this.constraints_.rotation(this.targetRotation_,i),o=this.getViewportSize_(r),s=this.constraints_.resolution(this.targetResolution_,0,o,i),a=this.constraints_.center(this.targetCenter_,s,o,i,this.calculateCenterShift(this.targetCenter_,s,r,o));this.get(qn.ROTATION)!==r&&this.set(qn.ROTATION,r),this.get(qn.RESOLUTION)!==s&&(this.set(qn.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(qn.CENTER)||!ca(this.get(qn.CENTER),a))&&this.set(qn.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,n,i){e=e!==void 0?e:200;let r=n||0,o=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(o),a=this.constraints_.resolution(this.targetResolution_,r,s),l=this.constraints_.center(this.targetCenter_,a,s,!1,this.calculateCenterShift(this.targetCenter_,a,o,s));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=o,this.targetCenter_=l,this.applyTargetState_();return}i=i||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==o||!this.getCenterInternal()||!ca(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:o,center:l,resolution:a,duration:e,easing:Zn,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(xt.INTERACTING,1)}endInteraction(e,n,i){i=i&&mi(i,this.getProjection()),this.endInteractionInternal(e,n,i)}endInteractionInternal(e,n,i){this.getInteracting()&&(this.setHint(xt.INTERACTING,-1),this.resolveConstraints(e,n,i))}getConstrainedCenter(e,n){let i=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,n||this.getResolution(),i)}getConstrainedZoom(e,n){let i=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(i,n))}getConstrainedResolution(e,n){n=n||0;let i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,n,i)}};function tm(t,e){setTimeout(function(){t(e)},0)}function e9(t){if(t.extent!==void 0){let n=t.smoothExtentConstraint!==void 0?t.smoothExtentConstraint:!0;return Tb(t.extent,t.constrainOnlyCenter,n)}let e=qg(t.projection,"EPSG:3857");if(t.multiWorld!==!0&&e.isGlobal()){let n=e.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Tb(n,!1,!1)}return hN}function t9(t){let e,n,i,s=t.minZoom!==void 0?t.minZoom:Gb,a=t.maxZoom!==void 0?t.maxZoom:28,l=t.zoomFactor!==void 0?t.zoomFactor:2,c=t.multiWorld!==void 0?t.multiWorld:!1,u=t.smoothResolutionConstraint!==void 0?t.smoothResolutionConstraint:!0,d=t.showFullExtent!==void 0?t.showFullExtent:!1,h=qg(t.projection,"EPSG:3857"),f=h.getExtent(),p=t.constrainOnlyCenter,m=t.extent;if(!c&&!m&&h.isGlobal()&&(p=!1,m=f),t.resolutions!==void 0){let g=t.resolutions;n=g[s],i=g[a]!==void 0?g[a]:g[g.length-1],t.constrainResolution?e=fN(g,u,!p&&m,d):e=Ob(n,i,u,!p&&m,d)}else{let y=(f?Math.max(ce(f),Ye(f)):360*Br.degrees/h.getMetersPerUnit())/256/Math.pow(2,Gb),_=y/Math.pow(2,28-Gb);n=t.maxResolution,n!==void 0?s=0:n=y/Math.pow(l,s),i=t.minResolution,i===void 0&&(t.maxZoom!==void 0?t.maxResolution!==void 0?i=n/Math.pow(l,a):i=y/Math.pow(l,a):i=_),a=s+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-s),t.constrainResolution?e=pN(l,n,i,u,!p&&m,d):e=Ob(n,i,u,!p&&m,d)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:s,zoomFactor:l}}function n9(t){if(t.enableRotation!==void 0?t.enableRotation:!0){let n=t.constrainRotation;return n===void 0||n===!0?mN():n===!1?Pb:typeof n=="number"?gN(n):Pb}return sc}function i9(t){return!(t.sourceCenter&&t.targetCenter&&!ca(t.sourceCenter,t.targetCenter)||t.sourceResolution!==t.targetResolution||t.sourceRotation!==t.targetRotation)}function qb(t,e,n,i,r){let o=Math.cos(-r),s=Math.sin(-r),a=t[0]*o-t[1]*s,l=t[1]*o+t[0]*s;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,s=-s;let c=a*o-l*s,u=l*o+a*s;return[c,u]}var dn=Yb;var Xb=class extends Fg{constructor(e){let n=Object.assign({},e);delete n.source,super(n),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(Se.SOURCE,this.handleSourcePropertyChange_);let i=e.source?e.source:null;this.setSource(i)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(Se.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){let e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(xe(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;let e=this.getSource();e&&(this.sourceChangeKey_=oe(e,V.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let n,i=this.getMapInternal();!e&&i&&(e=i.getView()),e instanceof dn?n={viewState:e.getState(),extent:e.calculateExtent()}:n=e,!n.layerStatesArray&&i&&(n.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let r;n.layerStatesArray?r=n.layerStatesArray.find(s=>s.layer===this):r=this.getLayerState();let o=this.getExtent();return Md(r,n.viewState)&&(!o||Ke(o,n.extent))}getAttributions(e){if(!this.isVisible(e))return[];let n,i=this.getSource();if(i&&(n=i.getAttributions()),!n)return[];let r=e instanceof dn?e.getViewStateAndExtent():e,o=n(r);return Array.isArray(o)||(o=[o]),o}render(e,n){let i=this.getRenderer();return i.prepareFrame(e)?(this.rendered=!0,i.renderFrame(e,n)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,n){}renderDeferred(e){let n=this.getRenderer();n&&n.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(Se.MAP,e)}getMapInternal(){return this.get(Se.MAP)}setMap(e){this.mapPrecomposeKey_&&(xe(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(xe(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=oe(e,Ft.PRECOMPOSE,function(n){let r=n.frameState.layerStatesArray,o=this.getLayerState(!1);Z(!r.some(function(s){return s.layer===o.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(o)},this),this.mapRenderKey_=oe(this,V.CHANGE,e.render,e),this.changed())}setSource(e){this.set(Se.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function Md(t,e){if(!t.visible)return!1;let n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;let i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}var ha=Xb;var Dk=mE(Qb(),1);var Q={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Jb(t){return t[0]>0&&t[1]>0}function $N(t,e,n){return n===void 0&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function pt(t,e){return Array.isArray(t)?t:(e===void 0?e=[t,t]:(e[0]=t,e[1]=t),e)}var eC=class t{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=pt(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new t({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return ue()}getImage(e){return ue()}getHitDetectionImage(){return ue()}getPixelRatio(e){return 1}getImageState(){return ue()}getImageSize(){return ue()}getOrigin(){return ue()}getSize(){return ue()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=pt(e)}listenImageChange(e){ue()}load(){ue()}unlistenImageChange(e){ue()}ready(){return Promise.resolve()}},nm=eC;var Gr={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var fa={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};fa.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};fa.max=fa.whitepoint[2].D65;fa.rgb=function(t,e){e=e||fa.whitepoint[2].E;var n=t[0]/e[0],i=t[1]/e[1],r=t[2]/e[2],o,s,a;return o=n*3.240969941904521+i*-1.537383177570093+r*-.498610760293,s=n*-.96924363628087+i*1.87596750150772+r*.041555057407175,a=n*.055630079696993+i*-.20397695888897+r*1.056971514242878,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,o=Math.min(Math.max(0,o),1),s=Math.min(Math.max(0,s),1),a=Math.min(Math.max(0,a),1),[o*255,s*255,a*255]};Gr.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var o=n*.41239079926595+i*.35758433938387+r*.18048078840183,s=n*.21263900587151+i*.71516867876775+r*.072192315360733,a=n*.019330818715591+i*.11919477979462+r*.95053215224966;return e=e||fa.whitepoint[2].E,[o*e[0],s*e[1],a*e[2]]};var hn=fa;var im={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,o,s,a,l,c,u,d,h,f,p,m;if(o=t[0],s=t[1],a=t[2],o===0)return[0,0,0];var g=.0011070564598794539;return e=e||"D65",n=n||2,d=hn.whitepoint[n][e][0],h=hn.whitepoint[n][e][1],f=hn.whitepoint[n][e][2],p=4*d/(d+15*h+3*f),m=9*h/(d+15*h+3*f),i=s/(13*o)+p||0,r=a/(13*o)+m||0,c=o>8?h*Math.pow((o+16)/116,3):h*o*g,l=c*9*i/(4*r)||0,u=c*(12-3*i-20*r)/(4*r)||0,[l,c,u]}};hn.luv=function(t,e,n){var i,r,o,s,a,l,c,u,d,h,f,p,m,g=.008856451679035631,y=903.2962962962961;e=e||"D65",n=n||2,d=hn.whitepoint[n][e][0],h=hn.whitepoint[n][e][1],f=hn.whitepoint[n][e][2],p=4*d/(d+15*h+3*f),m=9*h/(d+15*h+3*f),l=t[0],c=t[1],u=t[2],i=4*l/(l+15*c+3*u)||0,r=9*c/(l+15*c+3*u)||0;var _=c/h;return o=_<=g?y*_:116*Math.pow(_,1/3)-16,s=13*o*(i-p),a=13*o*(r-m),[o,s,a]};var WN={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e=t[0],n=t[1],i=t[2],r,o,s;return s=i/360*2*Math.PI,r=n*Math.cos(s),o=n*Math.sin(s),[e,r,o]},xyz:function(t){return im.xyz(WN.luv(t))}},GN=WN;im.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),o=Math.atan2(i,n),s=o*360/2/Math.PI;return s<0&&(s+=360),[e,r,s]};hn.lchuv=function(t){return im.lchuv(hn.luv(t))};var tC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var YN=r9,qN={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function r9(t){var e,n=[],i=1,r;if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(typeof t=="number")return{space:"rgb",values:[t>>>16,(t&65280)>>>8,t&255],alpha:1};if(t=String(t).toLowerCase(),tC[t])n=tC[t].slice(),r="rgb";else if(t==="transparent")i=0,r="rgb",n=[0,0,0];else if(t[0]==="#"){var o=t.slice(1),s=o.length,a=s<=4;i=1,a?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],s===4&&(i=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],s===8&&(i=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];r=l.replace(/a$/,"");var c=r==="cmyk"?4:r==="gray"?1:3;n=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=n.shift()),n=n.map(function(u,d){if(u[u.length-1]==="%")return u=parseFloat(u)/100,d===3?u:r==="rgb"?u*255:r[0]==="h"||r[0]==="l"&&!d?u*100:r==="lab"?u*125:r==="lch"?d<2?u*150:u*360:r[0]==="o"&&!d?u:r==="oklab"?u*.4:r==="oklch"?d<2?u*.4:u*360:u;if(r[d]==="h"||d===2&&r[r.length-1]==="h"){if(qN[u]!==void 0)return qN[u];if(u.endsWith("deg"))return parseFloat(u);if(u.endsWith("turn"))return parseFloat(u)*360;if(u.endsWith("grad"))return parseFloat(u)*360/400;if(u.endsWith("rad"))return parseFloat(u)*180/Math.PI}return u==="none"?0:parseFloat(u)}),i=n.length>c?n.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(n=t.match(/([0-9]+)/g).map(function(u){return parseFloat(u)}),r=t.match(/([a-z])/ig)?.join("")?.toLowerCase()||"rgb");return{space:r,values:n,alpha:i}}var rm={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e=t[0]/360,n=t[1]/100,i=t[2]/100,r,o,s,a,l,c=0;if(n===0)return l=i*255,[l,l,l];for(o=i<.5?i*(1+n):i+n-i*n,r=2*i-o,a=[0,0,0];c<3;)s=e+1/3*-(c-1),s<0?s++:s>1&&s--,l=6*s<1?r+(o-r)*6*s:2*s<1?o:3*s<2?r+(o-r)*(2/3-s)*6:r,a[c++]=l*255;return a}};Gr.hsl=function(t){var e=t[0]/255,n=t[1]/255,i=t[2]/255,r=Math.min(e,n,i),o=Math.max(e,n,i),s=o-r,a,l,c;return o===r?a=0:e===o?a=(n-i)/s:n===o?a=2+(i-e)/s:i===o&&(a=4+(e-n)/s),a=Math.min(a*60,360),a<0&&(a+=360),c=(r+o)/2,o===r?l=0:c<=.5?l=s/(o+r):l=s/(2-o-r),[a,l*100,c*100]};function nC(t){Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var e,n,i,r=YN(t);if(!r.space)return[];let o=r.space[0]==="h"?rm.min:Gr.min,s=r.space[0]==="h"?rm.max:Gr.max;return e=Array(3),e[0]=Math.min(Math.max(r.values[0],o[0]),s[0]),e[1]=Math.min(Math.max(r.values[1],o[1]),s[1]),e[2]=Math.min(Math.max(r.values[2],o[2]),s[2]),r.space[0]==="h"&&(e=rm.rgb(e)),e.push(Math.min(Math.max(r.alpha,0),1)),e}function XN(t){return typeof t=="string"?t:Ad(t)}var o9=1024,Td={},iC=0;function ZN(t){if(t.length===4)return t;let e=t.slice();return e[3]=1,e}function rC(t){let e=hn.lchuv(Gr.xyz(t));return e[3]=t[3],e}function KN(t){let e=hn.rgb(GN.xyz(t));return e[3]=t[3],e}function om(t){if(Td.hasOwnProperty(t))return Td[t];if(iC>=o9){let n=0;for(let i in Td)n++&3||(delete Td[i],--iC)}let e=nC(t);if(e.length!==4)throw new Error('Failed to parse "'+t+'" as color');for(let n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return oC(e),Td[t]=e,++iC,e}function qr(t){return Array.isArray(t)?t:om(t)}function oC(t){return t[0]=Oe(t[0]+.5|0,0,255),t[1]=Oe(t[1]+.5|0,0,255),t[2]=Oe(t[2]+.5|0,0,255),t[3]=Oe(t[3],0,1),t}function Ad(t){let e=t[0];e!=(e|0)&&(e=e+.5|0);let n=t[1];n!=(n|0)&&(n=n+.5|0);let i=t[2];i!=(i|0)&&(i=i+.5|0);let r=t[3]===void 0?1:Math.round(t[3]*1e3)/1e3;return"rgba("+e+","+n+","+i+","+r+")"}function QN(t){try{return om(t),!0}catch{return!1}}var as=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",JN=as.includes("firefox"),s9=as.includes("safari")&&!as.includes("chrom"),yfe=s9&&(as.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(as)),ek=as.includes("webkit")&&!as.includes("edge"),sC=as.includes("macintosh"),sm=typeof devicePixelRatio<"u"?devicePixelRatio:1,am=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,aC=typeof Image<"u"&&Image.prototype.decode;var lm=function(){let t=!1;try{let e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}();function Le(t,e,n,i){let r;return n&&n.length?r=n.shift():am?r=new OffscreenCanvas(t||300,e||300):r=document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}var lC;function lc(){return lC||(lC=Le(1,1)),lC}function pa(t){let e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function cC(t,e){let n=e.parentNode;n&&n.replaceChild(t,e)}function Rd(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function tk(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function nk(t,e){let n=t.childNodes;for(let i=0;;++i){let r=n[i],o=e[i];if(!r&&!o)break;if(r!==o){if(!r){t.appendChild(o);continue}if(!o){t.removeChild(r),--i;continue}t.insertBefore(o,r)}}}function ik(t,e,n){let i=t,r=!0,o=!1,s=!1,a=[ql(i,V.LOAD,function(){s=!0,o||e()})];return i.src&&aC?(o=!0,i.decode().then(function(){r&&e()}).catch(function(l){r&&(s?e():n())})):a.push(ql(i,V.ERROR,n)),function(){r=!1,a.forEach(xe)}}function a9(t,e){return new Promise((n,i)=>{function r(){s(),n(t)}function o(){s(),i(new Error("Image load error"))}function s(){t.removeEventListener("load",r),t.removeEventListener("error",o)}t.addEventListener("load",r),t.addEventListener("error",o),e&&(t.src=e)})}function rk(t,e){return e&&(t.src=e),t.src&&aC?new Promise((n,i)=>t.decode().then(()=>n(t)).catch(r=>t.complete&&t.width?n(t):i(r))):a9(t)}var dC=class{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(let n in this.cache_){let i=this.cache_[n];!(e++&3)&&!i.hasListener()&&(delete this.cache_[n],delete this.patternCache_[n],--this.cacheSize_)}}}get(e,n,i){let r=uC(e,n,i);return r in this.cache_?this.cache_[r]:null}getPattern(e,n,i){let r=uC(e,n,i);return r in this.patternCache_?this.patternCache_[r]:null}set(e,n,i,r,o){let s=uC(e,n,i),a=s in this.cache_;this.cache_[s]=r,o&&(r.getImageState()===Q.IDLE&&r.load(),r.getImageState()===Q.LOADING?r.ready().then(()=>{this.patternCache_[s]=lc().createPattern(r.getImage(1),"repeat")}):this.patternCache_[s]=lc().createPattern(r.getImage(1),"repeat")),a||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}};function uC(t,e,n){let i=n?qr(n):"null";return e+":"+t+":"+i}var An=new dC;var Od=null,hC=class extends Ko{constructor(e,n,i,r,o){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=r===void 0?Q.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=n,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Q.LOADED){Od||(Od=Le(1,1,void 0,{willReadFrequently:!0})),Od.drawImage(this.image_,0,0);try{Od.getImageData(0,0,1,1),this.tainted_=!1}catch{Od=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(V.CHANGE)}handleImageError_(){this.imageState_=Q.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Q.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){let e=this.size_[0],n=this.size_[1],i=Le(e,n);i.fillRect(0,0,e,n),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Q.IDLE){this.image_||this.initializeImage_(),this.imageState_=Q.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&rk(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Q.LOADED)return;let n=this.image_,i=document.createElement("canvas");i.width=Math.ceil(n.width*e),i.height=Math.ceil(n.height*e);let r=i.getContext("2d");r.scale(e,e),r.drawImage(n,0,0),r.globalCompositeOperation="multiply",r.fillStyle=XN(this.color_),r.fillRect(0,0,i.width/e,i.height/e),r.globalCompositeOperation="destination-in",r.drawImage(n,0,0),this.canvas_[e]=i}ready(){return this.ready_||(this.ready_=new Promise(e=>{this.imageState_===Q.LOADED||this.imageState_===Q.ERROR?e():this.addEventListener(V.CHANGE,function n(){(this.imageState_===Q.LOADED||this.imageState_===Q.ERROR)&&(this.removeEventListener(V.CHANGE,n),e())})})),this.ready_}};function cc(t,e,n,i,r,o){let s=e===void 0?void 0:An.get(e,n,r);return s||(s=new hC(t,t&&"src"in t?t.src||void 0:e,n,i,r),An.set(e,n,r,s,o)),o&&s&&!An.getPattern(e,n,r)&&An.set(e,n,r,s,o),s}function fn(t){return t?Array.isArray(t)?Ad(t):typeof t=="object"&&"src"in t?l9(t):t:null}function l9(t){if(!t.offset||!t.size)return An.getPattern(t.src,"anonymous",t.color);let e=t.src+":"+t.offset,n=An.getPattern(e,void 0,t.color);if(n)return n;let i=An.get(t.src,"anonymous",null);if(i.getImageState()!==Q.LOADED)return null;let r=Le(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),cc(r.canvas,e,void 0,Q.LOADED,t.color,!0),An.getPattern(e,void 0,t.color)}var Pd="ol-hidden";var ls="ol-unselectable";var uc="ol-control",fC="ol-collapsed",c9=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),ok=["style","variant","weight","size","lineHeight","family"],pC=function(t){let e=t.match(c9);if(!e)return null;let n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=ok.length;i<r;++i){let o=e[i+1];o!==void 0&&(n[ok[i]]=o)}return n.families=n.family.split(/,\s?/),n};var um="10px sans-serif",Ct="#000",Gi="round",pn=[],gn=0,qi="round",Yr=10,Xr="#000",cs="center",ga="middle",Zr=[0,0,0,0],Kr=1,Wi=new ht,dc=null,gC,mC={},sk=function(){let e="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10\uF013",o,s;function a(c,u,d){let h=!0;for(let f=0;f<i;++f){let p=n[f];if(s=cm(c+" "+u+" "+e+p,r),d!=p){let m=cm(c+" "+u+" "+e+d+","+p,r);h=h&&m!=s}}return!!h}function l(){let c=!0,u=Wi.getKeys();for(let d=0,h=u.length;d<h;++d){let f=u[d];Wi.get(f)<100&&(a.apply(this,f.split(`
`))?(Hi(mC),dc=null,gC=void 0,Wi.set(f,100)):(Wi.set(f,Wi.get(f)+1,!0),c=!1))}c&&(clearInterval(o),o=void 0)}return function(c){let u=pC(c);if(!u)return;let d=u.families;for(let h=0,f=d.length;h<f;++h){let p=d[h],m=u.style+`
`+u.weight+`
`+p;Wi.get(m)===void 0&&(Wi.set(m,100,!0),a(u.style,u.weight,p)||(Wi.set(m,0,!0),o===void 0&&(o=setInterval(l,32))))}}}(),u9=function(){let t;return function(e){let n=mC[e];if(n==null){if(am){let i=pC(e),r=ak(e,"\u017Dg");n=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);mC[e]=n}return n}}();function ak(t,e){return dc||(dc=Le(1,1)),t!=gC&&(dc.font=t,gC=dc.font),dc.measureText(e)}function cm(t,e){return ak(t,e).width}function yC(t,e,n){if(e in n)return n[e];let i=e.split(`
`).reduce((r,o)=>Math.max(r,cm(t,o)),0);return n[e]=i,i}function lk(t,e){let n=[],i=[],r=[],o=0,s=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){let d=e[c];if(d===`
`||c===u){o=Math.max(o,s),r.push(s),s=0,a+=l,l=0;continue}let h=e[c+1]||t.font,f=cm(h,d);n.push(f),s+=f;let p=u9(h);i.push(p),l=Math.max(l,p)}return{width:o,height:a,widths:n,heights:i,lineWidths:r}}function ck(t,e,n,i,r,o,s,a,l,c,u){t.save(),n!==1&&(t.globalAlpha===void 0?t.globalAlpha=d=>d.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),d9(i,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(i,r,o,s,a,0,0,s,a)):t.drawImage(i,r,o,s,a,l,c,s*u[0],a*u[1]),t.restore()}function d9(t,e){let n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}var _C=class t extends nm{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Q.LOADING:Q.LOADED,this.imageState_===Q.LOADING&&this.ready().then(()=>this.imageState_=Q.LOADED),this.render()}clone(){let e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}getAnchor(){let e=this.size_,n=this.getDisplacement(),i=this.getScaleArray();return[e[0]/2-n[0]/i[0],e[1]/2+n[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let n=this.canvases_[e];if(!n){let i=this.renderOptions_,r=Le(i.size*e,i.size*e);this.draw_(i,r,e),n=r.canvas,this.canvases_[e]=n}return n}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,n,i){if(n===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return n;let r=this.radius_,o=this.radius2_===void 0?r:this.radius2_;if(r<o){let C=r;r=o,o=C}let s=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/s,l=o*Math.sin(a),c=Math.sqrt(o*o-l*l),u=r-c,d=Math.sqrt(l*l+u*u),h=d/l;if(e==="miter"&&h<=i)return h*n;let f=n/2/h,p=n/2*(u/d),g=Math.sqrt((r+f)*(r+f)+p*p)-r;if(this.radius2_===void 0||e==="bevel")return g*2;let y=r*Math.sin(a),_=Math.sqrt(r*r-y*y),x=o-_,v=Math.sqrt(y*y+x*x)/y;if(v<=i){let C=v*n/2-o-r;return 2*Math.max(g,C)}return g*2}createRenderOptions(){let e=Gi,n=qi,i=0,r=null,o=0,s,a=0;this.stroke_&&(s=fn(this.stroke_.getColor()??Xr),a=this.stroke_.getWidth()??Kr,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??qi,e=this.stroke_.getLineCap()??Gi,i=this.stroke_.getMiterLimit()??Yr);let l=this.calculateLineJoinSize_(n,a,i),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:s,strokeWidth:a,size:u,lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();let e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,n,i){if(n.scale(i,i),n.translate(e.size/2,e.size/2),this.createPath_(n),this.fill_){let r=this.fill_.getColor();r===null&&(r=Ct),n.fillStyle=fn(r),n.fill()}e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineCap=e.lineCap,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}createHitDetectionCanvas_(e){let n;if(this.fill_){let i=this.fill_.getColor(),r=0;typeof i=="string"&&(i=qr(i)),i===null?r=1:Array.isArray(i)&&(r=i.length===4?i[3]:1),r===0&&(n=Le(e.size,e.size),this.drawHitDetectionCanvas_(e,n))}return n?n.canvas:this.getImage(1)}createPath_(e){let n=this.points_,i=this.radius_;if(n===1/0)e.arc(0,0,i,0,2*Math.PI);else{let r=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(n*=2);let o=this.angle_-Math.PI/2,s=2*Math.PI/n;for(let a=0;a<n;a++){let l=o+a*s,c=a%2===0?i:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,n){n.translate(e.size/2,e.size/2),this.createPath_(n),n.fillStyle=Ct,n.fill(),e.strokeStyle&&(n.strokeStyle=e.strokeStyle,n.lineWidth=e.strokeWidth,e.lineDash&&(n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset),n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit,n.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}},dm=_C;var vC=class t extends dm{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){let e=this.getScale(),n=new t({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return n.setOpacity(this.getOpacity()),n}setRadius(e){this.radius_=e,this.render()}},hm=vC;var xC=class t{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){let e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){let n=cc(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));n.ready().then(()=>{this.patternImage_=null}),n.getImageState()===Q.IDLE&&n.load(),n.getImageState()===Q.LOADING&&(this.patternImage_=n)}this.color_=e}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}},hc=xC;var bC=class t{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){let e=this.getColor();return new t({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}},fc=bC;var fm=class t{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=uk,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new t({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(n){return n.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=uk,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function dk(t){let e;if(typeof t=="function")e=t;else{let n;Array.isArray(t)?n=t:(Z(typeof t.getZIndex=="function","Expected an `Style` or an array of `Style`"),n=[t]),e=function(){return n}}return e}var CC=null;function wC(t,e){if(!CC){let n=new hc({color:"rgba(255,255,255,0.4)"}),i=new fc({color:"#3399CC",width:1.25});CC=[new fm({image:new hm({fill:n,stroke:i,radius:5}),fill:n,stroke:i})]}return CC}function uk(t){return t.getGeometry()}var _i=fm;function hk(t,e,n,i){return n!==void 0&&i!==void 0?[n/t,i/e]:n!==void 0?n/t:i!==void 0?i/e:1}var EC=class t extends nm{constructor(e){e=e||{};let n=e.opacity!==void 0?e.opacity:1,i=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,o=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:n,rotation:i,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:o,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;let s=e.img!==void 0?e.img:null,a=e.src;Z(!(a!==void 0&&s),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&s&&(a=s.src||se(s)),Z(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Z(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Q.IDLE:s!==void 0&&("complete"in s?s.complete?l=s.src?Q.LOADED:Q.IDLE:l=Q.LOADING:l=Q.LOADED),this.color_=e.color!==void 0?qr(e.color):null,this.iconImage_=cc(s,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{let d=this.getImage(1);if(d.width&&d.height)c=d.width,u=d.height;else if(d instanceof HTMLImageElement){this.initialOptions_=e;let h=()=>{if(this.unlistenImageChange(h),!this.initialOptions_)return;let f=this.iconImage_.getSize();this.setScale(hk(f[0],f[1],e.width,e.height))};this.listenImageChange(h);return}}c!==void 0&&this.setScale(hk(c,u,e.width,e.height))}}clone(){let e,n,i;return this.initialOptions_?(n=this.initialOptions_.width,i=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new t({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:n,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;let r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}let n=this.getDisplacement(),i=this.getScaleArray();return[e[0]-n[0]/i[0],e[1]+n[1]/i[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){let n=this.getSize(),i=this.iconImage_.getSize();if(!n||!i)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=i[0]-n[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=i[1]-n[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Q.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){let e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Q.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(V.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(V.CHANGE,e)}ready(){return this.iconImage_.ready()}},Qr=EC;var h9="#333",DC=class t{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=pt(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new hc({color:h9}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){let e=this.getScale();return new t({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=pt(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}},fk=DC;var ma=0,pc=0,Qe=1<<ma++,H=1<<ma++,mn=1<<ma++,gt=1<<ma++,xi=1<<ma++,kd=1<<ma++,Wt=Math.pow(2,ma)-1,gk={[Qe]:"boolean",[H]:"number",[mn]:"string",[gt]:"color",[xi]:"number[]",[kd]:"size"},f9=Object.keys(gk).map(Number).sort(cn);function Vt(t){let e=[];for(let n of f9)p9(t,n)&&e.push(gk[n]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function p9(t,e){return(t&e)===e}function bi(t,e){return!!(t&e)}function pm(t,e){return t===e}var vi=class{constructor(e,n){this.type=e,this.value=n}},IC=class{constructor(e,n,...i){this.type=e,this.operator=n,this.args=i}};function SC(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function g9(t){switch(t){case"string":return mn;case"color":return gt;case"number":return H;case"boolean":return Qe;case"number[]":return xi;default:throw new Error(`Unrecognized type hint: ${t}`)}}function Me(t,e,n){switch(typeof t){case"boolean":return new vi(Qe,t);case"number":return new vi(n===kd?kd:H,t);case"string":{let r=mn;return QN(t)&&(r|=gt),pm(r&n,pc)||(r&=n),new vi(r,t)}default:}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(t.length===0)throw new Error("Empty expression");if(typeof t[0]=="string")return S9(t,e,n);for(let r of t)if(typeof r!="number")throw new Error("Expected an array of numbers");let i=xi;return t.length===2?i|=kd:(t.length===3||t.length===4)&&(i|=gt),n&&(i&=n),new vi(i,t)}var S={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string"},m9={[S.Get]:te(([t,e])=>e!==void 0?g9(e.value):Wt,de(1,2),y9),[S.Var]:te(([t])=>t.type,de(1,1),_9),[S.Id]:te(H|mn,Nd,v9),[S.Concat]:te(mn,de(2,1/0),Ce(Wt)),[S.GeometryType]:te(mn,Nd,x9),[S.Resolution]:te(H,Nd),[S.Zoom]:te(H,Nd),[S.Time]:te(H,Nd),[S.Any]:te(Qe,de(2,1/0),Ce(Qe)),[S.All]:te(Qe,de(2,1/0),Ce(Qe)),[S.Not]:te(Qe,de(1,1),Ce(Qe)),[S.Equal]:te(Qe,de(2,2),Ce(Wt),us),[S.NotEqual]:te(Qe,de(2,2),Ce(Wt),us),[S.GreaterThan]:te(Qe,de(2,2),Ce(Wt),us),[S.GreaterThanOrEqualTo]:te(Qe,de(2,2),Ce(Wt),us),[S.LessThan]:te(Qe,de(2,2),Ce(Wt),us),[S.LessThanOrEqualTo]:te(Qe,de(2,2),Ce(Wt),us),[S.Multiply]:te(t=>{let e=H|gt;for(let n=0;n<t.length;n++)e&=t[n].type;return e},de(2,1/0),Ce(H|gt),us),[S.Coalesce]:te(t=>{let e=Wt;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},de(2,1/0),Ce(Wt),us),[S.Divide]:te(H,de(2,2),Ce(H)),[S.Add]:te(H,de(2,1/0),Ce(H)),[S.Subtract]:te(H,de(2,2),Ce(H)),[S.Clamp]:te(H,de(3,3),Ce(H)),[S.Mod]:te(H,de(2,2),Ce(H)),[S.Pow]:te(H,de(2,2),Ce(H)),[S.Abs]:te(H,de(1,1),Ce(H)),[S.Floor]:te(H,de(1,1),Ce(H)),[S.Ceil]:te(H,de(1,1),Ce(H)),[S.Round]:te(H,de(1,1),Ce(H)),[S.Sin]:te(H,de(1,1),Ce(H)),[S.Cos]:te(H,de(1,1),Ce(H)),[S.Atan]:te(H,de(1,2),Ce(H)),[S.Sqrt]:te(H,de(1,1),Ce(H)),[S.Match]:te(t=>{let e=Wt;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},de(4,1/0),pk,C9),[S.Between]:te(Qe,de(3,3),Ce(H)),[S.Interpolate]:te(t=>{let e=gt|H;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e},de(6,1/0),pk,w9),[S.Case]:te(t=>{let e=Wt;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e},de(3,1/0),b9,E9),[S.In]:te(Qe,de(2,2),D9),[S.Number]:te(H,de(1,1/0),Ce(Wt)),[S.String]:te(mn,de(1,1/0),Ce(Wt)),[S.Array]:te(t=>t.length===2?xi|kd:t.length===3||t.length===4?xi|gt:xi,de(1,1/0),Ce(H)),[S.Color]:te(gt,de(1,4),Ce(H)),[S.Band]:te(H,de(1,3),Ce(H)),[S.Palette]:te(gt,de(2,2),I9),[S.ToString]:te(mn,de(1,1),Ce(Qe|H|mn|gt))};function y9(t,e){let n=Me(t[1],e);if(!(n instanceof vi))throw new Error("Expected a literal argument for get operation");if(typeof n.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),t.length===3){let i=Me(t[2],e);return[n,i]}return[n]}function _9(t,e,n,i){let r=t[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new vi(Wt,r)];let o=e.style.variables[r],s=Me(o,e);if(s.value=r,i&&!bi(i,s.type))throw new Error(`The variable ${r} has type ${Vt(s.type)} but the following type was expected: ${Vt(i)}`);return[s]}function v9(t,e){e.featureId=!0}function x9(t,e){e.geometryType=!0}function Nd(t,e){let n=t[0];if(t.length!==1)throw new Error(`Expected no arguments for ${n} operation`);return[]}function de(t,e){return function(n,i){let r=n[0],o=n.length-1;if(t===e){if(o!==t){let s=t===1?"":"s";throw new Error(`Expected ${t} argument${s} for ${r}, got ${o}`)}}else if(o<t||o>e){let s=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${s} arguments for ${r}, got ${o}`)}}}function Ce(t){return function(e,n){let i=e[0],r=e.length-1,o=new Array(r);for(let s=0;s<r;++s){let a=Me(e[s+1],n);if(!bi(t,a.type)){let l=Vt(t),c=Vt(a.type);throw new Error(`Unexpected type for argument ${s} of ${i} operation, got ${l} but expected ${c}`)}a.type&=t,o[s]=a}return o}}function us(t,e,n){let i=t[0],r=t.length-1,o=Wt;for(let a=0;a<n.length;++a)o&=n[a].type;if(o===pc)throw new Error(`No common type could be found for arguments of ${i} operation`);let s=new Array(r);for(let a=0;a<r;++a)s[a]=Me(t[a+1],e,o);return s}function b9(t,e){let n=t[0],i=t.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function pk(t,e){let n=t[0],i=t.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function C9(t,e,n,i){let r=t.length-1,s=Me(t[1],e).type,a=Me(t[t.length-1],e),l=i!==void 0?i&a.type:a.type,c=new Array(r-2);for(let d=0;d<r-2;d+=2){let h=Me(t[d+2],e),f=Me(t[d+3],e);s&=h.type,l&=f.type,c[d]=h,c[d+1]=f}let u=mn|H|Qe;if(!bi(u,s))throw new Error(`Expected an input of type ${Vt(u)} for the interpolate operation, got ${Vt(s)} instead`);if(s&=u,pm(l,pc))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let d=0;d<r-2;d+=2){let h=Me(t[d+2],e,s),f=Me(t[d+3],e,l);c[d]=h,c[d+1]=f}return[Me(t[1],e,s),...c,Me(t[t.length-1],e,l)]}function w9(t,e,n,i){let r=t[1],o;switch(r[0]){case"linear":o=1;break;case"exponential":if(o=r[1],typeof o!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`);break;default:o=null}if(!o)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);o=Me(o,e);let s=Me(t[2],e);if(!bi(H,s.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Vt(s.type)} instead`);s=Me(t[2],e,H);let a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){let c=Me(t[l+3],e);if(!bi(H,c.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Vt(c.type)} at position ${l+2} instead`);let u=Me(t[l+4],e);if(!bi(H|gt,u.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Vt(u.type)} at position ${l+3} instead`);c=Me(t[l+3],e,H),u=Me(t[l+4],e,H|gt),a[l]=c,a[l+1]=u}return[o,s,...a]}function E9(t,e,n,i){let r=Me(t[t.length-1],e,i),o=i!==void 0?i&r.type:r.type,s=new Array(t.length-1);for(let a=0;a<s.length-1;a+=2){let l=Me(t[a+1],e),c=Me(t[a+2],e,i);if(!bi(Qe,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Vt(l.type)} at position ${a} instead`);o&=c.type,s[a]=l,s[a+1]=c}if(pm(o,pc))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<s.length-1;a+=2)s[a+1]=Me(t[a+2],e,o);return s[s.length-1]=Me(t[t.length-1],e,o),s}function D9(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof n[0]=="string"){if(n[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=mn|H,r=new Array(n.length);for(let s=0;s<r.length;s++){let a=Me(n[s],e);i&=a.type,r[s]=a}if(pm(i,pc))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[Me(t[1],e,i),...r]}function I9(t,e){let n=Me(t[1],e,H);if(n.type!==H)throw new Error(`The first argument of palette must be an number, got ${Vt(n.type)} instead`);let i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");let r=new Array(i.length);for(let o=0;o<r.length;o++){let s=Me(i[o],e,gt);if(!(s instanceof vi))throw new Error(`The palette color at index ${o} must be a literal value`);if(!bi(s.type,gt))throw new Error(`The palette color at index ${o} should be of type color, got ${Vt(s.type)} instead`);r[o]=s}return[n,...r]}function te(t,...e){return function(n,i,r){let o=n[0],s=[];for(let l=0;l<e.length;l++)s=e[l](n,i,s,r)||s;let a=typeof t=="function"?t(s):t;if(r!==void 0){if(!bi(a,r))throw new Error(`The following expression was expected to return ${Vt(r)}, but returns ${Vt(a)} instead: ${JSON.stringify(n)}`);a&=r}if(a===pc)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new IC(a,o,...s)}}function S9(t,e,n){let i=t[0],r=m9[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(t,e,n)}function MC(t){if(!t)return"";let e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return MC(t.getGeometries()[0]);default:return""}}function TC(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Yi(t,e,n){let i=Me(t,n);if(!bi(e,i.type)){let r=Vt(e),o=Vt(i.type);throw new Error(`Expected expression to be of type ${r}, got ${o}`)}return Ci(i,n)}function Ci(t,e){if(t instanceof vi){if(t.type===gt&&typeof t.value=="string"){let i=om(t.value);return function(){return i}}return function(){return t.value}}let n=t.operator;switch(n){case S.Number:case S.String:case S.Coalesce:return M9(t,e);case S.Get:case S.Var:return T9(t,e);case S.Id:return i=>i.featureId;case S.GeometryType:return i=>i.geometryType;case S.Concat:{let i=t.args.map(r=>Ci(r,e));return r=>"".concat(...i.map(o=>o(r).toString()))}case S.Resolution:return i=>i.resolution;case S.Any:case S.All:case S.Between:case S.In:case S.Not:return R9(t,e);case S.Equal:case S.NotEqual:case S.LessThan:case S.LessThanOrEqualTo:case S.GreaterThan:case S.GreaterThanOrEqualTo:return A9(t,e);case S.Multiply:case S.Divide:case S.Add:case S.Subtract:case S.Clamp:case S.Mod:case S.Pow:case S.Abs:case S.Floor:case S.Ceil:case S.Round:case S.Sin:case S.Cos:case S.Atan:case S.Sqrt:return O9(t,e);case S.Case:return P9(t,e);case S.Match:return N9(t,e);case S.Interpolate:return k9(t,e);case S.ToString:return F9(t,e);default:throw new Error(`Unsupported operator ${n}`)}}function M9(t,e){let n=t.operator,i=t.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Ci(t.args[o],e);switch(n){case S.Coalesce:return o=>{for(let s=0;s<i;++s){let a=r[s](o);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case S.Number:case S.String:return o=>{for(let s=0;s<i;++s){let a=r[s](o);if(typeof a===n)return a}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function T9(t,e){let i=t.args[0].value;switch(t.operator){case S.Get:return r=>r.properties[i];case S.Var:return r=>r.variables[i];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function A9(t,e){let n=t.operator,i=Ci(t.args[0],e),r=Ci(t.args[1],e);switch(n){case S.Equal:return o=>i(o)===r(o);case S.NotEqual:return o=>i(o)!==r(o);case S.LessThan:return o=>i(o)<r(o);case S.LessThanOrEqualTo:return o=>i(o)<=r(o);case S.GreaterThan:return o=>i(o)>r(o);case S.GreaterThanOrEqualTo:return o=>i(o)>=r(o);default:throw new Error(`Unsupported comparison operator ${n}`)}}function R9(t,e){let n=t.operator,i=t.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Ci(t.args[o],e);switch(n){case S.Any:return o=>{for(let s=0;s<i;++s)if(r[s](o))return!0;return!1};case S.All:return o=>{for(let s=0;s<i;++s)if(!r[s](o))return!1;return!0};case S.Between:return o=>{let s=r[0](o),a=r[1](o),l=r[2](o);return s>=a&&s<=l};case S.In:return o=>{let s=r[0](o);for(let a=1;a<i;++a)if(s===r[a](o))return!0;return!1};case S.Not:return o=>!r[0](o);default:throw new Error(`Unsupported logical operator ${n}`)}}function O9(t,e){let n=t.operator,i=t.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Ci(t.args[o],e);switch(n){case S.Multiply:return o=>{let s=1;for(let a=0;a<i;++a)s*=r[a](o);return s};case S.Divide:return o=>r[0](o)/r[1](o);case S.Add:return o=>{let s=0;for(let a=0;a<i;++a)s+=r[a](o);return s};case S.Subtract:return o=>r[0](o)-r[1](o);case S.Clamp:return o=>{let s=r[0](o),a=r[1](o);if(s<a)return a;let l=r[2](o);return s>l?l:s};case S.Mod:return o=>r[0](o)%r[1](o);case S.Pow:return o=>Math.pow(r[0](o),r[1](o));case S.Abs:return o=>Math.abs(r[0](o));case S.Floor:return o=>Math.floor(r[0](o));case S.Ceil:return o=>Math.ceil(r[0](o));case S.Round:return o=>Math.round(r[0](o));case S.Sin:return o=>Math.sin(r[0](o));case S.Cos:return o=>Math.cos(r[0](o));case S.Atan:return i===2?o=>Math.atan2(r[0](o),r[1](o)):o=>Math.atan(r[0](o));case S.Sqrt:return o=>Math.sqrt(r[0](o));default:throw new Error(`Unsupported numeric operator ${n}`)}}function P9(t,e){let n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ci(t.args[r],e);return r=>{for(let o=0;o<n-1;o+=2)if(i[o](r))return i[o+1](r);return i[n-1](r)}}function N9(t,e){let n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ci(t.args[r],e);return r=>{let o=i[0](r);for(let s=1;s<n;s+=2)if(o===i[s](r))return i[s+1](r);return i[n-1](r)}}function k9(t,e){let n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=Ci(t.args[r],e);return r=>{let o=i[0](r),s=i[1](r),a,l;for(let c=2;c<n;c+=2){let u=i[c](r),d=i[c+1](r),h=Array.isArray(d);if(h&&(d=ZN(d)),u>=s)return c===2?d:h?L9(o,s,a,l,u,d):Fd(o,s,a,l,u,d);a=u,l=d}return l}}function F9(t,e){let n=t.operator,i=t.args.length,r=new Array(i);for(let o=0;o<i;++o)r[o]=Ci(t.args[o],e);switch(n){case S.ToString:return o=>{let s=r[0](o);return t.args[0].type===gt?Ad(s):s.toString()};default:throw new Error(`Unsupported convert operator ${n}`)}}function Fd(t,e,n,i,r,o){let s=r-n;if(s===0)return i;let a=e-n,l=t===1?a/s:(Math.pow(t,a)-1)/(Math.pow(t,s)-1);return i+l*(o-i)}function L9(t,e,n,i,r,o){if(r-n===0)return i;let a=rC(i),l=rC(o),c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);let u=[Fd(t,e,n,a[0],r,l[0]),Fd(t,e,n,a[1],r,l[1]),a[2]+Fd(t,e,n,0,r,c),Fd(t,e,n,i[3],r,o[3])];return oC(KN(u))}function V9(t){return!0}function vk(t){let e=SC(),n=j9(t,e),i=TC();return function(r,o){if(i.properties=r.getPropertiesInternal(),i.resolution=o,e.featureId){let s=r.getId();s!==void 0?i.featureId=s:i.featureId=null}return e.geometryType&&(i.geometryType=MC(r.getGeometry())),n(i)}}function OC(t){let e=SC(),n=t.length,i=new Array(n);for(let s=0;s<n;++s)i[s]=AC(t[s],e);let r=TC(),o=new Array(n);return function(s,a){if(r.properties=s.getPropertiesInternal(),r.resolution=a,e.featureId){let c=s.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<n;++c){let u=i[c](r);u&&(o[l]=u,l+=1)}return o.length=l,o}}function j9(t,e){let n=t.length,i=new Array(n);for(let r=0;r<n;++r){let o=t[r],s="filter"in o?Yi(o.filter,Qe,e):V9,a;if(Array.isArray(o.style)){let l=o.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=AC(o.style[c],e)}else a=[AC(o.style,e)];i[r]={filter:s,styles:a}}return function(r){let o=[],s=!1;for(let a=0;a<n;++a){let l=i[a].filter;if(l(r)&&!(t[a].else&&s)){s=!0;for(let c of i[a].styles){let u=c(r);u&&o.push(u)}}}return o}}function AC(t,e){let n=Ld(t,"",e),i=Vd(t,"",e),r=B9(t,e),o=U9(t,e),s=yn(t,"z-index",e);if(!n&&!i&&!r&&!o&&!fi(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));let a=new _i;return function(l){let c=!0;if(n){let u=n(l);u&&(c=!1),a.setFill(u)}if(i){let u=i(l);u&&(c=!1),a.setStroke(u)}if(r){let u=r(l);u&&(c=!1),a.setText(u)}if(o){let u=o(l);u&&(c=!1),a.setImage(u)}return s&&a.setZIndex(s(l)),c?null:a}}function Ld(t,e,n){let i;if(e+"fill-pattern-src"in t?i=W9(t,e+"fill-",n):i=PC(t,e+"fill-color",n),!i)return null;let r=new hc;return function(o){let s=i(o);return s==="none"?null:(r.setColor(s),r)}}function Vd(t,e,n){let i=yn(t,e+"stroke-width",n),r=PC(t,e+"stroke-color",n);if(!i&&!r)return null;let o=Jr(t,e+"stroke-line-cap",n),s=Jr(t,e+"stroke-line-join",n),a=xk(t,e+"stroke-line-dash",n),l=yn(t,e+"stroke-line-dash-offset",n),c=yn(t,e+"stroke-miter-limit",n),u=new fc;return function(d){if(r){let h=r(d);if(h==="none")return null;u.setColor(h)}if(i&&u.setWidth(i(d)),o){let h=o(d);if(h!=="butt"&&h!=="round"&&h!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(h)}if(s){let h=s(d);if(h!=="bevel"&&h!=="round"&&h!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(h)}return a&&u.setLineDash(a(d)),l&&u.setLineDashOffset(l(d)),c&&u.setMiterLimit(c(d)),u}}function B9(t,e){let n="text-",i=Jr(t,n+"value",e);if(!i)return null;let r=Ld(t,n,e),o=Ld(t,n+"background-",e),s=Vd(t,n,e),a=Vd(t,n+"background-",e),l=Jr(t,n+"font",e),c=yn(t,n+"max-angle",e),u=yn(t,n+"offset-x",e),d=yn(t,n+"offset-y",e),h=jd(t,n+"overflow",e),f=Jr(t,n+"placement",e),p=yn(t,n+"repeat",e),m=ym(t,n+"scale",e),g=jd(t,n+"rotate-with-view",e),y=yn(t,n+"rotation",e),_=Jr(t,n+"align",e),x=Jr(t,n+"justify",e),b=Jr(t,n+"baseline",e),v=xk(t,n+"padding",e),C=_m(t,n+"declutter-mode"),E=new fk({declutterMode:C});return function(w){if(E.setText(i(w)),r&&E.setFill(r(w)),o&&E.setBackgroundFill(o(w)),s&&E.setStroke(s(w)),a&&E.setBackgroundStroke(a(w)),l&&E.setFont(l(w)),c&&E.setMaxAngle(c(w)),u&&E.setOffsetX(u(w)),d&&E.setOffsetY(d(w)),h&&E.setOverflow(h(w)),f){let D=f(w);if(D!=="point"&&D!=="line")throw new Error("Expected point or line for text-placement");E.setPlacement(D)}if(p&&E.setRepeat(p(w)),m&&E.setScale(m(w)),g&&E.setRotateWithView(g(w)),y&&E.setRotation(y(w)),_){let D=_(w);if(D!=="left"&&D!=="center"&&D!=="right"&&D!=="end"&&D!=="start")throw new Error("Expected left, right, center, start, or end for text-align");E.setTextAlign(D)}if(x){let D=x(w);if(D!=="left"&&D!=="right"&&D!=="center")throw new Error("Expected left, right, or center for text-justify");E.setJustify(D)}if(b){let D=b(w);if(D!=="bottom"&&D!=="top"&&D!=="middle"&&D!=="alphabetic"&&D!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");E.setTextBaseline(D)}return v&&E.setPadding(v(w)),E}}function U9(t,e){return"icon-src"in t?z9(t,e):"shape-points"in t?H9(t,e):"circle-radius"in t?$9(t,e):null}function z9(t,e){let n="icon-",i=n+"src",r=bk(t[i],i),o=gm(t,n+"anchor",e),s=ym(t,n+"scale",e),a=yn(t,n+"opacity",e),l=gm(t,n+"displacement",e),c=yn(t,n+"rotation",e),u=jd(t,n+"rotate-with-view",e),d=yk(t,n+"anchor-origin"),h=_k(t,n+"anchor-x-units"),f=_k(t,n+"anchor-y-units"),p=X9(t,n+"color"),m=q9(t,n+"cross-origin"),g=Y9(t,n+"offset"),y=yk(t,n+"offset-origin"),_=mm(t,n+"width"),x=mm(t,n+"height"),b=G9(t,n+"size"),v=_m(t,n+"declutter-mode"),C=new Qr({src:r,anchorOrigin:d,anchorXUnits:h,anchorYUnits:f,color:p,crossOrigin:m,offset:g,offsetOrigin:y,height:x,width:_,size:b,declutterMode:v});return function(E){return a&&C.setOpacity(a(E)),l&&C.setDisplacement(l(E)),c&&C.setRotation(c(E)),u&&C.setRotateWithView(u(E)),s&&C.setScale(s(E)),o&&C.setAnchor(o(E)),C}}function H9(t,e){let n="shape-",i=n+"points",r=n+"radius",o=RC(t[i],i),s=RC(t[r],r),a=Ld(t,n,e),l=Vd(t,n,e),c=ym(t,n+"scale",e),u=gm(t,n+"displacement",e),d=yn(t,n+"rotation",e),h=jd(t,n+"rotate-with-view",e),f=mm(t,n+"radius2"),p=mm(t,n+"angle"),m=_m(t,n+"declutter-mode"),g=new dm({points:o,radius:s,radius2:f,angle:p,declutterMode:m});return function(y){return a&&g.setFill(a(y)),l&&g.setStroke(l(y)),u&&g.setDisplacement(u(y)),d&&g.setRotation(d(y)),h&&g.setRotateWithView(h(y)),c&&g.setScale(c(y)),g}}function $9(t,e){let n="circle-",i=Ld(t,n,e),r=Vd(t,n,e),o=yn(t,n+"radius",e),s=ym(t,n+"scale",e),a=gm(t,n+"displacement",e),l=yn(t,n+"rotation",e),c=jd(t,n+"rotate-with-view",e),u=_m(t,n+"declutter-mode"),d=new hm({radius:5,declutterMode:u});return function(h){return o&&d.setRadius(o(h)),i&&d.setFill(i(h)),r&&d.setStroke(r(h)),a&&d.setDisplacement(a(h)),l&&d.setRotation(l(h)),c&&d.setRotateWithView(c(h)),s&&d.setScale(s(h)),d}}function yn(t,e,n){if(!(e in t))return;let i=Yi(t[e],H,n);return function(r){return RC(i(r),e)}}function Jr(t,e,n){if(!(e in t))return null;let i=Yi(t[e],mn,n);return function(r){return bk(i(r),e)}}function W9(t,e,n){let i=Jr(t,e+"pattern-src",n),r=mk(t,e+"pattern-offset",n),o=mk(t,e+"pattern-size",n),s=PC(t,e+"color",n);return function(a){return{src:i(a),offset:r&&r(a),size:o&&o(a),color:s&&s(a)}}}function jd(t,e,n){if(!(e in t))return null;let i=Yi(t[e],Qe,n);return function(r){let o=i(r);if(typeof o!="boolean")throw new Error(`Expected a boolean for ${e}`);return o}}function PC(t,e,n){if(!(e in t))return null;let i=Yi(t[e],gt|mn,n);return function(r){return Ck(i(r),e)}}function xk(t,e,n){if(!(e in t))return null;let i=Yi(t[e],xi,n);return function(r){return Bd(i(r),e)}}function gm(t,e,n){if(!(e in t))return null;let i=Yi(t[e],xi,n);return function(r){let o=Bd(i(r),e);if(o.length!==2)throw new Error(`Expected two numbers for ${e}`);return o}}function mk(t,e,n){if(!(e in t))return null;let i=Yi(t[e],xi,n);return function(r){return wk(i(r),e)}}function ym(t,e,n){if(!(e in t))return null;let i=Yi(t[e],xi|H,n);return function(r){return Z9(i(r),e)}}function mm(t,e){let n=t[e];if(n!==void 0){if(typeof n!="number")throw new Error(`Expected a number for ${e}`);return n}}function G9(t,e){let n=t[e];if(n!==void 0){if(typeof n=="number")return pt(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(n.length!==2||typeof n[0]!="number"||typeof n[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return n}}function q9(t,e){let n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);return n}}function yk(t,e){let n=t[e];if(n!==void 0){if(n!=="bottom-left"&&n!=="bottom-right"&&n!=="top-left"&&n!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function _k(t,e){let n=t[e];if(n!==void 0){if(n!=="pixels"&&n!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return n}}function Y9(t,e){let n=t[e];if(n!==void 0)return Bd(n,e)}function _m(t,e){let n=t[e];if(n!==void 0){if(typeof n!="string")throw new Error(`Expected a string for ${e}`);if(n!=="declutter"&&n!=="obstacle"&&n!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function X9(t,e){let n=t[e];if(n!==void 0)return Ck(n,e)}function Bd(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);let n=t.length;for(let i=0;i<n;++i)if(typeof t[i]!="number")throw new Error(`Expected an array of numbers for ${e}`);return t}function bk(t,e){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}function RC(t,e){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}function Ck(t,e){if(typeof t=="string")return t;let n=Bd(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function wk(t,e){let n=Bd(t,e);if(n.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return n}function Z9(t,e){return typeof t=="number"?t:wk(t,e)}var Ek={RENDER_ORDER:"renderOrder"},NC=class extends ha{constructor(e){e=e||{};let n=Object.assign({},e);delete n.style,delete n.renderBuffer,delete n.updateWhileAnimating,delete n.updateWhileInteracting,super(n),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Ek.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,n){let i=this.getDeclutter();i in e.declutter||(e.declutter[i]=new Dk.default(9)),this.getRenderer().renderDeclutter(e,n)}setRenderOrder(e){this.set(Ek.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?wC:e;let n=K9(e);this.styleFunction_=e===null?void 0:dk(n),this.changed()}};function K9(t){if(t===void 0)return wC;if(!t)return null;if(typeof t=="function"||t instanceof _i)return t;if(!Array.isArray(t))return OC([t]);if(t.length===0)return[];let e=t.length,n=t[0];if(n instanceof _i){let r=new Array(e);for(let o=0;o<e;++o){let s=t[o];if(!(s instanceof _i))throw new Error("Expected a list of style instances");r[o]=s}return r}if("style"in n){let r=new Array(e);for(let o=0;o<e;++o){let s=t[o];if(!("style"in s))throw new Error("Expected a list of rules with a style property");r[o]=s}return vk(r)}return OC(t)}var vm=NC;var kC=class extends Wl{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,n){ue()}calculateMatrices2D(e){let n=e.viewState,i=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Lt(i,e.size[0]/2,e.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),Yg(r,i)}forEachFeatureAtCoordinate(e,n,i,r,o,s,a,l){let c,u=n.viewState;function d(b,v,C,E){return o.call(s,v,b?C:null,E)}let h=u.projection,f=Wg(e.slice(),h),p=[[0,0]];if(h.canWrapX()&&r){let b=h.getExtent(),v=ce(b);p.push([-v,0],[v,0])}let m=n.layerStatesArray,g=m.length,y=[],_=[];for(let b=0;b<p.length;b++)for(let v=g-1;v>=0;--v){let C=m[v],E=C.layer;if(E.hasRenderer()&&Md(C,u)&&a.call(l,E)){let w=E.getRenderer(),D=E.getSource();if(w&&D){let A=D.getWrapX()?f:e,M=d.bind(null,C.managed);_[0]=A[0]+p[b][0],_[1]=A[1]+p[b][1],c=w.forEachFeatureAtCoordinate(_,n,i,M,y)}if(c)return c}}if(y.length===0)return;let x=1/y.length;return y.forEach((b,v)=>b.distanceSq+=v*x),y.sort((b,v)=>b.distanceSq-v.distanceSq),y.some(b=>c=b.callback(b.feature,b.layer,b.geometry)),c}hasFeatureAtCoordinate(e,n,i,r,o,s){return this.forEachFeatureAtCoordinate(e,n,i,r,Fr,this,o,s)!==void 0}getMap(){return this.map_}renderFrame(e){ue()}scheduleExpireIconCache(e){An.canExpireCache()&&e.postRenderFunctions.push(Q9)}};function Q9(t,e){An.expire()}var Ik=kC;var FC=class extends Et{constructor(e,n,i,r){super(e),this.inversePixelTransform=n,this.frameState=i,this.context=r}},xm=FC;var LC=class extends Ik{constructor(e){super(e),this.fontChangeListenerKey_=oe(Wi,di.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");let n=this.element_.style;n.position="absolute",n.width="100%",n.height="100%",n.zIndex="0",this.element_.className=ls+" ol-layers";let i=e.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,n){let i=this.getMap();if(i.hasListener(e)){let r=new xm(e,void 0,n);i.dispatchEvent(r)}}disposeInternal(){xe(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(Ft.PRECOMPOSE,e);let n=e.layerStatesArray.sort(function(a,l){return a.zIndex-l.zIndex});n.some(a=>a.layer instanceof vm&&a.layer.getDeclutter())&&(e.declutter={});let r=e.viewState;this.children_.length=0;let o=[],s=null;for(let a=0,l=n.length;a<l;++a){let c=n[a];e.layerIndex=a;let u=c.layer,d=u.getSourceState();if(!Md(c,r)||d!="ready"&&d!="undefined"){u.unrender();continue}let h=u.render(e,s);h&&(h!==s&&(this.children_.push(h),s=h),o.push(c))}this.declutter(e,o),nk(this.element_,this.children_),this.dispatchRenderEvent(Ft.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,n){if(e.declutter){for(let i=n.length-1;i>=0;--i){let r=n[i],o=r.layer;o.getDeclutter()&&o.renderDeclutter(e,r)}n.forEach(i=>i.layer.renderDeferred(e))}}},Sk=LC;var wi=class extends Et{constructor(e,n){super(e),this.layer=n}},VC={LAYERS:"layers"},jC=class t extends Fg{constructor(e){e=e||{};let n=Object.assign({},e);delete n.layers;let i=e.layers;super(n),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(VC.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new Qt(i.slice(),{unique:!0}):Z(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new Qt(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(xe),this.layersListenerKeys_.length=0;let e=this.getLayers();this.layersListenerKeys_.push(oe(e,Dt.ADD,this.handleLayersAdd_,this),oe(e,Dt.REMOVE,this.handleLayersRemove_,this));for(let i in this.listenerKeys_)this.listenerKeys_[i].forEach(xe);Hi(this.listenerKeys_);let n=e.getArray();for(let i=0,r=n.length;i<r;i++){let o=n[i];this.registerLayerListeners_(o),this.dispatchEvent(new wi("addlayer",o))}this.changed()}registerLayerListeners_(e){let n=[oe(e,di.PROPERTYCHANGE,this.handleLayerChange_,this),oe(e,V.CHANGE,this.handleLayerChange_,this)];e instanceof t&&n.push(oe(e,"addlayer",this.handleLayerGroupAdd_,this),oe(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[se(e)]=n}handleLayerGroupAdd_(e){this.dispatchEvent(new wi("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new wi("removelayer",e.layer))}handleLayersAdd_(e){let n=e.element;this.registerLayerListeners_(n),this.dispatchEvent(new wi("addlayer",n)),this.changed()}handleLayersRemove_(e){let n=e.element,i=se(n);this.listenerKeys_[i].forEach(xe),delete this.listenerKeys_[i],this.dispatchEvent(new wi("removelayer",n)),this.changed()}getLayers(){return this.get(VC.LAYERS)}setLayers(e){let n=this.getLayers();if(n){let i=n.getArray();for(let r=0,o=i.length;r<o;++r)this.dispatchEvent(new wi("removelayer",i[r]))}this.set(VC.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(n){n.getLayersArray(e)}),e}getLayerStatesArray(e){let n=e!==void 0?e:[],i=n.length;this.getLayers().forEach(function(s){s.getLayerStatesArray(n)});let r=this.getLayerState(),o=r.zIndex;!e&&r.zIndex===void 0&&(o=0);for(let s=i,a=n.length;s<a;s++){let l=n[s];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=Jo(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=o)}return n}getSourceState(){return"ready"}},Ud=jC;var BC=class extends Et{constructor(e,n,i){super(e),this.map=n,this.frameState=i!==void 0?i:null}},ds=BC;var UC=class extends ds{constructor(e,n,i,r,o,s){super(e,n,o),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}},Xi=UC;var ze={SINGLECLICK:"singleclick",CLICK:V.CLICK,DBLCLICK:V.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var zd={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var zC=class extends Ko{constructor(e,n){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=n===void 0?1:n,this.down_=null;let i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=oe(i,zd.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=oe(i,zd.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(V.TOUCHMOVE,this.boundHandleTouchMove_,lm?{passive:!1}:!1)}emulateClick_(e){let n=new Xi(ze.CLICK,this.map_,e);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Xi(ze.DBLCLICK,this.map_,e),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;let i=new Xi(ze.SINGLECLICK,this.map_,e);this.dispatchEvent(i)},250)}updateActivePointers_(e){let n=e,i=n.pointerId;if(n.type==ze.POINTERUP||n.type==ze.POINTERCANCEL){delete this.trackedTouches_[i];for(let r in this.trackedTouches_)if(this.trackedTouches_[r].target!==n.target){delete this.trackedTouches_[r];break}}else(n.type==ze.POINTERDOWN||n.type==ze.POINTERMOVE)&&(this.trackedTouches_[i]=n);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);let n=new Xi(ze.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(xe),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);let n=new Xi(ze.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(n),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){let i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(oe(i,ze.POINTERMOVE,this.handlePointerMove_,this),oe(i,ze.POINTERUP,this.handlePointerUp_,this),oe(this.element_,ze.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(oe(this.element_.getRootNode(),ze.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;let n=new Xi(ze.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;let n=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Xi(ze.POINTERMOVE,this.map_,e,n))}handleTouchMove_(e){let n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(xe(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(V.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(xe(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(xe),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}},Mk=zC;var Zi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};var jt={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var Hd=1/0,HC=class{constructor(e,n){this.priorityFunction_=e,this.keyFunction_=n,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Hi(this.queuedElements_)}dequeue(){let e=this.elements_,n=this.priorities_,i=e[0];e.length==1?(e.length=0,n.length=0):(e[0]=e.pop(),n[0]=n.pop(),this.siftUp_(0));let r=this.keyFunction_(i);return delete this.queuedElements_[r],i}enqueue(e){Z(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");let n=this.priorityFunction_(e);return n!=Hd?(this.elements_.push(e),this.priorities_.push(n),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){let n=this.elements_,i=this.priorities_,r=n.length,o=n[e],s=i[e],a=e;for(;e<r>>1;){let l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&i[c]<i[l]?c:l;n[e]=n[u],i[e]=i[u],e=u}n[e]=o,i[e]=s,this.siftDown_(a,e)}siftDown_(e,n){let i=this.elements_,r=this.priorities_,o=i[n],s=r[n];for(;n>e;){let a=this.getParentIndex_(n);if(r[a]>s)i[n]=i[a],r[n]=r[a],n=a;else break}i[n]=o,r[n]=s}reprioritize(){let e=this.priorityFunction_,n=this.elements_,i=this.priorities_,r=0,o=n.length,s,a,l;for(a=0;a<o;++a)s=n[a],l=e(s),l==Hd?delete this.queuedElements_[this.keyFunction_(s)]:(i[r]=l,n[r++]=s);n.length=r,i.length=r,this.heapify_()}},Tk=HC;var U={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var $C=class extends Tk{constructor(e,n){super(function(i){return e.apply(null,i)},function(i){return i[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=n,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){let n=super.enqueue(e);return n&&e[0].addEventListener(V.CHANGE,this.boundHandleTileChange_),n}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){let n=e.target,i=n.getState();if(i===U.LOADED||i===U.ERROR||i===U.EMPTY){i!==U.ERROR&&n.removeEventListener(V.CHANGE,this.boundHandleTileChange_);let r=n.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,n){let i=0,r,o,s;for(;this.tilesLoading_<e&&i<n&&this.getCount()>0;)o=this.dequeue()[0],s=o.getKey(),r=o.getState(),r===U.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,o.load())}},Ak=$C;function Rk(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return Hd;if(!t.wantedTiles[n][e.getKey()])return Hd;let o=t.viewState.center,s=i[0]-o[0],a=i[1]-o[1];return 65536*Math.log(r)+Math.sqrt(s*s+a*a)/r}var WC=class extends ht{constructor(e){super();let n=e.element;n&&!e.target&&!n.style.pointerEvents&&(n.style.pointerEvents="auto"),this.element=n||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Rd(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Rd(this.element);for(let n=0,i=this.listenerKeys.length;n<i;++n)xe(this.listenerKeys[n]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==hi&&this.listenerKeys.push(oe(e,Zi.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}},gc=WC;var GC=class extends gc{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);let n=e.className!==void 0?e.className:"ol-attribution",i=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:n+"-expand",o=e.collapseLabel!==void 0?e.collapseLabel:"\u203A",s=e.collapseClassName!==void 0?e.collapseClassName:n+"-collapse";typeof o=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=o,this.collapseLabel_.className=s):this.collapseLabel_=o;let a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;let l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(V.CLICK,this.handleClick_.bind(this),!1);let c=n+" "+ls+" "+uc+(this.collapsed_&&this.collapsible_?" "+fC:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){let n=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),i=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(i),n}updateElement_(e){return Cs(this,null,function*(){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let n=yield Promise.all(this.collectSourceAttributions_(e).map(r=>zP(()=>r))),i=n.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!$t(n,this.renderedAttributions_)){tk(this.ulElement_);for(let r=0,o=n.length;r<o;++r){let s=document.createElement("li");s.innerHTML=n[r],this.ulElement_.appendChild(s)}this.renderedAttributions_=n}})}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(fC),this.collapsed_?cC(this.collapseLabel_,this.label_):cC(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}},Ok=GC;var qC=class extends gc{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});let n=e.className!==void 0?e.className:"ol-rotate",i=e.label!==void 0?e.label:"\u21E7",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(r));let o=e.tipLabel?e.tipLabel:"Reset rotation",s=document.createElement("button");s.className=n+"-reset",s.setAttribute("type","button"),s.title=o,s.appendChild(this.label_),s.addEventListener(V.CLICK,this.handleClick_.bind(this),!1);let a=n+" "+ls+" "+uc,l=this.element;l.className=a,l.appendChild(s),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Pd)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){let n=this.getMap().getView();if(!n)return;let i=n.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:Zn}):n.setRotation(0))}render(e){let n=e.frameState;if(!n)return;let i=n.viewState.rotation;if(i!=this.rotation_){let r="rotate("+i+"rad)";if(this.autoHide_){let o=this.element.classList.contains(Pd);!o&&i===0?this.element.classList.add(Pd):o&&i!==0&&this.element.classList.remove(Pd)}this.label_.style.transform=r}this.rotation_=i}},Pk=qC;var YC=class extends gc{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});let n=e.className!==void 0?e.className:"ol-zoom",i=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:n+"-in",o=e.zoomOutClassName!==void 0?e.zoomOutClassName:n+"-out",s=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"\u2013",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof s=="string"?document.createTextNode(s):s),u.addEventListener(V.CLICK,this.handleClick_.bind(this,i),!1);let d=document.createElement("button");d.className=o,d.setAttribute("type","button"),d.title=c,d.appendChild(typeof a=="string"?document.createTextNode(a):a),d.addEventListener(V.CLICK,this.handleClick_.bind(this,-i),!1);let h=n+" "+ls+" "+uc,f=this.element;f.className=h,f.appendChild(u),f.appendChild(d),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,n){n.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){let i=this.getMap().getView();if(!i)return;let r=i.getZoom();if(r!==void 0){let o=i.getConstrainedZoom(r+e);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:o,duration:this.duration_,easing:Zn})):i.setZoom(o)}}},Nk=YC;function kk(t){t=t||{};let e=new Qt;return(t.zoom!==void 0?t.zoom:!0)&&e.push(new Nk(t.zoomOptions)),(t.rotate!==void 0?t.rotate:!0)&&e.push(new Pk(t.rotateOptions)),(t.attribution!==void 0?t.attribution:!0)&&e.push(new Ok(t.attributionOptions)),e}var XC={ACTIVE:"active"};var ZC=class extends ht{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(XC.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(XC.ACTIVE,e)}setMap(e){this.map_=e}};function Fk(t,e,n){let i=t.getCenterInternal();if(i){let r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:n!==void 0?n:250,easing:_N,center:t.getConstrainedCenter(r)})}}function mc(t,e,n,i){let r=t.getZoom();if(r===void 0)return;let o=t.getConstrainedZoom(r+e),s=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:s,anchor:n,duration:i!==void 0?i:250,easing:Zn})}var Ki=ZC;var KC=class extends Ki{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let n=!1;if(e.type==ze.DBLCLICK){let i=e.originalEvent,r=e.map,o=e.coordinate,s=i.shiftKey?-this.delta_:this.delta_,a=r.getView();mc(a,s,o,this.duration_),i.preventDefault(),n=!0}return!n}},Lk=KC;var QC=class extends Ki{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let n=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==ze.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==ze.POINTERUP){let i=this.handleUpEvent(e);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(e.type==ze.POINTERDOWN){let i=this.handleDownEvent(e);this.handlingDownUpSequence=i,n=this.stopDown(i)}else e.type==ze.POINTERMOVE&&this.handleMoveEvent(e);return!n}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}};function yc(t){let e=t.length,n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}var Qi=QC;function $d(t){let e=arguments;return function(n){let i=!0;for(let r=0,o=e.length;r<o&&(i=i&&e[r](n),!!i);++r);return i}}var Vk=function(t){let e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},J9=function(t){let e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},bm=function(t){return t.map.getTargetElement().hasAttribute("tabindex")?J9(t):!0},jk=Fr;var Cm=function(t){let e=t.originalEvent;return e.button==0&&!(ek&&sC&&e.ctrlKey)};var wm=function(t){let e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey};var Bk=function(t){let e=t.originalEvent;return sC?e.metaKey:e.ctrlKey},Uk=function(t){let e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},Em=function(t){let e=t.originalEvent,n=e.target.tagName;return n!=="INPUT"&&n!=="SELECT"&&n!=="TEXTAREA"&&!e.target.isContentEditable},Dm=function(t){let e=t.originalEvent;return Z(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"};var zk=function(t){let e=t.originalEvent;return Z(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};var JC=class extends Qi{constructor(e){super({stopDown:Lr}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;let n=e.condition?e.condition:$d(wm,zk);this.condition_=e.onFocusOnly?$d(bm,n):n,this.noKinetic_=!1}handleDragEvent(e){let n=e.map;this.panning_||(this.panning_=!0,n.getView().beginInteraction());let i=this.targetPointers,r=n.getEventPixel(yc(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){let o=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();rN(o,a.getResolution()),oc(o,a.getRotation()),a.adjustCenterInternal(o)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=i.length,e.originalEvent.preventDefault()}handleUpEvent(e){let n=e.map,i=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){let r=this.kinetic_.getDistance(),o=this.kinetic_.getAngle(),s=i.getCenterInternal(),a=n.getPixelFromCoordinateInternal(s),l=n.getCoordinateFromPixelInternal([a[0]-r*Math.cos(o),a[1]-r*Math.sin(o)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Zn})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){let i=e.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}},Hk=JC;var ew=class extends Qi{constructor(e){e=e||{},super({stopDown:Lr}),this.condition_=e.condition?e.condition:Vk,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!Dm(e))return;let n=e.map,i=n.getView();if(i.getConstraints().rotation===sc)return;let r=n.getSize(),o=e.pixel,s=Math.atan2(r[1]/2-o[1],o[0]-r[0]/2);if(this.lastAngle_!==void 0){let a=s-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=s}handleUpEvent(e){return Dm(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return Dm(e)&&Cm(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}},$k=ew;var tw=class extends Wl{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){let e=this.startPixel_,n=this.endPixel_,i="px",r=this.element_.style;r.left=Math.min(e[0],n[0])+i,r.top=Math.min(e[1],n[1])+i,r.width=Math.abs(n[0]-e[0])+i,r.height=Math.abs(n[1]-e[1])+i}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);let n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,n){this.startPixel_=e,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;let e=this.startPixel_,n=this.endPixel_,r=[e,[e[0],n[1]],n,[n[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new zN([r])}getGeometry(){return this.geometry_}},Wk=tw;var Wd={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},_c=class extends Et{constructor(e,n,i){super(e),this.coordinate=n,this.mapBrowserEvent=i}},nw=class extends Qi{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new Wk(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Cm,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,n,i){let r=i[0]-n[0],o=i[1]-n[1];return r*r+o*o>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new _c(Wd.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;this.box_.setMap(null);let n=this.boxEndCondition_(e,this.startPixel_,e.pixel);return n&&this.onBoxEnd(e),this.dispatchEvent(new _c(n?Wd.BOXEND:Wd.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new _c(Wd.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new _c(Wd.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}},Gk=nw;var iw=class extends Gk{constructor(e){e=e||{};let n=e.condition?e.condition:Uk;super({condition:n,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){let i=this.getMap().getView(),r=this.getGeometry();if(this.out_){let o=i.rotatedExtentForGeometry(r),s=i.getResolutionForExtentInternal(o),a=i.getResolution()/s;r=r.clone(),r.scale(a*a)}i.fitInternal(r,{duration:this.duration_,easing:Zn})}},qk=iw;var hs={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};var rw=class extends Ki{constructor(e){super(),e=e||{},this.defaultCondition_=function(n){return wm(n)&&Em(n)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let n=!1;if(e.type==V.KEYDOWN){let i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==hs.DOWN||r==hs.LEFT||r==hs.RIGHT||r==hs.UP)){let s=e.map.getView(),a=s.getResolution()*this.pixelDelta_,l=0,c=0;r==hs.DOWN?c=-a:r==hs.LEFT?l=-a:r==hs.RIGHT?l=a:c=a;let u=[l,c];oc(u,s.getRotation()),Fk(s,u,this.duration_),i.preventDefault(),n=!0}}return!n}},Yk=rw;var ow=class extends Ki{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(n){return!Bk(n)&&Em(n)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let n=!1;if(e.type==V.KEYDOWN||e.type==V.KEYPRESS){let i=e.originalEvent,r=i.key;if(this.condition_(e)&&(r==="+"||r==="-")){let o=e.map,s=r==="+"?this.delta_:-this.delta_,a=o.getView();mc(a,s,void 0,this.duration_),i.preventDefault(),n=!0}}return!n}},Xk=ow;var sw=class{constructor(e,n,i){this.decay_=e,this.minVelocity_=n,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,n){this.points_.push(e,n,Date.now())}end(){if(this.points_.length<6)return!1;let e=Date.now()-this.delay_,n=this.points_.length-3;if(this.points_[n+2]<e)return!1;let i=n-3;for(;i>0&&this.points_[i+2]>e;)i-=3;let r=this.points_[n+2]-this.points_[i+2];if(r<1e3/60)return!1;let o=this.points_[n]-this.points_[i],s=this.points_[n+1]-this.points_[i+1];return this.angle_=Math.atan2(s,o),this.initialVelocity_=Math.sqrt(o*o+s*s)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},Zk=sw;var aw=class extends Ki{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;let n=e.condition?e.condition:jk;this.condition_=e.onFocusOnly?$d(bm,n):n,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;let e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==V.WHEEL)return!0;let i=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let o;if(e.type==V.WHEEL&&(o=r.deltaY,JN&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(o/=sm),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(o*=40)),o===0)return!1;this.lastDelta_=o;let s=Date.now();this.startTime_===void 0&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(o)<4?"trackpad":"wheel");let a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-o/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=o;let l=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(e){let n=e.getView();n.getAnimating()&&n.cancelAnimations();let i=-Oe(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),mc(n,i,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}},Kk=aw;var lw=class extends Qi{constructor(e){e=e||{};let n=e;n.stopDown||(n.stopDown=Lr),super(n),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let n=0,i=this.targetPointers[0],r=this.targetPointers[1],o=Math.atan2(r.clientY-i.clientY,r.clientX-i.clientX);if(this.lastAngle_!==void 0){let l=o-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=l}this.lastAngle_=o;let s=e.map,a=s.getView();a.getConstraints().rotation!==sc&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(yc(this.targetPointers))),this.rotating_&&(s.render(),a.adjustRotationInternal(n,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){let n=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}},Qk=lw;var cw=class extends Qi{constructor(e){e=e||{};let n=e;n.stopDown||(n.stopDown=Lr),super(n),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let n=1,i=this.targetPointers[0],r=this.targetPointers[1],o=i.clientX-r.clientX,s=i.clientY-r.clientY,a=Math.sqrt(o*o+s*s);this.lastDistance_!==void 0&&(n=this.lastDistance_/a),this.lastDistance_=a;let l=e.map,c=l.getView();n!=1&&(this.lastScaleDelta_=n),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(yc(this.targetPointers))),l.render(),c.adjustResolutionInternal(n,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){let i=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){let n=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}return!1}},Jk=cw;function eF(t){t=t||{};let e=new Qt,n=new Zk(-.005,.05,100);return(t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0)&&e.push(new $k),(t.doubleClickZoom!==void 0?t.doubleClickZoom:!0)&&e.push(new Lk({delta:t.zoomDelta,duration:t.zoomDuration})),(t.dragPan!==void 0?t.dragPan:!0)&&e.push(new Hk({onFocusOnly:t.onFocusOnly,kinetic:n})),(t.pinchRotate!==void 0?t.pinchRotate:!0)&&e.push(new Qk),(t.pinchZoom!==void 0?t.pinchZoom:!0)&&e.push(new Jk({duration:t.zoomDuration})),(t.keyboard!==void 0?t.keyboard:!0)&&(e.push(new Yk),e.push(new Xk({delta:t.zoomDelta,duration:t.zoomDuration}))),(t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0)&&e.push(new Kk({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration})),(t.shiftDragZoom!==void 0?t.shiftDragZoom:!0)&&e.push(new qk({duration:t.zoomDuration})),e}function tF(t){if(t instanceof ha){t.setMapInternal(null);return}t instanceof Ud&&t.getLayers().forEach(tF)}function nF(t,e){if(t instanceof ha){t.setMapInternal(e);return}if(t instanceof Ud){let n=t.getLayers().getArray();for(let i=0,r=n.length;i<r;++i)nF(n[i],e)}}var uw=class extends ht{constructor(e){super(),e=e||{},this.on,this.once,this.un;let n=eZ(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:sm,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=bt(),this.pixelToCoordinateTransform_=bt(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=n.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=n.controls||kk(),this.interactions=n.interactions||eF({onFocusOnly:!0}),this.overlays_=n.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new Ak(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(jt.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(jt.VIEW,this.handleViewChanged_),this.addChangeListener(jt.SIZE,this.handleSizeChanged_),this.addChangeListener(jt.TARGET,this.handleTargetChanged_),this.setProperties(n.values);let i=this;e.view&&!(e.view instanceof dn)&&e.view.then(function(r){i.setView(new dn(r))}),this.controls.addEventListener(Dt.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Dt.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Dt.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Dt.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Dt.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Dt.REMOVE,r=>{let o=r.element.getId();o!==void 0&&delete this.overlayIdIndex_[o.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){nF(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){let n=e.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,n,i){if(!this.frameState_||!this.renderer_)return;let r=this.getCoordinateFromPixelInternal(e);i=i!==void 0?i:{};let o=i.hitTolerance!==void 0?i.hitTolerance:0,s=i.layerFilter!==void 0?i.layerFilter:Fr,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,o,a,n,null,s,null)}getFeaturesAtPixel(e,n){let i=[];return this.forEachFeatureAtPixel(e,function(r){i.push(r)},n),i}getAllLayers(){let e=[];function n(i){i.forEach(function(r){r instanceof Ud?n(r.getLayers()):e.push(r)})}return n(this.getLayers()),e}hasFeatureAtPixel(e,n){if(!this.frameState_||!this.renderer_)return!1;let i=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};let r=n.layerFilter!==void 0?n.layerFilter:Fr,o=n.hitTolerance!==void 0?n.hitTolerance:0,s=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,o,s,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){let i=this.viewport_.getBoundingClientRect(),r=this.getSize(),o=i.width/r[0],s=i.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-i.left)/o,(a.clientY-i.top)/s]}getTarget(){return this.get(jt.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return Cd(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){let n=this.frameState_;return n?it(n.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){let n=this.overlayIdIndex_[e.toString()];return n!==void 0?n:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(jt.LAYERGROUP)}setLayers(e){let n=this.getLayerGroup();if(e instanceof Qt){n.setLayers(e);return}let i=n.getLayers();i.clear(),i.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){let e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){let r=e[n];if(!r.visible)continue;let o=r.layer.getRenderer();if(o&&!o.ready)return!0;let s=r.layer.getSource();if(s&&s.loading)return!0}return!1}getPixelFromCoordinate(e){let n=mi(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)}getPixelFromCoordinateInternal(e){let n=this.frameState_;return n?it(n.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(jt.SIZE)}getView(){return this.get(jt.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){let e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,n,i,r){return Rk(this.frameState_,e,n,i,r)}handleBrowserEvent(e,n){n=n||e.type;let i=new Xi(n,this,e);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(e){if(!this.frameState_)return;let n=e.originalEvent,i=n.type;if(i===zd.POINTERDOWN||i===V.WHEEL||i===V.KEYDOWN){let r=this.getOwnerDocument(),o=this.viewport_.getRootNode?this.viewport_.getRootNode():r,s=n.target;if(this.overlayContainerStopEvent_.contains(s)||!(o===r?r.documentElement:o).contains(s))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){let r=this.getInteractions().getArray().slice();for(let o=r.length-1;o>=0;o--){let s=r[o];if(s.getMap()!==this||!s.getActive()||!this.getTargetElement())continue;if(!s.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){let e=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){let r=this.maxTilesLoading_,o=r;if(e){let s=e.viewHints;if(s[xt.ANIMATING]||s[xt.INTERACTING]){let a=Date.now()-e.time>8;r=a?0:8,o=a?0:2}}n.getTilesLoading()<r&&(n.reprioritize(),n.loadMoreTiles(r,o))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(Ft.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Ft.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new ds(Zi.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new ds(Zi.LOADSTART,this,e))));let i=this.postRenderFunctions_;for(let r=0,o=i.length;r<o;++r)i[r](this,e);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,r=this.targetChangeHandlerKeys_.length;i<r;++i)xe(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(V.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(V.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Rd(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);let i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}let e=this.getTarget(),n=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=n,!n)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{n.appendChild(this.viewport_),this.renderer_||(this.renderer_=new Sk(this)),this.mapBrowserEventHandler_=new Mk(this,this.moveTolerance_);for(let o in ze)this.mapBrowserEventHandler_.addEventListener(ze[o],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(V.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(V.WHEEL,this.boundHandleBrowserEvent_,lm?{passive:!1}:!1);let i=this.keyboardEventTarget_?this.keyboardEventTarget_:n;this.targetChangeHandlerKeys_=[oe(i,V.KEYDOWN,this.handleBrowserEvent,this),oe(i,V.KEYPRESS,this.handleBrowserEvent,this)];let r=n.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(n)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(xe(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(xe(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);let e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=oe(e,di.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=oe(e,V.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(xe),this.layerGroupPropertyListenerKeys_=null);let e=this.getLayerGroup();e&&(this.handleLayerAdd_(new wi("addlayer",e)),this.layerGroupPropertyListenerKeys_=[oe(e,di.PROPERTYCHANGE,this.render,this),oe(e,V.CHANGE,this.render,this),oe(e,"addlayer",this.handleLayerAdd_,this),oe(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){let e=this.getLayerGroup().getLayerStatesArray();for(let n=0,i=e.length;n<i;++n){let r=e[n].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){tF(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){let n=this.getSize(),i=this.getView(),r=this.frameState_,o=null;if(n!==void 0&&Jb(n)&&i&&i.isDef()){let s=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(o={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:bd(a.center,a.resolution,a.rotation,n),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:n,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:s,wantedTiles:{},mapId:se(this),renderTargets:{}},a.nextCenter&&a.nextResolution){let l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;o.nextExtent=bd(a.nextCenter,a.nextResolution,l,n)}}this.frameState_=o,this.renderer_.renderFrame(o),o&&(o.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,o.postRenderFunctions),r&&(!this.previousExtent_||!es(this.previousExtent_)&&!Hr(o.extent,this.previousExtent_))&&(this.dispatchEvent(new ds(Zi.MOVESTART,this,r)),this.previousExtent_=aa(this.previousExtent_)),this.previousExtent_&&!o.viewHints[xt.ANIMATING]&&!o.viewHints[xt.INTERACTING]&&!Hr(o.extent,this.previousExtent_)&&(this.dispatchEvent(new ds(Zi.MOVEEND,this,o)),Bg(o.extent,this.previousExtent_))),this.dispatchEvent(new ds(Zi.POSTRENDER,this,o)),this.renderComplete_=this.hasListener(Zi.LOADSTART)||this.hasListener(Zi.LOADEND)||this.hasListener(Ft.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){let n=this.getLayerGroup();n&&this.handleLayerRemove_(new wi("removelayer",n)),this.set(jt.LAYERGROUP,e)}setSize(e){this.set(jt.SIZE,e)}setTarget(e){this.set(jt.TARGET,e)}setView(e){if(!e||e instanceof dn){this.set(jt.VIEW,e);return}this.set(jt.VIEW,new dn);let n=this;e.then(function(i){n.setView(new dn(i))})}updateSize(){let e=this.getTargetElement(),n;if(e){let r=getComputedStyle(e),o=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),s=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(o)&&!isNaN(s)&&(n=[o,s],!Jb(n)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&Gg("No map visible because the map container's width or height are 0."))}let i=this.getSize();n&&(!i||!$t(n,i))&&(this.setSize(n),this.updateViewportSize_(n))}updateViewportSize_(e){let n=this.getView();n&&n.setViewportSize(e)}};function eZ(t){let e=null;t.keyboardEventTarget!==void 0&&(e=typeof t.keyboardEventTarget=="string"?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);let n={},i=t.layers&&typeof t.layers.getLayers=="function"?t.layers:new Ud({layers:t.layers});n[jt.LAYERGROUP]=i,n[jt.TARGET]=t.target,n[jt.VIEW]=t.view instanceof dn?t.view:new dn;let r;t.controls!==void 0&&(Array.isArray(t.controls)?r=new Qt(t.controls.slice()):(Z(typeof t.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls));let o;t.interactions!==void 0&&(Array.isArray(t.interactions)?o=new Qt(t.interactions.slice()):(Z(typeof t.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),o=t.interactions));let s;return t.overlays!==void 0?Array.isArray(t.overlays)?s=new Qt(t.overlays.slice()):(Z(typeof t.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),s=t.overlays):s=new Qt,{controls:r,interactions:o,keyboardEventTarget:e,overlays:s,values:n}}var iF=uw;function Gd(t,e,n,i,r,o,s){let a,l,c=(n-e)/i;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=t[e],d=t[e+1],h=0,f=[0];for(let g=e+i;g<n;g+=i){let y=t[g],_=t[g+1];h+=Math.sqrt((y-u)*(y-u)+(_-d)*(_-d)),f.push(h),u=y,d=_}let p=r*h,m=jP(f,p);m<0?(l=(p-f[-m-2])/(f[-m-1]-f[-m-2]),a=e+(-m-2)*i):a=e+m*i}s=s>1?s:2,o=o||new Array(s);for(let u=0;u<s;++u)o[u]=a===void 0?NaN:l===void 0?t[a+u]:kt(t[a+u],t[a+i+u],l);return o}function rF(t,e,n,i,r,o){if(n==e)return null;let s;if(r<t[e+i-1])return o?(s=t.slice(e,e+i),s[i-1]=r,s):null;if(t[n-1]<r)return o?(s=t.slice(n-i,n),s[i-1]=r,s):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;for(;a<l;){let h=a+l>>1;r<t[(h+1)*i-1]?l=h:a=h+1}let c=t[a*i-1];if(r==c)return t.slice((a-1)*i,(a-1)*i+i);let u=t[(a+1)*i-1],d=(r-c)/(u-c);s=[];for(let h=0;h<i-1;++h)s.push(kt(t[(a-1)*i+h],t[a*i+h],d));return s.push(r),s}function Im(t,e,n,i){let r=t[e],o=t[e+1],s=0;for(let a=e+i;a<n;a+=i){let l=t[a],c=t[a+1];s+=Math.sqrt((l-r)*(l-r)+(c-o)*(c-o)),r=l,o=c}return s}var dw=class t extends rs{constructor(e,n){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(n,e):this.setCoordinates(e,n)}appendCoordinate(e){Zo(this.flatCoordinates,e),this.changed()}clone(){let e=new t(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,n,i,r){return r<ec(this.getExtent(),e,n)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(wd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Ed(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,n,i,r))}forEachSegment(e){return Qg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,n){return this.layout!="XYM"&&this.layout!="XYZM"?null:(n=n!==void 0?n:!1,rF(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n))}getCoordinates(){return $i(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,n){return Gd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,this.stride)}getLength(){return Im(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){let n=[];return n.length=da(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,n,0),new t(n,"XY")}getType(){return"LineString"}intersectsExtent(e){return Jg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,n){this.setLayout(n,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Dd(this.flatCoordinates,0,e,this.stride),this.changed()}},hw=dw;var qd={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Yd=[qd.FILL],Ji=[qd.STROKE],eo=[qd.BEGIN_PATH],fw=[qd.CLOSE_PATH],W=qd;var pw=class{drawCustom(e,n,i,r,o){}drawGeometry(e){}setStyle(e){}drawCircle(e,n,i){}drawFeature(e,n,i){}drawGeometryCollection(e,n,i){}drawLineString(e,n,i){}drawMultiLineString(e,n,i){}drawMultiPoint(e,n,i){}drawMultiPolygon(e,n,i){}drawPoint(e,n,i){}drawPolygon(e,n,i){}drawText(e,n,i){}setFillStrokeStyle(e,n){}setImageStyle(e,n){}setTextStyle(e,n){}},Sm=pw;var gw=class extends Sm{constructor(e,n,i,r){super(),this.tolerance=e,this.maxExtent=n,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){let n=this.pixelRatio;return n==1?e:e.map(function(i){return i*n})}appendFlatPointCoordinates(e,n){let i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates,s=o.length;for(let a=0,l=e.length;a<l;a+=n)r[0]=e[a],r[1]=e[a+1],pi(i,r)&&(o[s++]=r[0],o[s++]=r[1]);return s}appendFlatLineCoordinates(e,n,i,r,o,s){let a=this.coordinates,l=a.length,c=this.getBufferedMaxExtent();s&&(n+=r);let u=e[n],d=e[n+1],h=this.tmpCoordinate_,f=!0,p,m,g;for(p=n+r;p<i;p+=r)h[0]=e[p],h[1]=e[p+1],g=jg(c,h),g!==m?(f&&(a[l++]=u,a[l++]=d,f=!1),a[l++]=h[0],a[l++]=h[1]):g===ft.INTERSECTING?(a[l++]=h[0],a[l++]=h[1],f=!1):f=!0,u=h[0],d=h[1],m=g;return(o&&f||p===n+r)&&(a[l++]=u,a[l++]=d),l}drawCustomCoordinates_(e,n,i,r,o){for(let s=0,a=i.length;s<a;++s){let l=i[s],c=this.appendFlatLineCoordinates(e,n,l,r,!1,!1);o.push(c),n=l}return n}drawCustom(e,n,i,r,o){this.beginGeometry(e,n,o);let s=e.getType(),a=e.getStride(),l=this.coordinates.length,c,u,d,h,f;switch(s){case"MultiPolygon":c=e.getOrientedFlatCoordinates(),h=[];let p=e.getEndss();f=0;for(let m=0,g=p.length;m<g;++m){let y=[];f=this.drawCustomCoordinates_(c,f,p[m],a,y),h.push(y)}this.instructions.push([W.CUSTOM,l,h,e,i,Lb,o]),this.hitDetectionInstructions.push([W.CUSTOM,l,h,e,r||i,Lb,o]);break;case"Polygon":case"MultiLineString":d=[],c=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),f=this.drawCustomCoordinates_(c,0,e.getEnds(),a,d),this.instructions.push([W.CUSTOM,l,d,e,i,ac,o]),this.hitDetectionInstructions.push([W.CUSTOM,l,d,e,r||i,ac,o]);break;case"LineString":case"Circle":c=e.getFlatCoordinates(),u=this.appendFlatLineCoordinates(c,0,c.length,a,!1,!1),this.instructions.push([W.CUSTOM,l,u,e,i,$i,o]),this.hitDetectionInstructions.push([W.CUSTOM,l,u,e,r||i,$i,o]);break;case"MultiPoint":c=e.getFlatCoordinates(),u=this.appendFlatPointCoordinates(c,a),u>l&&(this.instructions.push([W.CUSTOM,l,u,e,i,$i,o]),this.hitDetectionInstructions.push([W.CUSTOM,l,u,e,r||i,$i,o]));break;case"Point":c=e.getFlatCoordinates(),this.coordinates.push(c[0],c[1]),u=this.coordinates.length,this.instructions.push([W.CUSTOM,l,u,e,i,void 0,o]),this.hitDetectionInstructions.push([W.CUSTOM,l,u,e,r||i,void 0,o]);break;default:}this.endGeometry(n)}beginGeometry(e,n,i){this.beginGeometryInstruction1_=[W.BEGIN_GEOMETRY,n,0,e,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[W.BEGIN_GEOMETRY,n,0,e,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let e=this.hitDetectionInstructions;e.reverse();let n,i=e.length,r,o,s=-1;for(n=0;n<i;++n)r=e[n],o=r[0],o==W.END_GEOMETRY?s=n:o==W.BEGIN_GEOMETRY&&(r[2]=n,BP(this.hitDetectionInstructions,s,n),s=-1)}setFillStrokeStyle(e,n){let i=this.state;if(e){let r=e.getColor();i.fillPatternScale=r&&typeof r=="object"&&"src"in r?this.pixelRatio:1,i.fillStyle=fn(r||Ct)}else i.fillStyle=void 0;if(n){let r=n.getColor();i.strokeStyle=fn(r||Xr);let o=n.getLineCap();i.lineCap=o!==void 0?o:Gi;let s=n.getLineDash();i.lineDash=s?s.slice():pn;let a=n.getLineDashOffset();i.lineDashOffset=a||gn;let l=n.getLineJoin();i.lineJoin=l!==void 0?l:qi;let c=n.getWidth();i.lineWidth=c!==void 0?c:Kr;let u=n.getMiterLimit();i.miterLimit=u!==void 0?u:Yr,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(e){let n=e.fillStyle,i=[W.SET_FILL_STYLE,n];return typeof n!="string"&&i.push(e.fillPatternScale),i}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[W.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,n){let i=e.fillStyle;(typeof i!="string"||e.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(n.call(this,e)),e.currentFillStyle=i)}updateStrokeStyle(e,n){let i=e.strokeStyle,r=e.lineCap,o=e.lineDash,s=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=i||e.currentLineCap!=r||o!=e.currentLineDash&&!$t(e.currentLineDash,o)||e.currentLineDashOffset!=s||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(i!==void 0&&n.call(this,e),e.currentStrokeStyle=i,e.currentLineCap=r,e.currentLineDash=o,e.currentLineDashOffset=s,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let n=[W.END_GEOMETRY,e];this.instructions.push(n),this.hitDetectionInstructions.push(n)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Bg(this.maxExtent),this.maxLineWidth>0)){let e=this.resolution*(this.maxLineWidth+1)/2;Jl(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}},er=gw;var mw=class extends er{constructor(e,n,i,r){super(e,n,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,n,i){if(!this.image_||this.maxExtent&&!pi(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,n,i);let r=e.getFlatCoordinates(),o=e.getStride(),s=this.coordinates.length,a=this.appendFlatPointCoordinates(r,o);this.instructions.push([W.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}drawMultiPoint(e,n,i){if(!this.image_)return;this.beginGeometry(e,n,i);let r=e.getFlatCoordinates(),o=[];for(let l=0,c=r.length;l<c;l+=e.getStride())(!this.maxExtent||pi(this.maxExtent,r.slice(l,l+2)))&&o.push(r[l],r[l+1]);let s=this.coordinates.length,a=this.appendFlatPointCoordinates(o,2);this.instructions.push([W.DRAW_IMAGE,s,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([W.DRAW_IMAGE,s,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(n)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,n){let i=e.getAnchor(),r=e.getSize(),o=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}},oF=mw;var yw=class extends er{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinates_(e,n,i,r){let o=this.coordinates.length,s=this.appendFlatLineCoordinates(e,n,i,r,!1,!1),a=[W.MOVE_TO_LINE_TO,o,s];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(e,n,i){let r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,pn,gn],eo);let a=e.getFlatCoordinates(),l=e.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(Ji),this.endGeometry(n)}drawMultiLineString(e,n,i){let r=this.state,o=r.strokeStyle,s=r.lineWidth;if(o===void 0||s===void 0)return;this.updateStrokeStyle(r,this.applyStroke),this.beginGeometry(e,n,i),this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,pn,gn],eo);let a=e.getEnds(),l=e.getFlatCoordinates(),c=e.getStride(),u=0;for(let d=0,h=a.length;d<h;++d)u=this.drawFlatCoordinates_(l,u,a[d],c);this.hitDetectionInstructions.push(Ji),this.endGeometry(n)}finish(){let e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Ji),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Ji),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(eo)}},sF=yw;var _w=class extends er{constructor(e,n,i,r){super(e,n,i,r)}drawFlatCoordinatess_(e,n,i,r){let o=this.state,s=o.fillStyle!==void 0,a=o.strokeStyle!==void 0,l=i.length;this.instructions.push(eo),this.hitDetectionInstructions.push(eo);for(let c=0;c<l;++c){let u=i[c],d=this.coordinates.length,h=this.appendFlatLineCoordinates(e,n,u,r,!0,!a),f=[W.MOVE_TO_LINE_TO,d,h];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(fw),this.hitDetectionInstructions.push(fw)),n=u}return s&&(this.instructions.push(Yd),this.hitDetectionInstructions.push(Yd)),a&&(this.instructions.push(Ji),this.hitDetectionInstructions.push(Ji)),n}drawCircle(e,n,i){let r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ct]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,pn,gn]);let a=e.getFlatCoordinates(),l=e.getStride(),c=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);let u=[W.CIRCLE,c];this.instructions.push(eo,u),this.hitDetectionInstructions.push(eo,u),r.fillStyle!==void 0&&(this.instructions.push(Yd),this.hitDetectionInstructions.push(Yd)),r.strokeStyle!==void 0&&(this.instructions.push(Ji),this.hitDetectionInstructions.push(Ji)),this.endGeometry(n)}drawPolygon(e,n,i){let r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ct]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,pn,gn]);let a=e.getEnds(),l=e.getOrientedFlatCoordinates(),c=e.getStride();this.drawFlatCoordinatess_(l,0,a,c),this.endGeometry(n)}drawMultiPolygon(e,n,i){let r=this.state,o=r.fillStyle,s=r.strokeStyle;if(o===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,n,i),r.fillStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_FILL_STYLE,Ct]),r.strokeStyle!==void 0&&this.hitDetectionInstructions.push([W.SET_STROKE_STYLE,r.strokeStyle,r.lineWidth,r.lineCap,r.lineJoin,r.miterLimit,pn,gn]);let a=e.getEndss(),l=e.getOrientedFlatCoordinates(),c=e.getStride(),u=0;for(let d=0,h=a.length;d<h;++d)u=this.drawFlatCoordinatess_(l,u,a[d],c);this.endGeometry(n)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let e=this.tolerance;if(e!==0){let n=this.coordinates;for(let i=0,r=n.length;i<r;++i)n[i]=os(n[i],e)}return super.finish()}setFillStrokeStyles_(){let e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}},vw=_w;function aF(t,e,n,i,r){let o=[],s=n,a=0,l=e.slice(n,2);for(;a<t&&s+r<i;){let[c,u]=l.slice(-2),d=e[s+r],h=e[s+r+1],f=Math.sqrt((d-c)*(d-c)+(h-u)*(h-u));if(a+=f,a>=t){let p=(t-a+f)/f,m=kt(c,d,p),g=kt(u,h,p);l.push(m,g),o.push(l),l=[m,g],a==t&&(s+=r),a=0}else if(a<t)l.push(e[s+r],e[s+r+1]),s+=r;else{let p=f-a,m=kt(c,d,p/f),g=kt(u,h,p/f);l.push(m,g),o.push(l),l=[m,g],a=0,s+=r}}return a>0&&o.push(l),o}function lF(t,e,n,i,r){let o=n,s=n,a=0,l=0,c=n,u,d,h,f,p,m,g,y,_,x;for(d=n;d<i;d+=r){let b=e[d],v=e[d+1];p!==void 0&&(_=b-p,x=v-m,f=Math.sqrt(_*_+x*x),g!==void 0&&(l+=h,u=Math.acos((g*_+y*x)/(h*f)),u>t&&(l>a&&(a=l,o=c,s=d),l=0,c=d-r)),h=f,g=_,y=x),p=b,m=v}return l+=f,l>a?[c,d]:[o,s]}var Xd={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1},xw=class extends er{constructor(e,n,i,r){super(e,n,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Ct]={fillStyle:Ct},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){let e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,n,i){let r=this.textFillState_,o=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!r&&!o)return;let a=this.coordinates,l=a.length,c=e.getType(),u=null,d=e.getStride();if(s.placement==="line"&&(c=="LineString"||c=="MultiLineString"||c=="Polygon"||c=="MultiPolygon")){if(!Ke(this.maxExtent,e.getExtent()))return;let h;if(u=e.getFlatCoordinates(),c=="LineString")h=[u.length];else if(c=="MultiLineString")h=e.getEnds();else if(c=="Polygon")h=e.getEnds().slice(0,1);else if(c=="MultiPolygon"){let g=e.getEndss();h=[];for(let y=0,_=g.length;y<_;++y)h.push(g[y][0])}this.beginGeometry(e,n,i);let f=s.repeat,p=f?void 0:s.textAlign,m=0;for(let g=0,y=h.length;g<y;++g){let _;f?_=aF(f*this.resolution,u,m,h[g],d):_=[u.slice(m,h[g])];for(let x=0,b=_.length;x<b;++x){let v=_[x],C=0,E=v.length;if(p==null){let D=lF(s.maxAngle,v,0,v.length,2);C=D[0],E=D[1]}for(let D=C;D<E;D+=d)a.push(v[D],v[D+1]);let w=a.length;m=h[g],this.drawChars_(l,w),l=w}}this.endGeometry(n)}else{let h=s.overflow?null:[];switch(c){case"Point":case"MultiPoint":u=e.getFlatCoordinates();break;case"LineString":u=e.getFlatMidpoint();break;case"Circle":u=e.getCenter();break;case"MultiLineString":u=e.getFlatMidpoints(),d=2;break;case"Polygon":u=e.getFlatInteriorPoint(),s.overflow||h.push(u[2]/this.resolution),d=3;break;case"MultiPolygon":let _=e.getFlatInteriorPoints();u=[];for(let x=0,b=_.length;x<b;x+=3)s.overflow||h.push(_[x+2]/this.resolution),u.push(_[x],_[x+1]);if(u.length===0)return;d=2;break;default:}let f=this.appendFlatPointCoordinates(u,d);if(f===l)return;if(h&&(f-l)/2!==u.length/d){let _=l/2;h=h.filter((x,b)=>{let v=a[(_+b)*2]===u[b*d]&&a[(_+b)*2+1]===u[b*d+1];return v||--_,v})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,n,i);let p=s.padding;if(p!=Zr&&(s.scale[0]<0||s.scale[1]<0)){let _=s.padding[0],x=s.padding[1],b=s.padding[2],v=s.padding[3];s.scale[0]<0&&(x=-x,v=-v),s.scale[1]<0&&(_=-_,b=-b),p=[_,x,b,v]}let m=this.pixelRatio;this.instructions.push([W.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,p==Zr?Zr:p.map(function(_){return _*m}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);let g=1/m,y=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=Ct,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([W.DRAW_IMAGE,l,f,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,this.declutterMode_,this.declutterImageWithText_,p,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Ct:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),s.backgroundFill&&(this.state.fillStyle=y,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(n)}}saveTextStates_(){let e=this.textStrokeState_,n=this.textState_,i=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));let o=this.textKey_;o in this.textStates||(this.textStates[o]={font:n.font,textAlign:n.textAlign||cs,justify:n.justify,textBaseline:n.textBaseline||ga,scale:n.scale});let s=this.fillKey_;i&&(s in this.fillStates||(this.fillStates[s]={fillStyle:i.fillStyle}))}drawChars_(e,n){let i=this.textStrokeState_,r=this.textState_,o=this.strokeKey_,s=this.textKey_,a=this.fillKey_;this.saveTextStates_();let l=this.pixelRatio,c=Xd[r.textBaseline],u=this.textOffsetY_*l,d=this.text_,h=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([W.DRAW_CHARS,e,n,c,r.overflow,a,r.maxAngle,l,u,o,h*l,d,s,1,this.declutterMode_]),this.hitDetectionInstructions.push([W.DRAW_CHARS,e,n,c,r.overflow,a&&Ct,r.maxAngle,l,u,o,h*l,d,s,1/l,this.declutterMode_])}setTextStyle(e,n){let i,r,o;if(!e)this.text_="";else{let s=e.getFill();s?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=fn(s.getColor()||Ct)):(r=null,this.textFillState_=r);let a=e.getStroke();if(!a)o=null,this.textStrokeState_=o;else{o=this.textStrokeState_,o||(o={},this.textStrokeState_=o);let p=a.getLineDash(),m=a.getLineDashOffset(),g=a.getWidth(),y=a.getMiterLimit();o.lineCap=a.getLineCap()||Gi,o.lineDash=p?p.slice():pn,o.lineDashOffset=m===void 0?gn:m,o.lineJoin=a.getLineJoin()||qi,o.lineWidth=g===void 0?Kr:g,o.miterLimit=y===void 0?Yr:y,o.strokeStyle=fn(a.getColor()||Xr)}i=this.textState_;let l=e.getFont()||um;sk(l);let c=e.getScaleArray();i.overflow=e.getOverflow(),i.font=l,i.maxAngle=e.getMaxAngle(),i.placement=e.getPlacement(),i.textAlign=e.getTextAlign(),i.repeat=e.getRepeat(),i.justify=e.getJustify(),i.textBaseline=e.getTextBaseline()||ga,i.backgroundFill=e.getBackgroundFill(),i.backgroundStroke=e.getBackgroundStroke(),i.padding=e.getPadding()||Zr,i.scale=c===void 0?[1,1]:c;let u=e.getOffsetX(),d=e.getOffsetY(),h=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=d===void 0?0:d,this.textRotateWithView_=h===void 0?!1:h,this.textRotation_=f===void 0?0:f,this.strokeKey_=o?(typeof o.strokeStyle=="string"?o.strokeStyle:se(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?typeof r.fillStyle=="string"?r.fillStyle:"|"+se(r.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=n}},cF=xw;var tZ={Circle:vw,Default:er,Image:oF,LineString:sF,Polygon:vw,Text:cF},bw=class{constructor(e,n,i,r){this.tolerance_=e,this.maxExtent_=n,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){let e={};for(let n in this.buildersByZIndex_){e[n]=e[n]||{};let i=this.buildersByZIndex_[n];for(let r in i){let o=i[r].finish();e[n][r]=o}}return e}getBuilder(e,n){let i=e!==void 0?e.toString():"0",r=this.buildersByZIndex_[i];r===void 0&&(r={},this.buildersByZIndex_[i]=r);let o=r[n];if(o===void 0){let s=tZ[n];o=new s(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[n]=o}return o}},uF=bw;var Cw=class extends Pg{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e}getFeatures(e){return ue()}getData(e){return null}prepareFrame(e){return ue()}renderFrame(e,n){return ue()}loadedTileCallback(e,n,i){e[n]||(e[n]={}),e[n][i.tileCoord.toString()]=i}createLoadedTileFinder(e,n,i){return(r,o)=>{let s=this.loadedTileCallback.bind(this,i,r);return e.forEachLoadedTile(n,r,o,s)}}forEachFeatureAtCoordinate(e,n,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){let n=e.target;(n.getState()===Q.LOADED||n.getState()===Q.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let n=e.getState();return n!=Q.LOADED&&n!=Q.ERROR&&e.addEventListener(V.CHANGE,this.boundHandleImageChange_),n==Q.IDLE&&(e.load(),n=e.getState()),n==Q.LOADED}renderIfReadyAndVisible(){let e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}},dF=Cw;var ww=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(lc(),{get:(e,n)=>{if(typeof lc()[n]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n),this.pushMethodArgs_},set:(e,n,i)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(n,i),!0)})}pushMethodArgs_=(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this);pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(n=>{for(let i=0,r=n.length;i<r;++i){let o=n[i];if(typeof o=="function"){o(e);continue}let s=n[++i];if(typeof e[o]=="function")e[o](...s);else{if(typeof s=="function"){e[o]=s(e);continue}e[o]=s}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}},Mm=ww;var Dw=[],vc=null;function nZ(){vc=Le(1,1,void 0,{willReadFrequently:!0})}var Ew=class extends dF{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=bt(),this.pixelTransform=bt(),this.inversePixelTransform=bt(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,n,i){vc||nZ(),vc.clearRect(0,0,1,1);let r;try{vc.drawImage(e,n,i,1,1,0,0,1,1),r=vc.getImageData(0,0,1,1).data}catch{return vc=null,null}return r}getBackground(e){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(e.viewState.resolution)),i||void 0}useContainer(e,n,i){let r=this.getLayer().getClassName(),o,s;if(e&&e.className===r&&(!i||e&&e.style.backgroundColor&&$t(qr(e.style.backgroundColor),qr(i)))){let a=e.firstElementChild;a instanceof HTMLCanvasElement&&(s=a.getContext("2d"))}if(s&&s.canvas.style.transform===n?(this.container=e,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){o=document.createElement("div"),o.className=r;let a=o.style;a.position="absolute",a.width="100%",a.height="100%",s=Le();let l=s.canvas;o.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=o,this.context=s}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(e,n,i){let r=Xn(i),o=rc(i),s=ic(i),a=nc(i);it(n.coordinateToPixelTransform,r),it(n.coordinateToPixelTransform,o),it(n.coordinateToPixelTransform,s),it(n.coordinateToPixelTransform,a);let l=this.inversePixelTransform;it(l,r),it(l,o),it(l,s),it(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}prepareContainer(e,n){let i=e.extent,r=e.viewState.resolution,o=e.viewState.rotation,s=e.pixelRatio,a=Math.round(ce(i)/r*s),l=Math.round(Ye(i)/r*s);Lt(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/s,1/s,o,-a/2,-l/2),Yg(this.inversePixelTransform,this.pixelTransform);let c=CN(this.pixelTransform);if(this.useContainer(n,c,this.getBackground(e)),!this.containerReused){let u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),c!==u.style.transform&&(u.style.transform=c)}}dispatchRenderEvent_(e,n,i){let r=this.getLayer();if(r.hasListener(e)){let o=new xm(e,this.inversePixelTransform,i,n);r.dispatchEvent(o)}}preRender(e,n){this.frameState=n,!n.declutter&&this.dispatchRenderEvent_(Ft.PRERENDER,e,n)}postRender(e,n){n.declutter||this.dispatchRenderEvent_(Ft.POSTRENDER,e,n)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new Mm),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(Ft.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(Ft.POSTRENDER,this.context,e))}getRenderTransform(e,n,i,r,o,s,a){let l=o/2,c=s/2,u=r/n,d=-u,h=-e[0]+a,f=-e[1];return Lt(this.tempTransform,l,c,u,d,-i,h,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}},Tm=Ew;function hF(t,e,n,i,r,o,s,a,l,c,u,d){let h=t[e],f=t[e+1],p=0,m=0,g=0,y=0;function _(){p=h,m=f,e+=i,h=t[e],f=t[e+1],y+=g,g=Math.sqrt((h-p)*(h-p)+(f-m)*(f-m))}do _();while(e<n-i&&y+g<o);let x=g===0?0:(o-y)/g,b=kt(p,h,x),v=kt(m,f,x),C=e-i,E=y,w=o+a*l(c,r,u);for(;e<n-i&&y+g<w;)_();x=g===0?0:(w-y)/g;let D=kt(p,h,x),A=kt(m,f,x),M;if(d){let R=[b,v,D,A];Xg(R,0,4,2,d,R,R),M=R[0]>R[2]}else M=b>D;let T=Math.PI,F=[],q=C+i===e;e=C,g=0,y=E,h=t[e],f=t[e+1];let O;if(q){_(),O=Math.atan2(f-m,h-p),M&&(O+=O>0?-T:T);let R=(D+b)/2,k=(A+v)/2;return F[0]=[R,k,(w-o)/2,O,r],F}r=r.replace(/\n/g," ");for(let R=0,k=r.length;R<k;){_();let B=Math.atan2(f-m,h-p);if(M&&(B+=B>0?-T:T),O!==void 0){let P=B-O;if(P+=P>T?-2*T:P<-T?2*T:0,Math.abs(P)>s)return null}O=B;let X=R,z=0;for(;R<k;++R){let P=M?k-R-1:R,rt=a*l(c,r[P],u);if(e+i<n&&y+g<o+z+rt/2)break;z+=rt}if(R===X)continue;let he=M?r.substring(k-X,k-R):r.substring(X,R);x=g===0?0:(o+z/2-y)/g;let re=kt(p,h,x),we=kt(m,f,x);F.push([re,we,z/2,B,he]),o+=z}return F}var xc=at(),fs=[],to=[],no=[],ps=[];function fF(t){return t[3].declutterBox}var pF=new RegExp("[\u0591-\u08FF\uFB1D-\uFDFF\uFE70-\uFEFC\u0800-\u0FFF\uE800-\uEFFF]");function Iw(t,e){return e==="start"?e=pF.test(t)?"right":"left":e==="end"&&(e=pF.test(t)?"left":"right"),Xd[e]}function iZ(t,e,n){return n>0&&t.push(`
`,""),t.push(e,""),t}var Sw=class{constructor(e,n,i,r,o){this.overlaps=i,this.pixelRatio=n,this.resolution=e,this.alignAndScaleFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=bt(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=o?new Mm:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,n,i,r){let o=e+n+i+r;if(this.labels_[o])return this.labels_[o];let s=r?this.strokeStates[r]:null,a=i?this.fillStates[i]:null,l=this.textStates[n],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],d=Array.isArray(e),h=l.justify?Xd[l.justify]:Iw(Array.isArray(e)?e[0]:e,l.textAlign||cs),f=r&&s.lineWidth?s.lineWidth:0,p=d?e:e.split(`
`).reduce(iZ,[]),{width:m,height:g,widths:y,heights:_,lineWidths:x}=lk(l,p),b=m+f,v=[],C=(b+2)*u[0],E=(g+f)*u[1],w={width:C<0?Math.floor(C):Math.ceil(C),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:v};(u[0]!=1||u[1]!=1)&&v.push("scale",u),r&&(v.push("strokeStyle",s.strokeStyle),v.push("lineWidth",f),v.push("lineCap",s.lineCap),v.push("lineJoin",s.lineJoin),v.push("miterLimit",s.miterLimit),v.push("setLineDash",[s.lineDash]),v.push("lineDashOffset",s.lineDashOffset)),i&&v.push("fillStyle",a.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");let D=.5-h,A=h*b+D*f,M=[],T=[],F=0,q=0,O=0,R=0,k;for(let B=0,X=p.length;B<X;B+=2){let z=p[B];if(z===`
`){q+=F,F=0,A=h*b+D*f,++R;continue}let he=p[B+1]||l.font;he!==k&&(r&&M.push("font",he),i&&T.push("font",he),k=he),F=Math.max(F,_[O]);let re=[z,A+D*y[O]+h*(y[O]-x[R]),.5*(f+F)+q];A+=y[O],r&&M.push("strokeText",re),i&&T.push("fillText",re),++O}return Array.prototype.push.apply(v,M),Array.prototype.push.apply(v,T),this.labels_[o]=w,w}replayTextBackground_(e,n,i,r,o,s,a){e.beginPath(),e.moveTo.apply(e,n),e.lineTo.apply(e,i),e.lineTo.apply(e,r),e.lineTo.apply(e,o),e.lineTo.apply(e,n),s&&(this.alignAndScaleFill_=s[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,n,i,r,o,s,a,l,c,u,d,h,f,p,m,g){a*=h[0],l*=h[1];let y=i-a,_=r-l,x=o+c>e?e-c:o,b=s+u>n?n-u:s,v=p[3]+x*h[0]+p[1],C=p[0]+b*h[1]+p[2],E=y-p[3],w=_-p[0];(m||d!==0)&&(fs[0]=E,ps[0]=E,fs[1]=w,to[1]=w,to[0]=E+v,no[0]=to[0],no[1]=w+C,ps[1]=no[1]);let D;return d!==0?(D=Lt(bt(),i,r,1,1,d,-i,-r),it(D,fs),it(D,to),it(D,no),it(D,ps),Tn(Math.min(fs[0],to[0],no[0],ps[0]),Math.min(fs[1],to[1],no[1],ps[1]),Math.max(fs[0],to[0],no[0],ps[0]),Math.max(fs[1],to[1],no[1],ps[1]),xc)):Tn(Math.min(E,E+v),Math.min(w,w+C),Math.max(E,E+v),Math.max(w,w+C),xc),f&&(y=Math.round(y),_=Math.round(_)),{drawImageX:y,drawImageY:_,drawImageW:x,drawImageH:b,originX:c,originY:u,declutterBox:{minX:xc[0],minY:xc[1],maxX:xc[2],maxY:xc[3],value:g},canvasTransform:D,scale:h}}replayImageOrLabel_(e,n,i,r,o,s,a){let l=!!(s||a),c=r.declutterBox,u=a?a[2]*r.scale[0]/2:0;return c.minX-u<=n[0]&&c.maxX+u>=0&&c.minY-u<=n[1]&&c.maxY+u>=0&&(l&&this.replayTextBackground_(e,fs,to,no,ps,s,a),ck(e,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){let n=this.alignAndScaleFill_;if(n){let i=it(this.renderedTransform_,[0,0]),r=512*this.pixelRatio;e.save(),e.translate(i[0]%r,i[1]%r),n!==1&&e.scale(n,n),e.rotate(this.viewRotation_)}e.fill(),n&&e.restore()}setStrokeStyle_(e,n){e.strokeStyle=n[1],e.lineWidth=n[2],e.lineCap=n[3],e.lineJoin=n[4],e.miterLimit=n[5],e.lineDashOffset=n[7],e.setLineDash(n[6])}drawLabelWithPointPlacement_(e,n,i,r){let o=this.textStates[n],s=this.createLabel(e,n,r,i),a=this.strokeStates[i],l=this.pixelRatio,c=Iw(Array.isArray(e)?e[0]:e,o.textAlign||cs),u=Xd[o.textBaseline||ga],d=a&&a.lineWidth?a.lineWidth:0,h=s.width/l-2*o.scale[0],f=c*h+2*(.5-c)*d,p=u*s.height/l+2*(.5-u)*d;return{label:s,anchorX:f,anchorY:p}}execute_(e,n,i,r,o,s,a,l){let c=this.zIndexContext_,u;this.pixelCoordinates_&&$t(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=un(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),bN(this.renderedTransform_,i));let d=0,h=r.length,f=0,p,m,g,y,_,x,b,v,C,E,w,D,A,M=0,T=0,F=null,q=null,O=this.coordinateCache_,R=this.viewRotation_,k=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,B={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},X=this.instructions!=r||this.overlaps?0:200,z,he,re,we;for(;d<h;){let P=r[d];switch(P[0]){case W.BEGIN_GEOMETRY:z=P[1],we=P[3],z.getGeometry()?a!==void 0&&!Ke(a,we.getExtent())?d=P[2]+1:++d:d=P[2],c&&(c.zIndex=P[4]);break;case W.BEGIN_PATH:M>X&&(this.fill_(e),M=0),T>X&&(e.stroke(),T=0),!M&&!T&&(e.beginPath(),_=NaN,x=NaN),++d;break;case W.CIRCLE:f=P[1];let Ge=u[f],lt=u[f+1],Kn=u[f+2],ys=u[f+3],Gt=Kn-Ge,eh=ys-lt,Cc=Math.sqrt(Gt*Gt+eh*eh);e.moveTo(Ge+Cc,lt),e.arc(Ge,lt,Cc,0,2*Math.PI,!0),++d;break;case W.CLOSE_PATH:e.closePath(),++d;break;case W.CUSTOM:f=P[1],p=P[2];let zm=P[3],io=P[4],wc=P[5];B.geometry=zm,B.feature=z,d in O||(O[d]=[]);let ro=O[d];wc?wc(u,f,p,2,ro):(ro[0]=u[f],ro[1]=u[f+1],ro.length=2),c&&(c.zIndex=P[6]),io(ro,B),++d;break;case W.DRAW_IMAGE:f=P[1],p=P[2],C=P[3],m=P[4],g=P[5];let Ec=P[6],th=P[7],Hm=P[8],Qn=P[9],On=P[10],nr=P[11],_s=P[12],vs=P[13];y=P[14]||"declutter";let oo=P[15];if(!C&&P.length>=20){E=P[19],w=P[20],D=P[21],A=P[22];let Pn=this.drawLabelWithPointPlacement_(E,w,D,A);C=Pn.label,P[3]=C;let bs=P[23];m=(Pn.anchorX-bs)*this.pixelRatio,P[4]=m;let Nn=P[24];g=(Pn.anchorY-Nn)*this.pixelRatio,P[5]=g,Ec=C.height,P[6]=Ec,vs=C.width,P[13]=vs}let xs;P.length>25&&(xs=P[25]);let so,ba,St;P.length>17?(so=P[16],ba=P[17],St=P[18]):(so=Zr,ba=!1,St=!1),On&&k?nr+=R:!On&&!k&&(nr-=R);let iL=0;for(;f<p;f+=2){if(xs&&xs[iL++]<vs/this.pixelRatio)continue;let Pn=this.calculateImageOrLabelDimensions_(C.width,C.height,u[f],u[f+1],vs,Ec,m,g,Hm,Qn,nr,_s,o,so,ba||St,z),bs=[e,n,C,Pn,th,ba?F:null,St?q:null];if(l){let Nn,Di,kn;if(oo){let Je=p-f;if(!oo[Je]){oo[Je]={args:bs,declutterMode:y};continue}let qt=oo[Je];Nn=qt.args,Di=qt.declutterMode,delete oo[Je],kn=fF(Nn)}let ir,rr;if(Nn&&(Di!=="declutter"||!l.collides(kn))&&(ir=!0),(y!=="declutter"||!l.collides(Pn.declutterBox))&&(rr=!0),Di==="declutter"&&y==="declutter"){let Je=ir&&rr;ir=Je,rr=Je}ir&&(Di!=="none"&&l.insert(kn),this.replayImageOrLabel_.apply(this,Nn)),rr&&(y!=="none"&&l.insert(Pn.declutterBox),this.replayImageOrLabel_.apply(this,bs))}else this.replayImageOrLabel_.apply(this,bs)}++d;break;case W.DRAW_CHARS:let sE=P[1],aE=P[2],$m=P[3],rL=P[4];A=P[5];let oL=P[6],lE=P[7],cE=P[8];D=P[9];let Wm=P[10];E=P[11],w=P[12];let uE=[P[13],P[13]];y=P[14]||"declutter";let Gm=this.textStates[w],Dc=Gm.font,Ic=[Gm.scale[0]*lE,Gm.scale[1]*lE],Sc;Dc in this.widths_?Sc=this.widths_[Dc]:(Sc={},this.widths_[Dc]=Sc);let dE=Im(u,sE,aE,2),hE=Math.abs(Ic[0])*yC(Dc,E,Sc);if(rL||hE<=dE){let Pn=this.textStates[w].textAlign,bs=(dE-hE)*Iw(E,Pn),Nn=hF(u,sE,aE,2,E,bs,oL,Math.abs(Ic[0]),yC,Dc,Sc,k?0:this.viewRotation_);e:if(Nn){let Di=[],kn,ir,rr,Je,qt;if(D)for(kn=0,ir=Nn.length;kn<ir;++kn){qt=Nn[kn],rr=qt[4],Je=this.createLabel(rr,w,"",D),m=qt[2]+(Ic[0]<0?-Wm:Wm),g=$m*Je.height+(.5-$m)*2*Wm*Ic[1]/Ic[0]-cE;let or=this.calculateImageOrLabelDimensions_(Je.width,Je.height,qt[0],qt[1],Je.width,Je.height,m,g,0,0,qt[3],uE,!1,Zr,!1,z);if(l&&y==="declutter"&&l.collides(or.declutterBox))break e;Di.push([e,n,Je,or,1,null,null])}if(A)for(kn=0,ir=Nn.length;kn<ir;++kn){qt=Nn[kn],rr=qt[4],Je=this.createLabel(rr,w,A,""),m=qt[2],g=$m*Je.height-cE;let or=this.calculateImageOrLabelDimensions_(Je.width,Je.height,qt[0],qt[1],Je.width,Je.height,m,g,0,0,qt[3],uE,!1,Zr,!1,z);if(l&&y==="declutter"&&l.collides(or.declutterBox))break e;Di.push([e,n,Je,or,1,null,null])}l&&y!=="none"&&l.load(Di.map(fF));for(let or=0,sL=Di.length;or<sL;++or)this.replayImageOrLabel_.apply(this,Di[or])}}++d;break;case W.END_GEOMETRY:if(s!==void 0){z=P[1];let Pn=s(z,we,y);if(Pn)return Pn}++d;break;case W.FILL:X?M++:this.fill_(e),++d;break;case W.MOVE_TO_LINE_TO:for(f=P[1],p=P[2],he=u[f],re=u[f+1],e.moveTo(he,re),_=he+.5|0,x=re+.5|0,f+=2;f<p;f+=2)he=u[f],re=u[f+1],b=he+.5|0,v=re+.5|0,(f==p-2||b!==_||v!==x)&&(e.lineTo(he,re),_=b,x=v);++d;break;case W.SET_FILL_STYLE:F=P,this.alignAndScaleFill_=P[2],M&&(this.fill_(e),M=0,T&&(e.stroke(),T=0)),e.fillStyle=P[1],++d;break;case W.SET_STROKE_STYLE:q=P,T&&(e.stroke(),T=0),this.setStrokeStyle_(e,P),++d;break;case W.STROKE:X?T++:e.stroke(),++d;break;default:++d;break}}M&&this.fill_(e),T&&e.stroke()}execute(e,n,i,r,o,s){this.viewRotation_=r,this.execute_(e,n,i,this.instructions,o,void 0,void 0,s)}executeHitDetection(e,n,i,r,o){return this.viewRotation_=i,this.execute_(e,[e.canvas.width,e.canvas.height],n,this.hitDetectionInstructions,!0,r,o)}},gF=Sw;var ya=["Polygon","Circle","LineString","Image","Text","Default"],Aw=["Image","Text"],mF=ya.filter(t=>!Aw.includes(t)),Tw=class{constructor(e,n,i,r,o,s,a){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=n,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=bt(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(o,a)}clip(e,n){let i=this.getClipCoords(n);e.beginPath(),e.moveTo(i[0],i[1]),e.lineTo(i[2],i[3]),e.lineTo(i[4],i[5]),e.lineTo(i[6],i[7]),e.clip()}createExecutors_(e,n){for(let i in e){let r=this.executorsByZIndex_[i];r===void 0&&(r={},this.executorsByZIndex_[i]=r);let o=e[i];for(let s in o){let a=o[s];r[s]=new gF(this.resolution_,this.pixelRatio_,this.overlaps_,a,n)}}}hasExecutors(e){for(let n in this.executorsByZIndex_){let i=this.executorsByZIndex_[n];for(let r=0,o=e.length;r<o;++r)if(e[r]in i)return!0}return!1}forEachFeatureAtCoordinate(e,n,i,r,o,s){r=Math.round(r);let a=r*2+1,l=Lt(this.hitDetectionTransform_,r+.5,r+.5,1/n,-1/n,-i,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=Le(a,a,void 0,{willReadFrequently:!0}));let u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let d;this.renderBuffer_!==void 0&&(d=at(),la(d,e),Jl(d,n*(this.renderBuffer_+r),d));let h=rZ(r),f;function p(v,C,E){let w=u.getImageData(0,0,a,a).data;for(let D=0,A=h.length;D<A;D++)if(w[h[D]]>0){if(!s||E==="none"||f!=="Image"&&f!=="Text"||s.includes(v)){let M=(h[D]-3)/4,T=r-M%a,F=r-(M/a|0),q=o(v,C,T*T+F*F);if(q)return q}u.clearRect(0,0,a,a);break}}let m=Object.keys(this.executorsByZIndex_).map(Number);m.sort(cn);let g,y,_,x,b;for(g=m.length-1;g>=0;--g){let v=m[g].toString();for(_=this.executorsByZIndex_[v],y=ya.length-1;y>=0;--y)if(f=ya[y],x=_[f],x!==void 0&&(b=x.executeHitDetection(u,l,i,p,d),b))return b}}getClipCoords(e){let n=this.maxExtent_;if(!n)return null;let i=n[0],r=n[1],o=n[2],s=n[3],a=[i,r,i,s,o,s,o,r];return un(a,0,8,2,e,a),a}isEmpty(){return fi(this.executorsByZIndex_)}execute(e,n,i,r,o,s,a){let l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(cn),s=s||ya;let c=ya.length,u,d,h,f,p;for(a&&l.reverse(),u=0,d=l.length;u<d;++u){let m=l[u].toString();for(p=this.executorsByZIndex_[m],h=0,f=s.length;h<f;++h){let g=s[h],y=p[g];if(y!==void 0){let _=a===null?void 0:y.getZIndexContext(),x=_?_.getContext():e,b=this.maxExtent_&&g!=="Image"&&g!=="Text";if(b&&(x.save(),this.clip(x,i)),!_||g==="Text"||g==="Image"?y.execute(x,n,i,r,o,a):_.pushFunction(v=>y.execute(v,n,i,r,o,a)),b&&x.restore(),_){_.offset();let v=l[u]*c+h;this.deferredZIndexContexts_[v]||(this.deferredZIndexContexts_[v]=[]),this.deferredZIndexContexts_[v].push(_)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){let e=this.deferredZIndexContexts_,n=Object.keys(e).map(Number).sort(cn);for(let i=0,r=n.length;i<r;++i)e[n[i]].forEach(o=>{o.draw(this.renderedContext_),o.clear()}),e[n[i]].length=0}},Mw={};function rZ(t){if(Mw[t]!==void 0)return Mw[t];let e=t*2+1,n=t*t,i=new Array(n+1);for(let o=0;o<=t;++o)for(let s=0;s<=t;++s){let a=o*o+s*s;if(a>n)break;let l=i[a];l||(l=[],i[a]=l),l.push(((t+o)*e+(t+s))*4+3),o>0&&l.push(((t-o)*e+(t+s))*4+3),s>0&&(l.push(((t+o)*e+(t-s))*4+3),o>0&&l.push(((t-o)*e+(t-s))*4+3))}let r=[];for(let o=0,s=i.length;o<s;++o)i[o]&&r.push(...i[o]);return Mw[t]=r,r}var yF=Tw;var Rw=class extends Sm{constructor(e,n,i,r,o,s,a){super(),this.context_=e,this.pixelRatio_=n,this.extent_=i,this.transform_=r,this.transformRotation_=r?kg(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=s,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=bt()}drawImages_(e,n,i,r){if(!this.image_)return;let o=un(e,n,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.tmpLocalTransform_,l=s.globalAlpha;this.imageOpacity_!=1&&(s.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,d=o.length;u<d;u+=2){let h=o[u]-this.imageAnchorX_,f=o[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){let p=h+this.imageAnchorX_,m=f+this.imageAnchorY_;Lt(a,p,m,1,1,c,-p,-m),s.save(),s.transform.apply(s,a),s.translate(p,m),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,h,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(s.globalAlpha=l)}drawText_(e,n,i,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let o=un(e,n,i,r,this.transform_,this.pixelCoordinates_),s=this.context_,a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);n<i;n+=r){let l=o[n]+this.textOffsetX_,c=o[n+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(s.save(),s.translate(l-this.textOffsetX_,c-this.textOffsetY_),s.rotate(a),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,l,c),this.textFillState_&&s.fillText(this.text_,l,c))}}moveToLineTo_(e,n,i,r,o){let s=this.context_,a=un(e,n,i,r,this.transform_,this.pixelCoordinates_);s.moveTo(a[0],a[1]);let l=a.length;o&&(l-=2);for(let c=2;c<l;c+=2)s.lineTo(a[c],a[c+1]);return o&&s.closePath(),i}drawRings_(e,n,i,r){for(let o=0,s=i.length;o<s;++o)n=this.moveToLineTo_(e,n,i[o],r,!0);return n}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ke(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let n=MN(e,this.transform_,this.pixelCoordinates_),i=n[2]-n[0],r=n[3]-n[1],o=Math.sqrt(i*i+r*r),s=this.context_;s.beginPath(),s.arc(n[0],n[1],o,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break;default:}}drawFeature(e,n){let i=n.getGeometryFunction()(e);i&&(this.setStyle(n),this.drawGeometry(i))}drawGeometryCollection(e){let n=e.getGeometriesArray();for(let i=0,r=n.length;i<r;++i)this.drawGeometry(n[i])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let n=e.getFlatCoordinates(),i=e.getStride();this.image_&&this.drawImages_(n,0,n.length,i),this.text_!==""&&this.drawText_(n,0,n.length,i)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ke(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let n=this.context_,i=e.getFlatCoordinates();n.beginPath(),this.moveToLineTo_(i,0,i.length,e.getStride(),!1),n.stroke()}if(this.text_!==""){let n=e.getFlatMidpoint();this.drawText_(n,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let n=e.getExtent();if(Ke(this.extent_,n)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let i=this.context_,r=e.getFlatCoordinates(),o=0,s=e.getEnds(),a=e.getStride();i.beginPath();for(let l=0,c=s.length;l<c;++l)o=this.moveToLineTo_(r,o,s[l],a,!1);i.stroke()}if(this.text_!==""){let i=e.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ke(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let n=this.context_;n.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){let n=e.getFlatInteriorPoint();this.drawText_(n,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ke(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let n=this.context_,i=e.getOrientedFlatCoordinates(),r=0,o=e.getEndss(),s=e.getStride();n.beginPath();for(let a=0,l=o.length;a<l;++a){let c=o[a];r=this.drawRings_(i,r,c,s)}this.fillState_&&n.fill(),this.strokeState_&&n.stroke()}if(this.text_!==""){let n=e.getFlatInteriorPoints();this.drawText_(n,0,n.length,2)}}}setContextFillState_(e){let n=this.context_,i=this.contextFillState_;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=e.fillStyle,n.fillStyle=e.fillStyle):(n.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){let n=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=e.lineCap&&(i.lineCap=e.lineCap,n.lineCap=e.lineCap),$t(i.lineDash,e.lineDash)||n.setLineDash(i.lineDash=e.lineDash),i.lineDashOffset!=e.lineDashOffset&&(i.lineDashOffset=e.lineDashOffset,n.lineDashOffset=e.lineDashOffset),i.lineJoin!=e.lineJoin&&(i.lineJoin=e.lineJoin,n.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=e.lineWidth,n.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=e.miterLimit,n.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=e.strokeStyle,n.strokeStyle=e.strokeStyle)):(n.lineCap=e.lineCap,n.setLineDash(e.lineDash),n.lineDashOffset=e.lineDashOffset,n.lineJoin=e.lineJoin,n.lineWidth=e.lineWidth,n.miterLimit=e.miterLimit,n.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){let n=this.context_,i=this.contextTextState_,r=e.textAlign?e.textAlign:cs;i?(i.font!=e.font&&(i.font=e.font,n.font=e.font),i.textAlign!=r&&(i.textAlign=r,n.textAlign=r),i.textBaseline!=e.textBaseline&&(i.textBaseline=e.textBaseline,n.textBaseline=e.textBaseline)):(n.font=e.font,n.textAlign=r,n.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,n){if(!e)this.fillState_=null;else{let i=e.getColor();this.fillState_={fillStyle:fn(i||Ct)}}if(!n)this.strokeState_=null;else{let i=n.getColor(),r=n.getLineCap(),o=n.getLineDash(),s=n.getLineDashOffset(),a=n.getLineJoin(),l=n.getWidth(),c=n.getMiterLimit(),u=o||pn;this.strokeState_={lineCap:r!==void 0?r:Gi,lineDash:this.pixelRatio_===1?u:u.map(d=>d*this.pixelRatio_),lineDashOffset:(s||gn)*this.pixelRatio_,lineJoin:a!==void 0?a:qi,lineWidth:(l!==void 0?l:Kr)*this.pixelRatio_,miterLimit:c!==void 0?c:Yr,strokeStyle:fn(i||Xr)}}}setImageStyle(e){let n;if(!e||!(n=e.getSize())){this.image_=null;return}let i=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),o=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=n[1]*i,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();let s=e.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/i,s[1]*this.pixelRatio_/i],this.imageWidth_=n[0]*i}setTextStyle(e){if(!e)this.text_="";else{let n=e.getFill();if(!n)this.textFillState_=null;else{let f=n.getColor();this.textFillState_={fillStyle:fn(f||Ct)}}let i=e.getStroke();if(!i)this.textStrokeState_=null;else{let f=i.getColor(),p=i.getLineCap(),m=i.getLineDash(),g=i.getLineDashOffset(),y=i.getLineJoin(),_=i.getWidth(),x=i.getMiterLimit();this.textStrokeState_={lineCap:p!==void 0?p:Gi,lineDash:m||pn,lineDashOffset:g||gn,lineJoin:y!==void 0?y:qi,lineWidth:_!==void 0?_:Kr,miterLimit:x!==void 0?x:Yr,strokeStyle:fn(f||Xr)}}let r=e.getFont(),o=e.getOffsetX(),s=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),d=e.getTextAlign(),h=e.getTextBaseline();this.textState_={font:r!==void 0?r:um,textAlign:d!==void 0?d:cs,textBaseline:h!==void 0?h:ga},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,p,m)=>f+=m%2?" ":p,""):u:"",this.textOffsetX_=o!==void 0?this.pixelRatio_*o:0,this.textOffsetY_=s!==void 0?this.pixelRatio_*s:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}},Am=Rw;var Ei=.5;function _F(t,e,n,i,r,o,s,a,l){let c=l?is(r,l):r,u=t[0]*Ei,d=t[1]*Ei,h=Le(u,d);h.imageSmoothingEnabled=!1;let f=h.canvas,p=new Am(h,Ei,r,null,s,a,l?$r(Wr(),l):null),m=n.length,g=Math.floor((256*256*256-1)/m),y={};for(let x=1;x<=m;++x){let b=n[x-1],v=b.getStyleFunction()||i;if(!v)continue;let C=v(b,o);if(!C)continue;Array.isArray(C)||(C=[C]);let w=(x*g).toString(16).padStart(7,"#00000");for(let D=0,A=C.length;D<A;++D){let M=C[D],T=M.getGeometryFunction()(b);if(!T||!Ke(c,T.getExtent()))continue;let F=M.clone(),q=F.getFill();q&&q.setColor(w);let O=F.getStroke();O&&(O.setColor(w),O.setLineDash(null)),F.setText(void 0);let R=M.getImage();if(R){let z=R.getImageSize();if(!z)continue;let he=Le(z[0],z[1],void 0,{alpha:!1}),re=he.canvas;he.fillStyle=w,he.fillRect(0,0,re.width,re.height),F.setImage(new Qr({img:re,anchor:R.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:R.getOrigin(),opacity:1,size:R.getSize(),scale:R.getScale(),rotation:R.getRotation(),rotateWithView:R.getRotateWithView()}))}let k=F.getZIndex()||0,B=y[k];B||(B={},y[k]=B,B.Polygon=[],B.Circle=[],B.LineString=[],B.Point=[]);let X=T.getType();if(X==="GeometryCollection"){let z=T.getGeometriesArrayRecursive();for(let he=0,re=z.length;he<re;++he){let we=z[he];B[we.getType().replace("Multi","")].push(we,F)}}else B[X.replace("Multi","")].push(T,F)}}let _=Object.keys(y).map(Number).sort(cn);for(let x=0,b=_.length;x<b;++x){let v=y[_[x]];for(let C in v){let E=v[C];for(let w=0,D=E.length;w<D;w+=2){p.setStyle(E[w+1]);for(let A=0,M=e.length;A<M;++A)p.setTransform(e[A]),p.drawGeometry(E[w])}}}return h.getImageData(0,0,f.width,f.height)}function vF(t,e,n){let i=[];if(n){let r=Math.floor(Math.round(t[0])*Ei),o=Math.floor(Math.round(t[1])*Ei),s=(Oe(r,0,n.width-1)+Oe(o,0,n.height-1)*n.width)*4,a=n.data[s],l=n.data[s+1],u=n.data[s+2]+256*(l+256*a),d=Math.floor((256*256*256-1)/e.length);u&&u%d===0&&i.push(e[u/d-1])}return i}var oZ=.5,xF={Point:hZ,LineString:cZ,Polygon:pZ,MultiPoint:fZ,MultiLineString:uZ,MultiPolygon:dZ,GeometryCollection:lZ,Circle:sZ};function bF(t,e){return parseInt(se(t),10)-parseInt(se(e),10)}function Zd(t,e){let n=Ow(t,e);return n*n}function Ow(t,e){return oZ*t/e}function sZ(t,e,n,i,r){let o=n.getFill(),s=n.getStroke();if(o||s){let l=t.getBuilder(n.getZIndex(),"Circle");l.setFillStrokeStyle(o,s),l.drawCircle(e,i,r)}let a=n.getText();if(a&&a.getText()){let l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i)}}function Pw(t,e,n,i,r,o,s,a){let l=[],c=n.getImage();if(c){let h=!0,f=c.getImageState();f==Q.LOADED||f==Q.ERROR?h=!1:f==Q.IDLE&&c.load(),h&&l.push(c.ready())}let u=n.getFill();u&&u.loading()&&l.push(u.ready());let d=l.length>0;return d&&Promise.all(l).then(()=>r(null)),aZ(t,e,n,i,o,s,a),d}function aZ(t,e,n,i,r,o,s){let a=n.getGeometryFunction()(e);if(!a)return;let l=a.simplifyTransformed(i,r);if(n.getRenderer())CF(t,l,n,e,s);else{let u=xF[l.getType()];u(t,l,n,e,s,o)}}function CF(t,e,n,i,r){if(e.getType()=="GeometryCollection"){let s=e.getGeometries();for(let a=0,l=s.length;a<l;++a)CF(t,s[a],n,i,r);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}function lZ(t,e,n,i,r,o){let s=e.getGeometriesArray(),a,l;for(a=0,l=s.length;a<l;++a){let c=xF[s[a].getType()];c(t,s[a],n,i,r,o)}}function cZ(t,e,n,i,r){let o=n.getStroke();if(o){let a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawLineString(e,i,r)}let s=n.getText();if(s&&s.getText()){let a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function uZ(t,e,n,i,r){let o=n.getStroke();if(o){let a=t.getBuilder(n.getZIndex(),"LineString");a.setFillStrokeStyle(null,o),a.drawMultiLineString(e,i,r)}let s=n.getText();if(s&&s.getText()){let a=t.getBuilder(n.getZIndex(),"Text");a.setTextStyle(s),a.drawText(e,i,r)}}function dZ(t,e,n,i,r){let o=n.getFill(),s=n.getStroke();if(s||o){let l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawMultiPolygon(e,i,r)}let a=n.getText();if(a&&a.getText()){let l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}function hZ(t,e,n,i,r,o){let s=n.getImage(),a=n.getText(),l=a&&a.getText(),c=o&&s&&l?{}:void 0;if(s){if(s.getImageState()!=Q.LOADED)return;let u=t.getBuilder(n.getZIndex(),"Image");u.setImageStyle(s,c),u.drawPoint(e,i,r)}if(l){let u=t.getBuilder(n.getZIndex(),"Text");u.setTextStyle(a,c),u.drawText(e,i,r)}}function fZ(t,e,n,i,r,o){let s=n.getImage(),a=s&&s.getOpacity()!==0,l=n.getText(),c=l&&l.getText(),u=o&&a&&c?{}:void 0;if(a){if(s.getImageState()!=Q.LOADED)return;let d=t.getBuilder(n.getZIndex(),"Image");d.setImageStyle(s,u),d.drawMultiPoint(e,i,r)}if(c){let d=t.getBuilder(n.getZIndex(),"Text");d.setTextStyle(l,u),d.drawText(e,i,r)}}function pZ(t,e,n,i,r){let o=n.getFill(),s=n.getStroke();if(o||s){let l=t.getBuilder(n.getZIndex(),"Polygon");l.setFillStrokeStyle(o,s),l.drawPolygon(e,i,r)}let a=n.getText();if(a&&a.getText()){let l=t.getBuilder(n.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,i,r)}}var Nw=class extends Tm{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=at(),this.wrappedRenderedExtent_=at(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,n,i){let r=n.extent,o=n.viewState,s=o.center,a=o.resolution,l=o.projection,c=o.rotation,u=l.getExtent(),d=this.getLayer().getSource(),h=this.getLayer().getDeclutter(),f=n.pixelRatio,p=n.viewHints,m=!(p[xt.ANIMATING]||p[xt.INTERACTING]),g=this.context,y=Math.round(ce(r)/a*f),_=Math.round(Ye(r)/a*f),x=d.getWrapX()&&l.canWrapX(),b=x?ce(u):null,v=x?Math.ceil((r[2]-u[2])/b)+1:1,C=x?Math.floor((r[0]-u[0])/b):0;do{let E=this.getRenderTransform(s,a,0,f,y,_,C*b);n.declutter&&(E=E.slice(0)),e.execute(g,[g.canvas.width,g.canvas.height],E,c,m,i===void 0?ya:i?Aw:mF,i?h&&n.declutter[h]:void 0)}while(++C<v)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Le(this.context.canvas.width,this.context.canvas.height,Dw))}resetDrawContext_(){if(this.opacity_!==1){let e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,pa(this.context),Dw.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,n){let i=e.layerStatesArray[e.layerIndex];this.opacity_=i.opacity;let r=e.viewState;this.prepareContainer(e,n);let o=this.context,s=this.replayGroup_,a=s&&!s.isEmpty();if(!a&&!(this.getLayer().hasListener(Ft.PRERENDER)||this.getLayer().hasListener(Ft.POSTRENDER)))return null;this.setDrawContext_(),this.preRender(o,e);let l=r.projection;if(this.clipped_=!1,a&&i.extent&&this.clipping){let c=yi(i.extent,l);a=Ke(c,e.extent),this.clipped_=a&&!zr(c,e.extent),this.clipped_&&this.clipUnrotated(o,e,c)}return a&&this.renderWorlds(s,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&o.restore(),this.postRender(o,e),this.renderedRotation_!==r.rotation&&(this.renderedRotation_=r.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(n=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let i=this.frameState.size.slice(),r=this.renderedCenter_,o=this.renderedResolution_,s=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],d=i[0]*Ei,h=i[1]*Ei;u.push(this.getRenderTransform(r,o,s,Ei,d,h,0).slice());let f=c.getSource(),p=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!zr(p,l)){let g=l[0],y=ce(p),_=0,x;for(;g<p[0];)--_,x=y*_,u.push(this.getRenderTransform(r,o,s,Ei,d,h,x).slice()),g+=y;for(_=0,g=l[2];g>p[2];)++_,x=y*_,u.push(this.getRenderTransform(r,o,s,Ei,d,h,x).slice()),g-=y}let m=Wr();this.hitDetectionImageData_=_F(i,u,this.renderedFeatures_,c.getStyleFunction(),l,o,s,Zd(o,this.renderedPixelRatio_),m?a:null)}n(vF(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,n,i,r,o){if(!this.replayGroup_)return;let s=n.viewState.resolution,a=n.viewState.rotation,l=this.getLayer(),c={},u=function(p,m,g){let y=se(p),_=c[y];if(_){if(_!==!0&&g<_.distanceSq){if(g===0)return c[y]=!0,o.splice(o.lastIndexOf(_),1),r(p,l,m);_.geometry=m,_.distanceSq=g}}else{if(g===0)return c[y]=!0,r(p,l,m);o.push(c[y]={feature:p,layer:l,geometry:m,distanceSq:g,callback:r})}},d,h=[this.replayGroup_],f=this.getLayer().getDeclutter();return h.some(p=>d=p.forEachFeatureAtCoordinate(e,s,a,i,u,f&&n.declutter[f]?n.declutter[f].all().map(m=>m.value):null)),d}handleFontsChanged(){let e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){let n=this.getLayer(),i=n.getSource();if(!i)return!1;let r=e.viewHints[xt.ANIMATING],o=e.viewHints[xt.INTERACTING],s=n.getUpdateWhileAnimating(),a=n.getUpdateWhileInteracting();if(this.ready&&!s&&r||!a&&o)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let l=e.extent,c=e.viewState,u=c.projection,d=c.resolution,h=e.pixelRatio,f=n.getRevision(),p=n.getRenderBuffer(),m=n.getRenderOrder();m===void 0&&(m=bF);let g=c.center.slice(),y=Jl(l,p*d),_=y.slice(),x=[y.slice()],b=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!zr(b,e.extent)){let O=ce(b),R=Math.max(ce(y)/2,O);y[0]=b[0]-R,y[2]=b[2]+R,Wg(g,u);let k=Eb(x[0],u);k[0]<b[0]&&k[2]<b[2]?x.push([k[0]+O,k[1],k[2]+O,k[3]]):k[0]>b[0]&&k[2]>b[2]&&x.push([k[0]-O,k[1],k[2]-O,k[3]])}if(this.ready&&this.renderedResolution_==d&&this.renderedRevision_==f&&this.renderedRenderOrder_==m&&this.renderedFrameDeclutter_===!!e.declutter&&zr(this.wrappedRenderedExtent_,y))return $t(this.renderedExtent_,_)||(this.hitDetectionImageData_=null,this.renderedExtent_=_),this.renderedCenter_=g,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let v=new uF(Ow(d,h),y,d,h),C=Wr(),E;if(C){for(let O=0,R=x.length;O<R;++O){let k=x[O],B=is(k,u);i.loadFeatures(B,dN(d,u),C)}E=$r(C,u)}else for(let O=0,R=x.length;O<R;++O)i.loadFeatures(x[O],d,u);let w=Zd(d,h),D=!0,A=(O,R)=>{let k,B=O.getStyleFunction()||n.getStyleFunction();if(B&&(k=B(O,d)),k){let X=this.renderFeature(O,w,k,v,E,this.getLayer().getDeclutter(),R);D=D&&!X}},M=is(y,u),T=i.getFeaturesInExtent(M);m&&T.sort(m);for(let O=0,R=T.length;O<R;++O)A(T[O],O);this.renderedFeatures_=T,this.ready=D;let F=v.finish(),q=new yF(y,d,h,i.getOverlaps(),F,n.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=d,this.renderedRevision_=f,this.renderedRenderOrder_=m,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=_,this.wrappedRenderedExtent_=y,this.renderedCenter_=g,this.renderedProjection_=u,this.renderedPixelRatio_=h,this.replayGroup_=q,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,n,i,r,o,s,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let c=0,u=i.length;c<u;++c)l=Pw(r,e,i[c],n,this.boundHandleStyleImageChange_,o,s,a)||l;else l=Pw(r,e,i,n,this.boundHandleStyleImageChange_,o,s,a);return l}},wF=Nw;var kw=class extends vm{constructor(e){super(e)}createRenderer(){return new wF(this)}},EF=kw;var DF=mE(Qb(),1);var Fw=class{constructor(e){this.rbush_=new DF.default(e),this.items_={}}insert(e,n){let i={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:n};this.rbush_.insert(i),this.items_[se(n)]=i}load(e,n){let i=new Array(n.length);for(let r=0,o=n.length;r<o;r++){let s=e[r],a=n[r],l={minX:s[0],minY:s[1],maxX:s[2],maxY:s[3],value:a};i[r]=l,this.items_[se(a)]=l}this.rbush_.load(i)}remove(e){let n=se(e),i=this.items_[n];return delete this.items_[n],this.rbush_.remove(i)!==null}update(e,n){let i=this.items_[se(n)],r=[i.minX,i.minY,i.maxX,i.maxY];Hr(r,e)||(this.remove(n),this.insert(e,n))}getAll(){return this.rbush_.all().map(function(n){return n.value})}getInExtent(e){let n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(n).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,n){return this.forEach_(this.getInExtent(e),n)}forEach_(e,n){let i;for(let r=0,o=e.length;r<o;r++)if(i=n(e[r]),i)return i;return i}isEmpty(){return fi(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){let n=this.rbush_.toJSON();return Tn(n.minX,n.minY,n.maxX,n.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(let n in e.items_)this.items_[n]=e.items_[n]}},Lw=Fw;function IF(t,e,n,i){let r=[],o=at();for(let s=0,a=n.length;s<a;++s){let l=n[s];o=tc(t,e,l[0],i),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return r}var SF=bt(),Kd=class t{constructor(e,n,i,r,o,s){this.styleFunction,this.extent_,this.id_=s,this.type_=e,this.flatCoordinates_=n,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Ug(this.flatCoordinates_):tc(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let e=Yn(this.getExtent());this.flatInteriorPoints_=Sd(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let e=UN(this.flatCoordinates_,this.ends_),n=IF(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=LN(this.flatCoordinates_,0,e,2,n)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Gd(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let e=this.flatCoordinates_,n=0,i=this.ends_;for(let r=0,o=i.length;r<o;++r){let s=i[r],a=Gd(e,n,s,2,.5);Zo(this.flatMidpoints_,a),n=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,n){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=It(e);let n=e.getExtent(),i=e.getWorldExtent();if(n&&i){let r=Ye(i)/Ye(n);Lt(SF,i[0],i[3],r,-r,0,0,0),un(this.flatCoordinates_,0,this.flatCoordinates_.length,2,SF,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new t(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Og((e,n)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),n&&this.simplifiedGeometry_.applyTransform(n);let i=this.simplifiedGeometry_.getFlatCoordinates(),r;switch(this.type_){case"LineString":i.length=da(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,i,0),r=[i.length];break;case"MultiLineString":r=[],i.length=NN(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,i,0,r);break;case"Polygon":r=[],i.length=Zg(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),i,0,r);break;default:}return r&&(this.simplifiedGeometry_=new t(this.type_,i,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}};Kd.prototype.getFlatCoordinates=Kd.prototype.getOrientedFlatCoordinates;var gs=Kd;var Vw=class extends ht{constructor(e){super(),this.projection=It(e.projection),this.attributions_=MF(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;let n=this;this.viewPromise_=new Promise(function(i,r){n.viewResolver=i,n.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=MF(e),this.changed()}setState(e){this.state_=e,this.changed()}};function MF(t){return t?Array.isArray(t)?function(e){return t}:typeof t=="function"?t:function(e){return[t]}:null}var Rm=Vw;var Rn={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function TF(t,e){return[[-1/0,-1/0,1/0,1/0]]}var gZ=!1;function mZ(t,e,n,i,r,o,s){let a=new XMLHttpRequest;a.open("GET",typeof t=="function"?t(n,i,r):t,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=gZ,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){let c=e.getType();try{let u;c=="text"||c=="json"?u=a.responseText:c=="xml"?u=a.responseXML||a.responseText:c=="arraybuffer"&&(u=a.response),u?o(e.readFeatures(u,{extent:n,featureProjection:r}),e.readProjection(u)):s()}catch{s()}}else s()},a.onerror=s,a.send()}function jw(t,e){return function(n,i,r,o,s){let a=this;mZ(t,e,n,i,r,function(l,c){a.addFeatures(l),o!==void 0&&o(l)},s||hi)}}var tr=class extends Et{constructor(e,n,i){super(e),this.feature=n,this.features=i}},Bw=class extends Rm{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=hi,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(Z(this.format_,"`format` must be set when `url` is set"),this.loader_=jw(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:TF;let n=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=n?new Lw:null,this.loadedExtentsRtree_=new Lw,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,r;Array.isArray(e.features)?r=e.features:e.features&&(i=e.features,r=i.getArray()),!n&&i===void 0&&(i=new Qt(r)),r!==void 0&&this.addFeaturesInternal(r),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){let n=se(e);if(!this.addToIndex_(n,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(n,e);let i=e.getGeometry();if(i){let r=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[n]=e;this.dispatchEvent(new tr(Rn.ADDFEATURE,e))}setupChangeEvents_(e,n){n instanceof gs||(this.featureChangeKeys_[e]=[oe(n,V.CHANGE,this.handleFeatureChange_,this),oe(n,di.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,n){let i=!0;if(n.getId()!==void 0){let r=String(n.getId());if(!(r in this.idIndex_))this.idIndex_[r]=n;else if(n instanceof gs){let o=this.idIndex_[r];o instanceof gs?Array.isArray(o)?o.push(n):this.idIndex_[r]=[o,n]:i=!1}else i=!1}return i&&(Z(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=n),i}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){let n=[],i=[],r=[];for(let o=0,s=e.length;o<s;o++){let a=e[o],l=se(a);this.addToIndex_(l,a)&&i.push(a)}for(let o=0,s=i.length;o<s;o++){let a=i[o],l=se(a);this.setupChangeEvents_(l,a);let c=a.getGeometry();if(c){let u=c.getExtent();n.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(n,r),this.hasListener(Rn.ADDFEATURE))for(let o=0,s=i.length;o<s;o++)this.dispatchEvent(new tr(Rn.ADDFEATURE,i[o]))}bindFeaturesCollection_(e){let n=!1;this.addEventListener(Rn.ADDFEATURE,function(i){n||(n=!0,e.push(i.feature),n=!1)}),this.addEventListener(Rn.REMOVEFEATURE,function(i){n||(n=!0,e.remove(i.feature),n=!1)}),e.addEventListener(Dt.ADD,i=>{n||(n=!0,this.addFeature(i.element),n=!1)}),e.addEventListener(Dt.REMOVE,i=>{n||(n=!0,this.removeFeature(i.element),n=!1)}),this.featuresCollection_=e}clear(e){if(e){for(let i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(xe);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){let i=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(i);for(let r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let n=new tr(Rn.CLEAR);this.dispatchEvent(n),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,n){let i=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(i,function(r){let o=r.getGeometry();if(o instanceof gs||o.intersectsCoordinate(e))return n(r)})}forEachFeatureInExtent(e,n){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,n);this.featuresCollection_&&this.featuresCollection_.forEach(n)}forEachFeatureIntersectingExtent(e,n){return this.forEachFeatureInExtent(e,function(i){let r=i.getGeometry();if(r instanceof gs||r.intersectsExtent(e)){let o=n(i);if(o)return o}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),fi(this.nullGeometryFeatures_)||Zo(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){let n=[];return this.forEachFeatureAtCoordinateDirect(e,function(i){n.push(i)}),n}getFeaturesInExtent(e,n){if(this.featuresRtree_){if(!(n&&n.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);let r=$g(e,n);return[].concat(...r.map(o=>this.featuresRtree_.getInExtent(o)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,n){let i=e[0],r=e[1],o=null,s=[NaN,NaN],a=1/0,l=[-1/0,-1/0,1/0,1/0];return n=n||Fr,this.featuresRtree_.forEachInExtent(l,function(c){if(n(c)){let u=c.getGeometry(),d=a;if(a=u instanceof gs?0:u.closestPointXY(i,r,s,a),a<d){o=c;let h=Math.sqrt(a);l[0]=i-h,l[1]=r-h,l[2]=i+h,l[3]=r+h}}}),o}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){let n=this.idIndex_[e.toString()];return n!==void 0?n:null}getFeatureByUid(e){let n=this.uidIndex_[e];return n!==void 0?n:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){let n=e.target,i=se(n),r=n.getGeometry();if(!r)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(n),this.nullGeometryFeatures_[i]=n);else{let s=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(s,n)):this.featuresRtree_&&this.featuresRtree_.update(s,n)}let o=n.getId();if(o!==void 0){let s=o.toString();this.idIndex_[s]!==n&&(this.removeFromIdIndex_(n),this.idIndex_[s]=n)}else this.removeFromIdIndex_(n),this.uidIndex_[i]=n;this.changed(),this.dispatchEvent(new tr(Rn.CHANGEFEATURE,n))}hasFeature(e){let n=e.getId();return n!==void 0?n in this.idIndex_:se(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&fi(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,n,i){let r=this.loadedExtentsRtree_,o=this.strategy_(e,n,i);for(let s=0,a=o.length;s<a;++s){let l=o[s];r.forEachInExtent(l,function(u){return zr(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new tr(Rn.FEATURESLOADSTART)),this.loader_.call(this,l,n,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new tr(Rn.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new tr(Rn.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){let n=this.loadedExtentsRtree_,i;n.forEachInExtent(e,function(r){if(Hr(r.extent,e))return i=r,!0}),i&&n.remove(i)}removeFeatures(e){let n=[];for(let i=0,r=e.length;i<r;++i){let o=e[i],s=this.removeFeatureInternal(o);s&&n.push(s)}n.length>0&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){let n=se(e);if(!(n in this.uidIndex_))return;n in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[n]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.featureChangeKeys_[n]?.forEach(xe),delete this.featureChangeKeys_[n];let r=e.getId();if(r!==void 0){let o=r.toString(),s=this.idIndex_[o];s===e?delete this.idIndex_[o]:Array.isArray(s)&&(s.splice(s.indexOf(e),1),s.length===1&&(this.idIndex_[o]=s[0]))}return delete this.uidIndex_[n],this.hasListener(Rn.REMOVEFEATURE)&&this.dispatchEvent(new tr(Rn.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let n=!1;for(let i in this.idIndex_){let r=this.idIndex_[i];if(e instanceof gs&&Array.isArray(r)&&r.includes(e))r.splice(r.indexOf(e),1);else if(this.idIndex_[i]===e){delete this.idIndex_[i],n=!0;break}}return n}setLoader(e){this.loader_=e}setUrl(e){Z(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(jw(e,this.format_))}},AF=Bw;function RF(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");let e=t.inversePixelTransform[0],n=t.inversePixelTransform[1],i=Math.sqrt(e*e+n*n),r=t.frameState,o=xN(t.inversePixelTransform.slice(),r.coordinateToPixelTransform),s=Zd(r.viewState.resolution,i),a,l=Wr();return l&&(a=$r(l,r.viewState.projection)),new Am(t.context,i,r.extent,o,r.viewState.rotation,s,a)}var Uw=class extends Ko{constructor(e,n,i){super(),i=i||{},this.tileCoord=e,this.state=n,this.interimTile=null,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(V.CHANGE)}release(){this.state===U.ERROR&&this.setState(U.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==U.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let n=this;do{if(e.getState()==U.LOADED){e.interimTile=null;break}e.getState()==U.LOADING?n=e:e.getState()==U.IDLE?n.interimTile=e.interimTile:n=e,e=n.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==U.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){ue()}getAlpha(e,n){if(!this.transition_)return 1;let i=this.transitionStarts_[e];if(!i)i=n,this.transitionStarts_[e]=i;else if(i===-1)return 1;let r=n-i+1e3/60;return r>=this.transition_?1:Nb(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}},Om=Uw;var yZ=10,OF=.25,zw=class{constructor(e,n,i,r,o,s){this.sourceProj_=e,this.targetProj_=n;let a={},l=ua(this.targetProj_,this.sourceProj_);this.transformInv_=function(_){let x=_[0]+"/"+_[1];return a[x]||(a[x]=l(_)),a[x]},this.maxSourceExtent_=r,this.errorThresholdSquared_=o*o,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&ce(r)>=ce(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?ce(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?ce(this.targetProj_.getExtent()):null;let c=Xn(i),u=rc(i),d=ic(i),h=nc(i),f=this.transformInv_(c),p=this.transformInv_(u),m=this.transformInv_(d),g=this.transformInv_(h),y=yZ+(s?Math.max(0,Math.ceil(Math.log2(xd(i)/(s*s*256*256)))):0);if(this.addQuad_(c,u,d,h,f,p,m,g,y),this.wrapsXInSource_){let _=1/0;this.triangles_.forEach(function(x,b,v){_=Math.min(_,x.source[0][0],x.source[1][0],x.source[2][0])}),this.triangles_.forEach(x=>{if(Math.max(x.source[0][0],x.source[1][0],x.source[2][0])-_>this.sourceWorldWidth_/2){let b=[[x.source[0][0],x.source[0][1]],[x.source[1][0],x.source[1][1]],[x.source[2][0],x.source[2][1]]];b[0][0]-_>this.sourceWorldWidth_/2&&(b[0][0]-=this.sourceWorldWidth_),b[1][0]-_>this.sourceWorldWidth_/2&&(b[1][0]-=this.sourceWorldWidth_),b[2][0]-_>this.sourceWorldWidth_/2&&(b[2][0]-=this.sourceWorldWidth_);let v=Math.min(b[0][0],b[1][0],b[2][0]);Math.max(b[0][0],b[1][0],b[2][0])-v<this.sourceWorldWidth_/2&&(x.source=b)}})}a={}}addTriangle_(e,n,i,r,o,s){this.triangles_.push({source:[r,o,s],target:[e,n,i]})}addQuad_(e,n,i,r,o,s,a,l,c){let u=bb([o,s,a,l]),d=this.sourceWorldWidth_?ce(u)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&d>.5&&d<1,p=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let g=bb([e,n,i,r]);p=ce(g)/this.targetWorldWidth_>OF||p}!f&&this.sourceProj_.isGlobal()&&d&&(p=d>OF||p)}if(!p&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Ke(u,this.maxSourceExtent_))return;let m=0;if(!p&&(!isFinite(o[0])||!isFinite(o[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)p=!0;else if(m=(!isFinite(o[0])||!isFinite(o[1])?8:0)+(!isFinite(s[0])||!isFinite(s[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),m!=1&&m!=2&&m!=4&&m!=8)return}if(c>0){if(!p){let g=[(e[0]+i[0])/2,(e[1]+i[1])/2],y=this.transformInv_(g),_;f?_=(jr(o[0],h)+jr(a[0],h))/2-jr(y[0],h):_=(o[0]+a[0])/2-y[0];let x=(o[1]+a[1])/2-y[1];p=_*_+x*x>this.errorThresholdSquared_}if(p){if(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])){let g=[(n[0]+i[0])/2,(n[1]+i[1])/2],y=this.transformInv_(g),_=[(r[0]+e[0])/2,(r[1]+e[1])/2],x=this.transformInv_(_);this.addQuad_(e,n,g,_,o,s,y,x,c-1),this.addQuad_(_,g,i,r,x,y,a,l,c-1)}else{let g=[(e[0]+n[0])/2,(e[1]+n[1])/2],y=this.transformInv_(g),_=[(i[0]+r[0])/2,(i[1]+r[1])/2],x=this.transformInv_(_);this.addQuad_(e,g,_,r,o,y,x,l,c-1),this.addQuad_(g,n,i,_,y,s,a,x,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}m&11||this.addTriangle_(e,i,r,o,a,l),m&14||this.addTriangle_(e,i,n,o,a,s),m&&(m&13||this.addTriangle_(n,r,e,s,l,o),m&7||this.addTriangle_(n,r,i,s,l,a))}calculateSourceExtent(){let e=at();return this.triangles_.forEach(function(n,i,r){let o=n.source;la(e,o[0]),la(e,o[1]),la(e,o[2])}),e}getTriangles(){return this.triangles_}},PF=zw;var Hw,_a=[];function NF(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function $w(t,e){return Math.abs(t[e*4]-210)>2||Math.abs(t[e*4+3]-.75*255)>2}function _Z(){if(Hw===void 0){let t=Le(6,6,_a);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",NF(t,4,5,4,0),NF(t,4,5,0,5);let e=t.getImageData(0,0,3,3).data;Hw=$w(e,0)||$w(e,4)||$w(e,8),pa(t),_a.push(t.canvas)}return Hw}function kF(t,e,n,i){let r=ns(n,e,t),o=Mb(e,i,n),s=e.getMetersPerUnit();s!==void 0&&(o*=s);let a=t.getMetersPerUnit();a!==void 0&&(o/=a);let l=t.getExtent();if(!l||pi(l,r)){let c=Mb(t,o,r)/o;isFinite(c)&&c>0&&(o/=c)}return o}function FF(t,e,n,i){let r=Yn(n),o=kF(t,e,r,i);return(!isFinite(o)||o<=0)&&zg(n,function(s){return o=kF(t,e,s,i),isFinite(o)&&o>0}),o}function LF(t,e,n,i,r,o,s,a,l,c,u,d,h,f){let p=Le(Math.round(n*t),Math.round(n*e),_a);if(d||(p.imageSmoothingEnabled=!1),l.length===0)return p.canvas;p.scale(n,n);function m(v){return Math.round(v*n)/n}p.globalCompositeOperation="lighter";let g=at();l.forEach(function(v,C,E){QP(g,v.extent)});let y,_=n/i,x=(d?1:1+Math.pow(2,-24))/_;if(!h||l.length!==1||c!==0){if(y=Le(Math.round(ce(g)*_),Math.round(Ye(g)*_),_a),d||(y.imageSmoothingEnabled=!1),r&&f){let v=(r[0]-g[0])*_,C=-(r[3]-g[3])*_,E=ce(r)*_,w=Ye(r)*_;y.rect(v,C,E,w),y.clip()}l.forEach(function(v,C,E){if(v.image.width>0&&v.image.height>0){if(v.clipExtent){y.save();let T=(v.clipExtent[0]-g[0])*_,F=-(v.clipExtent[3]-g[3])*_,q=ce(v.clipExtent)*_,O=Ye(v.clipExtent)*_;y.rect(d?T:Math.round(T),d?F:Math.round(F),d?q:Math.round(T+q)-Math.round(T),d?O:Math.round(F+O)-Math.round(F)),y.clip()}let w=(v.extent[0]-g[0])*_,D=-(v.extent[3]-g[3])*_,A=ce(v.extent)*_,M=Ye(v.extent)*_;y.drawImage(v.image,c,c,v.image.width-2*c,v.image.height-2*c,d?w:Math.round(w),d?D:Math.round(D),d?A:Math.round(w+A)-Math.round(w),d?M:Math.round(D+M)-Math.round(D)),v.clipExtent&&y.restore()}})}let b=Xn(s);return a.getTriangles().forEach(function(v,C,E){let w=v.source,D=v.target,A=w[0][0],M=w[0][1],T=w[1][0],F=w[1][1],q=w[2][0],O=w[2][1],R=m((D[0][0]-b[0])/o),k=m(-(D[0][1]-b[1])/o),B=m((D[1][0]-b[0])/o),X=m(-(D[1][1]-b[1])/o),z=m((D[2][0]-b[0])/o),he=m(-(D[2][1]-b[1])/o),re=A,we=M;A=0,M=0,T-=re,F-=we,q-=re,O-=we;let P=[[T,F,0,0,B-R],[q,O,0,0,z-R],[0,0,T,F,X-k],[0,0,q,O,he-k]],rt=WP(P);if(!rt)return;if(p.save(),p.beginPath(),_Z()||!d){p.moveTo(B,X);let lt=4,Kn=R-B,ys=k-X;for(let Gt=0;Gt<lt;Gt++)p.lineTo(B+m((Gt+1)*Kn/lt),X+m(Gt*ys/(lt-1))),Gt!=lt-1&&p.lineTo(B+m((Gt+1)*Kn/lt),X+m((Gt+1)*ys/(lt-1)));p.lineTo(z,he)}else p.moveTo(B,X),p.lineTo(R,k),p.lineTo(z,he);p.clip(),p.transform(rt[0],rt[2],rt[1],rt[3],R,k),p.translate(g[0]-re,g[3]-we);let Ge;if(y)Ge=y.canvas,p.scale(x,-x);else{let lt=l[0],Kn=lt.extent;Ge=lt.image,p.scale(ce(Kn)/Ge.width,-Ye(Kn)/Ge.height)}p.drawImage(Ge,0,0),p.restore()}),y&&(pa(y),_a.push(y.canvas)),u&&(p.save(),p.globalCompositeOperation="source-over",p.strokeStyle="black",p.lineWidth=1,a.getTriangles().forEach(function(v,C,E){let w=v.target,D=(w[0][0]-b[0])/o,A=-(w[0][1]-b[1])/o,M=(w[1][0]-b[0])/o,T=-(w[1][1]-b[1])/o,F=(w[2][0]-b[0])/o,q=-(w[2][1]-b[1])/o;p.beginPath(),p.moveTo(M,T),p.lineTo(D,A),p.lineTo(F,q),p.closePath(),p.stroke()}),p.restore()),p.canvas}var Ww=class extends Om{constructor(e,n,i,r,o,s,a,l,c,u,d,h){super(o,U.IDLE,h),this.renderEdges_=d!==void 0?d:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=n,this.targetTileGrid_=r,this.wrappedTileCoord_=s||o,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;let f=r.getTileCoordExtent(this.wrappedTileCoord_),p=this.targetTileGrid_.getExtent(),m=this.sourceTileGrid_.getExtent(),g=p?Jo(f,p):f;if(xd(g)===0){this.state=U.EMPTY;return}let y=e.getExtent();y&&(m?m=Jo(m,y):m=y);let _=r.getResolution(this.wrappedTileCoord_[0]),x=FF(e,i,g,_);if(!isFinite(x)||x<=0){this.state=U.EMPTY;return}let b=u!==void 0?u:.5;if(this.triangulation_=new PF(e,i,g,m,x*b,_),this.triangulation_.getTriangles().length===0){this.state=U.EMPTY;return}this.sourceZ_=n.getZForResolution(x);let v=this.triangulation_.calculateSourceExtent();if(m&&(e.canWrapX()?(v[1]=Oe(v[1],m[1],m[3]),v[3]=Oe(v[3],m[1],m[3])):v=Jo(v,m)),!xd(v))this.state=U.EMPTY;else{let C=0,E=0;e.canWrapX()&&(C=ce(y),E=Math.floor((v[0]-y[0])/C)),$g(v.slice(),e,!0).forEach(D=>{let A=n.getTileRangeForExtentAndZ(D,this.sourceZ_);for(let M=A.minX;M<=A.maxX;M++)for(let T=A.minY;T<=A.maxY;T++){let F=c(this.sourceZ_,M,T,a);if(F){let q=E*C;this.sourceTiles_.push({tile:F,offset:q})}}++E}),this.sourceTiles_.length===0&&(this.state=U.EMPTY)}}getImage(){return this.canvas_}reproject_(){let e=[];if(this.sourceTiles_.forEach(n=>{let i=n.tile;if(i&&i.getState()==U.LOADED){let r=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);r[0]+=n.offset,r[2]+=n.offset;let o=this.clipExtent_?.slice();o&&(o[0]+=n.offset,o[2]+=n.offset),e.push({extent:r,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=U.ERROR;else{let n=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(n),r=typeof i=="number"?i:i[0],o=typeof i=="number"?i:i[1],s=this.targetTileGrid_.getResolution(n),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=LF(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),s,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=U.LOADED}this.changed()}load(){if(this.state==U.IDLE){this.state=U.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:n})=>{let i=n.getState();if(i==U.IDLE||i==U.LOADING){e++;let r=oe(n,V.CHANGE,function(o){let s=n.getState();(s==U.LOADED||s==U.ERROR||s==U.EMPTY)&&(xe(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:n},i,r){n.getState()==U.IDLE&&n.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(xe),this.sourcesListenerKeys_=null}release(){this.canvas_&&(pa(this.canvas_.getContext("2d")),_a.push(this.canvas_),this.canvas_=null),super.release()}},Qd=Ww;var Gw=class extends Om{constructor(e,n,i,r,o,s){super(e,n,s),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(e){this.image_=e,this.state=U.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=U.ERROR,this.unlistenImage_(),this.image_=vZ(),this.changed()}handleImageLoad_(){let e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=U.LOADED:this.state=U.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==U.ERROR&&(this.state=U.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==U.IDLE&&(this.state=U.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=ik(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}};function vZ(){let t=Le(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var Pm=Gw;var qw=class{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let n=this.oldest_;for(;n;)e(n.value_,n.key_,this),n=n.newer}get(e,n){let i=this.entries_[e];return Z(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(e){let n=this.entries_[e];return Z(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_?(this.newest_=n.older,this.newest_&&(this.newest_.newer=null)):n===this.oldest_?(this.oldest_=n.newer,this.oldest_&&(this.oldest_.older=null)):(n.newer.older=n.older,n.older.newer=n.newer),delete this.entries_[e],--this.count_,n.value_}getCount(){return this.count_}getKeys(){let e=new Array(this.count_),n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.key_;return e}getValues(){let e=new Array(this.count_),n=0,i;for(i=this.newest_;i;i=i.older)e[n++]=i.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){return this.entries_[e]?.value_}pop(){let e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,n){this.get(e),this.entries_[e].value_=n}set(e,n){Z(!(e in this.entries_),"Tried to set a value for a key that is used already");let i={key_:e,newer:null,older:this.newest_,value_:n};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[e]=i,++this.count_}setSize(e){this.highWaterMark=e}},VF=qw;var Nm=class{constructor(e,n,i,r){this.minX=e,this.maxX=n,this.minY=i,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,n){return this.minX<=e&&e<=this.maxX&&this.minY<=n&&n<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}};function va(t,e,n,i,r){return r!==void 0?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new Nm(t,e,n,i)}var km=Nm;function Yw(t,e,n,i){return i!==void 0?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function xa(t,e,n){return t+"/"+e+"/"+n}function Fm(t){return xa(t[0],t[1],t[2])}function jF(t){return t.split("/").map(Number)}function BF(t){return(t[1]<<t[0])+t[2]}function UF(t,e){let n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;let o=e.getFullTileRange(n);return o?o.containsXY(i,r):!0}var Jd={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var Xw=class extends ha{constructor(e){e=e||{};let n=Object.assign({},e);delete n.preload,delete n.useInterimTilesOnError,super(n),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(Jd.PRELOAD)}setPreload(e){this.set(Jd.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(Jd.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(Jd.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}},zF=Xw;var Zw=class extends Tm{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=at(),this.tmpTileRange_=new km(0,0,0,0)}isDrawableTile(e){let n=this.getLayer(),i=e.getState(),r=n.getUseInterimTilesOnError();return i==U.LOADED||i==U.EMPTY||i==U.ERROR&&!r}getTile(e,n,i,r){let o=r.pixelRatio,s=r.viewState.projection,a=this.getLayer(),c=a.getSource().getTile(e,n,i,o,s);return c.getState()==U.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){let n=this.frameState;if(!n)return null;let i=this.getLayer(),r=it(n.pixelToCoordinateTransform,e.slice()),o=i.getExtent();if(o&&!pi(o,r))return null;let s=n.pixelRatio,a=n.viewState.projection,l=n.viewState,c=i.getRenderSource(),u=c.getTileGridForProjection(l.projection),d=c.getTilePixelRatio(n.pixelRatio);for(let h=u.getZForResolution(l.resolution);h>=u.getMinZoom();--h){let f=u.getTileCoordForCoordAndZ(r,h),p=c.getTile(h,f[1],f[2],s,a);if(!(p instanceof Pm||p instanceof Qd)||p instanceof Qd&&p.getState()===U.EMPTY)return null;if(p.getState()!==U.LOADED)continue;let m=u.getOrigin(h),g=pt(u.getTileSize(h)),y=u.getResolution(h),_=Math.floor(d*((r[0]-m[0])/y-f[1]*g[0])),x=Math.floor(d*((m[1]-r[1])/y-f[2]*g[1])),b=Math.round(d*c.getGutterForProjection(l.projection));return this.getImageData(p.getImage(),_+b,x+b)}return null}loadedTileCallback(e,n,i){return this.isDrawableTile(i)?super.loadedTileCallback(e,n,i):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,n){let i=e.layerStatesArray[e.layerIndex],r=e.viewState,o=r.projection,s=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,u=this.getLayer(),d=u.getSource(),h=d.getRevision(),f=d.getTileGridForProjection(o),p=f.getZForResolution(s,d.zDirection),m=f.getResolution(p),g=e.extent,y=e.viewState.resolution,_=d.getTilePixelRatio(c);this.prepareContainer(e,n);let x=this.context.canvas.width,b=this.context.canvas.height,v=i.extent&&yi(i.extent,o);v&&(g=Jo(g,yi(i.extent,o)));let C=m*x/2/_,E=m*b/2/_,w=[a[0]-C,a[1]-E,a[0]+C,a[1]+E],D=f.getTileRangeForExtentAndZ(g,p),A={};A[p]={};let M=this.createLoadedTileFinder(d,o,A),T=this.tmpExtent,F=this.tmpTileRange_;this.newTiles_=!1;let q=l?Hg(r.center,y,l,e.size):void 0;for(let he=D.minX;he<=D.maxX;++he)for(let re=D.minY;re<=D.maxY;++re){if(l&&!f.tileCoordIntersectsViewport([p,he,re],q))continue;let we=this.getTile(p,he,re,e);if(this.isDrawableTile(we)){let Ge=se(this);if(we.getState()==U.LOADED){A[p][we.tileCoord.toString()]=we;let lt=we.inTransition(Ge);lt&&i.opacity!==1&&(we.endTransition(Ge),lt=!1),!this.newTiles_&&(lt||!this.renderedTiles.includes(we))&&(this.newTiles_=!0)}if(we.getAlpha(Ge,e.time)===1)continue}let P=f.getTileCoordChildTileRange(we.tileCoord,F,T),rt=!1;P&&(rt=M(p+1,P)),rt||f.forEachTileCoordParentTileRange(we.tileCoord,M,F,T)}let O=m/s*c/_,R=this.getRenderContext(e);Lt(this.tempTransform,x/2,b/2,O,O,0,-x/2,-b/2),v&&this.clipUnrotated(R,e,v),d.getInterpolate()||(R.imageSmoothingEnabled=!1),this.preRender(R,e),this.renderedTiles.length=0;let k=Object.keys(A).map(Number);k.sort(cn);let B,X,z;i.opacity===1&&(!this.containerReused||d.getOpaque(e.viewState.projection))?k=k.reverse():(B=[],X=[]);for(let he=k.length-1;he>=0;--he){let re=k[he],we=d.getTilePixelSize(re,c,o),rt=f.getResolution(re)/m,Ge=we[0]*rt*O,lt=we[1]*rt*O,Kn=f.getTileCoordForCoordAndZ(Xn(w),re),ys=f.getTileCoordExtent(Kn),Gt=it(this.tempTransform,[_*(ys[0]-w[0])/m,_*(w[3]-ys[3])/m]),eh=_*d.getGutterForProjection(o),Cc=A[re];for(let zm in Cc){let io=Cc[zm],wc=io.tileCoord,ro=Kn[1]-wc[1],Ec=Math.round(Gt[0]-(ro-1)*Ge),th=Kn[2]-wc[2],Hm=Math.round(Gt[1]-(th-1)*lt),Qn=Math.round(Gt[0]-ro*Ge),On=Math.round(Gt[1]-th*lt),nr=Ec-Qn,_s=Hm-On,vs=p===re,oo=vs&&io.getAlpha(se(this),e.time)!==1,xs=!1;if(!oo)if(B){z=[Qn,On,Qn+nr,On,Qn+nr,On+_s,Qn,On+_s];for(let so=0,ba=B.length;so<ba;++so)if(p!==re&&re<X[so]){let St=B[so];Ke([Qn,On,Qn+nr,On+_s],[St[0],St[3],St[4],St[7]])&&(xs||(R.save(),xs=!0),R.beginPath(),R.moveTo(z[0],z[1]),R.lineTo(z[2],z[3]),R.lineTo(z[4],z[5]),R.lineTo(z[6],z[7]),R.moveTo(St[6],St[7]),R.lineTo(St[4],St[5]),R.lineTo(St[2],St[3]),R.lineTo(St[0],St[1]),R.clip())}B.push(z),X.push(re)}else R.clearRect(Qn,On,nr,_s);this.drawTileImage(io,e,Qn,On,nr,_s,eh,vs),B&&!oo?(xs&&R.restore(),this.renderedTiles.unshift(io)):this.renderedTiles.push(io),this.updateUsedTiles(e.usedTiles,d,io)}}return this.renderedRevision=h,this.renderedResolution=m,this.extentChanged=!this.renderedExtent_||!Hr(this.renderedExtent_,w),this.renderedExtent_=w,this.renderedPixelRatio=c,this.renderedProjection=o,this.manageTilePyramid(e,d,f,c,o,g,p,u.getPreload()),this.scheduleExpireCache(e,d),this.postRender(this.context,e),i.extent&&R.restore(),R.imageSmoothingEnabled=!0,this.container}drawTileImage(e,n,i,r,o,s,a,l){let c=this.getTileImage(e);if(!c)return;let u=this.getRenderContext(n),d=se(this),h=n.layerStatesArray[n.layerIndex],f=h.opacity*(l?e.getAlpha(d,n.time):1),p=f!==u.globalAlpha;p&&(u.save(),u.globalAlpha=f),u.drawImage(c,a,a,c.width-2*a,c.height-2*a,i,r,o,s),p&&u.restore(),f!==h.opacity?n.animate=!0:l&&e.endTransition(d)}getImage(){let e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,n){if(n.canExpireCache()){let i=(function(r,o,s){let a=se(r);a in s.usedTiles&&r.expireCache(s.viewState.projection,s.usedTiles[a])}).bind(null,n);e.postRenderFunctions.push(i)}}updateUsedTiles(e,n,i){let r=se(n);r in e||(e[r]={}),e[r][i.getKey()]=!0}manageTilePyramid(e,n,i,r,o,s,a,l,c){let u=se(n);u in e.wantedTiles||(e.wantedTiles[u]={});let d=e.wantedTiles[u],h=e.tileQueue,f=i.getMinZoom(),p=e.viewState.rotation,m=p?Hg(e.viewState.center,e.viewState.resolution,p,e.size):void 0,g=0,y,_,x,b,v,C;for(C=f;C<=a;++C)for(_=i.getTileRangeForExtentAndZ(s,C,_),x=i.getResolution(C),b=_.minX;b<=_.maxX;++b)for(v=_.minY;v<=_.maxY;++v)p&&!i.tileCoordIntersectsViewport([C,b,v],m)||(a-C<=l?(++g,y=n.getTile(C,b,v,r,o),y.getState()==U.IDLE&&(d[y.getKey()]=!0,h.isKeyQueued(y.getKey())||h.enqueue([y,u,i.getTileCoordCenter(y.tileCoord),x])),c!==void 0&&c(y)):n.useTile(C,b,v,o));n.updateCacheSize(g,o)}},HF=Zw;var Kw=class extends zF{constructor(e){super(e)}createRenderer(){return new HF(this)}},Qw=Kw;var Jw=class extends VF{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;let e=this.peekFirstKey(),i=jF(e)[0];this.forEach(r=>{r.tileCoord[0]!==i&&(this.remove(Fm(r.tileCoord)),r.release())})}},Lm=Jw;var Vm={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};var bc=[0,0,0],ms=5,eE=class{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,Z(UP(this.resolutions_,(r,o)=>o-r,!0),"`resolutions` must be sorted in descending order");let n;if(!e.origins){for(let r=0,o=this.resolutions_.length-1;r<o;++r)if(!n)n=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==n){n=void 0;break}}this.zoomFactor_=n,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,Z(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let i=e.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Xn(i)),Z(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,Z(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:256,Z(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,o)=>{let s=new km(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(i){let a=this.getTileRangeForExtentAndZ(i,o);s.minX=Math.max(a.minX,s.minX),s.maxX=Math.min(a.maxX,s.maxX),s.minY=Math.max(a.minY,s.minY),s.maxY=Math.min(a.maxY,s.maxY)}return s}):i&&this.calculateTileRanges_(i)}forEachTileCoord(e,n,i){let r=this.getTileRangeForExtentAndZ(e,n);for(let o=r.minX,s=r.maxX;o<=s;++o)for(let a=r.minY,l=r.maxY;a<=l;++a)i([n,o,a])}forEachTileCoordParentTileRange(e,n,i,r){let o,s,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(s=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(s!==void 0&&a!==void 0?(s=Math.floor(s/2),a=Math.floor(a/2),o=va(s,s,a,a,i)):o=this.getTileRangeForExtentAndZ(l,c,i),n(c,o))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,n,i){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){let o=e[1]*2,s=e[2]*2;return va(o,o+1,s,s+1,n)}let r=this.getTileCoordExtent(e,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,n)}return null}getTileRangeForTileCoordAndZ(e,n,i){if(n>this.maxZoom||n<this.minZoom)return null;let r=e[0],o=e[1],s=e[2];if(n===r)return va(o,s,o,s,i);if(this.zoomFactor_){let l=Math.pow(this.zoomFactor_,n-r),c=Math.floor(o*l),u=Math.floor(s*l);if(n<r)return va(c,c,u,u,i);let d=Math.floor(l*(o+1))-1,h=Math.floor(l*(s+1))-1;return va(c,d,u,h,i)}let a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,n,i)}getTileRangeForExtentAndZ(e,n,i){this.getTileCoordForXYAndZ_(e[0],e[3],n,!1,bc);let r=bc[1],o=bc[2];this.getTileCoordForXYAndZ_(e[2],e[1],n,!0,bc);let s=bc[1],a=bc[2];return va(r,s,o,a,i)}getTileCoordCenter(e){let n=this.getOrigin(e[0]),i=this.getResolution(e[0]),r=pt(this.getTileSize(e[0]),this.tmpSize_);return[n[0]+(e[1]+.5)*r[0]*i,n[1]-(e[2]+.5)*r[1]*i]}getTileCoordExtent(e,n){let i=this.getOrigin(e[0]),r=this.getResolution(e[0]),o=pt(this.getTileSize(e[0]),this.tmpSize_),s=i[0]+e[1]*o[0]*r,a=i[1]-(e[2]+1)*o[1]*r,l=s+o[0]*r,c=a+o[1]*r;return Tn(s,a,l,c,n)}getTileCoordForCoordAndResolution(e,n,i){return this.getTileCoordForXYAndResolution_(e[0],e[1],n,!1,i)}getTileCoordForXYAndResolution_(e,n,i,r,o){let s=this.getZForResolution(i),a=i/this.getResolution(s),l=this.getOrigin(s),c=pt(this.getTileSize(s),this.tmpSize_),u=a*(e-l[0])/i/c[0],d=a*(l[1]-n)/i/c[1];return r?(u=yd(u,ms)-1,d=yd(d,ms)-1):(u=md(u,ms),d=md(d,ms)),Yw(s,u,d,o)}getTileCoordForXYAndZ_(e,n,i,r,o){let s=this.getOrigin(i),a=this.getResolution(i),l=pt(this.getTileSize(i),this.tmpSize_),c=(e-s[0])/a/l[0],u=(s[1]-n)/a/l[1];return r?(c=yd(c,ms)-1,u=yd(u,ms)-1):(c=md(c,ms),u=md(u,ms)),Yw(i,c,u,o)}getTileCoordForCoordAndZ(e,n,i){return this.getTileCoordForXYAndZ_(e[0],e[1],n,!1,i)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,n){let i=Gl(this.resolutions_,e,n||0);return Oe(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,n){return zb(n,0,n.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){let n=this.resolutions_.length,i=new Array(n);for(let r=this.minZoom;r<n;++r)i[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=i}},tE=eE;function jm(t){let e=t.getDefaultTileGrid();return e||(e=bZ(t),t.setDefaultTileGrid(e)),e}function $F(t,e,n){let i=e[0],r=t.getTileCoordCenter(e),o=Bm(n);if(!pi(o,r)){let s=ce(o),a=Math.ceil((o[0]-r[0])/s);return r[0]+=s*a,t.getTileCoordForCoordAndZ(r,i)}return e}function xZ(t,e,n,i){i=i!==void 0?i:"top-left";let r=GF(t,e,n);return new tE({extent:t,origin:JP(t,i),resolutions:r,tileSize:n})}function WF(t){let e=t||{},n=e.extent||It("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:GF(n,e.maxZoom,e.tileSize,e.maxResolution)};return new tE(i)}function GF(t,e,n,i){e=e!==void 0?e:42,n=pt(n!==void 0?n:256);let r=Ye(t),o=ce(t);i=i>0?i:Math.max(o/n[0],r/n[1]);let s=e+1,a=new Array(s);for(let l=0;l<s;++l)a[l]=i/Math.pow(2,l);return a}function bZ(t,e,n,i){let r=Bm(t);return xZ(r,e,n,i)}function Bm(t){t=It(t);let e=t.getExtent();if(!e){let n=180*Br.degrees/t.getMetersPerUnit();e=Tn(-n,-n,n,n)}return e}var nE=class extends Rm{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;let n=[256,256];this.tileGrid&&pt(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),n),this.tileCache=new Lm(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,n){let i=this.getTileCacheForProjection(e);i&&i.expireCache(n)}forEachLoadedTile(e,n,i,r){let o=this.getTileCacheForProjection(e);if(!o)return!1;let s=!0,a,l,c;for(let u=i.minX;u<=i.maxX;++u)for(let d=i.minY;d<=i.maxY;++d)l=xa(n,u,d),c=!1,o.containsKey(l)&&(a=o.get(l),c=a.getState()===U.LOADED,c&&(c=r(a)!==!1)),c||(s=!1);return s}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){let n=e?this.getTileGridForProjection(e):this.tileGrid;return n?n.getResolutions():null}getTile(e,n,i,r,o){return ue()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:jm(e)}getTileCacheForProjection(e){let n=this.getProjection();return Z(n===null||ts(n,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,n,i){let r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(n),s=pt(r.getTileSize(e),this.tmpSize);return o==1?s:$N(s,o,this.tmpSize)}getTileCoordForTileUrlFunction(e,n){n=n!==void 0?n:this.getProjection();let i=this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(e=$F(i,e,n)),UF(e,i)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,n){let i=this.getTileCacheForProjection(n);e>i.highWaterMark&&(i.highWaterMark=e)}useTile(e,n,i,r){}},Um=class extends Et{constructor(e,n){super(e),this.tile=n}},qF=nE;function CZ(t,e){let n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,o=/\{-y\}/g;return function(s,a,l){if(s)return t.replace(n,s[0].toString()).replace(i,s[1].toString()).replace(r,s[2].toString()).replace(o,function(){let c=s[0],u=e.getFullTileRange(c);if(!u)throw new Error("The {-y} placeholder requires a tile grid with extent");return(u.getHeight()-s[2]-1).toString()})}}function YF(t,e){let n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=CZ(t[r],e);return wZ(i)}function wZ(t){return t.length===1?t[0]:function(e,n,i){if(!e)return;let r=BF(e),o=jr(r,t.length);return t[o](e,n,i)}}function XF(t){let e=[],n=/\{([a-z])-([a-z])\}/.exec(t);if(n){let i=n[1].charCodeAt(0),r=n[2].charCodeAt(0),o;for(o=i;o<=r;++o)e.push(t.replace(n[0],String.fromCharCode(o)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){let i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}var iE=class t extends qF{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===t.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){let n=e.target,i=se(n),r=n.getState(),o;r==U.LOADING?(this.tileLoadingKeys_[i]=!0,o=Vm.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],o=r==U.ERROR?Vm.TILELOADERROR:r==U.LOADED?Vm.TILELOADEND:void 0),o!=null&&this.dispatchEvent(new Um(o,n))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,n){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof n<"u"?this.setKey(n):this.changed()}setUrl(e){let n=XF(e);this.urls=n,this.setUrls(n)}setUrls(e){this.urls=e;let n=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(YF(e,this.tileGrid),n):this.setKey(n)}tileUrlFunction(e,n,i){}useTile(e,n,i){let r=xa(e,n,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}},ZF=iE;var rE=class extends ZF{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:EZ,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:Pm,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,n){let i=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==i?n:{});for(let r in this.tileCacheForProjection){let o=this.tileCacheForProjection[r];o.expireCache(o==i?n:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!ts(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!ts(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){let n=this.getProjection();if(this.tileGrid&&(!n||ts(n,e)))return this.tileGrid;let i=se(e);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=jm(e)),this.tileGridForProjection[i]}getTileCacheForProjection(e){let n=this.getProjection();if(!n||ts(n,e))return this.tileCache;let i=se(e);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new Lm(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(e,n,i,r,o,s){let a=[e,n,i],l=this.getTileCoordForTileUrlFunction(a,o),c=l?this.tileUrlFunction(l,r,o):void 0,u=new this.tileClass(a,c!==void 0?U.IDLE:U.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=s,u.addEventListener(V.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,n,i,r,o){let s=this.getProjection();if(!s||!o||ts(s,o))return this.getTileInternal(e,n,i,r,s||o);let a=this.getTileCacheForProjection(o),l=[e,n,i],c,u=Fm(l);a.containsKey(u)&&(c=a.get(u));let d=this.getKey();if(c&&c.key==d)return c;let h=this.getTileGridForProjection(s),f=this.getTileGridForProjection(o),p=this.getTileCoordForTileUrlFunction(l,o),m=new Qd(s,h,o,f,l,p,this.getTilePixelRatio(r),this.getGutter(),(g,y,_,x)=>this.getTileInternal(g,y,_,x,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return m.key=d,c?(m.interimTile=c,m.refreshInterimChain(),a.replace(u,m)):a.set(u,m),m}getTileInternal(e,n,i,r,o){let s=null,a=xa(e,n,i),l=this.getKey();if(!this.tileCache.containsKey(a))s=this.createTile_(e,n,i,r,o,l),this.tileCache.set(a,s);else if(s=this.tileCache.get(a),s.key!=l){let c=s;s=this.createTile_(e,n,i,r,o,l),c.getState()==U.IDLE?s.interimTile=c.interimTile:s.interimTile=c,s.refreshInterimChain(),this.tileCache.replace(a,s)}return s}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(let n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}}setTileGridForProjection(e,n){let i=It(e);if(i){let r=se(i);r in this.tileGridForProjection||(this.tileGridForProjection[r]=n)}}clear(){super.clear();for(let e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}};function EZ(t,e){t.getImage().src=e}var KF=rE;var oE=class extends KF{constructor(e){e=e||{};let n=e.projection!==void 0?e.projection:"EPSG:3857",i=e.tileGrid!==void 0?e.tileGrid:WF({extent:Bm(n),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:n,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}},QF=oE;function DZ(t,e){if(t&1){let n=bM();Io(0,"button",3),xr("click",function(){RI(n);let r=il();return OI(r.toggleAnimation())}),ou(1),_r()}if(t&2){let n=il();wo(),Ev(" ",n.animationData.animating?"Stop and reset":"Start animation"," ")}}var JF=(()=>{let e=class e{constructor(){this.isBrouser=Vv(I(nn)),this.activeRoute=I(Ul).activeRoute,this.animationData={animating:!1,distance:0,lastTime:0,activePointIndex:0},this.serverProj="EPSG:4326",this.olProj="EPSG:900913",this.centerFallback=[-563952395e-2,-350127452e-2],this.activeRouteEffect=au(()=>{let i=this.activeRoute();i?this.initNewRoute(i):this.map&&(this.animationData.animating&&this.toggleAnimation(),this.clearMap())})}ngOnInit(){this.isBrouser&&(this.initMap(),this.initStyles(),this.getUserLocation())}toggleAnimation(){this.animationData.animating=!this.animationData.animating,this.animationData.animating?(this.animationData.lastTime=Date.now(),this.animationData.vectorLayer.on("postrender",this.moveFeature.bind(this)),this.animationData.geoMarker.setGeometry(void 0)):this.resetAnimationData()}goToPoint(i){let r=this.animationData.routeFeature.getCoordinates()[i-1],o=this.activeRoute();o&&(this.animationData.distance=sa.getDistanceFromPointIndex(i,o.points,o.all_distance)),this.animationData.position.setCoordinates(r),this.animationData.geoMarker.setGeometry(this.animationData.position),this.animationData.geoMarker.setStyle(this.styles.geoMarker),this.map.render()}moveFeature(i){let r=this.activeRoute();if(!r)return;let o=sa.getPointIndexFromDistance(this.animationData.distance,r.points,r.all_distance),s=8*r.points[o][3];s<.1&&(s=.1);let a=i.frameState?.time||0,l=a-(this.animationData.lastTime||0);if(this.animationData.distance=(this.animationData.distance+s*l/1e6)%2,this.animationData.lastTime=a,this.animationData.distance>=1){this.toggleAnimation();return}let c=this.animationData.routeFeature.getCoordinateAt(this.animationData.distance);this.animationData.position.setCoordinates(c);let u=RF(i);u.setStyle(this.styles.geoMarker),u.drawGeometry(this.animationData.position),this.map.render()}initMap(){this.map=new iF({target:document.getElementById("map"),view:new dn({center:this.centerFallback,zoom:10,minZoom:2,maxZoom:19}),layers:[new Qw({source:new QF({url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png",tileSize:512})})]})}initNewRoute(i){this.clearMap(),this.animationData.animating&&this.toggleAnimation();let r=new hw(i.points.map(h=>h.slice(0,2))).transform("EPSG:4326","EPSG:3857"),o=new gd({type:"route",geometry:r}),s=new gd({type:"iconStart",geometry:new Id(ns([i.points[0][0],i.points[0][1]],this.serverProj,this.olProj))}),a=new gd({type:"iconEnd",geometry:new Id(ns([i.points[i.points.length-1][0],i.points[i.points.length-1][1]],this.serverProj,this.olProj))}),l=s.getGeometry()?.clone(),c=new gd({type:"geoMarker",geometry:l}),u=new EF({source:new AF({features:[o,c,s,a]}),style:h=>{if(h.get("type")==="route"){let f=[],p=h.getGeometry().getCoordinates();for(let m=0;m<p.length-1;m++)f.push(new _i({geometry:new hw(p.slice(m,m+2)),stroke:new fc({color:IZ(this.activeRoute()?.points[m][3],15),width:3})}));return f}return this.styles[h.get("type")]}});this.map.addLayer(u);let d=o.getGeometry()?.getExtent();d&&this.map.getView().fit(d,{padding:[100,100,100,100],duration:1e3}),this.animationData.vectorLayer=u,this.animationData.position=l,this.animationData.routeFeature=o.getGeometry(),this.animationData.startPosition=s,this.animationData.geoMarker=c}getUserLocation(){let i={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation.getCurrentPosition(r=>{if(this.activeRoute())return;let o=r.coords.latitude,s=r.coords.longitude,a=this.map.getView();this.map.setView(new dn({center:ns([s,o],this.serverProj,this.olProj),zoom:a.getZoom(),maxZoom:a.getMaxZoom(),minZoom:a.getMinZoom()}))},()=>{},i)}clearMap(){this.map.getAllLayers().forEach((i,r)=>{r&&this.map.removeLayer(i)})}resetAnimationData(){let i=this.animationData.vectorLayer.getListeners("postrender");i?.length&&this.animationData.vectorLayer.un("postrender",i[0]),this.animationData.distance=0,this.animationData.activePointIndex=0,this.animationData.geoMarker.setGeometry(this.animationData.startPosition.getGeometry())}initStyles(){this.styles={iconStart:new _i({image:new Qr({anchor:[.14,1],width:40,height:40,src:"checkered-flag.png"})}),iconEnd:new _i({image:new Qr({anchor:[.5,1],width:40,height:40,src:"location.png"})}),geoMarker:new _i({image:new Qr({anchor:[.5,.5],width:22,height:22,src:"boat.png"})})}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ai({type:e,selectors:[["lib-map"]],standalone:!0,features:[Pi],decls:4,vars:2,consts:[["id","map",1,"map"],[3,"pointClick","distance"],["type","button"],["type","button",3,"click"]],template:function(r,o){r&1&&(vr(0,"div",0)(1,"lib-route-select"),Io(2,"lib-chart",1),xr("pointClick",function(a){return o.goToPoint(a)}),_r(),nl(3,DZ,2,1,"button",2)),r&2&&(wo(2),yr("distance",o.animationData.distance),wo(),ru(o.activeRoute()?3:-1))},dependencies:[qs,VP,cP],styles:[".map[_ngcontent-%COMP%]{width:100vw;height:100vh;background-color:#0ff}button[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px}lib-chart[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0}button[_ngcontent-%COMP%]{background-color:red;color:#fff}"]});let t=e;return t})();function IZ(t,e){return`hsl(${120*t/e}, 100%, 50%)`}var eL=[{path:"",component:JF},{path:"**",redirectTo:""}];var tL={providers:[IT(),TM({eventCoalescing:!0}),pA(eL),pT(gT()),aP(sP())]};var nL=(()=>{let e=class e{constructor(){this.title="my-own-org"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Ai({type:e,selectors:[["app-root"]],standalone:!0,features:[Pi],decls:1,vars:0,template:function(r,o){r&1&&vr(0,"router-outlet")},dependencies:[vA,R0]});let t=e;return t})();ET(nL,tL).catch(t=>console.error(t));
